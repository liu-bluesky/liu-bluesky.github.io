import"./vue-DSB24BnW.js";import{E}from"./element-easy-form-Dkjp9jsl.js";import{u as I,a as T,g as k}from"./api-B63p8iMc.js";import{u as A}from"./vue-i18n-BPZ2p18e.js";import{d as M}from"./index-M3ohjitV.js";import{a as g}from"./element-plus-Cdmo8XhC.js";import{d as q,r,v as B,w as h,h as y,l as D,j as n,u as N,o as F,a as J,i as d,m as b}from"./@vue-CmN6Z9lx.js";(()=>{const t=new Map;return t.set("default",48),t.set("small",16),t.set("large",64),t})();const i={style:"width:300px"},z="1200px",G=q({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(t,{emit:v}){const u=v;let a=t;const{t:p}=A(),o=r(!1),_=r(!1),c=r(),V=async()=>{try{const e=await c.value.validate();a.id?I(e).then(m=>{g.success(p("表单提交.操作成功")),s(),u("update")}):T(e).then(m=>{g.success(p("表单提交.操作成功")),s(),u("update")})}catch(e){console.log("error :>> ",e)}};B({}),r({name:""});const l=r({schema:[{label:"计量表编号",prop:"meterNumber",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入编号",maxlength:30,...i},rules:[{required:!0,message:"计量表编号不能为空",trigger:"change"}]},{label:"计量表名称",prop:"meterName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入名称",maxlength:30,...i},rules:[{required:!0,message:"计量表名称不能为空",trigger:"change"}]},{label:"计量表类型",prop:"meterType",colAttrs:{span:12},componentName:"selectDict",attrs:{placeholder:"请选择类型",dictCode:"meter_type",...i},rules:[{required:!0,message:"计量表类型不能为空",trigger:"change"}]},{label:"计量值单位",prop:"unit",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入计量值单位",...i},rules:[{required:!0,message:"计量值单位不能为空",trigger:"change"}]}],model:{meterNumber:"",meterName:"",meterType:"",areaName:"",unit:""},formAttrs:{"label-width":"120px",inline:!0}}),w=()=>{k(a.id).then(e=>{l.value.model=e.data,l.value.model.meterType=M(e.data.meterType)})};h(()=>a.modelValue,e=>{o.value=e,a.id&&e?w():!a.id&&e&&(l.value.model={meterNumber:"",meterName:"",meterType:"",unit:""})},{immediate:!0});const s=()=>{u("update:modelValue",!1)};return h(()=>o.value,e=>{e||s()}),(e,m)=>{const f=y("el-button"),x=y("ComDialog");return F(),D(x,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=C=>o.value=C),title:t.id?"编辑":"新增",width:N(z)},{footer:n(()=>[J("div",null,[d(f,{size:"large",onClick:s},{default:n(()=>[b("取消")]),_:1}),d(f,{size:"large",loading:_.value,type:"primary",onClick:V},{default:n(()=>[b("保存")]),_:1},8,["loading"])])]),default:n(()=>[d(N(E),{ref_key:"comFromRef",ref:c,formJson:l.value},null,8,["formJson"])]),_:1},8,["modelValue","title","width"])}}});export{G as _,z as d};
