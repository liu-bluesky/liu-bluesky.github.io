import"./vue-Brcqt2vG.js";import{u as V,b as y}from"./vue-router-C7rU-wsU.js";import"./index-9tbjk_aw.js";import{u as v,g as x}from"./user-DA8cDTx3.js";import{a as D}from"./element-plus-DELVhQcd.js";import{d as B,A as d,r as k,b as R,i as l,o as A,c as E,j as a,k as r,a as c,q as S,n as C}from"./@vue-B5Rjg0tc.js";import"./axios-CdcsOsvR.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";import"./vue-i18n-oCxI6G6S.js";import"./@intlify-D_0T6EgR.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-I2rWV52J.js";import"./lodash-CcF5vdS9.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const q={class:"commonBoxmp"},T={class:"jcb aic w100"},j={class:"aic jcc mt20"},_e=B({__name:"authUser",setup(w){const f=V(),i=y(),o=d({openDataScope:!1,defaultProps:{children:"children",label:"label"},menuOptions:[],deptOptions:[],deptExpand:!1,deptNodeAll:!1,menuExpand:!1,menuNodeAll:!1,title:"",form:{},userVisible:!1,roleIds:[],height:0,tableData:[],columnData:[{label:"角色编号",prop:"roleId",visible:!0},{label:"角色名称",prop:"roleName",visible:!0},{label:"权限字符",prop:"roleKey",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),n=d(JSON.parse(JSON.stringify({pageNum:1,pageSize:10,userName:"",phonenumber:""}))),b=t=>{o.roleIds=t.map(e=>e.roleId)},_=async t=>{const e=n.userId,s=o.roleIds.join(",");v({userId:e,roleIds:s}).then(m=>{D.success("授权成功"),F()})},p=k(),g=()=>{o.loading=!0,x(n.userId).then(t=>{o.form=t.user,o.tableData=t.roles,o.loading=!1,C(()=>{o.tableData.forEach(e=>{e.flag&&p.value.tableRef.toggleRowSelection(e)})})})},F=()=>{f.go(-1)};return R(()=>{const t=i.params&&i.params.userId;t&&(n.userId=t,g())}),(t,e)=>{const s=l("el-input"),m=l("el-form-item"),N=l("el-form"),h=l("el-button"),I=l("TableV2");return A(),E("div",q,[a(I,{class:"flex1",data:o.tableData,ref_key:"tableV2Ref",ref:p,selection:"",onSelectionChange:b,columns:o.columnData},{tableHeader:r(()=>[c("div",T,[a(N,{ref:"queryForm",inline:!0},{default:r(()=>[a(m,{label:"用户昵称",prop:"nickName"},{default:r(()=>[a(s,{modelValue:o.form.nickName,"onUpdate:modelValue":e[0]||(e[0]=u=>o.form.nickName=u),clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),a(m,{label:"登录账号",prop:"userName"},{default:r(()=>[a(s,{modelValue:o.form.userName,"onUpdate:modelValue":e[1]||(e[1]=u=>o.form.userName=u),placeholder:"请输入手机号码",clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},512)]),c("div",j,[a(h,{type:"primary",onClick:e[2]||(e[2]=u=>_())},{default:r(()=>e[3]||(e[3]=[S("授权")])),_:1})])]),_:1},8,["data","columns"])])}}});export{_e as default};
