System.register(["./vue-legacy.Bl-PfySD.js","./element-easy-form-legacy.CgzD5D2G.js","./user-legacy.BgIeqDxZ.js","./index-legacy.DHZTvmRy.js","./config-legacy.BrU62Y0F.js","./element-plus-legacy.70wpbogp.js","./@vue-legacy.CwdyZYS1.js"],(function(e,l){"use strict";var a,s,o,r,d,p,n,u,m,i,c,g,h,b,y,v,I,w,f,N,V,_,A,E;return{setters:[null,e=>{a=e.E},e=>{s=e.b,o=e.c,r=e.d,d=e.a},e=>{p=e.d,n=e.g},e=>{u=e.b},e=>{m=e.a},e=>{i=e.d,c=e.r,g=e.i,h=e.w,b=e.j,y=e.t,v=e.l,I=e.u,w=e.o,f=e.a,N=e.k,V=e.A,_=e.c,A=e.q,E=e.F}],execute:function(){e("_",i({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(e,{emit:l}){const i=l,O=c(!1),k=c(!1),P=c(),j=async()=>{try{const e=await P.value.validate();q.id?s(e).then((e=>{m.success(t("操作成功")),S(),i("update")})):o(e).then((e=>{m.success(t("操作成功")),S(),i("update")}))}catch(e){console.log("error :>> ",e)}},x=g({deptOptions:[],postOptions:[],roleOptions:[],initPassword:""}),C=c({schema:[{label:"用户昵称",prop:"nickName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入名字"},rules:[{required:!0,message:"不能为空",trigger:"change"}]},{label:"归属部门",prop:"deptId",colAttrs:{span:12},componentName:"ElDatePicker",attrs:{placeholder:"请选择"},rules:[{required:!1,message:"不能为空",trigger:"change"}]},{label:"手机号码",prop:"phonenumber",colAttrs:{span:12},componentName:"ElInput",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{type:"number",placeholder:"请选择"}},{label:"邮箱",prop:"email",colAttrs:{span:12},componentName:"ElInput",rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],attrs:{type:"number",placeholder:"请选择"}},{label:"用户名称",prop:"userName",colAttrs:{span:12},rules:[{required:!0,message:"不能为空",trigger:"change"}],componentName:"ElInput",hidden:(e,l)=>null!=l.userId,attrs:{placeholder:"请输入"}},{label:"用户密码",prop:"password",colAttrs:{span:12},rules:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],componentName:"ElInput",hidden:(e,l)=>null!=l.userId,attrs:{maxlength:"20",placeholder:"请输入",showPassword:!0}},{label:"性别",prop:"sex",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_user_sex",placeholder:"请选择",showPassword:!0}},{label:"状态",prop:"status",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_normal_disable",placeholder:"请选择",showPassword:!0}},{label:"岗位",prop:"postIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"角色",prop:"roleIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"备注",type:"COMPONENT",formItemAttrs:{},attrs:{placeholder:"请输入",type:"textarea"},rules:[],prop:"remark",componentName:"ElInput",colAttrs:{span:24}}],model:{}});let q=e;const D=()=>{r().then((e=>{x.deptOptions=e.data}))};h((()=>q.modelValue),(e=>{O.value=e,console.log("props.id :>> ",q.id),q.id&&e?(u("sys.user.initPassword").then((e=>{x.initPassword=e.msg})),d(q.id).then((e=>{C.value.model=e.data,x.postOptions=e.posts,x.roleOptions=e.roles,C.value.password||(C.value.model.password=x.initPassword),C.value.model.areaType=n(e.data.areaType)})),D()):!q.id&&e&&(D(),C.value.model={sex:"1"})}),{immediate:!0});const S=()=>{i("update:modelValue",!1)};return h((()=>O.value),(e=>{e||S()})),(l,t)=>{const s=b("el-cascader"),o=b("el-option"),r=b("el-select"),d=b("el-button"),n=b("ComDialog");return w(),y(n,{modelValue:O.value,"onUpdate:modelValue":t[3]||(t[3]=e=>O.value=e),width:I(p),title:e.id?"编辑":"新增"},{footer:v((()=>[f("div",null,[N(d,{size:"large",onClick:S},{default:v((()=>[V("取消")])),_:1}),N(d,{size:"large",loading:k.value,type:"primary",onClick:j},{default:v((()=>[V("保存")])),_:1},8,["loading"])])])),default:v((()=>[N(I(a),{ref_key:"comFromRef",ref:P,formJson:C.value},{deptId:v((()=>[N(s,{class:"w100",options:x.deptOptions,modelValue:C.value.model.deptId,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value.model.deptId=e),props:{value:"id",emitPath:!1,checkStrictly:!0},clearable:""},null,8,["options","modelValue"])])),postIds:v((()=>[N(r,{class:"w100",modelValue:C.value.model.postIds,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value.model.postIds=e),multiple:"",placeholder:"请选择岗位"},{default:v((()=>[(w(!0),_(E,null,A(x.postOptions,(e=>(w(),y(o,{key:e.postId,label:e.postName,value:e.postId,disabled:1==e.status},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),roleIds:v((()=>[N(r,{class:"w100",modelValue:C.value.model.roleIds,"onUpdate:modelValue":t[2]||(t[2]=e=>C.value.model.roleIds=e),multiple:"",placeholder:"请选择岗位"},{default:v((()=>[(w(!0),_(E,null,A(x.roleOptions,(e=>(w(),y(o,{key:e.roleId,label:e.roleName,value:e.roleId,disabled:1==e.status},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["formJson"])])),_:1},8,["modelValue","width","title"])}}}))}}}));
