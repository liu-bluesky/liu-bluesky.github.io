import"./vue-BCJY8gBf.js";import{u as re,b as ue}from"./vue-router-Bk-12vT2.js";import{u as ie,a as Y,i as me}from"./index-DnKBT612.js";import{Q as de}from"./@element-plus-D9bzjPyL.js";import{d as Z,r as ee,B as h,s as pe,w as fe,j as r,o as a,c as D,k as t,l,L as _e,q as i,A as G,a as p,F as Q,m as A,u as E,b as ce,P as be,v as s,Q as j,y as b,x as J}from"./@vue-BwKUEgJD.js";import{u as ye,a as ve,d as Ve,g as ge,l as X}from"./menu-CI36NPAS.js";import{D as ke}from"./index-DMBomKMH.js";import{a as O,c as Ce}from"./element-plus-BIk4sW6s.js";import"./axios-DWt2DAqT.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";const we={class:"fd flexWrap"},Ie=Z({__name:"index",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(L,{emit:H}){const U=ie();U.setIcons(Object.keys(de));const S=ee(U.getIcons),f=h({icons:[],icon:""});let _=pe(!1);const o=()=>{_.value=!0},g=()=>{_.value=!1},k=H,P=L;fe(()=>P.modelValue,C=>{f.icon=C},{deep:!0,immediate:!0});const q=()=>{k("update:modelValue",""),g()},B=C=>{g(),k("update:modelValue",C)};return(C,x)=>{const T=r("el-icon"),w=r("Search"),z=r("el-input"),M=r("el-scrollbar"),u=r("el-popover");return a(),D("div",null,[t(u,{placement:"bottom",visible:E(_)},{reference:l(()=>[t(z,{modelValue:f.icon,"onUpdate:modelValue":x[0]||(x[0]=e=>f.icon=e),onClick:_e(o,["stop"]),onClear:q,onBlur:g,placeholder:"点击选择图标"},{prefix:l(()=>[f.icon&&f.icon!="#"?(a(),i(T,{key:0,class:"llt-icon-size"},{default:l(()=>[(a(),i(G(f.icon)))]),_:1})):(a(),i(T,{key:1,class:"llt-icon-size"},{default:l(()=>[t(w)]),_:1}))]),_:1},8,["modelValue"])]),default:l(()=>[t(M,{style:{width:"600px"},height:"400px"},{default:l(()=>[p("div",we,[(a(!0),D(Q,null,A(S.value,e=>(a(),i(T,{key:e,onClick:I=>B(e),class:"llt-icon-size"},{default:l(()=>[(a(),i(G(e)))]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1},8,["visible"])])}}}),xe=Y(Ie,[["__file","D:/work/public/admin-tempalte-base/src/components/IconSelect/index.vue"]]),Te={class:"commonBoxmp"},Ne={class:"jcb aic w100"},Fe={class:"aic"},he={class:"aic"},De={class:"aic"},Ue={class:"aic"},Se={class:"aic"},ze={class:"aic"},Me={class:"aic"},Pe={class:"aic"},qe={class:"dialog-footer"},Be=Z({__name:"index",setup(L){re(),ue();const{parseTime:H,addDateRange:U,handleTree:S,getDict:f}=me();let _=h({sys_normal_disable:[],sys_show_hide:[]});const o=h({menuOptions:[],title:"",form:{},userVisible:!1,rules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"菜单名称",prop:"menuName",visible:!0},{label:"图标",prop:"icon",visible:!0},{label:"排序",prop:"orderNum",visible:!0},{label:"权限标识",prop:"perms",visible:!0},{label:"组件路径",visible:!0,prop:"component"},{label:"状态",prop:"status",visible:!0,render:({row:u})=>t(ke,{values:u.status,dataType:"primary",options:_.sys_job_status},null)},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),g=h({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),k=h({pageNum:1,pageSize:10,deptId:void 0}),P=()=>{},q=async u=>{u&&(await u.validate(),o.form.menuId!=null?(console.log("state.form :>> ",o.form),o.form.parentId=o.form.parentId==null?0:o.form.parentId,ye(o.form).then(e=>{O.success("修改成功"),o.userVisible=!1,w()})):ve(o.form).then(e=>{O.success("新增成功"),o.userVisible=!1,w()}))},B=u=>{const e=u.menuId;Ce.confirm('是否确认删除用户编号为"'+e+'"的数据项？').then(function(){return Ve(e)}).then(()=>{O.success("删除成功"),w()}).catch(function(){})},C=u=>{const e=u.menuId;ge(e).then(I=>{o.title="修改菜单",o.form=I.data,o.userVisible=!0})},x=u=>{z(),o.userVisible=!0,o.title="添加菜单",o.form={},u!=null&&u.menuId?o.form.parentId=u.menuId:o.form.parentId=0},T=u=>{},w=()=>{o.loading=!0,k.pageNum=g.currentPage,k.pageSize=g.pageSize,X(U(k,o.dateRange)).then(u=>{o.tableData=S(u.data,"menuId"),o.loading=!1})},z=()=>{X().then(u=>{o.menuOptions=[];const e={menuId:0,menuName:"主类目",children:[]};e.children=S(u.data,"menuId"),o.menuOptions.push(e)})},M=ee();return ce(async()=>{w(),z(),_.sys_job_status=await f("sys_job_status"),_.sys_normal_disable=await f("sys_normal_disable"),_.sys_show_hide=await f("sys_show_hide")}),(u,e)=>{const I=r("el-button"),R=r("el-link"),le=r("el-table-column"),te=r("TableV2"),oe=r("el-cascader"),m=r("el-form-item"),d=r("el-col"),K=r("el-row"),c=r("el-radio"),N=r("el-radio-group"),F=r("el-input"),ne=r("el-input-number"),y=r("QuestionFilled"),v=r("el-icon"),V=r("el-tooltip"),ae=r("el-form"),se=r("el-dialog"),$=be("hasPermi");return a(),D("div",Te,[t(te,{selection:"",onSelectionChange:P,columns:o.columnData,dataKey:"data",data:o.tableData,tableOptions:{rowKey:"menuId",border:!0,treeProps:{children:"children",hasChildren:"hasChildren"}}},{tableHeader:l(()=>[p("div",Ne,[t(I,{type:"primary",onClick:x},{default:l(()=>e[16]||(e[16]=[s("添加菜单")])),_:1})])]),operation:l(()=>[t(le,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(n=>[j((a(),i(R,{size:"mini",type:"primary",onClick:W=>C(n.row)},{default:l(()=>e[17]||(e[17]=[s("修改")])),_:2},1032,["onClick"])),[[$,["system:menu:edit"]]]),j((a(),i(R,{size:"mini",type:"primary",class:"mx5",onClick:W=>x(n.row)},{default:l(()=>e[18]||(e[18]=[s("新增")])),_:2},1032,["onClick"])),[[$,["system:menu:add"]]]),j((a(),i(R,{size:"mini",type:"primary",onClick:W=>B(n.row)},{default:l(()=>e[19]||(e[19]=[s("删除")])),_:2},1032,["onClick"])),[[$,["system:menu:remove"]]])]),_:1})]),_:1},8,["columns","data"]),t(se,{modelValue:o.userVisible,"onUpdate:modelValue":e[15]||(e[15]=n=>o.userVisible=n),title:o.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[p("span",qe,[t(I,{onClick:e[13]||(e[13]=n=>o.userVisible=!1)},{default:l(()=>e[35]||(e[35]=[s("取消")])),_:1}),t(I,{type:"primary",onClick:e[14]||(e[14]=n=>q(M.value))},{default:l(()=>e[36]||(e[36]=[s(" 确定 ")])),_:1})])]),default:l(()=>[t(ae,{ref_key:"ruleFormRef",ref:M,model:o.form,rules:o.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[t(K,{gutter:20},{default:l(()=>[t(d,{span:24},{default:l(()=>[t(m,{label:"上级菜单",prop:"parentId"},{default:l(()=>[t(oe,{options:o.menuOptions,modelValue:o.form.parentId,"onUpdate:modelValue":e[0]||(e[0]=n=>o.form.parentId=n),class:"w100",props:{checkStrictly:!0,emitPath:!1,value:"menuId",label:"menuName"},clearable:"",onChange:T},null,8,["options","modelValue"])]),_:1})]),_:1})]),_:1}),t(K,{gutter:20},{default:l(()=>[t(d,{span:24},{default:l(()=>[t(m,{label:"菜单类型",prop:"menuType"},{default:l(()=>[t(N,{modelValue:o.form.menuType,"onUpdate:modelValue":e[1]||(e[1]=n=>o.form.menuType=n)},{default:l(()=>[t(c,{label:"M"},{default:l(()=>e[20]||(e[20]=[s("目录")])),_:1}),t(c,{label:"C"},{default:l(()=>e[21]||(e[21]=[s("菜单")])),_:1}),t(c,{label:"F"},{default:l(()=>e[22]||(e[22]=[s("按钮")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.form.menuType!="F"?(a(),i(d,{key:0,span:24},{default:l(()=>[t(m,{label:"菜单图标"},{default:l(()=>[t(xe,{class:"w100",modelValue:o.form.icon,"onUpdate:modelValue":e[2]||(e[2]=n=>o.form.icon=n)},null,8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),t(d,{span:12},{default:l(()=>[t(m,{label:"菜单名称",prop:"menuName"},{default:l(()=>[t(F,{modelValue:o.form.menuName,"onUpdate:modelValue":e[3]||(e[3]=n=>o.form.menuName=n),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(m,{label:"显示排序",prop:"orderNum"},{default:l(()=>[t(ne,{modelValue:o.form.orderNum,"onUpdate:modelValue":e[4]||(e[4]=n=>o.form.orderNum=n),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),o.form.menuType!="F"?(a(),i(d,{key:1,span:12},{default:l(()=>[t(m,{prop:"isFrame"},{label:l(()=>[p("div",Fe,[t(V,{content:"选择是外链则路由地址需要以`http(s)://`开头",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[23]||(e[23]=s(" 是否外链 "))])]),default:l(()=>[t(N,{modelValue:o.form.isFrame,"onUpdate:modelValue":e[5]||(e[5]=n=>o.form.isFrame=n)},{default:l(()=>[t(c,{label:"0"},{default:l(()=>e[24]||(e[24]=[s("是")])),_:1}),t(c,{label:"1"},{default:l(()=>e[25]||(e[25]=[s("否")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType!="F"?(a(),i(d,{key:2,span:12},{default:l(()=>[t(m,{prop:"path"},{label:l(()=>[p("div",he,[t(V,{content:"访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[26]||(e[26]=s(" 路由地址 "))])]),default:l(()=>[t(F,{modelValue:o.form.path,"onUpdate:modelValue":e[6]||(e[6]=n=>o.form.path=n),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType=="C"?(a(),i(d,{key:3,span:12},{default:l(()=>[t(m,{prop:"component"},{label:l(()=>[p("div",De,[t(V,{content:"访问的组件路径，如：`system/user/index`，默认在`views`目录下",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[27]||(e[27]=s(" 组件路径 "))])]),default:l(()=>[t(F,{modelValue:o.form.component,"onUpdate:modelValue":e[7]||(e[7]=n=>o.form.component=n),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType!="M"?(a(),i(d,{key:4,span:12},{default:l(()=>[t(m,{prop:"perms"},{label:l(()=>[p("div",Ue,[t(V,{content:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[28]||(e[28]=s(" 权限字符 "))])]),default:l(()=>[t(F,{modelValue:o.form.perms,"onUpdate:modelValue":e[8]||(e[8]=n=>o.form.perms=n),placeholder:"请输入权限标识",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType=="C"?(a(),i(d,{key:5,span:12},{default:l(()=>[t(m,{prop:"query"},{label:l(()=>[p("div",Se,[t(V,{content:'访问路由的默认传递参数，如：`{"id": 1, "name": "ry"}`',placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[29]||(e[29]=s(" 路由参数 "))])]),default:l(()=>[t(F,{modelValue:o.form.query,"onUpdate:modelValue":e[9]||(e[9]=n=>o.form.query=n),placeholder:"请输入路由参数",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType=="C"?(a(),i(d,{key:6,span:12},{default:l(()=>[t(m,{prop:"isCache"},{label:l(()=>[p("div",ze,[t(V,{content:"选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[30]||(e[30]=s(" 是否缓存 "))])]),default:l(()=>[t(N,{modelValue:o.form.isCache,"onUpdate:modelValue":e[10]||(e[10]=n=>o.form.isCache=n)},{default:l(()=>[t(c,{label:"0"},{default:l(()=>e[31]||(e[31]=[s("缓存")])),_:1}),t(c,{label:"1"},{default:l(()=>e[32]||(e[32]=[s("不缓存")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType!="F"?(a(),i(d,{key:7,span:12},{default:l(()=>[t(m,{prop:"visible"},{label:l(()=>[p("div",Me,[t(V,{content:"选择隐藏则路由将不会出现在侧边栏，但仍然可以访问",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[33]||(e[33]=s(" 显示状态 "))])]),default:l(()=>[t(N,{modelValue:o.form.visible,"onUpdate:modelValue":e[11]||(e[11]=n=>o.form.visible=n)},{default:l(()=>[(a(!0),D(Q,null,A(E(_).sys_show_hide,n=>(a(),i(c,{key:n.value,label:n.value},{default:l(()=>[s(J(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0),o.form.menuType!="F"?(a(),i(d,{key:8,span:12},{default:l(()=>[t(m,{prop:"status"},{label:l(()=>[p("div",Pe,[t(V,{content:"选择停用则路由将不会出现在侧边栏，也不能被访问",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[34]||(e[34]=s(" 菜单状态 "))])]),default:l(()=>[t(N,{modelValue:o.form.status,"onUpdate:modelValue":e[12]||(e[12]=n=>o.form.status=n)},{default:l(()=>[(a(!0),D(Q,null,A(E(_).sys_normal_disable,n=>(a(),i(c,{key:n.value,label:n.value},{default:l(()=>[s(J(n.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):b("v-if",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),bl=Y(Be,[["__file","D:/work/public/admin-tempalte-base/src/views/system/menu/index.vue"]]);export{bl as default};
