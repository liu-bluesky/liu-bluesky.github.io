System.register(["./vue-legacy-BwqaE-UV.js","./mockjs-legacy-B6RXmGMp.js","./pinia-legacy-CPPRg8p1.js","./lodash-legacy-BjC4_Cl0.js","./vue3-draggable-resizable-yn-legacy-DjejEIa5.js","./@vue-legacy-DnKxfRmB.js","./element-plus-legacy-wKlBsICL.js"],function(e,t){"use strict";var n,o,r,a,i,l,s,c,u,d,p,f,h,g,m,v,b,y,w,_,x,E,C,O,k,S,A,T,P,I,D,L,R,M,j,z,N,B,V,H,U,F,G,$;return{setters:[null,e=>{n=e.M},e=>{o=e.c,r=e.d},e=>{a=e.a},e=>{i=e.s,l=e.V},e=>{s=e.r,c=e.f,u=e.s,d=e.w,p=e.t,f=e.b,h=e.j,g=e.o,m=e.c,v=e.k,b=e.l,y=e.a,w=e.F,_=e.m,x=e.q,E=e.u,C=e.v,O=e.M,k=e.y,S=e.L,A=e.d,T=e.J,P=e.B,I=e.D,D=e.H,L=e.x,R=e.T,M=e.z,j=e.A,z=e.n,N=e.P,B=e.Q,V=e.R,H=e.g,U=e.G,F=e.e},e=>{G=e.E,$=e.a}],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.h-container,.v-container{position:absolute}.h-container .indicator,.v-container .indicator{z-index:4;position:absolute}.h-container .line,.v-container .line,.h-container .action,.v-container .action{position:absolute}.h-container .value,.v-container .value{transform:scale(.83);padding:5px;border-radius:5px;font-size:12px;white-space:nowrap}.h-container{top:0}.h-container .line{top:0;height:100vh}.h-container .line:before,.h-container .line:after{content:"";display:inline-block;width:4px;height:100vh;position:absolute}.h-container .line:before{left:-4px;top:0}.h-container .line:after{right:-4px;top:0}.h-container .indicator{left:0;width:100vw}.h-container .indicator:before,.h-container .indicator:after{content:"";display:inline-block;height:4px;width:100vw;position:absolute}.h-container .indicator:before{top:-5px;left:0}.h-container .indicator:after{bottom:-5px;left:0}.v-container{left:0}.v-container .line{left:0;width:100vw}.v-container .line:before,.v-container .line:after{content:"";display:inline-block;height:4px;width:100vw;position:absolute}.v-container .line:before{top:-5px;left:0}.v-container .line:after{bottom:-5px;left:0}.v-container .indicator{top:0;height:100vh}.v-container .indicator:before,.v-container .indicator:after{content:"";display:inline-block;width:4px;height:100vh;position:absolute}.v-container .indicator:before{left:-4px;top:0}.v-container .indicator:after{right:-4px;top:0}.sketch-ruler{position:relative;z-index:3;width:100%;height:100%;overflow:hidden;font-size:12px}.sketch-ruler span{line-height:1}.sketch-ruler .canvasedit-parent{position:absolute;left:var(--89f302c6);top:var(--89f302c6)}.sketch-ruler .corner{position:absolute;top:0;left:0;pointer-events:auto;cursor:pointer;box-sizing:content-box;transition:all .2s ease-in-out}.sketch-ruler .defaultCursor{cursor:default!important}.sketch-ruler .grabCursor{cursor:grab!important}.textline1{font-size:13px;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1;-webkit-box-orient:vertical}.fd,.aic,.jcc,.jcb,.jca,.fdc,.jcfend{display:flex}.ml10{margin-left:10px}.aic{align-items:center}.jcc{justify-content:center}.jcb{justify-content:space-between}.jca{justify-content:space-around}.jcfend{justify-content:flex-end}.fdc{flex-direction:column}.flexWrap{flex-wrap:wrap}.flex-shrink0{flex-shrink:0}.flex1{flex:1}.flex2{flex:2}.flex5{flex:5}.flex7{flex:7}.mx30{margin:0 30px}.mx15{margin:0 15px}.ml15{margin-left:15px}.mx5{margin:0 5px}.mt30{margin-top:30px}.mt10{margin-top:10px}.ml30{margin-left:30px}.m20{margin:20px}.w80{width:80px}.mt20{margin-top:20px}.p10{padding:10px}.p20{padding:20px}.w400{width:400px}.displayInlineBlock{display:inline-block}.red{color:red}.cP{cursor:pointer}.fontSize16{font-size:16px;font-weight:400}.w100{width:100%}.w50{width:50%}.h100{height:100%}.mxauto{margin:0 auto}.white{color:#fff}.white-bg{background-color:#fff}.gray{color:rgba(0,0,0,.45)}.positionCenterTop{position:relative;top:17%;left:50%;transform:translate(-50%)}.position-fixed{position:absolute;top:0;left:0;width:100%;height:100%}.position-relative{position:relative}.text-center{text-align:center}*{margin:0;outline:none;box-sizing:border-box}#app,html,body{overflow:hidden;font-size:12px;height:100%}::-webkit-scrollbar{width:8px!important;height:8px;background-color:transparent}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px;background-color:transparent}::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:rgba(144,147,153,0)}::-webkit-scrollbar-thumb:hover{background-color:rgba(144,147,153,.5)}@media only screen and (min-width: 1200px){.hidden-md-and-up1{display:none!important}}.animation-delay0{animation-delay:0ms}.animation-delay100{animation-delay:.1s}.animation-delay200{animation-delay:.2s}.animation-delay300{animation-delay:.3s}.tableData[data-v-3e314043]{position:relative;display:flex;flex-direction:column;color:#000}.tableData .popoverBox[data-v-3e314043]{position:absolute;padding:10px;top:30px;left:50%;transform:translate(-50%);box-shadow:0 0 0 1px var(--el-border-color) inset;width:470px;z-index:2222;background-color:var(--el-bg-color)}.tableData .popoverBox .popoverItemBox[data-v-3e314043]{display:flex;justify-content:space-between;margin-bottom:5px}.tableData .popoverBox .popoverItem[data-v-3e314043]{cursor:pointer;border:1px solid var(--el-border-color);width:20px;height:20px}.tableData .selectedTable[data-v-3e314043]{background:var(--el-color-primary)}.attr-container[data-v-c0c9b7d3]{padding:5px;display:flex;justify-content:space-between;align-items:center;border-radius:4px;cursor:move;background-color:var(--el-color-primary)}.attr-title[data-v-c0c9b7d3]{color:var(--el-button-text-color)}.attr-content[data-v-c0c9b7d3]{overflow:hidden}.dialog__icon[data-v-091b437b]{position:absolute;top:22px;right:45px;font-size:12px;color:#909399;cursor:pointer;transition:color .2s}.com-dialog__content .content__wrap[data-v-091b437b]{padding-right:10px}.com-dialog__content[data-v-091b437b] .el-scrollbar__wrap{padding-bottom:13px;max-height:600px;overflow-x:hidden}.com-dialog__content[data-v-091b437b] .el-scrollbar__view{height:100%}.print-drawer .el-drawer__body{padding:0!important}.printContentRef[data-v-6d3d957e]{position:relative;page-break-before:always}.mt10[data-v-6d3d957e]{margin-top:10px}.popover[data-v-26a2be6b]{position:relative;height:100%}.popoverContent[data-v-26a2be6b]{padding:2px;border-radius:4px;width:140px;font-size:14px;color:#333;box-shadow:var(--el-box-shadow-light)}.popoverContent .popoverContent__arrow[data-v-26a2be6b]{padding:2px 5px;font-size:12px}.popoverContent .popoverContent__arrow[data-v-26a2be6b]:hover{background:var(--26a2be6b-bindColor);color:#fff!important}.popoverContent .titleSub[data-v-26a2be6b]{position:relative;font-size:14px;padding-left:10px;font-weight:700;color:var(--26a2be6b-bindColor)}.popoverContent .titleSub[data-v-26a2be6b]:before{content:"";position:absolute;width:2px;border-radius:1px;height:15px;background:var(--26a2be6b-bindColor);top:50%;transform:translateY(-50%);left:3px}.popoverContent .popoverContent__arrow__children[data-v-26a2be6b]{margin-left:10px}.popoverContent .popoverContent__arrow__children .popoverContent__arrow__children__item[data-v-26a2be6b]{font-size:12px;padding:2px 5px}.popoverContent .el-popover__reference{display:flex;align-items:center;left:0}.popoverContent .popoverContent__arrow__children{margin-left:10px}.popoverContent .popoverContent__arrow__children .popoverContent__arrow__children__item:hover{background:var(--26a2be6b-bindColor);color:#fff!important}.vdr-container{position:absolute;border:1px solid transparent;box-sizing:border-box}.vdr-container.active{border-color:#000;border-style:dashed}.vdr-container.dragging{border-color:#000;border-style:solid}.vdr-handle{box-sizing:border-box;position:absolute;width:7px;height:7px;background:#f0f0f0;border:1px solid #333}.vdr-handle-tl{top:-4px;left:-4px;cursor:nw-resize}.vdr-handle-tm{top:-4px;left:50%;margin-left:-3px;cursor:n-resize}.vdr-handle-tr{top:-4px;right:-4px;cursor:ne-resize}.vdr-handle-ml{top:50%;margin-top:-3px;left:-4px;cursor:w-resize}.vdr-handle-mr{top:50%;margin-top:-3px;right:-4px;cursor:e-resize}.vdr-handle-bl{bottom:-4px;left:-4px;cursor:sw-resize}.vdr-handle-bm{bottom:-4px;left:50%;margin-left:-4px;cursor:s-resize}.vdr-handle-br{bottom:-4px;right:-4px;cursor:se-resize}.tablecontainerRef[data-v-9844ec0b]{position:relative}table[data-v-9844ec0b]{border-collapse:collapse;width:100%}th[data-v-9844ec0b],td[data-v-9844ec0b]{border:1px solid black;padding:8px;text-align:center}.font-12[data-v-496853f1]{font-size:var(--el-form-label-font-size);font-size:12px;color:var(--el-text-color-regular)}.CP{cursor:pointer}.toolSetting{padding:3px 5px 5px;background-color:#fafafa}.activeNO{border-color:transparent!important}.space-key-pressed{cursor:pointer!important}.easyPrint{width:100%;padding-top:10px;display:flex;flex-direction:column;height:100%;justify-content:center}.easyPrintTop{display:flex;justify-content:center;align-items:center;width:100%;background-color:var(--el-color-primary);font-size:20px}.easyPrintTop .scale{margin-right:10px}.right{font-size:20px}.font18{font-size:18px}.mr10{margin-right:10px}body{padding:0;margin:0;overflow:hidden;font-family:sans-serif}body *{box-sizing:border-box}.wrapper{margin:0 auto;background-color:#f5f5f5;border:1px solid #dadadc}.button{bottom:100%}.img-style{width:100%;height:100%}.btns{position:absolute;display:flex;align-items:center;bottom:20px;right:40px;z-index:999}.drag-form-right{padding:10px;background-color:var(--el-fill-color-blank);z-index:22}.drag-form-right-conetnt{padding:10px;z-index:22;overflow-y:auto}.selected{background-color:var(--el-color-primary);color:#fff}.ElRowAttrs[data-v-3811fa91],.ElRowAttrs[data-v-68ddaa06],.ElRowAttrs[data-v-dd453d58],.ElRowAttrs[data-v-ebe8edf2],.ElRowAttrs[data-v-3583eb4d],.ElRowAttrs[data-v-046d542c],.ElRowAttrs[data-v-ee488066],.ElRowAttrs[data-v-86d9c6c5],.ElRowAttrs[data-v-5809100f]{display:flex;align-items:center;margin-bottom:10px}.dataSourceList[data-v-743f749f]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.cp[data-v-743f749f]{cursor:pointer}.relative[data-v-aaf206a2]{position:relative}.relative .easyprintWebview[data-v-aaf206a2]{position:absolute;width:100%;height:100%;z-index:2;top:0;left:0}.tablecontainerRef[data-v-be1962ce]{position:relative}table[data-v-be1962ce]{border-collapse:collapse;width:100%}th[data-v-be1962ce],td[data-v-be1962ce]{border:1px solid black;padding:8px;text-align:center}.ElRowAttrs[data-v-2d779a54]{display:flex;align-items:center;margin-bottom:10px}\n',document.head.appendChild(t);for(var X,q=[],Y=0;Y<256;++Y)q.push((Y+256).toString(16).slice(1));var W=new Uint8Array(16);function J(){if(!X&&!(X="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return X(W)}const Q={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Z(e,t,n){if(Q.randomUUID&&!t&&!e)return Q.randomUUID();var o=(e=e||{}).random||(e.rng||J)();return o[6]=15&o[6]|64,o[8]=63&o[8]|128,function(e,t=0){return(q[e[t+0]]+q[e[t+1]]+q[e[t+2]]+q[e[t+3]]+"-"+q[e[t+4]]+q[e[t+5]]+"-"+q[e[t+6]]+q[e[t+7]]+"-"+q[e[t+8]]+q[e[t+9]]+"-"+q[e[t+10]]+q[e[t+11]]+q[e[t+12]]+q[e[t+13]]+q[e[t+14]]+q[e[t+15]]).toLowerCase()}(o)}/*!vue3-sketch-ruler v2.2.102025年6月Wed Jun 18 2025 17:41:08 GMT+0800 (中国标准时间)制作*/function K(e,t,n,o,r,a){a?r.moveTo(e,0):r.moveTo(0,e),r.save(),a?r.translate(e+5,.2*o):r.translate(.1*n,e+32),a||r.rotate(-Math.PI/2),r.fillText(Math.round(t).toString(),4,7),r.restore(),a?r.lineTo(e,o):r.lineTo(n,e),r.stroke(),r.closePath(),r.setTransform(1,0,0,1,0,0)}function ee(e,t,n,o,r,a){o.fillStyle=r.fontShadowColor,o.strokeStyle=r.longfgColor,o.save(),o.translate(e,t),a||o.rotate(-Math.PI/2),o.font="bold 12px  Aria",o.fillText(String(n),0,0),o.restore()}function te(e,t=100){let n=null;const o=function(...o){null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...o)},t)};return o.cancel=function(){null!==n&&(clearTimeout(n),n=null)},o}function ne(e,t){const n=s(0),o=s(0),r=s(!1),a=c(()=>({backgroundColor:e.palette.hoverBg,color:e.palette.hoverColor,[t?"top":"left"]:"-8px",[t?"left":"top"]:`${n.value+10}px`})),i=({offsetX:e,offsetY:o})=>{n.value=t?e:o},l=(n,o)=>{var r,a;const i=t?null==(r=e.lines)?void 0:r.h:null==(a=e.lines)?void 0:a.v,l=u(n);if(i)if(l){if("number"!=typeof o)return;i.splice(o,1)}else"number"!=typeof o?i.push(n):i[o]=n},u=n=>{const o=t?e.canvasHeight:e.canvasWidth;return n<0||n>o},d=c(()=>u(o.value)?"放开删除":`${t?"Y":"X"}：${o.value*e.rate}`),p=te(()=>{r.value=!1},200),f=te(()=>{r.value=!0},200);return{showLabel:r,startValue:o,actionStyle:a,labelContent:d,handleMouseDown:(n,r)=>new Promise(a=>{if(e.lockLine)return;const s=t?n.clientY:n.clientX;i(n);const c=r||o.value;let u=c;const d=n=>{let r=((t?n.clientY:n.clientX)-s)/e.scale+c,a=r;const i=(t?e.snapsObj.h:e.snapsObj.v).slice().sort((e,t)=>Math.abs(a-e)-Math.abs(a-t));i.length&&Math.abs(i[0]-r)<e.snapThreshold/e.scale&&(a=i[0],r=a),u=Math.round(r),o.value=u};document.addEventListener("mousemove",d),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",d),l(u,e.index),a()},{once:!0})}),handleMouseenter:t=>{e.lockLine||(i(t),f(),p.cancel())},handleMouseLeave:()=>{p()}}}const oe={key:0,class:"value"},re=A({__name:"ruler-line",props:{scale:{},palette:{},index:{},start:{},vertical:{type:Boolean},value:{},canvasWidth:{},canvasHeight:{},lines:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},lockLine:{type:Boolean}},setup(e){const t=e,n=s(!1),{actionStyle:o,handleMouseDown:r,labelContent:a,startValue:i,showLabel:l,handleMouseenter:u,handleMouseLeave:p}=ne(t,t.vertical),h=c(()=>i.value>=t.start),v=c(()=>{const{lineType:e,lockLineColor:o,lineColor:r}=t.palette,a=t.lockLine?o:r??"black",l=t.lockLine||n.value?"none":"auto",s=t.isShowReferLine&&!t.lockLine?t.vertical?"ns-resize":"ew-resize":"default",c=t.vertical?"borderTop":"borderLeft",u=(i.value-t.start)*t.scale;return{[c]:`1px ${e} ${a}`,pointerEvents:l,cursor:s,[t.vertical?"top":"left"]:`${u}px`}});f(()=>{i.value=t.value??0});const b=te(()=>{n.value=!1},1e3);return d([()=>t.scale],()=>{n.value=!0,b()}),(e,t)=>B((g(),m("div",{class:"line",style:O(v.value),onMouseenter:t[0]||(t[0]=S((...e)=>E(u)&&E(u)(...e),["stop"])),onMouseleave:t[1]||(t[1]=S((...e)=>E(p)&&E(p)(...e),["stop"])),onMousedown:t[2]||(t[2]=S((...e)=>E(r)&&E(r)(...e),["stop"]))},[y("div",{class:"action",style:O(E(o))},[E(l)?(g(),m("span",oe,L(E(a)),1)):k("",!0)],4)],36)),[[V,h.value]])}}),ae=A({__name:"index",props:{scale:{},palette:{},vertical:{type:Boolean},showShadowText:{type:Boolean},start:{},width:{},height:{},selectStart:{},selectLength:{},canvasWidth:{},canvasHeight:{},rate:{},gridRatio:{}},emits:["handleDragStart"],setup(e,{emit:t}){const n=e,o=t,r=P({isDragging:!1,canvasContext:null});let a=window.devicePixelRatio;const i=s(null);f(()=>{window.addEventListener("resize",l),u(),h(a),v(a)});const l=()=>{a=window.devicePixelRatio,h(a),v(a)},u=()=>{var e;r.canvasContext=(null==(e=i.value)?void 0:e.getContext("2d"))||null},p=c(()=>({width:n.width+"px",height:n.height+"px",cursor:n.vertical?"ew-resize":"ns-resize",[n.vertical?"borderRight":"borderBottom"]:`1px solid ${n.palette.borderColor||"#eeeeef"} `}));F(()=>{window.removeEventListener("resize",l)});const h=e=>{if(i.value){i.value.width=Math.round(n.width*e),i.value.height=Math.round(n.height*e);const t=r.canvasContext;t&&(t.font='11px -apple-system,\n                "Helvetica Neue", ".SFNSText-Regular",\n                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",\n                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif',t.lineWidth=1,t.textBaseline="middle")}},v=e=>{const t={scale:n.scale,width:n.width,height:n.height,palette:n.palette,canvasWidth:n.canvasWidth,canvasHeight:n.canvasHeight,ratio:e,rate:n.rate,gridRatio:n.gridRatio,showShadowText:n.showShadowText};t.scale=n.scale/n.rate,t.canvasWidth=n.canvasWidth*n.rate,t.canvasHeight=n.canvasHeight*n.rate,r.canvasContext&&((e,t,n,o,r,a)=>{const{scale:i,width:l,height:s,ratio:c,palette:u,gridRatio:d,showShadowText:p}=r,{bgColor:f,fontColor:h,shadowColor:g,longfgColor:m}=u,v=a?r.canvasWidth:r.canvasHeight;e.setTransform(1,0,0,1,0,0),e.scale(c,c),e.clearRect(0,0,l,s),e.fillStyle=f,e.fillRect(0,0,l,s);const b=(e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1)(i)*d*10,y=b*i,w=Math.floor(t/b)*b,_=(w-t)/b*y,x=t+Math.ceil((a?l:s)/i);if(o){const r=(n-t)*i,c=o*i;e.fillStyle=g,a?e.fillRect(r,0,c,s):e.fillRect(0,r,l,c),p&&(a?(ee(r,.4*s,Math.round(n),e,u,a),ee((n+o-t)*i,.4*s,Math.round(n+o),e,u,a)):(ee(.4*l,r,Math.round(n),e,u,a),ee(.4*l,(n+o-t)*i,Math.round(n+o),e,u,a)))}e.beginPath(),e.fillStyle=h,e.strokeStyle=m;for(let E=w,C=0;E<x;E+=b,C++){const t=_+C*y+.5;if(E-b<v&&E>v||E==v)return void K(_+C*y+.5+(v-E)*i,v,l,s,e,a);E>=0&&E<=v&&(0==E?a?(e.moveTo(t,0),e.lineTo(t,s)):(e.moveTo(0,t),e.lineTo(l,t)):a?(e.moveTo(t,20),e.lineTo(t,s/1.3)):(e.moveTo(20,t),e.lineTo(l/1.3,t)),e.save(),0==E?a?e.translate(t-15,.01*s):e.translate(.3*l,t-5):a?e.translate(t-12,.05*s):e.translate(.05*l,t+12),a||e.rotate(-Math.PI/2),v-E>b/2&&(!p||0==o||Math.abs(E-n)>b/2&&Math.abs(E-(n+o))>b/2)&&e.fillText(E.toString(),4,9),e.restore())}e.stroke(),e.closePath()})(r.canvasContext,n.start*n.rate,n.selectStart,n.selectLength,t,!n.vertical)};d([()=>n.width,()=>n.height,()=>n.start,()=>n.palette,()=>n.selectStart,()=>n.selectLength],()=>{v(a)}),d([()=>n.width,()=>n.height],()=>{h(a)});const b=e=>{o("handleDragStart",e)};return(e,t)=>(g(),m("canvas",{ref_key:"canvas",ref:i,class:"ruler",style:O(p.value),onMousedown:S(b,["stop"])},null,36))}}),ie={class:"lines"},le={key:0,class:"value"},se=A({__name:"ruler-wrapper",props:{scale:{},thick:{},canvasWidth:{},canvasHeight:{},palette:{},vertical:{type:Boolean},width:{},height:{},start:{},startOther:{},lines:{},selectStart:{},selectLength:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},gridRatio:{},lockLine:{type:Boolean},showShadowText:{type:Boolean}},emits:["changeLineState"],setup(e,{emit:t}){const n=e,{showLabel:o,actionStyle:r,handleMouseenter:a,handleMouseLeave:i,handleMouseDown:l,labelContent:u,startValue:p}=ne(n,!n.vertical),f=s(!1),h=s(!1),b=c(()=>n.vertical?"v-container":"h-container"),C=t,S=c(()=>{var e,t;return n.vertical?null==(e=n.lines)?void 0:e.h:null==(t=n.lines)?void 0:t.v}),A=c(()=>{const e=n.palette.lineType;let t=n.vertical?"left":"top",o=n.vertical?"top":"left",r=n.vertical?"borderLeft":"borderBottom";const a=(p.value-n.startOther)*n.scale+n.thick;return{[t]:a+"px",[o]:-n.thick+"px",cursor:n.vertical?"ew-resize":"ns-resize",[r]:`1px ${e} ${n.palette.lineColor}`}}),T=async e=>{const{offsetX:t,offsetY:o}=e,{scale:r,vertical:a,thick:i,startOther:s}=n;if(!f.value){h.value=!0,C("changeLineState",!1);let n=Math.round(s-i/r+(a?t:o)/r);p.value=n,await l(e,n),h.value=!1}};return d([()=>n.lockLine],()=>{f.value=n.lockLine}),(e,t)=>(g(),m("div",{class:D(b.value)},[v(ae,M(e.$props,{onHandleDragStart:T}),null,16),B(y("div",ie,[(g(!0),m(w,null,_(S.value,(t,n)=>(g(),x(re,M({key:t+n,index:n,value:0|t,ref_for:!0},e.$props),null,16,["index","value"]))),128))],512),[[V,e.isShowReferLine]]),e.isShowReferLine?B((g(),m("div",{key:0,class:"indicator",style:O(A.value),onMouseenter:t[0]||(t[0]=(...e)=>E(a)&&E(a)(...e)),onMouseleave:t[1]||(t[1]=(...e)=>E(i)&&E(i)(...e))},[y("div",{class:"action",style:O(E(r))},[E(o)?(g(),m("span",le,L(E(u)),1)):k("",!0)],4)],36)),[[V,h.value]]):k("",!0)],2))}});/*!simple-panzoom v1.0.72024年8月Sat Aug 10 2024 16:04:04 GMT+0800 (中国标准时间)制作*/function ce(e,t){let n=e.length;for(;n--;)if(e[n].pointerId===t.pointerId)return n;return-1}function ue(e,t){let n;if(t.touches){n=0;for(const o of t.touches)o.pointerId=n++,ue(e,o)}else n=ce(e,t),n>-1&&e.splice(n,1),e.push(t)}function de(e){let t,n=(e=e.slice(0)).pop();for(;t=e.pop();)n={clientX:(t.clientX-n.clientX)/2+n.clientX,clientY:(t.clientY-n.clientY)/2+n.clientY};return n}function pe(e){if(e.length<2)return 0;const t=e[0],n=e[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-t.clientX),2)+Math.pow(Math.abs(n.clientY-t.clientY),2))}typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}));let fe={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function he(e,t,n,o){fe[e].split(" ").forEach(e=>{t.addEventListener(e,n,o)})}function ge(e,t,n){fe[e].split(" ").forEach(e=>{t.removeEventListener(e,n)})}typeof window<"u"&&("function"==typeof window.PointerEvent?fe={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(fe={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));const me=typeof document<"u"&&!!document.documentMode;let ve;const be=["webkit","moz","ms"],ye={};function we(e){if(ye[e])return ye[e];const t=ve||(ve=document.createElement("div").style);if(e in t)return ye[e]=e;const n=e[0].toUpperCase()+e.slice(1);let o=be.length;for(;o--;){const r=`${be[o]}${n}`;if(r in t)return ye[e]=r}}function _e(e,t){return parseFloat(t[we(e)])||0}function xe(e,t,n=window.getComputedStyle(e)){const o="border"===t?"Width":"";return{left:_e(`${t}Left${o}`,n),right:_e(`${t}Right${o}`,n),top:_e(`${t}Top${o}`,n),bottom:_e(`${t}Bottom${o}`,n)}}function Ee(e,t,n){e.style[we(t)]=n}function Ce(e){const t=e.parentNode,n=window.getComputedStyle(e),o=window.getComputedStyle(t),r=e.getBoundingClientRect(),a=t.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:xe(e,"margin",n),border:xe(e,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:xe(t,"padding",o),border:xe(t,"border",o)}}}function Oe(e,t){return 1===e.nodeType&&` ${function(e){return(e.getAttribute("class")||"").trim()}(e)} `.indexOf(` ${t} `)>-1}const ke=/^http:[\w\.\/]+svg$/,Se={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:e=>{e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:function(e,{x:t,y:n,scale:o,isSVG:r},a){if(Ee(e,"transform",`scale(${o}) translate(${t}px, ${n}px)`),r&&me){const t=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",t)}},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Ae(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(1!==e.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!function(e){let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t={...Se,...t};const n=function(e){return ke.test(e.namespaceURI)&&"svg"!==e.nodeName.toLowerCase()}(e),o=e.parentNode;o.style.overflow=t.overflow,o.style.userSelect="none",o.style.touchAction=t.touchAction,(t.canvas?o:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,Ee(e,"transformOrigin","string"==typeof t.origin?t.origin:n?"0 0":"50% 50%");let r,a,i,l,s,c,u=0,d=0,p=1,f=!1;function h(t,n,o){if(o.silent)return;const r=new CustomEvent(t,{detail:n});e.dispatchEvent(r)}function g(t,o,r){const a={x:u,y:d,scale:p,isSVG:n,originalEvent:r,dimsOut:{}};function i(){const n=Ce(e);a.dimsOut=n,h(t,a,o),h("panzoomchange",a,o)}return"boolean"==typeof o.animate&&(o.animate?function(e,t){Ee(e,"transition",`${we("transform")} ${t.duration}ms ${t.easing}`)}(e,o):Ee(e,"transition","none")),o.setTransform(e,a,o),o.animate?setTimeout(()=>{i()},o.duration+50):requestAnimationFrame(()=>{i()}),a}function m(n,o,r,a){const i={...t,...a},l={x:u,y:d,opts:i};if(!i.force&&(i.disablePan||i.panOnlyWhenZoomed&&p===i.startScale))return l;if(n=parseFloat(n),o=parseFloat(o),i.disableXAxis||(l.x=(i.relative?u:0)+n),i.disableYAxis||(l.y=(i.relative?d:0)+o),i.contain){const t=Ce(e),n=t.elem.width/p,o=t.elem.height/p,a=n*r,s=o*r,c=(a-n)/2,u=(s-o)/2;if("inside"===i.contain){const e=(-t.elem.margin.left-t.parent.padding.left+c)/r,n=(t.parent.width-a-t.parent.padding.left-t.elem.margin.left-t.parent.border.left-t.parent.border.right+c)/r;l.x=Math.max(Math.min(l.x,n),e);const o=(-t.elem.margin.top-t.parent.padding.top+u)/r,i=(t.parent.height-s-t.parent.padding.top-t.elem.margin.top-t.parent.border.top-t.parent.border.bottom+u)/r;l.y=Math.max(Math.min(l.y,i),o)}else if("outside"===i.contain){const e=(-(a-t.parent.width)-t.parent.padding.left-t.parent.border.left-t.parent.border.right+c)/r,n=(c-t.parent.padding.left)/r;l.x=Math.max(Math.min(l.x,n),e);const o=(-(s-t.parent.height)-t.parent.padding.top-t.parent.border.top-t.parent.border.bottom+u)/r,i=(u-t.parent.padding.top)/r;l.y=Math.max(Math.min(l.y,i),o)}}return i.roundPixels&&(l.x=Math.round(l.x),l.y=Math.round(l.y)),l}function v(n,o){const r={...t,...o},a={scale:p,opts:r};if(!r.force&&r.disableZoom)return a;let i=t.minScale,l=t.maxScale;if(r.contain){const n=Ce(e),o=n.elem.width/p,r=n.elem.height/p;if(o>1&&r>1){const e=(n.parent.width-n.parent.border.left-n.parent.border.right)/o,a=(n.parent.height-n.parent.border.top-n.parent.border.bottom)/r;"inside"===t.contain?l=Math.min(l,e,a):"outside"===t.contain&&(i=Math.max(i,e,a))}}return a.scale=Math.min(Math.max(n,i),l),a}function b(e,t,o,r){const a=m(e,t,p,o);return u!==a.x||d!==a.y?(u=a.x,d=a.y,g("panzoompan",a.opts,r)):{x:u,y:d,scale:p,isSVG:n,originalEvent:r}}function y(e,t,n){const o=v(e,t),r=o.opts;if(!r.force&&r.disableZoom)return;e=o.scale;let a=u,i=d;if(r.focal){const t=r.focal;a=(t.x/e-t.x/p+u*e)/e,i=(t.y/e-t.y/p+d*e)/e}const l=m(a,i,e,{relative:!1,force:!0});return u=l.x,d=l.y,p=e,g("panzoomzoom",r,n)}function w(e,n){const o={...t,animate:!0,...n};return y(p*Math.exp((e?1:-1)*o.step),o)}function _(t,o,r,a){const i=Ce(e),l=i.parent.width-i.parent.padding.left-i.parent.padding.right-i.parent.border.left-i.parent.border.right,s=i.parent.height-i.parent.padding.top-i.parent.padding.bottom-i.parent.border.top-i.parent.border.bottom;let c=o.clientX-i.parent.left-i.parent.padding.left-i.parent.border.left-i.elem.margin.left,u=o.clientY-i.parent.top-i.parent.padding.top-i.parent.border.top-i.elem.margin.top;return n||(c-=i.elem.width/p/2,u-=i.elem.height/p/2),y(t,{...r,animate:!1,focal:{x:c/l*(l*t),y:u/s*(s*t)}},a)}y(t.startScale,{animate:!1,force:!0}),setTimeout(()=>{b(t.startX,t.startY,{animate:!1,force:!0})});const x=[];function E(e){if(function(e,t){for(let n=e;null!=n;n=n.parentNode)if(Oe(n,t.excludeClass)||t.exclude.indexOf(n)>-1)return!0;return!1}(e.target,t))return;ue(x,e),f=!0,t.handleStartEvent(e),r=u,a=d,h("panzoomstart",{x:u,y:d,scale:p,isSVG:n,originalEvent:e},t);const o=de(x);i=o.clientX,l=o.clientY,s=p,c=pe(x)}function C(e){if(!f||void 0===r||void 0===a||void 0===i||void 0===l)return;ue(x,e);const n=de(x),o=x.length>1;let u=p;o&&(0===c&&(c=pe(x)),u=v((pe(x)-c)*t.step/80+s).scale,_(u,n,{animate:!1},e)),(!o||t.pinchAndPan)&&b(r+(n.clientX-i)/u,a+(n.clientY-l)/u,{animate:!1},e)}function O(e){1===x.length&&h("panzoomend",{x:u,y:d,scale:p,isSVG:n,originalEvent:e},t),function(e,t){if(t.touches){for(;e.length;)e.pop();return}const n=ce(e,t);n>-1&&e.splice(n,1)}(x,e),f&&(f=!1,r=a=i=l=void 0)}let k=!1;function S(){k||(k=!0,he("down",t.canvas?o:e,E),he("move",document,C,{passive:!0}),he("up",document,O,{passive:!0}))}return t.noBind||S(),{bind:S,destroy:function(){k=!1,ge("down",t.canvas?o:e,E),ge("move",document,C),ge("up",document,O)},eventNames:fe,getPan:()=>({x:u,y:d}),getScale:()=>p,getOptions:()=>function(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(t),handleDown:E,handleMove:C,handleUp:O,pan:b,reset:function(e){const n={...t,animate:!0,force:!0,...e};p=v(n.startScale,n).scale;const o=m(n.startX,n.startY,p,n);return u=o.x,d=o.y,g("panzoomreset",n)},resetStyle:function(){o.style.overflow="",o.style.userSelect="",o.style.touchAction="",o.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",Ee(e,"transformOrigin","")},setOptions:function(n={}){for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(o.style.cursor=e.style.cursor="",(t.canvas?o:e).style.cursor=t.cursor),n.hasOwnProperty("overflow")&&(o.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(o.style.touchAction=n.touchAction,e.style.touchAction=n.touchAction)},setStyle:(t,n)=>Ee(e,t,n),zoom:y,zoomIn:function(e){return w(!0,e)},zoomOut:function(e){return w(!1,e)},zoomToPoint:_,zoomWithWheel:function(e,n){e.preventDefault();const o={...t,...n,animate:!1},r=(0===e.deltaY&&e.deltaX?e.deltaX:e.deltaY)<0?1:-1;return _(v(p*Math.exp(r*o.step/3),o).scale,e,o,e)}}}Ae.defaultOptions=Se;const Te={class:"sketch-ruler"},Pe=A({__name:"index",props:{showRuler:{type:Boolean,default:!0},eyeIcon:{},closeEyeIcon:{},scale:{default:1},rate:{default:1},thick:{default:16},palette:{},width:{default:1400},height:{default:800},paddingRatio:{default:.2},autoCenter:{type:Boolean,default:!0},shadow:{default:()=>({x:0,y:0,width:0,height:0})},lines:{default:()=>({h:[],v:[]})},isShowReferLine:{type:Boolean,default:!0},canvasWidth:{default:700},canvasHeight:{default:700},snapsObj:{default:()=>({h:[],v:[]})},snapThreshold:{default:5},gridRatio:{default:1},lockLine:{type:Boolean,default:!1},selfHandle:{type:Boolean,default:!1},showShadowText:{type:Boolean,default:!0},panzoomOption:{}},emits:["onCornerClick","update:scale","zoomchange","update:lockLine"],setup(e,{expose:t,emit:n}){T(e=>({"89f302c6":X.value}));const o=e,r=n,a=s(null),i=s(0),l=s(0);let u=0,p=0;const h=s(1),b=s(o.isShowReferLine),w=s(null),_=s("defaultCursor"),x=c(()=>({bgColor:"#f6f7f9",longfgColor:"#BABBBC",fontColor:"#7D8694",fontShadowColor:"#106ebe",shadowColor:"#e9f7fe",lineColor:"#51d6a9",lineType:"solid",lockLineColor:"#d4d7dc",hoverBg:"#000",hoverColor:"#fff",borderColor:"#eeeeef",...o.palette})),E=c(()=>({backgroundImage:b.value?`url(${o.eyeIcon??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC"})`:`url(${o.closeEyeIcon??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII="})`,width:o.thick+"px",height:o.thick+"px",borderRight:`1px solid ${x.value.borderColor}`,borderBottom:`1px solid ${x.value.borderColor}`})),C=c(()=>({background:x.value.bgColor,width:k.value+"px",height:S.value+"px"})),k=c(()=>o.width-o.thick),S=c(()=>o.height-o.thick),A=e=>{var t;(e.ctrlKey||e.metaKey)&&(null==(t=w.value)||t.zoomWithWheel(e))},P=e=>{var t;const n=document.activeElement;null!=n&&n.closest(".monaco-editor")||"INPUT"===(null==n?void 0:n.tagName)||"TEXTAREA"===(null==n?void 0:n.tagName)||"true"===(null==n?void 0:n.getAttribute("contenteditable"))||" "===e.key&&(_.value="grabCursor",null==(t=w.value)||t.bind(),e.preventDefault())},L=e=>{var t;const n=document.activeElement;null!=n&&n.closest(".monaco-editor")||"INPUT"===(null==n?void 0:n.tagName)||"TEXTAREA"===(null==n?void 0:n.tagName)||"true"===(null==n?void 0:n.getAttribute("contenteditable"))||" "===e.key&&(null==(t=w.value)||t.destroy(),_.value="defaultCursor")};function R(e){var t;e.preventDefault(),e.stopPropagation(),null==(t=w.value)||t.bind()}f(()=>{if(z(),!o.selfHandle&&a.value){const e=a.value.parentElement;if(!e)return;e.addEventListener("wheel",A),document.addEventListener("keydown",P),document.addEventListener("keyup",L),e.addEventListener("touchstart",R)}});const M=e=>({noBind:!0,startScale:e,startX:u,startY:p,smoothScroll:!0,canvas:!0,...o.panzoomOption}),j=e=>{const{scale:t,dimsOut:n}=e.detail;if(n){r("update:scale",t),h.value=t;const o=(n.parent.left-n.elem.left)/t,a=(n.parent.top-n.elem.top)/t;i.value=o,r("zoomchange",e.detail),l.value=a}},z=()=>{if(a.value=document.querySelector(".canvasedit"),a.value){let e=o.scale;o.autoCenter&&(e=N()),w.value=Ae(a.value,M(e)),a.value&&a.value.addEventListener("panzoomchange",j)}},N=()=>{const e=k.value*(1-o.paddingRatio)/o.canvasWidth,t=S.value*(1-o.paddingRatio)/o.canvasHeight,n=Math.min(e,t);return u=k.value/2-o.canvasWidth/2,p=n<1?(o.canvasHeight*n/2-o.canvasHeight/2)/n-(o.canvasHeight*n-S.value)/n/2:n>1?(o.canvasHeight*n-o.canvasHeight)/2/n+(S.value-o.canvasHeight*n)/n/2:0,n},H=()=>{var e;return null==(e=w.value)?void 0:e.reset()},U=()=>{var e;return null==(e=w.value)?void 0:e.zoomIn()},F=()=>{var e;return null==(e=w.value)?void 0:e.zoomOut()},G=()=>{b.value=!b.value,r("onCornerClick",b.value)},$=e=>{r("update:lockLine",e)},X=c(()=>o.thick+"px");return d([()=>o.isShowReferLine],()=>{b.value=o.isShowReferLine}),d([()=>o.canvasWidth,()=>o.canvasHeight,()=>o.width,()=>o.height],()=>{z()}),d(()=>o.panzoomOption,()=>{var e;null==(e=w.value)||e.setOptions(M(o.scale))},{deep:!0}),t({initPanzoom:z,panzoomInstance:w,reset:H,zoomIn:U,zoomOut:F,cursorClass:_}),(e,t)=>(g(),m("div",Te,[I(e.$slots,"btn",{reset:H,zoomIn:U,zoomOut:F}),y("div",{class:D(["canvasedit-parent",_.value]),style:O(C.value)},[y("div",{class:D(["canvasedit",_.value])},[I(e.$slots,"default")],2)],6),B(v(se,{style:O({marginLeft:e.thick+"px",width:k.value+"px"}),vertical:!1,width:e.width,height:e.thick,"is-show-refer-line":b.value,thick:e.thick,start:i.value,"start-other":l.value,lines:e.lines,"select-start":e.shadow.x,"snap-threshold":e.snapThreshold,"snaps-obj":e.snapsObj,"select-length":e.shadow.width,scale:h.value,palette:x.value,"canvas-width":e.canvasWidth,"show-shadow-text":e.showShadowText,"canvas-height":e.canvasHeight,rate:e.rate,"grid-ratio":e.gridRatio,"lock-line":e.lockLine,onChangeLineState:$},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","snap-threshold","snaps-obj","select-length","scale","palette","canvas-width","show-shadow-text","canvas-height","rate","grid-ratio","lock-line"]),[[V,e.showRuler]]),B(v(se,{style:O({marginTop:e.thick+"px",top:0,height:S.value+"px"}),vertical:!0,width:e.thick,height:e.height,"is-show-refer-line":b.value,thick:e.thick,start:l.value,"start-other":i.value,lines:e.lines,"select-start":e.shadow.y,"select-length":e.shadow.height,"snap-threshold":e.snapThreshold,"snaps-obj":e.snapsObj,scale:h.value,palette:x.value,"canvas-width":e.canvasWidth,"canvas-height":e.canvasHeight,"show-shadow-text":e.showShadowText,rate:e.rate,"grid-ratio":e.gridRatio,"lock-line":e.lockLine,onChangeLineState:$},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","select-length","snap-threshold","snaps-obj","scale","palette","canvas-width","canvas-height","show-shadow-text","rate","grid-ratio","lock-line"]),[[V,e.showRuler]]),B(y("a",{class:"corner",style:O(E.value),onClick:G},null,4),[[V,e.showRuler]])]))}});var Ie=(e=>(e.TableList="TableList",e.CrossDomainInput="CrossDomainInput",e.TableHeaderSetting="TableHeaderSetting",e.InputOrSelectData="InputOrSelectData",e.ElCascaderProps="ElCascaderProps",e.webViewContainer="webViewContainer",e.TabletdSelect="tabletdSelect",e.Td="td",e.Tr="tr",e.Table="table",e.ElSliderMarks="ElSliderMarks",e.ElRateColors="ElRateColors",e.ImageContainer="ImageContainer",e.TwoCodeContainer="TwoCodeContainer",e.BarCodeContainer="BarCodeContainer",e.tableContainer="tableContainer",e.RichTextContainer="RichTextContainer",e.RichTextContent="RichTextContent",e.lineContainer="lineContainer",e.uploadImg="uploadImg",e.textContainer="textContainer",e.ElCheckboxs="ElCheckboxs",e.ElRadios="ElRadios",e.ElSelectOption="ElSelectOption",e.ElRowAttrs="ElRowAttrs",e.ElAffix="ElAffix",e.ElAlert="ElAlert",e.ElAside="ElAside",e.ElAutoResizer="ElAutoResizer",e.ElAutocomplete="ElAutocomplete",e.ElAvatar="ElAvatar",e.ElBacktop="ElBacktop",e.ElBadge="ElBadge",e.ElBreadcrumb="ElBreadcrumb",e.ElBreadcrumbItem="ElBreadcrumbItem",e.ElButton="ElButton",e.ElButtonGroup="ElButtonGroup",e.ElCalendar="ElCalendar",e.ElCard="ElCard",e.ElCarousel="ElCarousel",e.ElCarouselItem="ElCarouselItem",e.ElCascader="ElCascader",e.ElCascaderPanel="ElCascaderPanel",e.ElCheckTag="ElCheckTag",e.ElCheckbox="ElCheckbox",e.ElCheckboxButton="ElCheckboxButton",e.ElCheckboxGroup="ElCheckboxGroup",e.ElCol="ElCol",e.ElCollapse="ElCollapse",e.ElCollapseItem="ElCollapseItem",e.ElCollapseTransition="ElCollapseTransition",e.ElCollection="ElCollection",e.ElCollectionItem="ElCollectionItem",e.ElColorPicker="ElColorPicker",e.ElConfigProvider="ElConfigProvider",e.ElContainer="ElContainer",e.ElCountdown="ElCountdown",e.ElDatePicker="ElDatePicker",e.ElDescriptions="ElDescriptions",e.ElDescriptionsItem="ElDescriptionsItem",e.ElDialog="ElDialog",e.ElDivider="ElDivider",e.ElDrawer="ElDrawer",e.ElDropdown="ElDropdown",e.ElDropdownItem="ElDropdownItem",e.ElDropdownMenu="ElDropdownMenu",e.ElEmpty="ElEmpty",e.ElFooter="ElFooter",e.ElForm="ElForm",e.ElFormItem="ElFormItem",e.ElHeader="ElHeader",e.ElIcon="ElIcon",e.ElImage="ElImage",e.ElImageViewer="ElImageViewer",e.ElInfiniteScroll="ElInfiniteScroll",e.ElInput="ElInput",e.ElInputNumber="ElInputNumber",e.ElLink="ElLink",e.ElLoading="ElLoading",e.ElLoadingDirective="ElLoadingDirective",e.ElLoadingService="ElLoadingService",e.ElMain="ElMain",e.ElMenu="ElMenu",e.ElMenuItem="ElMenuItem",e.ElMenuItemGroup="ElMenuItemGroup",e.ElMessage="ElMessage",e.ElMessageBox="ElMessageBox",e.ElNotification="ElNotification",e.ElOption="ElOption",e.ElOptionGroup="ElOptionGroup",e.ElOverlay="ElOverlay",e.ElPageHeader="ElPageHeader",e.ElPagination="ElPagination",e.ElPopconfirm="ElPopconfirm",e.ElPopover="ElPopover",e.ElPopoverDirective="ElPopoverDirective",e.ElPopper="ElPopper",e.ElPopperArrow="ElPopperArrow",e.ElPopperContent="ElPopperContent",e.ElPopperTrigger="ElPopperTrigger",e.ElProgress="ElProgress",e.ElRadio="ElRadio",e.ElRadioButton="ElRadioButton",e.ElRadioGroup="ElRadioGroup",e.ElRate="ElRate",e.ElResult="ElResult",e.ElRow="ElRow",e.ElScrollbar="ElScrollbar",e.ElSelect="ElSelect",e.ElSelectV2="ElSelectV2",e.ElSkeleton="ElSkeleton",e.ElSkeletonItem="ElSkeletonItem",e.ElSlider="ElSlider",e.ElSpace="ElSpace",e.ElStatistic="ElStatistic",e.ElStep="ElStep",e.ElSteps="ElSteps",e.ElSubMenu="ElSubMenu",e.ElSwitch="ElSwitch",e.ElTabPane="ElTabPane",e.ElTable="ElTable",e.ElTableColumn="ElTableColumn",e.ElTableV2="ElTableV2",e.ElTabs="ElTabs",e.ElTag="ElTag",e.ElText="ElText",e.ElTimePicker="ElTimePicker",e.ElTimeSelect="ElTimeSelect",e.ElTimeline="ElTimeline",e.ElTimelineItem="ElTimelineItem",e.ElTooltip="ElTooltip",e.ElTour="ElTour",e.ElTourStep="ElTourStep",e.ElTransfer="ElTransfer",e.ElTree="ElTree",e.ElTreeSelect="ElTreeSelect",e.ElTreeV2="ElTreeV2",e.ElUpload="ElUpload",e.ElWatermark="ElWatermark",e))(Ie||{}),De=(e=>(e.FORMITEM="FORMITEM",e.COMPONENT="COMPONENT",e.LAYOUT="LAYOUT",e.STYLE="STYLE",e))(De||{}),Le=(e=>(e.IMG="img",e.TEXT="text",e))(Le||{}),Re=(e=>(e.Parameter="Parameter",e.API="API",e))(Re||{});function Me(e){let t;if(window.screen.deviceXDPI)t=window.screen.deviceXDPI;else{const e=document.createElement("div");e.style.cssText="width:1in;height:0;visibility:hidden;position:absolute",document.body.appendChild(e),t=e.offsetWidth,document.body.removeChild(e)}const n=e/25.4;return Math.round(n*t)}const je=async(e,t,n)=>{var o;e.attrsJson&&(null==(o=e.attrsJson)||o.forEach(e=>{e.prop==t&&(e.defaultValue=n)}))},ze=e=>{var t;e.attrsJson&&(null==(t=e.attrsJson)||t.forEach(e=>{var t;"label"==e.prop?e.defaultValue=(t=5,n.mock(`@cname(${t})`).replace(/\s+/g,"")):"prop"==e.prop&&(e.defaultValue=n.mock("@name(11)").replace(/\s+/g,""))}))},Ne=(e={w:80,h:20})=>[{label:"字段",type:De.FORMITEM,prop:"prop",defaultValue:"",componentName:Ie.InputOrSelectData,attrs:{placeholder:"请输入"},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"宽",type:De.STYLE,prop:"w",defaultValue:e.w,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"高",type:De.STYLE,prop:"h",defaultValue:e.h,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"x轴",type:De.STYLE,prop:"x",defaultValue:0,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"y轴",type:De.STYLE,prop:"y",defaultValue:0,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],Be=async(e,t)=>{t.type==De.FORMITEM?"prop"==t.prop&&null!=t.defaultValue&&null!=t.defaultValue&&""!=t.defaultValue&&(e[t.prop]=t.defaultValue):t.type==De.COMPONENT?null!==t.defaultValue&&void 0!==t.defaultValue&&""!==t.defaultValue&&z(()=>{t.componentName==Ie.ElInputNumber?e.attrs[t.prop]=Number(t.defaultValue):e.attrs[t.prop]=t.defaultValue}):t.type==De.STYLE&&null!==t.defaultValue&&void 0!==t.defaultValue&&""!==t.defaultValue&&z(()=>{e.styles[t.prop]=t.defaultValue})},Ve=(e,t,n)=>{n.forEach((n,o)=>{"defaultValue"==n.prop?e.value[t]=n.defaultValue:"rowColData"==n.prop&&n.defaultValue.forEach(n=>{n.children.forEach(n=>{n.dataType&&n.key&&(e.value[t][n.key]=n.defaultValue?n.defaultValue:"")})})})},He=e=>{const t={};function n(e){var o;for(let r=0;r<e.length;r++){const a=e[r];if(a.prop){let e=null==(o=a.attrsJson)?void 0:o.find(e=>"defaultValue"==e.prop);t[a.prop]=(null==e?void 0:e.defaultValue)?null==e?void 0:e.defaultValue:""}if(a.componentName==Ie.tableContainer)for(let e=0;e<a.attrs.rowColData.length;e++){const n=a.attrs.rowColData[e];if(n.children)for(let e=0;e<n.children.length;e++){const o=n.children[e];o.key&&(t[o.key]=o.defaultValue?o.defaultValue:"")}}a.children&&n(a.children)}}for(let o=0;o<e.length;o++)n(e[o].renderList);return function(e){const t={};for(const[n,o]of Object.entries(e)){const e=n.split(".");let r=t;for(let t=0;t<e.length;t++){const n=e[t];r[n]||(r[n]=t===e.length-1?o:{}),r=r[n]}}return t}(t)},Ue=e=>{let t=e.replace(/^#/,"");if(t&&3===t.length&&(t=t.split("").map(e=>e+e).join("")),6!==t.length)throw new Error("Invalid hexadecimal color value. It must be 6 characters long or 3 characters long for shorthand.");return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]},Fe=(e,t)=>t.includes(".")?(t.split(".").forEach(t=>e=e[t]??"--"),e):e[t]??"--",Ge=e=>({...e,height:e.h+"px",width:e.w+"px"}),$e=[...Ne({w:200,h:60}),{type:De.COMPONENT,label:"条形码格式",prop:"format",defaultValue:null,componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"编码内容",prop:"defaultValue",defaultValue:"123456789",componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"线颜色",prop:"lineColor",defaultValue:"#000",componentName:Ie.ElColorPicker,attrs:{},zIndex:0},{label:"是否显示值",prop:"displayValue",type:De.COMPONENT,defaultValue:!0,componentName:Ie.ElSwitch,attrs:{},zIndex:0},{label:"条形码宽度",type:De.COMPONENT,prop:"width",defaultValue:2,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"条形码高度",type:De.COMPONENT,prop:"height",defaultValue:30,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"外边距",type:De.COMPONENT,prop:"margin",defaultValue:10,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"字体大小",type:De.COMPONENT,prop:"fontSize",defaultValue:12,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],Xe=Object.freeze(Object.defineProperty({__proto__:null,BarCodeContainer:$e},Symbol.toStringTag,{value:"Module"})),qe=[...Ne({w:80,h:80}),{type:De.COMPONENT,label:"图片",prop:"defaultValue",defaultValue:"https://qz.io/assets/im g/clients/pakaneo.63268af2.webp",componentName:Ie.uploadImg,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"网络地址",prop:"defaultValue",defaultValue:"https://qz.io/assets/img/clients/pakaneo.63268af2.webp",componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],Ye=Object.freeze(Object.defineProperty({__proto__:null,ImageContainer:qe},Symbol.toStringTag,{value:"Module"})),We=[...Ne({w:600,h:900}),{type:De.COMPONENT,label:"富文本内容",prop:"defaultValue",defaultValue:"请输入内容",componentName:Ie.RichTextContent,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],Je=Object.freeze(Object.defineProperty({__proto__:null,RichTextContainer:We},Symbol.toStringTag,{value:"Module"})),Qe=[...Ne({w:80,h:80}),{type:De.COMPONENT,label:"尺寸大小",prop:"size",defaultValue:100,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"icon",prop:"logoSrc",defaultValue:null,componentName:Ie.uploadImg,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"icon网络地址",prop:"logoSrc",defaultValue:null,componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:" change"}],zIndex:0},{type:De.COMPONENT,label:"编码内容",prop:"defaultValue",defaultValue:"https://qz.io/assets/img/clients/pakaneo.63268af2.webp",componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.COMPONENT,label:"背景色",prop:"backgroundColor",defaultValue:"#FFF",componentName:Ie.ElColorPicker,attrs:{},zIndex:0},{type:De.COMPONENT,label:"容错级别 0-3",prop:"correctLevel",defaultValue:1,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",min:0,max:3},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],Ze=Object.freeze(Object.defineProperty({__proto__:null,TwoCodeContainer:Qe},Symbol.toStringTag,{value:"Module"})),Ke=[...Ne(),{type:De.STYLE,label:"颜色",prop:"background",defaultValue:"#000",componentName:Ie.ElColorPicker,attrs:{},zIndex:0}],et=Object.freeze(Object.defineProperty({__proto__:null,lineContainer:Ke},Symbol.toStringTag,{value:"Module"})),tt=[...Ne({w:500,h:300}).filter(e=>"prop"!=e.prop),{type:De.COMPONENT,label:"单元格数据",prop:"rowColData",defaultValue:[],componentName:Ie.TabletdSelect,attrs:{placeholder:"请输入",rows:"2",readonly:!0,type:"textarea"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],nt=Object.freeze(Object.defineProperty({__proto__:null,tableContainer:tt},Symbol.toStringTag,{value:"Module"})),ot=[...Ne({w:500,h:300}),{type:De.COMPONENT,label:"表格数据",prop:"columns",defaultValue:[],componentName:Ie.TableHeaderSetting,attrs:{},rules:[{required:!0,message:"",trigger:"change"}]}],rt=Object.freeze(Object.defineProperty({__proto__:null,tableListContainer:ot},Symbol.toStringTag,{value:"Module"})),at=[...Ne(),{type:De.COMPONENT,label:"默认值",prop:"defaultValue",defaultValue:"请输入文字",componentName:Ie.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:De.STYLE,label:"文本颜色",prop:"color",defaultValue:"#000",componentName:Ie.ElColorPicker,attrs:{},zIndex:0},{label:"对齐方式",prop:"textAlign",type:De.STYLE,defaultValue:"left",componentName:Ie.ElSelect,attrs:{placeholder:"请选择类型",clearable:!0},rules:[{required:!0,message:"类型不能为空",trigger:"change"}],children:[{componentName:Ie.ElOption,value:"center",label:"居中"},{componentName:Ie.ElOption,value:"left",label:"左对齐"},{componentName:Ie.ElOption,value:"right",label:"右对齐"}],zIndex:0},{label:"字体类型",prop:"fontFamily",type:De.STYLE,defaultValue:"雅黑",componentName:Ie.ElSelect,attrs:{placeholder:"请选择类型",clearable:!0},rules:[{required:!0,message:"类型不能为空",trigger:"change"}],children:[{componentName:Ie.ElOption,value:"宋体",label:"宋体"},{componentName:Ie.ElOption,label:"雅黑",value:"雅黑"},{componentName:Ie.ElOption,label:"Arial",value:"Arial"}],zIndex:0},{label:"字体大小",type:De.STYLE,prop:"fontSize",defaultValue:12,componentName:Ie.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],it=Object.freeze(Object.defineProperty({__proto__:null,textContainer:at},Symbol.toStringTag,{value:"Module"})),lt=[...Ne({w:600,h:900}),{type:De.COMPONENT,label:"网址(不能跨域，跨域就报错了)",prop:"defaultValue",defaultValue:"https://www.baidu.com/",componentName:Ie.CrossDomainInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],st=Object.freeze(Object.defineProperty({__proto__:null,webViewContainer:lt},Symbol.toStringTag,{value:"Module"})),ct=Object.assign({"./lib/BarCodeContainer.ts":Xe,"./lib/ImageContainer.ts":Ye,"./lib/RichTextContainer.ts":Je,"./lib/TwoCodeContainer.ts":Ze,"./lib/lineContainer.ts":et,"./lib/tableContainer.ts":nt,"./lib/tableListContainer.ts":rt,"./lib/textContainer.ts":it,"./lib/webViewContainer.ts":st});let ut={};Object.keys(ct).forEach(e=>{const t=ct[e]||{};Object.assign(ut,t)});const dt={...ut},pt=[{width:297,height:420,title:"A3"},{width:210,height:297,title:"A4"},{width:148,height:210,title:"A5"},{width:353,height:500,title:"B3"},{width:250,height:353,title:"B4"},{width:176,height:250,title:"B5"},{type:"custom",title:"设置"}],ft={componentName:Ie.RichTextContainer,title:"富文本",prop:"",attrs:{},active:!1,attrsJson:dt.RichTextContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},ht={componentName:Ie.webViewContainer,title:"网页",prop:"",attrs:{},active:!1,attrsJson:dt.webViewContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},gt=[{componentName:Ie.lineContainer,attrsJson:dt.lineContainer,title:"线段",prop:"",attrs:{},type:De.COMPONENT,styles:{resizable:!0,x:0,y:0,draggable:!0},active:!1,zIndex:0},ht,ft,{componentName:Ie.textContainer,attrsJson:dt.textContainer,title:"文本",prop:"",attrs:{},type:De.COMPONENT,active:!1,styles:{resizable:!0,active:!0,x:0,y:0,draggable:!0},zIndex:0},{componentName:Ie.TwoCodeContainer,attrsJson:dt.TwoCodeContainer,title:"二维码",attrs:{},prop:"",active:!1,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},{title:"条形码",prop:"",componentName:Ie.BarCodeContainer,attrsJson:dt.BarCodeContainer,attrs:{},active:!1,styles:{x:0,y:0,resizable:!1,draggable:!0},zIndex:0},{componentName:Ie.ImageContainer,title:"图片",prop:"",active:!1,attrs:{},attrsJson:dt.ImageContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},{componentName:Ie.TableList,title:"列表",prop:"",active:!1,attrs:{},attrsJson:dt.tableListContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0}],mt={componentName:Ie.tableContainer,title:"表格",prop:"",attrs:{},active:!1,attrsJson:dt.tableContainer,styles:{x:0,y:0,resizable:!0,draggable:!0}},vt="undefined"!=typeof window,bt=()=>{},yt=e=>e();function wt(e,t,n={}){const{eventFilter:o=yt}=n,r=
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(n,["eventFilter"]);return d(e,(a=o,i=t,function(...e){a(()=>i.apply(this,e),{fn:i,thisArg:this,args:e})}),r);var a,i}function _t(e){H()&&F(e)}const xt=vt?window:void 0;function Et(e,t,{window:n=xt}={}){const o=s(""),r=c(()=>{var e;return function(e){var t,n;const o=E(e);return null!==(n=null===(t=o)||void 0===t?void 0:t.$el)&&void 0!==n?n:o}(t)||(null===(e=null==n?void 0:n.document)||void 0===e?void 0:e.documentElement)});return d(r,t=>{t&&n&&(o.value=n.getComputedStyle(t).getPropertyValue(e))},{immediate:!0}),d(o,t=>{var n;(null===(n=r.value)||void 0===n?void 0:n.style)&&r.value.style.setProperty(e,t)}),o}const Ct={boolean:{read:e=>null!=e?"true"===e:null,write:e=>String(e)},object:{read:e=>e?JSON.parse(e):null,write:e=>JSON.stringify(e)},number:{read:e=>null!=e?Number.parseFloat(e):null,write:e=>String(e)},any:{read:e=>null!=e?e:null,write:e=>String(e)},string:{read:e=>null!=e?e:null,write:e=>String(e)}};function Ot(e,t,n=(null==xt?void 0:xt.localStorage),o={}){var r;const{flush:a="pre",deep:i=!0,listenToStorageChanges:l=!0,window:c=xt,eventFilter:u}=o,p=s(t),f=null!==(r=o.serializer)&&void 0!==r?r:Ct.string;function h(o){if(n&&(!o||o.key===e))try{const r=o?o.newValue:n.getItem(e);null==r?(p.value=t,n.setItem(e,f.write(t))):p.value=f.read(r)}catch(r){console.warn(r)}}return h(),c&&l&&function(...e){let t,n,o,r;if("string"==typeof e[0]?([n,o,r]=e,t=xt):[t,n,o,r]=e,!t)return bt;let a=bt;const i=d(()=>E(t),e=>{a(),e&&(e.addEventListener(n,o,r),a=()=>{e.removeEventListener(n,o,r),a=bt})},{immediate:!0,flush:"post"}),l=()=>{i(),a()};_t(l)}(c,"storage",h),wt(p,()=>{if(n)try{null==p.value?n.removeItem(e):n.setItem(e,f.write(p.value))}catch(t){console.warn(t)}},{flush:a,deep:i,eventFilter:u}),p}function kt(e){return function(e,t={}){const{window:n=xt}=t;if(!n)return s(!1);const o=n.matchMedia(e),r=s(o.matches),a=e=>{r.value=e.matches};return"addEventListener"in o?o.addEventListener("change",a):o.addListener(a),_t(()=>{"removeEventListener"in o?o.removeEventListener("change",a):o.removeListener(a)}),r}("(prefers-color-scheme: dark)",e)}function St(e={}){const{selector:t="html",attribute:n="class",valueDark:o="dark",valueLight:r="",window:a=xt,storage:i=(null==xt?void 0:xt.localStorage),storageKey:l="vueuse-color-scheme",listenToStorageChanges:u=!0}=e,p=kt({window:a}),h=null==l?s("auto"):Ot(l,"auto",i,{window:a,listenToStorageChanges:u}),g=c({get:()=>"auto"===h.value?p.value:"dark"===h.value,set(e){e===p.value?h.value="auto":h.value=e?"dark":"light"}}),m=e.onChanged||(e=>{const i=null==a?void 0:a.document.querySelector(t);"class"===n?(null==i||i.classList.toggle(o,e),r&&(null==i||i.classList.toggle(r,!e))):null==i||i.setAttribute(n,e?o:r)});return d(g,m,{flush:"post"}),function(e,t=!0){H()?f(e):t?e():z(e)}(()=>m(g.value)),g}var At,Tt;(Tt=At||(At={})).UP="UP",Tt.RIGHT="RIGHT",Tt.DOWN="DOWN",Tt.LEFT="LEFT",Tt.NONE="NONE";const Pt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},It={t:"1724918368981",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4319"},Dt=["fill"],Lt=Pt(A({__name:"settingIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",It,[y("path",{d:"M85.333333 768h298.666667v85.333333H85.333333v-85.333333z m0-298.666667h384v85.333334H85.333333v-85.333334z m0-298.666666h853.333334v85.333333H85.333333V170.666667z m796.757334 385.066666l49.322666-16.682666 42.666667 73.898666-39.082667 34.346667a171.392 171.392 0 0 1 0 70.741333l39.082667 34.346667-42.666667 73.898667-49.322666-16.682667c-17.493333 15.786667-38.314667 27.946667-61.226667 35.413333L810.666667 896h-85.333334l-10.24-51.029333a170.496 170.496 0 0 1-61.184-35.413334l-49.322666 16.725334-42.666667-73.898667 39.082667-34.346667a171.392 171.392 0 0 1 0-70.741333l-39.082667-34.346667 42.666667-73.898666 49.322666 16.682666c17.493333-15.786667 38.314667-27.946667 61.226667-35.413333L725.333333 469.333333h85.333334l10.24 51.029334c22.869333 7.424 43.690667 19.626667 61.184 35.413333v-0.042667zM768 725.333333a42.666667 42.666667 0 1 0 0-85.333333 42.666667 42.666667 0 0 0 0 85.333333z","p-id":"4320",fill:e.fill},null,8,Dt)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/settingIcon.vue"]]),Rt={t:"1724918949032",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6150"},Mt=["fill"],jt=Pt(A({__name:"RightIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",Rt,[y("path",{d:"M678.4 499.2L312.832 119.296c-13.824-13.824-13.824-36.352 0-50.176 13.824-13.824 35.84-13.824 49.664 0l400.896 404.992c13.824 13.824 13.824 36.352 0 50.176l-400.896 404.992c-13.824 13.824-35.84 13.824-49.664 0-13.824-13.824-13.824-36.352 0-50.176l365.568-379.904z",fill:e.fill,"p-id":"6151"},null,8,Mt)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/RightIcon.vue"]]),zt={t:"1724919140255",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7270"},Nt=["fill"],Bt=Pt(A({__name:"downIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",zt,[y("path",{d:"M904 332c0-8.189-3.124-16.379-9.372-22.628-12.497-12.496-32.759-12.496-45.256 0L512 646.745 174.628 309.372c-12.497-12.496-32.758-12.496-45.255 0-12.497 12.498-12.497 32.758 0 45.256l360 360c12.497 12.496 32.758 12.496 45.255 0l360-360C900.876 348.379 904 340.189 904 332z",fill:e.fill,"p-id":"7271"},null,8,Nt)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/downIcon.vue"]]),Vt={t:"1724979512335",class:"icon",viewBox:"0 0 1027 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5409"},Ht=["fill"],Ut=Pt(A({__name:"paperSizeIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",Vt,[y("path",{d:"M979.968 0v44.032H269.312V0h-47.104v135.168h47.104V91.136h710.656v44.032h47.104V0zM91.136 262.144H135.168V215.04H0v47.104h44.032v714.752H0v47.104H135.168v-47.104H91.136zM871.424 215.04H222.208v808.96h804.864V391.168L871.424 215.04z m-8.192 634.88H387.072v-47.104h476.16V849.92z m0-143.36H387.072v-47.104h476.16V706.56z m0-143.36H387.072v-47.104h476.16V563.2z","p-id":"5410",fill:e.fill},null,8,Ht)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/paperSizeIcon.vue"]]),Ft={t:"1728700369302",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6985"},Gt=["fill"],$t=Pt(A({__name:"dataSourceIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",Ft,[n[0]||(n[0]=y("path",{d:"M883.5 96.2H140c-6.6 0-12 5.4-12 12V916c0 6.6 5.4 12 12 12h743.5c6.6 0 12-5.4 12-12l0.1-807.8c-0.1-6.6-5.5-12-12.1-12z m-685.5 64h627.5c3.3 0 6 2.7 6 6v116c0 3.3-2.7 6-6 6H198c-3.3 0-6-2.7-6-6v-116c0-3.3 2.7-6 6-6zM825.4 864H198c-3.3 0-6-2.7-6-6V742c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6v116c-0.1 3.4-2.7 6-6.1 6z m0-192H198c-3.3 0-6-2.7-6-6V551.4c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6V666c-0.1 3.4-2.7 6-6.1 6zM192 474V359.4c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6V474c0 3.3-2.7 6-6 6H198c-3.4 0-6-2.6-6-6z",fill:"#040000","p-id":"6986"},null,-1)),n[1]||(n[1]=y("path",{d:"M265.437891 246.56086a32 32 0 1 0 45.299044-45.210581 32 32 0 1 0-45.299044 45.210581Z",fill:"#040000","p-id":"6987"},null,-1)),n[2]||(n[2]=y("path",{d:"M265.436844 438.556329a32 32 0 1 0 45.299044-45.210581 32 32 0 1 0-45.299044 45.210581Z",fill:"#040000","p-id":"6988"},null,-1)),n[3]||(n[3]=y("path",{d:"M265.493962 630.627162a32 32 0 1 0 45.209791-45.299833 32 32 0 1 0-45.209791 45.299833Z",fill:"#040000","p-id":"6989"},null,-1)),y("path",{d:"M265.430553 822.654293a32 32 0 1 0 45.20979-45.299833 32 32 0 1 0-45.20979 45.299833Z",fill:e.fill,"p-id":"6990"},null,8,Gt)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/dataSourceIcon.vue"]]),Xt={t:"1729491969344",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7878"},qt=["fill"],Yt=Pt(A({__name:"settingPrintIcon",props:{fill:{type:String,required:!0}},setup:e=>(P({}),(t,n)=>(g(),m("svg",Xt,[y("path",{d:"M256 755.2l55.466667-17.066667 17.066666 12.8c21.333333 12.8 38.4 25.6 64 38.4l21.333334 8.533334 8.533333 55.466666h145.066667l12.8-55.466666 21.333333-8.533334c21.333333-8.533333 42.666667-21.333333 64-38.4l17.066667-12.8 55.466666 17.066667 72.533334-128-42.666667-38.4 4.266667-21.333333c0-12.8 4.266667-25.6 4.266666-38.4s0-25.6-4.266666-38.4l-4.266667-17.066667 42.666667-38.4-72.533334-128-55.466666 21.333333-17.066667-12.8c-21.333333-12.8-38.4-25.6-64-38.4l-21.333333-8.533333-12.8-55.466667H422.4l-12.8 55.466667-21.333333 8.533333c-21.333333 8.533333-42.666667 21.333333-59.733334 34.133334l-21.333333 17.066666L256 311.466667l-72.533333 128 42.666666 38.4-4.266666 21.333333c0 12.8-4.266667 25.6-4.266667 38.4s0 25.6 4.266667 38.4l4.266666 21.333333-42.666666 38.4L256 755.2z m-76.8-179.2c0-12.8-4.266667-25.6-4.266667-42.666667s0-29.866667 4.266667-42.666666L128 443.733333l106.666667-183.466666 64 21.333333c21.333333-17.066667 46.933333-29.866667 72.533333-42.666667L388.266667 170.666667h213.333333l17.066667 68.266666c25.6 12.8 51.2 25.6 72.533333 42.666667l64-21.333333 106.666667 183.466666-51.2 46.933334c0 12.8 4.266667 25.6 4.266666 42.666666s0 29.866667-4.266666 42.666667l51.2 46.933333-106.666667 183.466667-64-21.333333c-21.333333 17.066667-46.933333 29.866667-72.533333 42.666666l-17.066667 68.266667h-213.333333l-17.066667-68.266667c-25.6-12.8-51.2-25.6-72.533333-42.666666l-64 21.333333L128 622.933333l51.2-46.933333z m315.733333 64c59.733333 0 106.666667-46.933333 106.666667-106.666667S554.666667 426.666667 494.933333 426.666667s-106.666667 46.933333-106.666666 106.666666 46.933333 106.666667 106.666666 106.666667z m0 42.666667c-81.066667 0-149.333333-68.266667-149.333333-149.333334S413.866667 384 494.933333 384s149.333333 68.266667 149.333334 149.333333-68.266667 149.333333-149.333334 149.333334z",fill:e.fill,"p-id":"7879"},null,8,qt)])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/settingPrintIcon.vue"]]),Wt=r({id:"useEasyPrintStore",state:()=>({scale:1,offset:{x:0,y:0},scaleX:()=>{},activeTd:"",richTextContent:null,scaleY:()=>{},currentSelected:[],controlLeft:!1,down:!1,dataSource:[],webViewLoadingTime:4e3,dataSourceType:Re.Parameter,renderType:""}),getters:{getWebViewLoadingTime:e=>e.webViewLoadingTime,getRichTextContent:e=>e.richTextContent,getScale:e=>e.scale,getOffset:e=>e.offset,getScaleX:e=>e.scaleX,getScaleY:e=>e.scaleY,getCurrentSelected:e=>e.currentSelected,getControlLeft:e=>e.controlLeft,getDown:e=>e.down,getActiveTd:e=>e.activeTd,getDataCource:e=>e.dataSource,getRenderType:e=>e.renderType,getDataSourceType:e=>e.dataSourceType},actions:{setWebViewLoadingTime(e){this.webViewLoadingTime=e},setRichTextContent(e){this.richTextContent=e},setScale(e){this.scale=e},setOffset(e){this.offset=e},setScaleX(e){this.scaleX=e},setScaleY(e){this.scaleY=e},setCurrentSelected(e){this.currentSelected=e},setControlLeft(e){this.controlLeft=e},setDown(e){this.down=e},setActiveTd(e){this.activeTd=e},setDataCource(e){this.dataSource=e},setRenderType(e){this.renderType=e},setDataSourceType(e){this.dataSourceType=e}}}),Jt=r({id:"useRenderListStoreStore",state:()=>({renderList:[],activeData:void 0,targetChart:{hoverId:void 0,selectId:[]},pageData:[],page:1,pageOption:{height:"",width:""},printOption:{}}),getters:{getPageData:e=>e.pageData,getPrintOption:e=>e.printOption,getPageOption:e=>e.pageOption,getRenderList:e=>e.renderList,getActiveData:e=>e.activeData,getPage:e=>e.page},actions:{removePageData(){this.pageData.pop()},updatePageDataItem(e,t){let n=e.pageIndex;this.pageData[n].renderList=this.pageData[n].renderList.filter(t=>t.id!=e.id),e.pageIndex=t,this.pageData[t].renderList.push(e)},setPageDataItem(e,t){e.pageIndex=t,e.styles.zIndex=this.pageData[t].renderList.length,this.pageData[t].renderList.push(e),this.setActiveData(e)},addPageData(e){this.pageData.push(e)},setPageData(e){this.pageData=e},setPrintOption(e){this.printOption=e},setPage(e){this.page=e},setPageOption(e){this.pageOption=e},setActiveData(e){this.activeData=e,this.activeData},setUpdataActiveStyles(e,t,n){this.renderList.forEach(o=>{o.id==n&&(o.styles[e]=t)})},allDraggable(e){this.pageData.forEach(t=>{t.renderList.forEach(t=>{t.styles.draggable=e,t.styles.active=!1})})},setActiveDraggable(e){this.pageData.forEach(t=>{t.renderList.forEach(t=>{var n;(null==(n=this.activeData)?void 0:n.id)==t.id&&(t.styles.draggable=e)})})},deleteActiveData(){this.pageData.forEach((e,t)=>{console.log("this.activeData :>> ",this.activeData),this.activeData&&this.activeData.pageIndex==t&&(e.renderList=e.renderList.filter(e=>{var t;return e.id!=(null==(t=this.activeData)?void 0:t.id)}),console.log("renderListItem :>> ",e),this.activeData=void 0)})},setItemZIndexTop(){if(this.activeData){let e=0;this.pageData.forEach((e,t)=>{e.renderList.forEach(e=>{t=Math.max(t,e.zIndex)})}),this.activeData.zIndex=e+1}},setItemZIndexBottom(){if(this.activeData){let e=0;this.pageData.forEach((e,t)=>{e.renderList.forEach(e=>{t=Math.min(t,e.zIndex)})}),this.activeData.zIndex=e-1}}}}),Qt=Pt(A({__name:"CustomComponent",props:{type:{type:String,default:""},element:{type:Object,required:!0},model:{type:Object,required:!0}},setup:e=>(P({}),s(""),(t,n)=>(g(),m("div",null,[(g(),x(j(e.element.componentName),{element:e.element,model:e.model},null,8,["element","model"]))])))}),[["__file","D:/work/public/easy-print/src/packages/easy-print/CustomComponent.vue"]]),Zt={class:"tableData"},Kt={key:0},en=["onMouseenter","onClick"],tn=Pt(A({__name:"tableData",props:{},emits:["handleTables"],setup(e,{emit:t}){const n=t;P({});const o=s(""),r=s(""),a=s(!1),i=()=>{a.value=!0},l=()=>{a.value=!1,o.value="",r.value=""};return(e,t)=>(g(),m("div",Zt,[y("div",{onMouseenter:i,onMouseleave:l},[I(e.$slots,"default",{},void 0,!0)],32),a.value?(g(),m("div",{key:0,class:"popoverBox",onMouseenter:i,onMouseleave:l},[o.value&&r.value?(g(),m("div",Kt," 行 "+L(o.value)+"- 列"+L(r.value),1)):k("",!0),(g(),m(w,null,_(6,e=>y("div",{class:"popoverItemBox",key:e},[(g(),m(w,null,_(18,t=>y("div",{key:t,onMouseenter:n=>{return a=e,i=t,o.value=a,void(r.value=i);var a,i},class:D(["popoverItem",[o.value>=e&&r.value>=t?"selectedTable":""]]),onClick:o=>(n("handleTables",e,t),void l())},null,42,en)),64))])),64))],32)):k("",!0)]))}}),[["__scopeId","data-v-3e314043"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/table/tableData.vue"]]),nn={class:"attr-title el-button--primary"},on=Pt(A({__name:"attrsContainer",props:{title:{type:String,default:""}},emits:["handleisunfold","handleDraggable"],setup(e,{emit:t}){const n=t;P({});const o=s(!0),r=e=>{n("handleDraggable",e)};s("");const a=()=>{o.value=!o.value};return(t,n)=>(g(),m("div",null,[y("div",{class:"attr-container",onMouseenter:n[0]||(n[0]=e=>r(!0))},[v(E(Lt),{fill:"#FFF",style:{width:"20px"}}),y("div",nn,L(e.title),1),o.value?k("",!0):(g(),x(E(jt),{key:0,onClick:a,fill:"#FFF",style:{width:"15px",cursor:"pointer"}})),o.value?(g(),x(E(Bt),{key:1,onClick:a,fill:"#FFF",style:{width:"15px",cursor:"pointer"}})):k("",!0)],32),y("div",{class:"attr-content",onMouseenter:n[1]||(n[1]=e=>r(!1)),style:O({height:o.value?"auto":"0"})},[I(t.$slots,"default",{},void 0,!0)],36)]))}}),[["__scopeId","data-v-c0c9b7d3"],["__file","D:/work/public/easy-print/src/packages/easy-print/attrsContainer.vue"]]),rn={class:"content__wrap"},an=Pt(A({__name:"index",props:{title:{type:String,default:""},showFullscreen:{type:Boolean,default:!1},width:{type:[String,Number],default:"850px"}},setup(e){P({});const t=s(null),n=s(!1);return(o,r)=>{const a=h("el-scrollbar"),i=h("el-dialog");return g(),x(i,M({ref_key:"dialogRef",ref:t},o.$attrs,{fullscreen:n.value,"destroy-on-close":"","append-to-body":!0,"lock-scroll":!1,"close-on-click-modal":!1,width:e.width,top:"10vh"}),U({header:b(()=>[I(o.$slots,"title",{},()=>[C(L(e.title),1)],!0)]),default:b(()=>[v(a,{class:D(n.value&&o.$slots.footer?"com-dialog__content--footer":n.value&&!o.$slots.footer?"com-dialog__content--fullscreen":"com-dialog__content")},{default:b(()=>[y("div",rn,[I(o.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])]),_:2},[o.$slots.footer?{name:"footer",fn:b(()=>[I(o.$slots,"footer",{},void 0,!0)]),key:"0"}:void 0]),1040,["fullscreen","width"])}}}),[["__scopeId","data-v-091b437b"],["__file","D:/work/public/easy-print/src/packages/easy-print/Dialog/index.vue"]]);function ln(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sn(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}),n}const cn=new Proxy({},{get(e,t){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),un=sn(Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})));var dn,pn;dn={exports:{}},pn=function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var e={VERSION:"2.2.4",DEBUG:!1,log:{trace:function(){e.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){e.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,shutdown:!1,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(t,n,o){if(e.websocket.shutdown)o(new Error("Connection attempt cancelled by user"));else{if(t.port.secure.length)t.port.insecure.length||t.usingSecure||(e.log.trace("No insecure ports specified - forcing secure connection"),t.usingSecure=!0);else{if(!t.port.insecure.length)return void o(new Error("No ports have been specified to connect over"));t.usingSecure&&(e.log.error("No secure ports specified - forcing insecure connection"),t.usingSecure=!1)}var r,a=function(){if(e.websocket.shutdown)o(new Error("Connection attempt cancelled by user"));else{if(t.port.portIndex++,t.usingSecure&&t.port.portIndex>=t.port.secure.length||!t.usingSecure&&t.port.portIndex>=t.port.insecure.length){if(t.hostIndex>=t.host.length-1)return void o(new Error("Unable to establish connection with QZ"));t.hostIndex++,t.port.portIndex=0}e.websocket.setup.findConnection(t,n,o)}};r=t.usingSecure?t.protocol.secure+t.host[t.hostIndex]+":"+t.port.secure[t.port.portIndex]:t.protocol.insecure+t.host[t.hostIndex]+":"+t.port.insecure[t.port.portIndex];try{e.log.trace("Attempting connection",r),e.websocket.connection=new e.tools.ws(r)}catch(i){return e.log.error(i),void a()}null!=e.websocket.connection?(e.websocket.connection.established=!1,e.websocket.connection.onopen=function(a){if(!e.websocket.connection.established&&(e.log.trace(a),e.log.info("Established connection with QZ Tray on "+r),e.websocket.setup.openConnection({resolve:n,reject:o}),t.keepAlive>0)){var i=setInterval(function(){e.tools.isActive()&&e.websocket.connection.interval===i?e.websocket.connection.send("ping"):clearInterval(i)},1e3*t.keepAlive);e.websocket.connection.interval=i}},e.websocket.connection.onclose=function(){e.websocket.connection&&"undefined"!=typeof navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&e.websocket.connection.onerror()},e.websocket.connection.onerror=function(t){e.log.trace(t),e.websocket.connection=null,a()}):o(new Error("Unable to create a websocket connection"))}},openConnection:function(t){function o(o){void 0===o&&(o=null),n.api.getVersion().then(function(t){e.websocket.connection.version=t,e.websocket.connection.semver=t.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var n=0;n<e.websocket.connection.semver.length;n++){try{if(3==n&&0==e.websocket.connection.semver[n].toLowerCase().indexOf("rc")){e.websocket.connection.semver[n]=-e.websocket.connection.semver[n].replace(/\D/g,"");continue}e.websocket.connection.semver[n]=parseInt(e.websocket.connection.semver[n])}catch(o){}e.websocket.connection.semver.length<4&&(e.websocket.connection.semver[3]=0)}e.compatible.algorithm(!0)}).then(function(){e.websocket.connection.sendData({certificate:o,promise:t})})}e.websocket.connection.established=!0,e.websocket.connection.onclose=function(t){for(var n in e.log.trace(t),e.websocket.connection=null,e.websocket.callClose(t),e.log.info("Closed connection with QZ Tray"),e.websocket.pendingCalls)e.websocket.pendingCalls.hasOwnProperty(n)&&e.websocket.pendingCalls[n].reject(new Error("Connection closed before response received"));null!=this.promise&&this.promise.resolve()},e.websocket.connection.onerror=function(t){e.websocket.callError(t)},e.websocket.connection.sendData=function(t){e.log.trace("Preparing object for websocket",t),null==t.timestamp&&(t.timestamp=Date.now(),"number"!=typeof t.timestamp&&(t.timestamp=(new Date).getTime())),null!=t.promise&&(t.uid=e.websocket.setup.newUID(),e.websocket.pendingCalls[t.uid]=t.promise),t.position={x:"undefined"!=typeof screen?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft||0):0,y:"undefined"!=typeof screen?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop||0):0};try{if(null!=t.call&&null==t.signature&&e.security.needsSigned(t.call)){var n={call:t.call,params:t.params,timestamp:t.timestamp},o=e.tools.hash(e.tools.stringify(n));o.then||(o=e.tools.promise(function(e){e(o)})),o.then(function(t){return e.security.callSign(t)}).then(function(n){e.log.trace("Signature for call",n),t.signature=n||"",t.signAlgorithm=e.security.signAlgorithm,e.signContent=void 0,e.websocket.connection.send(e.tools.stringify(t))}).catch(function(n){e.log.error("Signing failed",n),null!=t.promise&&(t.promise.reject(new Error("Failed to sign request")),delete e.websocket.pendingCalls[t.uid])})}else e.log.trace("Signature for call",t.signature),e.websocket.connection.send(e.tools.stringify(t))}catch(r){e.log.error(r),null!=t.promise&&(t.promise.reject(r),delete e.websocket.pendingCalls[t.uid])}},e.websocket.connection.onmessage=function(t){var n=JSON.parse(t.data);if(null!=n.uid){e.log.trace("Received response from websocket",n);var o=e.websocket.pendingCalls[n.uid];null==o?e.log.allay("No promise found for returned response"):null!=n.error?o.reject(new Error(n.error)):o.resolve(n.result),delete e.websocket.pendingCalls[n.uid]}else if(null==n.type)e.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(n.type){case e.streams.serial:n.event||(n.event=JSON.stringify({portName:n.key,output:n.data})),e.serial.callSerial(JSON.parse(n.event));break;case e.streams.socket:e.socket.callSocket(JSON.parse(n.event));break;case e.streams.usb:n.event||(n.event=JSON.stringify({vendorId:n.key[0],productId:n.key[1],output:n.data})),e.usb.callUsb(JSON.parse(n.event));break;case e.streams.hid:e.hid.callHid(JSON.parse(n.event));break;case e.streams.printer:e.printers.callPrinter(JSON.parse(n.event));break;case e.streams.file:e.file.callFile(JSON.parse(n.event));break;default:e.log.allay("Cannot determine stream type for callback",n)}},e.security.callCert().then(o).catch(function(n){e.log.warn("Failed to get certificate:",n),e.security.rejectOnCertFailure?t.reject(n):o(null)})},newUID:function(){return(new Array(7).join("0")+(Math.random()*Math.pow(36,6)|0).toString(36)).slice(-6)}},dataPromise:function(t,n,o,r){return e.tools.promise(function(a,i){var l={call:t,promise:{resolve:a,reject:i},params:n,signature:o,timestamp:r};e.websocket.connection.sendData(l)})},pendingCalls:{},errorCallbacks:[],callError:function(t){if(Array.isArray(e.websocket.errorCallbacks))for(var n=0;n<e.websocket.errorCallbacks.length;n++)e.websocket.errorCallbacks[n](t);else e.websocket.errorCallbacks(t)},closedCallbacks:[],callClose:function(t){if(Array.isArray(e.websocket.closedCallbacks))for(var n=0;n<e.websocket.closedCallbacks.length;n++)e.websocket.closedCallbacks[n](t);else e.websocket.closedCallbacks(t)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",forceRaw:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(t){if(Array.isArray(e.serial.serialCallbacks))for(var n=0;n<e.serial.serialCallbacks.length;n++)e.serial.serialCallbacks[n](t);else e.serial.serialCallbacks(t)}},socket:{socketCallbacks:[],callSocket:function(t){if(Array.isArray(e.socket.socketCallbacks))for(var n=0;n<e.socket.socketCallbacks.length;n++)e.socket.socketCallbacks[n](t);else e.socket.socketCallbacks(t)}},usb:{usbCallbacks:[],callUsb:function(t){if(Array.isArray(e.usb.usbCallbacks))for(var n=0;n<e.usb.usbCallbacks.length;n++)e.usb.usbCallbacks[n](t);else e.usb.usbCallbacks(t)}},hid:{hidCallbacks:[],callHid:function(t){if(Array.isArray(e.hid.hidCallbacks))for(var n=0;n<e.hid.hidCallbacks.length;n++)e.hid.hidCallbacks[n](t);else e.hid.hidCallbacks(t)}},printers:{printerCallbacks:[],callPrinter:function(t){if(Array.isArray(e.printers.printerCallbacks))for(var n=0;n<e.printers.printerCallbacks.length;n++)e.printers.printerCallbacks[n](t);else e.printers.printerCallbacks(t)}},file:{fileCallbacks:[],callFile:function(t){if(Array.isArray(e.file.fileCallbacks))for(var n=0;n<e.file.fileCallbacks.length;n++)e.file.fileCallbacks[n](t);else e.file.fileCallbacks(t)}},security:{certHandler:function(e,t){t()},callCert:function(){return"function"==typeof e.security.certHandler.then?e.security.certHandler:"AsyncFunction"===e.security.certHandler.constructor.name?e.security.certHandler():e.tools.promise(e.security.certHandler)},signatureFactory:function(){return function(e){e()}},callSign:function(t){return"AsyncFunction"===e.security.signatureFactory.constructor.name?e.security.signatureFactory(t):e.tools.promise(e.security.signatureFactory(t))},signAlgorithm:"SHA1",rejectOnCertFailure:!1,needsSigned:function(e){return null!=e&&-1===["printers.getStatus","printers.stopListening","usb.isClaimed","usb.closeStream","usb.releaseDevice","hid.stopListening","hid.isClaimed","hid.closeStream","hid.releaseDevice","file.stopListening","getVersion"].indexOf(e)}},tools:{promise:function(t){return"undefined"!=typeof RSVP?new RSVP.Promise(t):"undefined"!=typeof Promise?new Promise(t):void e.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},reject:function(t){return e.tools.promise(function(e,n){n(t)})},stringify:function(e){var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e,function(e,t){if("promise"!==e)return t});return t&&(Array.prototype.toJSON=t),n},hash:function(t){return"undefined"!=typeof Sha256?Sha256.hash(t):e.SHA.hash(t)},ws:"undefined"!=typeof WebSocket?WebSocket:null,absolute:function(e){if("undefined"!=typeof window&&"function"==typeof document.createElement){var t=document.createElement("a");return t.href=e,t.href}return un.resolve(e),e},relative:function(t){for(var n=0;n<t.length;n++)if(t[n].constructor===Object){var o=!1;t[n].data&&t[n].data.search&&0===t[n].data.search(/data:image\/\w+;base64,/)?(t[n].flavor="base64",t[n].data=t[n].data.replace(/^data:image\/\w+;base64,/,"")):t[n].flavor?["FILE","XML"].indexOf(t[n].flavor.toUpperCase())>-1&&(o=!0):(t[n].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(t[n].format.toUpperCase())>-1||t[n].type&&(["PIXEL","IMAGE","PDF"].indexOf(t[n].type.toUpperCase())>-1&&!t[n].format||["HTML","PDF"].indexOf(t[n].type.toUpperCase())>-1&&(!t[n].format||"FILE"===t[n].format.toUpperCase())))&&(o=!0),o&&(t[n].data=e.tools.absolute(t[n].data)),t[n].options&&"string"==typeof t[n].options.overlay&&(t[n].options.overlay=e.tools.absolute(t[n].options.overlay))}},extend:function(t){"object"!=typeof t&&(t={});for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var r in o)if(o.hasOwnProperty(r)){if(t===o[r])continue;var a;o[r]&&o[r].constructor&&o[r].constructor===Object?(a=Array.isArray(o[r])?t[r]||[]:t[r]||{},t[r]=e.tools.extend(a,o[r])):void 0!==o[r]&&(t[r]=o[r])}}return t},versionCompare:function(t,n,o,r){if(e.tools.assertActive()){var a=e.websocket.connection.semver;return a[0]!=t?a[0]-t:null!=n&&a[1]!=n?a[1]-n:null!=o&&a[2]!=o?a[2]-o:null!=r&&a.length>3&&a[3]!=r?Number.isInteger(a[3])&&Number.isInteger(r)?a[3]-r:a[3].toString().localeCompare(r.toString()):0}},isVersion:function(t,n,o,r){return 0==e.tools.versionCompare(t,n,o,r)},isActive:function(){return!e.websocket.shutdown&&null!=e.websocket.connection&&(e.websocket.connection.readyState===e.tools.ws.OPEN||e.websocket.connection.readyState===e.tools.ws.CONNECTING)},assertActive:function(){if(e.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")},uint8ArrayToHex:function(e){return Array.from(e).map(function(e){return e.toString(16).padStart(2,"0")}).join("")},uint8ArrayToBase64:function(e){var t,n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],o="",r=e.length;for(t=2;t<r;t+=3)o+=n[e[t-2]>>2],o+=n[(3&e[t-2])<<4|e[t-1]>>4],o+=n[(15&e[t-1])<<2|e[t]>>6],o+=n[63&e[t]];return t===r+1&&(o+=n[e[t-2]>>2],o+=n[(3&e[t-2])<<4],o+="=="),t===r&&(o+=n[e[t-2]>>2],o+=n[(3&e[t-2])<<4|e[t-1]>>4],o+=n[(15&e[t-1])<<2],o+="="),o}},compatible:{data:function(t){for(var n=0;n<t.length;n++)if(t[n].constructor===Object&&t[n].data instanceof Uint8Array&&t[n].flavor){var o=t[n].flavor.toString().toUpperCase();switch(o){case"BASE64":t[n].data=e.tools.uint8ArrayToBase64(t[n].data);break;case"HEX":t[n].data=e.tools.uint8ArrayToHex(t[n].data);break;default:throw new Error("Uint8Array conversion to '"+o+"' is not supported.")}}if(e.tools.versionCompare(2,2,4)<0)for(n=0;n<t.length;n++)t[n].constructor===Object&&t[n].options&&"string"==typeof t[n].options.dotDensity&&(t[n].options.dotDensity=t[n].options.dotDensity.toLowerCase().replace("-legacy",""));if(e.tools.isVersion(2,0))for(e.log.trace("Converting print data to v2.0 for "+e.websocket.connection.version),n=0;n<t.length;n++)t[n].constructor===Object&&(t[n].type&&"RAW"===t[n].type.toUpperCase()&&t[n].format&&"IMAGE"===t[n].format.toUpperCase()&&(t[n].flavor&&"BASE64"===t[n].flavor.toUpperCase()&&(t[n].data="data:image/compat;base64,"+t[n].data),t[n].flavor="IMAGE"),(t[n].type&&"RAW"===t[n].type.toUpperCase()||t[n].format&&"COMMAND"===t[n].format.toUpperCase())&&(t[n].format="RAW"),t[n].type=t[n].format,t[n].format=t[n].flavor,delete t[n].flavor)},config:function(t,n){return e.tools.isVersion(2,0)&&(n.rasterize||(t.rasterize=!0)),e.tools.versionCompare(2,2)<0&&"undefined"!==t.forceRaw&&(t.altPrinting=t.forceRaw,delete t.forceRaw),e.tools.versionCompare(2,1,2,11)<0&&t.spool&&(t.spool.size&&(t.perSpool=t.spool.size,delete t.spool.size),t.spool.end&&(t.endOfDoc=t.spool.end,delete t.spool.end),delete t.spool),t},networking:function(t,n,o,r,a){return e.tools.isVersion(2,0)?e.tools.promise(function(i,l){e.websocket.dataPromise("websocket.getNetworkInfo",{hostname:t,port:n},o,r).then(function(e){i(void 0!==a?a(e):e)},l)}):e.tools.promise(function(a,i){e.websocket.dataPromise("networking.device",{hostname:t,port:n},o,r).then(function(e){a({ipAddress:e.ip,macAddress:e.mac})},i)})},algorithm:function(t){return!e.tools.isActive()||!e.tools.isVersion(2,0)||(t||e.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1)}},SHA:{hash:function(t){for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(t=e.SHA._utf8Encode(t)+String.fromCharCode(128)).length/4+2,a=Math.ceil(r/16),i=new Array(a),l=0;l<a;l++){i[l]=new Array(16);for(var s=0;s<16;s++)i[l][s]=t.charCodeAt(64*l+4*s)<<24|t.charCodeAt(64*l+4*s+1)<<16|t.charCodeAt(64*l+4*s+2)<<8|t.charCodeAt(64*l+4*s+3)}i[a-1][14]=8*(t.length-1)/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=8*(t.length-1)&4294967295;var c,u,d,p,f,h,g,m,v=new Array(64);for(l=0;l<a;l++){for(var b=0;b<16;b++)v[b]=i[l][b];for(b=16;b<64;b++)v[b]=e.SHA._dev1(v[b-2])+v[b-7]+e.SHA._dev0(v[b-15])+v[b-16]&4294967295;for(c=o[0],u=o[1],d=o[2],p=o[3],f=o[4],h=o[5],g=o[6],m=o[7],b=0;b<64;b++){var y=m+e.SHA._sig1(f)+e.SHA._ch(f,h,g)+n[b]+v[b],w=e.SHA._sig0(c)+e.SHA._maj(c,u,d);m=g,g=h,h=f,f=p+y&4294967295,p=d,d=u,u=c,c=y+w&4294967295}o[0]=o[0]+c&4294967295,o[1]=o[1]+u&4294967295,o[2]=o[2]+d&4294967295,o[3]=o[3]+p&4294967295,o[4]=o[4]+f&4294967295,o[5]=o[5]+h&4294967295,o[6]=o[6]+g&4294967295,o[7]=o[7]+m&4294967295}return e.SHA._hexStr(o[0])+e.SHA._hexStr(o[1])+e.SHA._hexStr(o[2])+e.SHA._hexStr(o[3])+e.SHA._hexStr(o[4])+e.SHA._hexStr(o[5])+e.SHA._hexStr(o[6])+e.SHA._hexStr(o[7])},_rotr:function(e,t){return t>>>e|t<<32-e},_sig0:function(t){return e.SHA._rotr(2,t)^e.SHA._rotr(13,t)^e.SHA._rotr(22,t)},_sig1:function(t){return e.SHA._rotr(6,t)^e.SHA._rotr(11,t)^e.SHA._rotr(25,t)},_dev0:function(t){return e.SHA._rotr(7,t)^e.SHA._rotr(18,t)^t>>>3},_dev1:function(t){return e.SHA._rotr(17,t)^e.SHA._rotr(19,t)^t>>>10},_ch:function(e,t,n){return e&t^~e&n},_maj:function(e,t,n){return e&t^e&n^t&n},_hexStr:function(e){for(var t="",n=7;n>=0;n--)t+=(e>>>4*n&15).toString(16);return t},_unescape:function(e){return e.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(e){if(e.length-1)return String.fromCharCode(parseInt(e.substring(e.length-3?2:1),16));var t=e.charCodeAt(0);return t<256?"%"+(0+t.toString(16)).slice(-2).toUpperCase():"%u"+("000"+t.toString(16)).slice(-4).toUpperCase()})},_utf8Encode:function(t){return e.SHA._unescape(encodeURIComponent(t))}}};function t(t,n){this.config=e.tools.extend({},e.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(e){"string"==typeof e&&(e={name:e}),this.printer=e},this.getPrinter=function(){return this.printer},this.reconfigure=function(t){for(var n in t)void 0!==t[n]&&(this._dirtyOpts[n]=!0);e.tools.extend(this.config,t)},this.getOptions=function(){return e.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(t),this.reconfigure(n)}t.prototype.print=function(e,t,o){n.print(this,e,t,o)};var n={websocket:{isActive:function(){return e.tools.isActive()},connect:function(t){return e.tools.promise(function(n,o){if(e.websocket.connection){const t=e.websocket.connection.readyState;if(t===e.tools.ws.OPEN)return void o(new Error("An open connection with QZ Tray already exists"));if(t===e.tools.ws.CONNECTING)return void o(new Error("The current connection attempt has not returned yet"));if(t===e.tools.ws.CLOSING)return void o(new Error("Waiting for previous disconnect request to complete"))}if(e.tools.ws)if(e.tools.ws.CLOSED&&2!=e.tools.ws.CLOSED){null==t&&(t={}),"undefined"!=typeof location&&"https:"===location.protocol||void 0===t.usingSecure&&(e.log.trace("Disabling secure ports due to insecure page"),t.usingSecure=!1),void 0===t.host||Array.isArray(t.host)||(t.host=[t.host]),e.websocket.shutdown=!1;var r=function(a){var i=!1,l=function(){i||(i=!0,t&&a<t.retries?r(a+1):(e.websocket.connection=null,o.apply(null,arguments)))},s=function(){var o=e.tools.extend({},e.websocket.connectConfig,t);e.websocket.setup.findConnection(o,n,l)};0==a?s():setTimeout(s,1e3*t.delay)};r(0)}else o(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));else o(new Error("WebSocket not supported by this browser"))})},disconnect:function(){return e.tools.promise(function(t,n){null!=e.websocket.connection?e.tools.isActive()?(e.websocket.shutdown=!0,e.websocket.connection.promise={resolve:t,reject:n},e.websocket.connection.close()):n(new Error("Current connection is still closing")):n(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(t){e.websocket.errorCallbacks=t},setClosedCallbacks:function(t){e.websocket.closedCallbacks=t},getNetworkInfo:e.compatible.networking,getConnectionInfo:function(){if(e.tools.assertActive()){var t=e.websocket.connection.url.split(/[:\/]+/g);return{socket:t[0],host:t[1],port:+t[2]}}}},printers:{getDefault:function(t,n){return e.websocket.dataPromise("printers.getDefault",null,t,n)},find:function(t,n,o){return e.websocket.dataPromise("printers.find",{query:t},n,o)},details:function(){return e.websocket.dataPromise("printers.detail")},startListening:function(t,n){Array.isArray(t)||(t=[t]);var o={printerNames:t};return n&&1==n.jobData&&(o.jobData=!0),n&&n.maxJobData&&(o.maxJobData=n.maxJobData),n&&n.flavor&&(o.flavor=n.flavor),e.websocket.dataPromise("printers.startListening",o)},clearQueue:function(t){return"object"!=typeof t&&(t={printerName:t}),e.websocket.dataPromise("printers.clearQueue",t)},stopListening:function(){return e.websocket.dataPromise("printers.stopListening")},getStatus:function(){return e.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(t){e.printers.printerCallbacks=t}},configs:{setDefaults:function(t){e.tools.extend(e.printing.defaultConfig,t)},create:function(e,n){return new t(e,n)}},print:function(t,n){var o=!1,r=[],a=[];arguments.length>=3&&("boolean"==typeof arguments[2]?(o=arguments[2],arguments.length>=5&&(r=arguments[3],a=arguments[4])):arguments.length>=4&&(r=arguments[2],a=arguments[3]),r&&!Array.isArray(r)&&(r=[r]),a&&!Array.isArray(a)&&(a=[a])),Array.isArray(t)||(t=[t]),Array.isArray(n[0])||(n=[n]);for(var i=0;i<n.length;i++)e.tools.relative(n[i]),e.compatible.data(n[i]);for(var l=[],s=0;s<t.length||s<n.length;s++)(function(o){var i={config:t[Math.min(o,t.length-1)],data:n[Math.min(o,n.length-1)],signature:r[o],timestamp:a[o]};l.push(function(){return n={printer:(t=i).config.getPrinter(),options:t.config.getOptions(),data:t.data},e.websocket.dataPromise("print",n,t.signature,t.timestamp);var t,n})})(s);var c=null;if(o){var u=[];c=function(e){u.push(e)},l.push(function(){return e.tools.promise(function(e,t){u.length?t(u):e()})})}var d=null;return l.reduce(function(e,t){return d=e.catch(c).then(t)},e.tools.promise(function(e){e()})),d},serial:{findPorts:function(){return e.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(t){e.serial.serialCallbacks=t},openPort:function(t,n){var o={port:t,options:n};return e.websocket.dataPromise("serial.openPort",o)},sendData:function(t,n,o){e.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof n&&(n={data:n,type:"PLAIN"}),n.type&&"FILE"==n.type.toUpperCase()&&(n.data=e.tools.absolute(n.data)));var r={port:t,data:n,options:o};return e.websocket.dataPromise("serial.sendData",r)},closePort:function(t){return e.websocket.dataPromise("serial.closePort",{port:t})}},socket:{open:function(t,n,o){var r={host:t,port:n,options:o};return e.websocket.dataPromise("socket.open",r)},close:function(t,n){var o={host:t,port:n};return e.websocket.dataPromise("socket.close",o)},sendData:function(t,n,o){"object"!=typeof o&&(o={data:o,type:"PLAIN"});var r={host:t,port:n,data:o};return e.websocket.dataPromise("socket.sendData",r)},setSocketCallbacks:function(t){e.socket.socketCallbacks=t}},usb:{listDevices:function(t){return e.websocket.dataPromise("usb.listDevices",{includeHubs:t})},listInterfaces:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.listInterfaces",t)},listEndpoints:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),e.websocket.dataPromise("usb.listEndpoints",t)},setUsbCallbacks:function(t){e.usb.usbCallbacks=t},claimDevice:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),e.websocket.dataPromise("usb.claimDevice",t)},isClaimed:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.isClaimed",t)},sendData:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),e.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof t.data&&(t.data={data:t.data,type:"PLAIN"}),t.data.type&&"FILE"==t.data.type.toUpperCase()&&(t.data.data=e.tools.absolute(t.data.data))),e.websocket.dataPromise("usb.sendData",t)},readData:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),e.websocket.dataPromise("usb.readData",t)},openStream:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),e.websocket.dataPromise("usb.openStream",t)},closeStream:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),e.websocket.dataPromise("usb.closeStream",t)},releaseDevice:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("usb.releaseDevice",t)}},hid:{listDevices:function(){return e.websocket.dataPromise("hid.listDevices")},startListening:function(){return e.websocket.dataPromise("hid.startListening")},stopListening:function(){return e.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(t){e.hid.hidCallbacks=t},claimDevice:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.claimDevice",t)},isClaimed:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.isClaimed",t)},sendData:function(t){if("object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),e.tools.versionCompare(2,1,0,12)>=0)"object"!=typeof t.data&&(t.data={data:t.data,type:"PLAIN"}),t.data.type&&"FILE"==t.data.type.toUpperCase()&&(t.data.data=e.tools.absolute(t.data.data));else if("object"==typeof t.data){if("PLAIN"!==t.data.type.toUpperCase()||"string"!=typeof t.data.data)return e.tools.reject(new Error("Data format is not supported with connected QZ Tray version "+e.websocket.connection.version));t.data=t.data.data}return e.websocket.dataPromise("hid.sendData",t)},readData:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),e.websocket.dataPromise("hid.readData",t)},sendFeatureReport:function(t){return e.websocket.dataPromise("hid.sendFeatureReport",t)},getFeatureReport:function(t){return e.websocket.dataPromise("hid.getFeatureReport",t)},openStream:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),e.websocket.dataPromise("hid.openStream",t)},closeStream:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.closeStream",t)},releaseDevice:function(t){return"object"!=typeof t&&(t={vendorId:arguments[0],productId:arguments[1]}),e.websocket.dataPromise("hid.releaseDevice",t)}},file:{list:function(t,n){var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.list",o)},read:function(t,n){var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.read",o)},write:function(t,n){var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.write",o)},remove:function(t,n){var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.remove",o)},startListening:function(t,n){n&&void 0!==n.include&&!Array.isArray(n.include)&&(n.include=[n.include]),n&&void 0!==n.exclude&&!Array.isArray(n.exclude)&&(n.exclude=[n.exclude]);var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.startListening",o)},stopListening:function(t,n){var o=e.tools.extend({path:t},n);return e.websocket.dataPromise("file.stopListening",o)},setFileCallbacks:function(t){e.file.fileCallbacks=t}},networking:{device:function(t,n){return e.tools.isVersion(2,0)?e.compatible.networking(t,n,null,null,function(e){return{ip:e.ipAddress,mac:e.macAddress}}):e.websocket.dataPromise("networking.device",{hostname:t,port:n})},hostname:function(t,n){return e.tools.versionCompare(2,2,2)<0?e.tools.promise(function(o,r){e.websocket.dataPromise("networking.device",{hostname:t,port:n}).then(function(e){console.log(e),o(e.hostname)})}):e.websocket.dataPromise("networking.hostname")},devices:function(t,n){return e.tools.isVersion(2,0)?e.compatible.networking(t,n,null,null,function(e){return[{ip:e.ipAddress,mac:e.macAddress}]}):e.websocket.dataPromise("networking.devices",{hostname:t,port:n})}},security:{setCertificatePromise:function(t,n){e.security.certHandler=t,e.security.rejectOnCertFailure=!(!n||!n.rejectOnFailure)},setSignaturePromise:function(t){e.security.signatureFactory=t},setSignatureAlgorithm:function(t){e.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(t.toUpperCase())<0?e.log.error("Signing algorithm '"+t+"' is not supported."):e.security.signAlgorithm=t)},getSignatureAlgorithm:function(){return e.security.signAlgorithm}},api:{showDebug:function(t){return e.DEBUG=t},getVersion:function(){return e.websocket.dataPromise("getVersion")},isVersion:e.tools.isVersion,isVersionGreater:function(t,n,o,r){return e.tools.versionCompare(t,n,o,r)>0},isVersionLess:function(t,n,o,r){return e.tools.versionCompare(t,n,o,r)<0},setPromiseType:function(t){e.tools.promise=t},setSha256Type:function(t){e.tools.hash=t},setWebSocketType:function(t){e.tools.ws=t}},version:e.VERSION};return n}(),dn.exports=pn;const fn={class:"print-drawer"},hn={key:0,class:"aic jcc fdc",style:{"background-color":"#edeef3",overflow:"hidden"}},gn={"data-pageShow":"xx"},mn=Pt({__name:"Preview",props:{options:{type:Object,default:()=>({width:210,height:297,data:[],dataSource:"Parameter",model:{},qzOption:null})},renderType:{type:String,default:"render"},modelValue:{type:Boolean,defalut:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=t;s();const o=s(!1),r=s(!1),A=s(!1),T=Wt(),P=Jt();let I=e;const D=c(()=>{let e=[];try{Array.isArray(I.options.model)?e=I.options.model:I.options.model&&!Array.isArray(I.options.model)&&(e=[I.options.model])}catch(t){console.error(t)}return e}),L=s({marginLeft:0,marginRight:0,marginTop:0,marginBottom:0}),R=s({marginLeft:0,marginRight:0,marginTop:0,marginBottom:0}),M=()=>{r.value=!0},j=()=>{r.value=!1,L.value.marginBottom=R.value.marginBottom,L.value.marginRight=R.value.marginRight,L.value.marginTop=R.value.marginTop,L.value.marginLeft=R.value.marginLeft},z=()=>{r.value=!1,R.value.marginBottom=L.value.marginBottom,R.value.marginRight=L.value.marginRight,R.value.marginTop=L.value.marginTop,R.value.marginLeft=L.value.marginLeft,P.setPrintOption(p(R.value))};function N(e,t){return e-t.pageIndex*Me(R.value.height)+(A.value?0:-10)}const B=s(),V=u(!1),H=async()=>{$.warning("驱动打印设备需要QQ群 953344438")};d(()=>I.modelValue,e=>{o.value=e,e&&(I.options.qzOption&&(R.value.width=I.options.qzOption.size.width,R.value.height=I.options.qzOption.size.height),P.setPrintOption(p(R.value))),e?T.setRenderType(I.renderType):T.setRenderType("")},{immediate:!0});const U=()=>{n("update:modelValue",!1)},F=s(),G=()=>{A.value=!0,setTimeout(()=>{const e=(t=a.cloneDeep(F.value.map(e=>e.outerHTML).join("")),`\n                \n  <!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\n<title>Document</title>\n</head>\n\n<style>\ntable {\n  border-collapse: collapse; /* 边框合并 */\n  width: 100%;\n}\n \n\n \n/* 设置表头和单元格样式 */\nth,\ntd {\n  border: 1px solid black; /* 设置边框 */\n  padding: 8px; /* 内边距 */\n  text-align: center; /* 文本居中对齐 */\n}\n\n *{\n    margin: 0;\n    outline: none;\n    box-sizing: border-box;\n  }\n  \n  #app,html,body {\n    \n    font-size: 12px;\n    height: 100%;\n  }\n    \n\n@media print {\n  @page {\n    size: ${(n=p(R.value)).width}mm ${n.height}mm;\n    padding-top:${n.marginTop?n.marginTop:0}mm;\n    padding-right: ${n.marginRight?n.marginRight:0}mm;\n    padding-bottom: ${n.marginBottom?n.marginBottom:0}mm;\n    padding-left: ${n.marginLeft?n.marginLeft:0}mm;\n  }\n\n\n}\n.vdr-container {\nposition: absolute;\nborder: 1px solid transparent;\nbox-sizing: border-box;\n}\n.vdr-container.active {\nborder-color: #000;\nborder-style: dashed;\n}\n.vdr-container.dragging {\nborder-color: #000;\nborder-style: solid;\n}\n.vdr-handle {\nbox-sizing: border-box;\nposition: absolute;\nwidth: 7px;\nheight: 7px;\nbackground: #f0f0f0;\nborder: 1px solid #333;\n}\n.vdr-handle-tl {\ntop: -4px;\nleft: -4px;\ncursor: nw-resize;\n}\n.vdr-handle-tm {\ntop: -4px;\nleft: 50%;\nmargin-left: -3px;\ncursor: n-resize;\n}\n.vdr-handle-tr {\ntop: -4px;\nright: -4px;\ncursor: ne-resize;\n}\n.vdr-handle-ml {\ntop: 50%;\nmargin-top: -3px;\nleft: -4px;\ncursor: w-resize;\n}\n.vdr-handle-mr {\ntop: 50%;\nmargin-top: -3px;\nright: -4px;\ncursor: e-resize;\n}\n.vdr-handle-bl {\nbottom: -4px;\nleft: -4px;\ncursor: sw-resize;\n}\n.vdr-handle-bm {\nbottom: -4px;\nleft: 50%;\nmargin-left: -4px;\ncursor: s-resize;\n}\n.vdr-handle-br {\nbottom: -4px;\nright: -4px;\ncursor: se-resize;\n}\n.printContentRef{\n\n   position: relative;\n}\n   .easy-print-paper{\n   }\n</style>\n<body>\n${t}\n</body>\n</html>\n  `);var t,n;A.value=!1;const o=window.open("","");o&&(o.document.write(e),o.document.close(),o.print(),o.close())},200)};d(()=>o.value,e=>{e||U()});const X=s(""),q=s([]);return f(()=>{}),(t,n)=>{const a=h("el-option"),s=h("el-select"),c=h("el-form-item"),u=h("el-link"),d=h("el-form"),p=h("el-button"),f=h("el-drawer"),T=h("el-divider"),P=h("el-input-number");return g(),m("div",fn,[v(f,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=e=>o.value=e),"custom-class":"",size:"100%"},{header:b(()=>[n[9]||(n[9]=y("div",{class:"aic"},[y("h2",null,"打印预览 "),y("div",null," (打印驱动加QQ群咨询： 953344438) ")],-1)),v(d,{ref:"queryForm",size:"small",inline:!0},{default:b(()=>[v(c,{label:"选择打印设备",prop:"payMethod"},{default:b(()=>[v(s,{modelValue:X.value,"onUpdate:modelValue":n[0]||(n[0]=e=>X.value=e),placeholder:"请选择",clearable:"",style:{width:"140px"}},{default:b(()=>[(g(!0),m(w,null,_(q.value,(e,t)=>(g(),x(a,{key:t,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(c,{label:"",prop:""},{default:b(()=>[y("div",{class:"aic",onClick:M},[v(E(Yt),{fill:"#474747",class:"CP",style:{width:"20px"}}),v(u,{type:"primary",size:"small",style:{"margin-left":"10px"},href:"https://qz.io/docs/pixel#html-printing",target:"_blank"},{default:b(()=>n[8]||(n[8]=[C("打印驱动文档")])),_:1,__:[8]})])]),_:1})]),_:1},512)]),footer:b(()=>[y("div",null,[v(p,{size:"large",onClick:U},{default:b(()=>n[10]||(n[10]=[C("取消")])),_:1,__:[10]}),v(p,{size:"large",loading:V.value,type:"primary",onClick:H},{default:b(()=>n[11]||(n[11]=[C("驱动打印")])),_:1,__:[11]},8,["loading"]),v(p,{type:"primary",size:"large",class:"ml10",onClick:G},{default:b(()=>n[12]||(n[12]=[C("浏览器打印")])),_:1,__:[12]})])]),default:b(()=>[o.value?(g(),m("div",hn,[(g(!0),m(w,null,_(D.value,(n,o)=>(g(),x(E(i.DraggableContainer),{class:"aic jcc",key:o,grid:t.grid,onClick:t.handleCanvas},{default:b(()=>[y("div",null,[y("div",{style:{position:"relative",overflow:"hidden"},ref_for:!0,ref_key:"browserPrintRef",ref:F},[(g(!0),m(w,null,_(e.options.data,e=>(g(),m("div",{"data-type":"page",ref_for:!0,ref_key:"printContentRef",ref:B,class:"printContentRef",key:e.id,style:O({height:`${E(Me)(R.value.height)}px`,width:`${E(Me)(R.value.width)}px`,backgroundColor:" #fff",borderTop:A.value?"0px solid #EDEEF3":"10px solid #EDEEF3"})},[y("div",gn,[(g(!0),m(w,null,_(e.renderList,(e,t)=>(g(),x(E(l),{key:t,x:e.styles.x,"onUpdate:x":t=>e.styles.x=t,zIndex:t,y:N(e.styles.y,e),w:e.styles.w,"onUpdate:w":t=>e.styles.w=t,resizable:!1,draggable:!1,h:e.styles.h,"onUpdate:h":t=>e.styles.h=t,initH:e.styles.h,initW:e.styles.w},{default:b(()=>[v(E(Qt),{element:e,model:n},null,8,["element","model"])]),_:2},1032,["x","onUpdate:x","zIndex","y","w","onUpdate:w","h","onUpdate:h","initH","initW"]))),128))])],4))),128))],512)])]),_:2},1032,["grid","onClick"]))),128))])):k("",!0)]),_:1},8,["modelValue"]),v(E(an),{"append-to-body":"",onMousedown:n[6]||(n[6]=S(()=>{},["stop"])),modelValue:r.value,"onUpdate:modelValue":n[7]||(n[7]=e=>r.value=e),title:"打印设置"},{footer:b(()=>[y("div",null,[v(p,{size:"large",onClick:j},{default:b(()=>n[14]||(n[14]=[C("取消")])),_:1,__:[14]}),v(p,{size:"large",type:"primary",onClick:z},{default:b(()=>n[15]||(n[15]=[C("保存")])),_:1,__:[15]})])]),default:b(()=>[v(T,{"content-position":"left"},{default:b(()=>n[13]||(n[13]=[C("页面边距")])),_:1,__:[13]}),v(d,{inline:!0,style:{"margin-left":"10px"}},{default:b(()=>[v(c,{label:"上边距(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(P,{modelValue:L.value.marginTop,"onUpdate:modelValue":n[2]||(n[2]=e=>L.value.marginTop=e),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),v(c,{label:"右边距(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(P,{modelValue:L.value.marginRight,"onUpdate:modelValue":n[3]||(n[3]=e=>L.value.marginRight=e),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),v(c,{label:"下边距(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(P,{modelValue:L.value.marginBottom,"onUpdate:modelValue":n[4]||(n[4]=e=>L.value.marginBottom=e),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),v(c,{label:"左边距(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(P,{modelValue:L.value.marginLeft,"onUpdate:modelValue":n[5]||(n[5]=e=>L.value.marginLeft=e),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-6d3d957e"],["__file","D:/work/public/easy-print/src/packages/easy-print/Preview.vue"]]);var vn=(e=>(e.MERGE="merge",e.ADD_ROW_TOP="addRowTop",e.ADD_ROW_BOTTOM="addRowBottom",e.ADD_COL_LEFT="addColLeft",e.ADD_COL_RIGHT="addColRight",e.RECOVERY_SPLIT="recoverySplit",e))(vn||{}),bn=(e=>(e.DELETE="delete",e.TOP="top",e.BOTTOM="bottom",e))(bn||{});const yn={class:"titleSub"},wn={class:"popoverContent__arrow__children"},_n=["onClick"],xn=["onClick"],En=A({__name:"popover",props:{},emits:["handleTable"],setup(e,{emit:t}){T(e=>({"26a2be6b-bindColor":h}));const n=t,o=s(!1),r=s({position:"absolute",left:"0",top:"0",background:"#FFF","z-index":"999"}),a=s(),i=s([]),l=Wt(),c=Jt(),u=(e,t)=>{function n(n){let o=e.length>1||1!=l.getCurrentSelected.length;if(n==vn.RECOVERY_SPLIT&&!o)for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e][0],r=n?n.getAttribute("rowspan"):null,a=n?n.getAttribute("colspan"):null;o=!r&&!a}return o}return{name:"表格",disabled:!1,children:[{name:"合并表格",value:vn.MERGE,disabled:e.length>1||!(l.getCurrentSelected.length>1)},{name:"恢复拆分",value:vn.RECOVERY_SPLIT,disabled:n(vn.RECOVERY_SPLIT)},{name:"向上添加一行",value:vn.ADD_ROW_TOP,disabled:n(vn.ADD_ROW_TOP)},{name:"向下添加一行",value:vn.ADD_ROW_BOTTOM,disabled:n(vn.ADD_ROW_BOTTOM)},{name:"向左添加一列",value:vn.ADD_COL_LEFT,disabled:n(vn.ADD_COL_LEFT)},{name:"向右添加一列",value:vn.ADD_COL_RIGHT,disabled:n(vn.ADD_COL_RIGHT)}]}},d=e=>{var t;const n=[{name:"删除",value:bn.DELETE,disabled:!1},{name:"置顶",value:bn.TOP,disabled:!1},{name:"置底",value:bn.BOTTOM,disabled:!1}];if(e.preventDefault(),r.value.left=e.clientX+"px",r.value.top=e.clientY+"px",o.value=!0,c.getActiveData&&(null==(t=c.getActiveData)?void 0:t.componentName)==Ie.tableContainer){let e=[];for(let n=0;n<l.getCurrentSelected.length;n++){const t=l.getCurrentSelected[n];t.dataset.type==Ie.tableContainer&&e.push(t)}let t={};e.forEach(e=>{let n=e.dataset.id;t[n]?t[n].push(e):t[n]=[e]});let o=Object.keys(t);i.value=[u(o,t),...n]}else i.value=n},p=()=>{o.value=!1};P({}),document.addEventListener("click",p),document.addEventListener("click",p);const f=Et("--el-color-primary"),h=`rgba(${Ue(f.value).join(",")} , 0.8)`,v=e=>{switch(e.value){case vn.MERGE:case vn.ADD_ROW_TOP:case vn.ADD_ROW_BOTTOM:case vn.ADD_COL_LEFT:case vn.ADD_COL_RIGHT:case vn.RECOVERY_SPLIT:n("handleTable",e.value);break;case bn.DELETE:c.deleteActiveData();break;case bn.TOP:c.setItemZIndexTop();break;case bn.BOTTOM:c.setItemZIndexBottom()}p()};return(e,t)=>(g(),m("div",{class:"popover",ref_key:"popoverRef",ref:a,onContextmenu:S(d,["stop"])},[I(e.$slots,"default",{},void 0,!0),(g(),x(R,{to:"body"},[o.value?(g(),m("div",{key:0,class:"popoverContent",style:O(r.value)},[(g(!0),m(w,null,_(i.value,(e,t)=>(g(),m("div",{key:t,style:O(e.disabled?"color:#ccc;cursor:not-allowed":"color:#333;cursor:pointer"),class:D(e.children?"":"popoverContent__arrow")},[e.children&&e.children.length>0?(g(),m(w,{key:0},[y("span",yn,L(e.name),1),y("div",wn,[(g(!0),m(w,null,_(e.children,(e,t)=>(g(),m("div",{class:"popoverContent__arrow__children__item",key:t,style:O(e.disabled?"color:#ccc;cursor:not-allowed":"color:#333;cursor:pointer"),onClick:S(t=>v(e),["stop"])},L(e.name),13,_n))),128))])],64)):(g(),m("div",{key:1,onClick:S(t=>v(e),["stop"])},L(e.name),9,xn))],6))),128))],4)):k("",!0)]))],544))}}),Cn=Pt(En,[["__scopeId","data-v-26a2be6b"],["__file","D:/work/public/easy-print/src/packages/easy-print/popover.vue"]]),On=["onMousedown","onMousemove","data-id","data-type","data-index"],kn=A({__name:"table",props:{element:{type:Object,required:!0,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change","handledRaggable"],setup(e,{emit:t}){const n=s(!1),o=s({col:2,row:1}),r=s([]),a=s(),i=Wt(),l=Jt(),c=P({data:[],startX:0,startY:0,index:0,colIndex:0,rowIndex:0,type:"row"}),u=e;d(()=>u.modelValue,e=>{},{deep:!0,immediate:!0}),d(()=>u.element,e=>{let t=e.attrsJson.find(e=>"rowColData"==e.prop);r.value=t.defaultValue},{deep:!0,immediate:!0});const x=()=>{u.element.attrsJson.forEach(e=>{"rowColData"==e.prop&&(e.defaultValue=r.value,u.element.attrs.rowColData=r.value)})},S=s(),A=(e,t,n)=>{if(!D.value||!i.getControlLeft)return;e.stopPropagation(),null==e||e.target;const o=S.value.querySelectorAll("tbody tr");if("col"==c.type){const t=e.clientX-c.startX;let n=c.index-1;const a=o[c.rowIndex].children[n],i=parseFloat(window.getComputedStyle(a).width)+t;a.style.width=`${i}px`,c.startX=e.clientX,r.value[c.rowIndex].children[n].style.width=`${i}`}else if("row"==c.type){const t=e.clientY-c.startY;let n=c.index-1;if(n){let i=o[n];try{const o=parseFloat(window.getComputedStyle(i).height)+t;r.value[n].style.height=`${o}px`,c.startY=e.clientY}catch(a){console.log("e :>> ",a)}}}x()},T=()=>{D.value=!1,c.index=0,i.setControlLeft(!1),console.log("11 :>> ",11),l.setUpdataActiveStyles("draggable",!0,u.element.id),x()},I=s(),D=s(!1),R=e=>{const{target:t}=e,n=t.getBoundingClientRect(),o=e.clientX,r=e.clientY,a=o-n.left,i=n.right-o,l=r-n.top,s=n.bottom-r;return l<=1&&a>1&&i>1||s<=1&&a>1&&i>1?"row-resize":a<=1&&l>1&&s>1||i<=1&&l>1&&s>1?"col-resize":"auto"},j=s(),z=e=>{let t=[];for(let o=0;o<i.getCurrentSelected.length;o++){const e=i.getCurrentSelected[o];e.dataset.type==Ie.tableContainer&&t.push(e)}let n={};t.forEach(e=>{let t=e.dataset.id;n[t]?n[t].push(e):n[t]=[e]}),e==vn.MERGE&&(r.value=Ln(n,p(r.value))),(e==vn.ADD_ROW_TOP||e==vn.ADD_ROW_BOTTOM||vn.ADD_COL_LEFT||vn.ADD_COL_RIGHT)&&(r.value=In(n,e,p(r.value))),e==vn.RECOVERY_SPLIT&&(r.value=Pn(n,p(r.value))),x()},N=()=>{n.value=!1,r.value=In(p(j.value),p(o.value),p(r.value)),x()};return f(()=>{}),(t,s)=>{const d=h("Popover"),f=h("el-input-number"),x=h("el-form-item"),P=h("el-form"),j=h("el-button");return g(),m("div",{ref_key:"containerRef",ref:a,class:"tablecontainerRef"},[v(d,{style:O(E(Ge)(e.element.styles)),onHandleTable:z},{default:b(()=>[y("table",{onMousemove:A,cellpadding:"0",style:O({...e.element.styles,width:e.element.styles.w,height:e.element.styles.h,"table-layout":"fixed"}),cellspacing:"0",ref_key:"tableRef",ref:S},[y("tbody",{ref_key:"tbodyRef",ref:I},[(g(!0),m(w,null,_(r.value,(t,n)=>(g(),m("tr",{key:n,style:O(t.style)},[(g(!0),m(w,null,_(t.children,(n,o)=>(g(),m(w,{key:o},[n.delete?k("",!0):(g(),m("td",M({key:0,onMousedown:e=>((e,t,n)=>{c.startX=e.clientX,c.startY=e.clientY;let o=p(r.value);if(o[t].children&&i.getControlLeft){let e=o[t];i.setActiveTd(e.children[n].id)}"row-resize"==R(e)?(c.index=t,c.type="row",I.value.children):"col-resize"==R(e)&&(c.index=n,c.rowIndex=t,c.type="col"),Tn(e)?(D.value=!0,l.setUpdataActiveStyles("draggable",!1,u.element.id)):D.value=!1})(e,t.index,n.index),onMousemove:e=>(e=>{const{target:t}=e;i.getControlLeft&&(t.style.cursor=R(e))})(e,t.index,n.index),onMouseup:T,class:[[(e.element.styles.draggable,"targetSelecto")],"targetSelecto"],style:{borderRightWidth:(t.children.length,"1px"),width:n.style.width+"px",height:n.style.height+"px"},"data-id":e.element.id,"data-type":E(Ie).tableContainer,"data-index":t.index+","+n.index},{ref_for:!0},n.bind),L(n.key?""==E(i).getRenderType?n.defaultValue:n.key?E(Fe)(e.model,n.key):"":n.defaultValue),17,On))],64))),128))],4))),128))],512)],36)]),_:1},8,["style"]),v(an,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=e=>n.value=e),width:"400px",title:"拆分单元格"},{footer:b(()=>[y("div",null,[v(j,{size:"large",onClick:s[2]||(s[2]=e=>n.value=!1)},{default:b(()=>s[4]||(s[4]=[C("取消")])),_:1,__:[4]}),v(j,{size:"large",type:"primary",onClick:N},{default:b(()=>s[5]||(s[5]=[C("保存")])),_:1,__:[5]})])]),default:b(()=>[v(P,{inline:!0,style:{"margin-left":"10px"},class:"jcc"},{default:b(()=>[v(x,{label:"列",style:{"margin-bottom":"0"}},{default:b(()=>[v(f,{modelValue:o.value.col,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value.col=e),style:{width:"120px"},min:1,precision:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),v(x,{label:"行",style:{"margin-bottom":"0"}},{default:b(()=>[v(f,{placeholder:"请输入尺寸",min:1,modelValue:o.value.row,"onUpdate:modelValue":s[1]||(s[1]=e=>o.value.row=e),style:{width:"120px"},size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],512)}}}),Sn=Pt(kn,[["__scopeId","data-v-9844ec0b"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/table/table.vue"]]),An=e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];for(let e=0;e<n.length;e++)n[e].classList.toggle("selected",!1)}},Tn=e=>{const{target:t}=e,n=t.getBoundingClientRect(),o=parseInt(getComputedStyle(t).borderWidth),r=e.clientX-n.left,a=e.clientY-n.top;return!!(r<=o||r>=t.offsetWidth-o||a<=o||a>=t.offsetHeight-o)},Pn=(e,t)=>{let n=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o][0],{index:i}=r.dataset,l=r.getAttribute("rowspan")?r.getAttribute("rowspan"):1,s=r.getAttribute("colspan")?r.getAttribute("colspan"):1;n=a.cloneDeep(t);let c=null==i?void 0:i.split(",");const u=Number(c[0]),d=u+Number(l)-1,p=Number(c[1]),f=p+Number(s)-1;for(let e=0;e<n.length;e++){const t=n[e];if(t.index=e,t.children)for(let n=0;n<t.children.length;n++){const o=t.children[n];o.index=n,u<=e&&e<=d&&p<=n&&n<=f&&(t.delete=!1,o.bind={},o.delete=!1)}}}return An(e),n},In=(e,t,n)=>{let o=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r][0],{index:l}=i.dataset;o=a.cloneDeep(n);let s=null==l?void 0:l.split(",");const c=Number(s[0]),u=Number(s[1]);let d=a.cloneDeep(Mn());d.children=[];let p=o[c];for(let e=0;e<p.children.length;e++)d.children.push(a.cloneDeep(Rn()));if(t==vn.ADD_ROW_TOP){let e=a.cloneDeep(o[c]);const t=c;let n=[];for(let a=0;a<o.length;a++){const e=o[a];for(let o=0;o<e.children.length;o++){const r=e.children[o];let i=r.bind&&r.bind.rowspan?r.bind.rowspan:0;if(!r.delete&&i>1&&t>a&&t<=i-1){r.bind.rowspan=r.bind.rowspan+1,n.push(o);break}}}let r=a.cloneDeep(Mn());for(let o=0;o<e.children.length;o++){let e=a.cloneDeep(Rn());n.includes(o)&&(e.delete=!0),r.children&&r.children.push(e)}o.splice(t,0,r)}else if(t==vn.ADD_ROW_BOTTOM){let e=o[c].children[u],t=c+(e.bind&&e.bind.rowspan?e.bind.rowspan:1),n=a.cloneDeep(o[c]),r=[];for(let a=0;a<o.length;a++){const e=o[a];for(let n=0;n<e.children.length;n++){const o=e.children[n];let i=o.bind&&o.bind.rowspan?o.bind.rowspan:0;if(!o.delete&&i>1&&t>a&&t<=i-1){o.bind.rowspan=o.bind.rowspan+1,r.push(n);break}}}let i=a.cloneDeep(Mn());for(let o=0;o<n.children.length;o++){let e=a.cloneDeep(Rn());r.includes(o)&&(e.delete=!0),i.children&&i.children.push(e)}o.splice(t,0,i)}else if(t==vn.ADD_COL_LEFT){let e=[];const t=u;for(let n=0;n<o.length;n++){const r=o[n];let i=[];for(let e=0;e<r.children.length;e++){const n=r.children[e];let o=n.bind&&n.bind.colspan?n.bind.colspan:0;if(!n.delete){let r=e+o-1,l=a.cloneDeep(Rn());if(o>1&&t>e&&t<=r){n.bind.colspan=n.bind.colspan+1,l.delete=!0,i.push(l);break}}}0==i.length&&i.push(a.cloneDeep(Rn())),e.push(i)}for(let n=0;n<o.length;n++)o[n].children.splice(t,0,...e[n])}else if(t==vn.ADD_COL_RIGHT){let e=[],t=p.children[u];const n=u+(t.bind&&t.bind.colspan?t.bind.colspan:1);for(let r=0;r<o.length;r++){const t=o[r];let i=[];for(let e=0;e<t.children.length;e++){const o=t.children[e];let r=o.bind&&o.bind.colspan?o.bind.colspan:0;if(!o.delete){let t=e+r-1,l=a.cloneDeep(Rn());if(r>1&&n>=e&&n<=t){o.bind.colspan=o.bind.colspan+1,l.delete=!0,i.push(l);break}}}0==i.length&&i.push(a.cloneDeep(Rn())),e.push(i)}for(let r=0;r<o.length;r++)o[r].children.splice(n,0,...e[r])}console.log("object :>> ",o);for(let e=0;e<o.length;e++){const t=o[e];if(t.index=e,t.children)for(let e=0;e<t.children.length;e++)t.children[e].index=e}}return o},Dn=(e,t,n,o,r)=>{let a=JSON.parse(JSON.stringify(n));return Object.assign(a[e].children[o].bind,((e,t,n,o,r)=>{let a=0,i=0;for(let l=o;l<=r;l++){const t=n[e];if(t.children){let e=t.children[l],n=e.bind&&e.bind.colspan?e.bind.colspan:1;e.delete||(i+=n)}}for(let l=e;l<=t;l++){const e=n[l];if(e.children){let t=e.children[o];console.log("td :>> ",t);let n=t.bind&&t.bind.rowspan?t.bind.rowspan:1;t.delete||(a+=n)}}return{...a>1?{rowspan:a}:{},...i>1?{colspan:i}:{}}})(e,t,a,o,r)),((e,t,n,o,r)=>{let a=JSON.parse(JSON.stringify(n));for(let i=e;i<=t;i++){const t=a[i];for(let n=o;n<=r;n++){if(t.children)if(i==e&&n==o);else{const e=t.children[n];e.delete=!0,e.bind={}}if(t.children){let e=0;t.children.forEach(t=>{t.delete&&e++}),e==t.children.length&&(t.delete=!0)}}}return console.log("tableDelete :>> ",a),a})(e,t,a,o,r)},Ln=(e,t)=>{let n=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const r=e[o];let a=0,i=0,l=0,s=0,c=[],u=[];r.forEach((e,t)=>{const{index:n}=e.dataset;let o=null==n?void 0:n.split(","),r=e.getAttribute("rowspan")?e.getAttribute("rowspan"):0,d=e.getAttribute("colspan")?e.getAttribute("colspan"):0;i=Number(o[0]),a=Number(o[1]),s=i,l=a,r&&(s=Number(r)-1+i),d&&(l=Number(d)-1+a),u.push(Number(i)),u.push(Number(s)),c.push(Number(a)),c.push(Number(l))}),a=Math.min(...c),i=Math.min(...u),l=Math.max(...c),s=Math.max(...u);let d=JSON.parse(JSON.stringify(t));n=Dn(i,s,d,a,l)}return console.log("newData :>> ",n),An(e),n},Rn=()=>({id:Z(),style:{width:"auto",height:"auto"},bind:{},type:Ie.Td}),Mn=()=>({id:Z(),style:{width:"auto",height:"auto"},bind:{},type:Ie.Tr,children:[]});Z(),Ie.Tr,Z(),Ie.Td,Z(),Ie.Td,Z(),Ie.Td;const jn={install(e){e.component("tableContainer",Sn)}},zn={class:"aic jcfend toolSetting"},Nn={class:"fd"},Bn={class:"drag-form-right"},Vn={key:1},Hn={class:"drag-form-right"},Un={class:"drag-form-right-conetnt"},Fn="#18181C",Gn="#e2e2e2",$n=Pt(A({__name:"easy-print",props:{dataSource:{type:Object,default:()=>[]},selectoOption:{type:Object,default:()=>({container:document.body,offset:{x:0,y:0}})},richTextContent:{type:Object,default:()=>({})},webViewLoadingTime:{type:Object,default:4e3},options:{type:Object,default:()=>({width:210,height:297,data:[],model:{},qzOption:{},page:1})}},emits:["handleSave","handlePreview"],setup(e,{emit:t}){const n=s([1,1]),o=t,r=s(1),u=e,A=s(gt);s(null),s(null);const T=s();s(["属性"]);const I=s(pt[1].width),D=s(pt[1].height),R=s(Me(I.value)),N=s(Me(D.value)),B=s(0),V=s(1),H=s(),U=s(!0),F=s({});s(!1);const G=s(!0),$=s(!0),X=s({}),q=s(Re.Parameter),Y=s([{name:"默认值(手写静态参数)",value:Re.Parameter},{name:"API(外部接口返回预设值)",value:Re.API}]),W=c(()=>J.getActiveData),J=Jt(),Q=Wt(),K=c(()=>J.getPageData),ee=c(()=>Q.getScale),te=()=>{Q.setDataSourceType(q.value)},ne=s({}),oe=s(0),re=s(0),ae=s();d(()=>X.value,e=>{if(W.value){((e,t)=>{for(const n in e){const o=e[n];t.forEach(e=>{e.prop==n&&(e.defaultValue=o)})}})(X.value,W.value.attrsJson);let e=W.value.attrsJson.find(e=>"prop"==e.prop);e&&Ve(ne,e.defaultValue,W.value.attrsJson)}},{deep:!0,immediate:!0}),d(()=>u.webViewLoadingTime,e=>{e&&Q.setWebViewLoadingTime(e)},{deep:!0,immediate:!0}),d(()=>u.richTextContent,e=>{e&&Q.setRichTextContent(e)},{deep:!0,immediate:!0}),d(()=>u.dataSource,e=>{e&&Array.isArray(e)&&e.length>0&&Q.setDataCource(e)},{deep:!0,immediate:!0});const ie=()=>{R.value=Me(I.value)},le=()=>{N.value=Me(D.value)};s(0);const se=s({width:0,height:0});d(()=>u.options,e=>{e?(e.width&&e.height&&(I.value=e.width?e.width:I.value,D.value=e.height?e.height:D.value),Array.isArray(u.options.data)&&u.options.data.length>=1?J.setPageData(u.options.data):J.setPageData([{id:Z(),renderList:[]}]),Array.isArray(e.model)?ne.value=e.model[0]:e.model&&!Array.isArray(e.model)&&(ne.value=e.model?e.model:{}),q.value=e.dataSource?e.dataSource:q.value,r.value=e.page?e.page:1):(J.setPageData([{id:Z(),renderList:[]}]),ne.value={},r.value=1),ie(),le(),se.value.width=I.value,se.value.height=D.value,J.setPageOption({height:N.value,width:R.value}),J.setPage(p(r.value))},{immediate:!0,deep:!0});const ce=s(),ue=()=>{o("handlePreview",!0,Qe())},de=P({scale:1,isBlack:!1,lines:{h:[],v:[]},thick:20,isShowRuler:!0,isShowReferLine:!0});St();const pe=s(!1),fe=(e,t)=>{if(J.setPage(e),e>t){let n=e-t;for(let e=1;e<=n;e++)J.addPageData({id:Z(),renderList:[]})}else{let n=t-e;for(let e=1;e<=n;e++)J.removePageData()}},he=()=>{I.value=se.value.width,D.value=se.value.height,le(),ie(),pe.value=!1},ge=e=>{"custom"==e.type?pe.value=!0:(I.value=e.width,D.value=e.height,ie(),le()),se.value.width=I.value,se.value.height=D.value},me=e=>{Q.setScale(e.scale),Q.setOffset({x:e.x,y:e.y})},ve=e=>Math.floor(100*e)+"%";function be(e){return e/(R.value*ee.value)*R.value}Q.setScaleX(be),Q.setScaleY(function(e){return e/(N.value*ee.value)*N.value});const ye=()=>T.value?T.value.getBoundingClientRect().height-50:500,we=()=>T.value?T.value.getBoundingClientRect().width-0:1400,_e=s(1400),xe=s(500),Ee=e=>{H.value&&H.value.panzoomInstance.zoom(e)},Ce=s(),Oe=(e,t)=>{let n=function(e,t,n){return{x:t/e,y:n/e}}(ee.value,e,t),o=Math.ceil(n.y/N.value);oe.value=e,re.value=t,je(ae.value,"x",be(oe.value)),je(ae.value,"y",be(re.value)),ze(ae.value);let r=ae.value.attrsJson.find(e=>"prop"==e.prop);r&&Ve(ne,r.defaultValue,ae.value.attrsJson);let i=a.cloneDeep({...ae.value,id:Z()});(async e=>{var t;e.attrsJson&&(null==(t=e.attrsJson)||t.forEach(t=>{Be(e,t)}))})(i),J.setPageDataItem(i,o-1),ae.value={}},ke=(e,t)=>{let n=((e,t)=>{const n=[];for(let o=0;o<e;o++){let e=a.cloneDeep(Mn());e.index=o,e.id=Z(),e.type=Ie.Tr;for(let n=0;n<t;n++){const t=a.cloneDeep(Rn());t.index=n,t.type=Ie.Td,t.id=Z(),e.children||(e.children=[]),e.children.push(t)}n.push(e)}return n})(e,t),o=a.cloneDeep(mt);je(o,"rowColData",n),ae.value=o,Oe(10,10)},Se=()=>{};f(()=>{setTimeout(()=>{(e=>{let t={x:0,y:0};e.offset&&(t=e.offset);let n=null;n="string"==typeof e.container?document.querySelector(e.container):e.container,(()=>{let o=!1,r=null,a=null,i=null,l=null,s=null;const u=c(()=>{var e;return null==(e=p.getActiveData)?void 0:e.styles.active}),d=Wt(),p=Jt();function f(){document.querySelectorAll(".targetSelecto").forEach(e=>{const t=e.getBoundingClientRect(),n=t.right>=Math.min(r,i)&&t.left<=Math.max(r,i)&&t.bottom>=Math.min(a,l)&&t.top<=Math.max(a,l);e.classList.toggle("selected",n)})}n.addEventListener("mousedown",function(e){d.getControlLeft&&(o=!0,r=e.clientX-t.x,a=e.clientY-t.y,i=e.clientX-t.x,l=e.clientY-t.y,s=document.createElement("div"),s.className="selection",n.appendChild(s),f())}),n.addEventListener("mousemove",function(e){if(!d.getControlLeft&&u.value)return;if(!o)return;i=e.clientX-t.x,l=e.clientY-t.y;const n=Et("--el-color-primary"),c=s;c.style.zIndex="9999",c.style.position="absolute",c.style.border=`2px dashed rgba(${Ue(n.value).join(",")} ,1)`,c.style.background=`rgba(${Ue(n.value).join(",")} , 0.3)`,c.style.left=`${Math.min(r,i)}px`,c.style.top=`${Math.min(a,l)}px`,c.style.width=`${Math.abs(i-r)}px`,c.style.height=`${Math.abs(l-a)}px`,f()}),document.addEventListener("mouseup",function(){if(o=!1,s){n.removeChild(s),s=null;const t=document.querySelectorAll(".selected");e.select(t)}})})()})({scale:Q.getScale,selectableTargets:[".targetSelecto"],...u.selectoOption,select:e=>{Q.setCurrentSelected(e)}})},200),B.value++,De(),T.value&&(_e.value=we(),xe.value=ye()),window.addEventListener("resize",Te),document.addEventListener("keydown",function(t){var n,o;"Space"==t.code&&(null==(n=document.querySelector(".canvas"))||n.classList.add("space-key-pressed"),null==(o=e.value)||o.bind()),"ControlLeft"==t.code&&(Q.setControlLeft(!0),J.allDraggable(!1))}),document.addEventListener("keyup",function(t){var n,o;"Space"==t.code&&(null==(n=e.value)||n.destroy(),null==(o=document.querySelector(".canvas"))||o.classList.remove("space-key-pressed")),"ControlLeft"==t.code&&(Q.setControlLeft(!1),J.allDraggable(!0))});const e=H.value.panzoomInstance;document.addEventListener("wheel",function(e){e.ctrlKey||e.metaKey})});const Ae=()=>{if(W.value){let e=function(e){return e<1?1:e>N.value*r.value?r.value:Math.floor(e/N.value)+1};W.value.attrsJson.forEach(e=>{"w"!=e.prop&&"h"!=e.prop&&"x"!=e.prop&&"y"!=e.prop||(X.value[e.prop]=W.value.styles[e.prop])});let t=e(W.value.styles.y);J.updatePageDataItem(W.value,t-1)}},Te=()=>{H.value&&(De(),H.value.initPanzoom()),T.value&&(_e.value=we(),xe.value=ye())},De=()=>{const e=Number(window.devicePixelRatio||1);V.value=1*e.toFixed(2)},Le=s({h:[],v:[]}),Ne=c(()=>({width:`${_e.value}px`,height:`${xe.value}px`})),Fe=s("horizontal"),Ge=c(()=>de.isBlack?Gn:Fn);c(()=>de.isBlack?Fn:Gn);const $e=Et("--el-color-primary"),Xe=Et("--el-color-white");c(()=>de.isBlack?"vertical"==Fe.value?"#fff":$e.value:"vertical"==Fe.value?$e.value:Gn);const qe=c(()=>({bgColor:"#EDEEF3",backgroundSize:"15px 15px, 15px 15px",hoverBg:$e.value,longfgColor:"#BABBBC",fontColor:"#2C2C2C",shadowColor:"#999",lineColor:$e.value,borderColor:"#B5B5B5",cornerActiveColor:"#c48"}));c(()=>Number(ee.value).toFixed(2));const Ye=c(()=>({width:`${R.value}px`,height:`${N.value}px`,background:de.isBlack?"#232323":"#fff"})),We=s(!0),Je=e=>{We.value=e},Qe=()=>({width:se.value.width,height:se.value.height,data:K.value,qzOption:{size:{width:se.value.width,height:se.value.height},units:"mm"},page:r.value,dataSource:q.value,model:He(K.value)}),Ze=e=>{o("handleSave",Qe())};return(e,t)=>{const o=h("el-dropdown-item"),a=h("el-dropdown-menu"),s=h("el-dropdown"),c=h("el-button"),u=h("ElInputNumber"),d=h("el-text"),p=h("el-slider"),f=h("el-form-item"),P=h("el-form"),I=h("el-result"),D=h("el-option"),V=h("el-select"),Q=h("el-divider"),Z=h("el-input-number");return g(),x(E(i.DraggableContainer),{grid:n.value,ref_key:"preViewHtmlRef",ref:ce,disabled:!0,adsorbParent:!1,referenceLineVisible:!1},{default:b(()=>[y("div",{class:"easyPrint",ref_key:"easyPrintRef",ref:T},[y("div",{class:"easyPringTool",onMousedown:t[2]||(t[2]=S(()=>{},["stop"]))},[y("div",{class:"easyPrintTop",style:O({color:E(Xe)})},[v(s,{onCommand:ge},{dropdown:b(()=>[v(a,null,{default:b(()=>[(g(!0),m(w,null,_(E(pt),(e,t)=>(g(),x(o,{command:e,key:t},{default:b(()=>[C(L(e.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:b(()=>[y("div",null,[v(E(Ut),{class:"CP",fill:E(Xe),style:{width:"18px"}},null,8,["fill"]),v(E(Bt),{class:"CP",fill:E($e),style:{width:"13px","margin-left":"3px"}},null,8,["fill"])])]),_:1}),(g(!0),m(w,null,_(A.value,e=>(g(),x(c,{key:e.title,onMousedown:t=>{return n=e,void(ae.value=n);var n},onDragend:e=>{return t=e,void z(()=>{if(ce.value){const e=ce.value.$el.getBoundingClientRect(),n=Math.floor(t.clientX),o=Math.floor(t.clientY);if(n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom){let t=n-e.x,r=o-e.y;Oe(t,r)}else console.log("鼠标没有悬浮在指定DOM上方")}});var t},type:"primary",draggable:"true",class:"ml10"},{default:b(()=>[C(L(e.title),1)]),_:2},1032,["onMousedown","onDragend"]))),128)),v(E(tn),{onHandleTables:ke},{default:b(()=>[v(c,{type:"primary",class:"ml10"},{default:b(()=>[C(L(E(mt).title),1)]),_:1})]),_:1}),v(c,{type:"primary",class:"ml10",onClick:ue},{default:b(()=>t[15]||(t[15]=[C("预览")])),_:1,__:[15]}),v(c,{type:"primary",class:"ml10",onClick:Ze},{default:b(()=>t[16]||(t[16]=[C("保存")])),_:1,__:[16]})],4),y("div",zn,[v(E($t),{fill:"#474747",class:"CP mr10",onClick:t[0]||(t[0]=e=>$.value=!$.value),style:{width:"20px"}}),v(E(Lt),{fill:"#474747",class:"CP",onClick:t[1]||(t[1]=e=>G.value=!G.value),style:{width:"20px"}})])],32),y("div",Nn,[y("div",{class:"wrapper",style:O(Ne.value)},[(g(),x(E(Pe),{key:B.value,rate:1,onZoomchange:me,scale:ee.value,"onUpdate:scale":t[6]||(t[6]=e=>ee.value=e),thick:de.thick,width:_e.value,showRuler:U.value,height:xe.value,palette:qe.value,snapsObj:Le.value,canvasWidth:R.value,class:"sketchruleRef",canvasHeight:N.value,panzoomOption:F.value,ref_key:"sketchruleRef",ref:H,isShowReferLine:de.isShowReferLine,lines:de.lines},{default:b(()=>[v(E(i.DraggableContainer),{grid:n.value,onClick:Se,ref_key:"preViewHtmlRef",ref:ce},{default:b(()=>[(g(!0),m(w,null,_(K.value,e=>(g(),m("div",{"data-type":"page",key:e,class:"canvas",ref_for:!0,ref_key:"DraggableContainerRef",ref:Ce,style:O({...Ye.value,borderTop:"10px solid #EDEEF3"})},[y("div",null,[(g(!0),m(w,null,_(e.renderList,(e,t)=>(g(),x(E(l),{key:t,x:e.styles.x,"onUpdate:x":t=>e.styles.x=t,onActivated:t=>{return n=e,J.setActiveData(n),void z(()=>{W.value.attrsJson.forEach(e=>{X.value[e.prop]=e.defaultValue}),X.value.id=n.id});var n},active:e.styles.active,"onUpdate:active":t=>e.styles.active=t,onDragEnd:e=>{z(()=>{Ae()})},onDeactivated:e=>{},style:O({zIndex:e.styles.zIndex}),onResizeEnd:e=>{z(()=>{Ae()})},y:e.styles.y,"onUpdate:y":t=>e.styles.y=t,w:e.styles.w,"onUpdate:w":t=>e.styles.w=t,resizable:e.styles.resizable,draggable:e.styles.draggable,"onUpdate:draggable":t=>e.styles.draggable=t,classNameActive:e.styles.classNameActive,h:e.styles.h,"onUpdate:h":t=>e.styles.h=t,"parent-scale-x":ee.value,"parent-scale-y":ee.value,minH:1,minW:1,initH:e.styles.h,initW:e.styles.w},{default:b(()=>[v(E(Qt),{element:e,model:ne.value},null,8,["element","model"])]),_:2},1032,["x","onUpdate:x","onActivated","active","onUpdate:active","onDragEnd","onDeactivated","style","onResizeEnd","y","onUpdate:y","w","onUpdate:w","resizable","draggable","onUpdate:draggable","classNameActive","h","onUpdate:h","parent-scale-x","parent-scale-y","initH","initW"]))),128))])],4))),128))]),_:1},8,["grid"])]),btn:b(({reset:e,zoomIn:n,zoomOut:o})=>[y("div",{class:"btns",onMousedown:t[5]||(t[5]=S(()=>{},["stop"]))},[y("div",null,[t[17]||(t[17]=C(" 页数 ")),v(u,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),onChange:fe,controlsPosition:"right",min:1,style:{width:"80px","margin-right":"10px"}},null,8,["modelValue"])]),v(d,{class:"mx-1",style:O({color:Ge.value}),type:"primary"},{default:b(()=>[C(L(ve(ee.value)),1)]),_:1},8,["style"]),v(p,{min:.3,max:4,step:.1,"format-tooltip":ve,style:{width:"150px","margin-left":"10px"},modelValue:ee.value,"onUpdate:modelValue":t[4]||(t[4]=e=>ee.value=e),onInput:Ee},null,8,["modelValue"])],32)]),_:1},8,["scale","thick","width","showRuler","height","palette","snapsObj","canvasWidth","canvasHeight","panzoomOption","isShowReferLine","lines"]))],4),G.value?(g(),x(E(l),{key:0,onMousedown:t[7]||(t[7]=S(()=>{},["stop"])),style:{"z-index":"99"},draggable:We.value,classNameActive:"activeNO",x:we()-280,y:70,w:250,resizable:!1},{default:b(()=>[v(E(on),{title:"属性配置",onHandleDraggable:Je},{default:b(()=>[y("div",Bn,[W.value?(g(),m("div",{key:0,class:"drag-form-right-conetnt",style:O({height:xe.value-100+"px"})},[v(P,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef",size:"small",model:X.value},{default:b(()=>[(g(!0),m(w,null,_(W.value.attrsJson,(e,t)=>(g(),x(f,M({key:t},{ref_for:!0},e.formItemAttrs,{prop:e.prop,label:e.label,rules:e.rules}),{default:b(()=>[(g(),x(j(e.componentName),M({style:{width:"100%"}},{ref_for:!0},{...e.attrs},{modelValue:X.value[e.prop],"onUpdate:modelValue":t=>X.value[e.prop]=t,onChange:e=>((e,t)=>{let n={prop:""};W.value.attrsJson&&(n=W.value.attrsJson[t]),z(()=>{Be(W.value,n)})})(0,t)}),{default:b(()=>[e.children?(g(!0),m(w,{key:0},_(e.children,(e,t)=>(g(),x(j(e.componentName),M({key:t},{ref_for:!0},e),null,16))),128)):k("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1040,["prop","label","rules"]))),128))]),_:1},8,["model"])],4)):(g(),m("div",Vn,[v(I,{icon:"warning",title:"提示","sub-title":"请选中元素设置属性值"})]))])]),_:1})]),_:1},8,["draggable","x"])):k("",!0),$.value?(g(),x(E(l),{key:1,onMousedown:t[9]||(t[9]=S(()=>{},["stop"])),style:{"z-index":"99"},draggable:We.value,classNameActive:"activeNO",x:20,y:70,w:250,resizable:!1},{default:b(()=>[v(E(on),{title:"数据源",onHandleDraggable:Je},{default:b(()=>[y("div",Hn,[y("div",Un,[v(P,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef",size:"small"},{default:b(()=>[v(f,{label:"数据源类型"},{default:b(()=>[v(V,{modelValue:q.value,"onUpdate:modelValue":t[8]||(t[8]=e=>q.value=e),placeholder:"请选择",size:"small",onChange:te},{default:b(()=>[(g(!0),m(w,null,_(Y.value,(e,t)=>(g(),x(D,{key:t,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},512)])])]),_:1})]),_:1},8,["draggable"])):k("",!0)])],512),v(E(an),{onMousedown:t[13]||(t[13]=S(()=>{},["stop"])),modelValue:pe.value,"onUpdate:modelValue":t[14]||(t[14]=e=>pe.value=e),title:"纸张尺寸设置"},{footer:b(()=>[y("div",null,[v(c,{size:"large",onClick:t[12]||(t[12]=e=>pe.value=!1)},{default:b(()=>t[19]||(t[19]=[C("取消")])),_:1,__:[19]}),v(c,{size:"large",type:"primary",onClick:he},{default:b(()=>t[20]||(t[20]=[C("保存")])),_:1,__:[20]})])]),default:b(()=>[v(Q,{"content-position":"left"},{default:b(()=>t[18]||(t[18]=[C("纸张尺寸")])),_:1,__:[18]}),v(P,{inline:!0,style:{"margin-left":"10px"}},{default:b(()=>[v(f,{label:"宽(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(Z,{modelValue:se.value.width,"onUpdate:modelValue":t[10]||(t[10]=e=>se.value.width=e),style:{width:"120px"},min:1,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),v(f,{label:"高(mm)",style:{"margin-bottom":"0"}},{default:b(()=>[v(Z,{placeholder:"请输入尺寸",min:1,modelValue:se.value.height,"onUpdate:modelValue":t[11]||(t[11]=e=>se.value.height=e),style:{width:"120px"},size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["grid"])}}}),[["__scopeId","data-v-496853f1"],["__file","D:/work/public/easy-print/src/packages/easy-print/easy-print.vue"]]),Xn=Pt(A({__name:"text",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=Wt();P({data:[]});const o=s();return f(()=>{o.value.getBoundingClientRect()}),(t,r)=>{const a=h("Popover");return g(),x(a,{style:O({...E(Ge)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:b(()=>[y("div",{ref_key:"textRef",ref:o},L(""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop)),513)]),_:1},8,["style"])}}}),[["__scopeId","data-v-3811fa91"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/text.vue"]]),qn=Pt(A({__name:"TwoCode",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){P({data:[]});const n=Wt();return(t,o)=>{const r=h("vue-qr"),a=h("Popover");return g(),x(a,null,{default:b(()=>[v(r,{style:O({width:e.element.styles.w-2+"px",height:e.element.styles.h-2+"px"}),text:""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop),logoSrc:e.element.attrs.logoSrc,backgroundColor:e.element.attrs.backgroundColor,size:e.element.attrs.size,correctLevel:e.element.attrs.correctLevel},null,8,["style","text","logoSrc","backgroundColor","size","correctLevel"])]),_:1})}}}),[["__scopeId","data-v-68ddaa06"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/TwoCode.vue"]]);var Yn={},Wn={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=n.text||t,this.options=n},Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.CODE39=void 0;var Qn,Zn=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Kn=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),n.mod43&&(e+=(o=function(e){for(var t=0,n=0;n<e.length;n++)t+=oo(e[n]);return t%=43}(e),eo[o])),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Zn(t,[{key:"encode",value:function(){for(var e=no("*"),t=0;t<this.data.length;t++)e+=no(this.data[t])+"0";return{data:e+=no("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),t}(((Qn=Jn)&&Qn.__esModule?Qn:{default:Qn}).default),eo=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],to=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function no(e){return t=oo(e),to[t].toString(2);var t}function oo(e){return eo.indexOf(e)}Wn.CODE39=Kn;var ro,ao={},io={},lo={},so={};function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(so,"__esModule",{value:!0});var uo=so.SET_A=0,po=so.SET_B=1,fo=so.SET_C=2;so.SHIFT=98;var ho=so.START_A=103,go=so.START_B=104,mo=so.START_C=105;so.MODULO=103,so.STOP=106,so.FNC1=207,so.SET_BY_CODE=(co(ro={},ho,uo),co(ro,go,po),co(ro,mo,fo),ro),so.SWAP={101:uo,100:po,99:fo},so.A_START_CHAR=String.fromCharCode(208),so.B_START_CHAR=String.fromCharCode(209),so.C_START_CHAR=String.fromCharCode(210),so.A_CHARS="[\0-_È-Ï]",so.B_CHARS="[ -È-Ï]",so.C_CHARS="(Ï*[0-9]{2}Ï*)",so.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(lo,"__esModule",{value:!0});var vo=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),bo=function(e){return e&&e.__esModule?e:{default:e}}(Jn),yo=so,wo=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),n));return o.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),vo(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,n=e.shift()-105,o=yo.SET_BY_CODE[n];if(void 0===o)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(yo.FNC1);var r=t.next(e,1,o);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(n)+r.result+t.getBar((r.checksum+n)%yo.MODULO)+t.getBar(yo.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return yo.BARS[e]?yo.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===yo.SET_A){var n=e.shift();return n<32?n+64:n-32}return t===yo.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,n,o){if(!e.length)return{result:"",checksum:0};var r=void 0,a=void 0;if(e[0]>=200){a=e.shift()-105;var i=yo.SWAP[a];void 0!==i?r=t.next(e,n+1,i):(o!==yo.SET_A&&o!==yo.SET_B||a!==yo.SHIFT||(e[0]=o===yo.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),r=t.next(e,n+1,o))}else a=t.correctIndex(e,o),r=t.next(e,n+1,o);var l=a*n;return{result:t.getBar(a)+r.result,checksum:l+r.checksum}}}]),t}(bo.default);lo.default=wo;var _o={};Object.defineProperty(_o,"__esModule",{value:!0});var xo=so,Eo=function(e){return e.match(new RegExp("^"+xo.A_CHARS+"*"))[0].length},Co=function(e){return e.match(new RegExp("^"+xo.B_CHARS+"*"))[0].length},Oo=function(e){return e.match(new RegExp("^"+xo.C_CHARS+"*"))[0]};function ko(e,t){var n=t?xo.A_CHARS:xo.B_CHARS,o=e.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(o)return o[1]+String.fromCharCode(204)+So(e.substring(o[1].length));var r=e.match(new RegExp("^"+n+"+"))[0];return r.length===e.length?e:r+String.fromCharCode(t?205:206)+ko(e.substring(r.length),!t)}function So(e){var t=Oo(e),n=t.length;if(n===e.length)return e;e=e.substring(n);var o=Eo(e)>=Co(e);return t+String.fromCharCode(o?206:205)+ko(e,o)}_o.default=function(e){var t=void 0;if(Oo(e).length>=2)t=xo.C_START_CHAR+So(e);else{var n=Eo(e)>Co(e);t=(n?xo.A_START_CHAR:xo.B_START_CHAR)+ko(e,n)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})},Object.defineProperty(io,"__esModule",{value:!0});var Ao=Po(lo),To=Po(_o);function Po(e){return e&&e.__esModule?e:{default:e}}function Io(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Do=function(e){function t(e,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var o=Io(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,To.default)(e),n));else o=Io(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Io(o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ao.default);io.default=Do;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});var Ro=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Mo=function(e){return e&&e.__esModule?e:{default:e}}(lo),jo=so,zo=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,jo.A_START_CHAR+e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ro(t,[{key:"valid",value:function(){return new RegExp("^"+jo.A_CHARS+"+$").test(this.data)}}]),t}(Mo.default);Lo.default=zo;var No={};Object.defineProperty(No,"__esModule",{value:!0});var Bo=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Vo=function(e){return e&&e.__esModule?e:{default:e}}(lo),Ho=so,Uo=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ho.B_START_CHAR+e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Bo(t,[{key:"valid",value:function(){return new RegExp("^"+Ho.B_CHARS+"+$").test(this.data)}}]),t}(Vo.default);No.default=Uo;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});var Go=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),$o=function(e){return e&&e.__esModule?e:{default:e}}(lo),Xo=so,qo=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Xo.C_START_CHAR+e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Go(t,[{key:"valid",value:function(){return new RegExp("^"+Xo.C_CHARS+"+$").test(this.data)}}]),t}($o.default);Fo.default=qo,Object.defineProperty(ao,"__esModule",{value:!0}),ao.CODE128C=ao.CODE128B=ao.CODE128A=ao.CODE128=void 0;var Yo=Zo(io),Wo=Zo(Lo),Jo=Zo(No),Qo=Zo(Fo);function Zo(e){return e&&e.__esModule?e:{default:e}}ao.CODE128=Yo.default,ao.CODE128A=Wo.default,ao.CODE128B=Jo.default,ao.CODE128C=Qo.default;var Ko={},er={},tr={};Object.defineProperty(tr,"__esModule",{value:!0}),tr.SIDE_BIN="101",tr.MIDDLE_BIN="01010",tr.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},tr.EAN2_STRUCTURE=["LL","LG","GL","GG"],tr.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],tr.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var nr={},or={};Object.defineProperty(or,"__esModule",{value:!0});var rr=tr;or.default=function(e,t,n){var o=e.split("").map(function(e,n){return rr.BINARIES[t[n]]}).map(function(t,n){return t?t[e[n]]:""});if(n){var r=e.length-1;o=o.map(function(e,t){return t<r?e+n:e})}return o.join("")},Object.defineProperty(nr,"__esModule",{value:!0});var ar=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ir=tr,lr=sr(or);function sr(e){return e&&e.__esModule?e:{default:e}}var cr=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.fontSize=!n.flat&&n.fontSize>10*n.width?10*n.width:n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ar(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,lr.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,lr.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:ir.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:ir.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:ir.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[ir.SIDE_BIN,this.leftEncode(),ir.MIDDLE_BIN,this.rightEncode(),ir.SIDE_BIN].join(""),text:this.text}}}]),t}(sr(Jn).default);nr.default=cr,Object.defineProperty(er,"__esModule",{value:!0});var ur=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),dr=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0},pr=tr,fr=function(e){return e&&e.__esModule?e:{default:e}}(nr),hr=function(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+3*t:e+t},0)%10)%10},gr=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=hr(e));var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.lastChar=n.lastChar,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ur(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===hr(this.data)}},{key:"leftText",value:function(){return dr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),n=pr.EAN13_STRUCTURE[this.data[0]];return dr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,n)}},{key:"rightText",value:function(){return dr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return dr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=dr(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(fr.default);er.default=gr;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});var vr=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),br=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0},yr=function(e){return e&&e.__esModule?e:{default:e}}(nr),wr=function(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+t:e+3*t},0)%10)%10},_r=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=wr(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),vr(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===wr(this.data)}},{key:"leftText",value:function(){return br(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return br(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return br(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return br(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}(yr.default);mr.default=_r;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});var Er=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Cr=tr,Or=Sr(or),kr=Sr(Jn);function Sr(e){return e&&e.__esModule?e:{default:e}}var Ar=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Er(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,t=Cr.EAN5_STRUCTURE[(e=this.data,e.split("").map(function(e){return+e}).reduce(function(e,t,n){return n%2?e+9*t:e+3*t},0)%10)];return{data:"1011"+(0,Or.default)(this.data,t,"01"),text:this.text}}}]),t}(kr.default);xr.default=Ar;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});var Pr=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Ir=tr,Dr=Lr(or);function Lr(e){return e&&e.__esModule?e:{default:e}}var Rr=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Pr(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=Ir.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Dr.default)(this.data,e,"01"),text:this.text}}}]),t}(Lr(Jn).default);Tr.default=Rr;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});var jr=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Mr.checksum=Vr;var zr=Nr(or);function Nr(e){return e&&e.__esModule?e:{default:e}}var Br=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=Vr(e));var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.displayValue=n.displayValue,n.fontSize>10*n.width?o.fontSize=10*n.width:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),jr(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==Vr(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,zr.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,zr.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,zr.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,zr.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,zr.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,zr.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}(Nr(Jn).default);function Vr(e){var t,n=0;for(t=1;t<11;t+=2)n+=parseInt(e[t]);for(t=0;t<11;t+=2)n+=3*parseInt(e[t]);return(10-n%10)%10}Mr.default=Br;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});var Ur=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Fr=Xr(or),Gr=Xr(Jn),$r=Mr;function Xr(e){return e&&e.__esModule?e:{default:e}}function qr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Yr=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Wr=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Jr=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=qr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(o.isValid=!1,-1!==e.search(/^[0-9]{6}$/))o.middleDigits=e,o.upcA=Qr(e,"0"),o.text=n.text||""+o.upcA[0]+e+o.upcA[o.upcA.length-1],o.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return qr(o);if(o.middleDigits=e.substring(1,e.length-1),o.upcA=Qr(o.middleDigits,e[0]),o.upcA[o.upcA.length-1]!==e[e.length-1])return qr(o);o.isValid=!0}return o.displayValue=n.displayValue,n.fontSize>10*n.width?o.fontSize=10*n.width:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ur(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],n=Wr[parseInt(t)][parseInt(e)];return(0,Fr.default)(this.middleDigits,n)}}]),t}(Gr.default);function Qr(e,t){for(var n=parseInt(e[e.length-1]),o=Yr[n],r="",a=0,i=0;i<o.length;i++){var l=o[i];r+="X"===l?e[a++]:l}return(r=""+t+r)+(0,$r.checksum)(r)}Hr.default=Jr,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.UPCE=Ko.UPC=Ko.EAN2=Ko.EAN5=Ko.EAN8=Ko.EAN13=void 0;var Zr=ra(er),Kr=ra(mr),ea=ra(xr),ta=ra(Tr),na=ra(Mr),oa=ra(Hr);function ra(e){return e&&e.__esModule?e:{default:e}}Ko.EAN13=Zr.default,Ko.EAN8=Kr.default,Ko.EAN5=ea.default,Ko.EAN2=ta.default,Ko.UPC=na.default,Ko.UPCE=oa.default;var aa={},ia={},la={};Object.defineProperty(la,"__esModule",{value:!0}),la.START_BIN="1010",la.END_BIN="11101",la.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(ia,"__esModule",{value:!0});var sa=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ca=la,ua=function(e){return e&&e.__esModule?e:{default:e}}(Jn),da=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),sa(t,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map(function(t){return e.encodePair(t)}).join("");return{data:ca.START_BIN+t+ca.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=ca.BINARIES[e[1]];return ca.BINARIES[e[0]].split("").map(function(e,n){return("1"===e?"111":"1")+("1"===t[n]?"000":"0")}).join("")}}]),t}(ua.default);ia.default=da;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});var fa=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ha=function(e){return e&&e.__esModule?e:{default:e}}(ia),ga=function(e){var t=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,n){return e+t*(3-n%2*2)},0);return 10*Math.ceil(t/10)-t},ma=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=ga(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),fa(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===ga(this.data)}}]),t}(ha.default);pa.default=ma,Object.defineProperty(aa,"__esModule",{value:!0}),aa.ITF14=aa.ITF=void 0;var va=ya(ia),ba=ya(pa);function ya(e){return e&&e.__esModule?e:{default:e}}aa.ITF=va.default,aa.ITF14=ba.default;var wa={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});var xa=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Ea=function(e){return e&&e.__esModule?e:{default:e}}(Jn),Ca=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),xa(t,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var n=parseInt(this.data[t]).toString(2);n=Oa(n,4-n.length);for(var o=0;o<n.length;o++)e+="0"==n[o]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),t}(Ea.default);function Oa(e,t){for(var n=0;n<t;n++)e="0"+e;return e}_a.default=Ca;var ka={},Sa={};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.mod10=function(e){for(var t=0,n=0;n<e.length;n++){var o=parseInt(e[n]);(n+e.length)%2==0?t+=o:t+=2*o%10+Math.floor(2*o/10)}return(10-t%10)%10},Sa.mod11=function(e){for(var t=0,n=[2,3,4,5,6,7],o=0;o<e.length;o++){var r=parseInt(e[e.length-1-o]);t+=n[o%n.length]*r}return(11-t%11)%11},Object.defineProperty(ka,"__esModule",{value:!0});var Aa=function(e){return e&&e.__esModule?e:{default:e}}(_a),Ta=Sa,Pa=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,Ta.mod10)(e),n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Aa.default);ka.default=Pa;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});var Da=function(e){return e&&e.__esModule?e:{default:e}}(_a),La=Sa,Ra=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,La.mod11)(e),n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Da.default);Ia.default=Ra;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});var ja=function(e){return e&&e.__esModule?e:{default:e}}(_a),za=Sa,Na=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,za.mod10)(e),e+=(0,za.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(ja.default);Ma.default=Na;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});var Va=function(e){return e&&e.__esModule?e:{default:e}}(_a),Ha=Sa,Ua=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,Ha.mod11)(e),e+=(0,Ha.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Va.default);Ba.default=Ua,Object.defineProperty(wa,"__esModule",{value:!0}),wa.MSI1110=wa.MSI1010=wa.MSI11=wa.MSI10=wa.MSI=void 0;var Fa=Ya(_a),Ga=Ya(ka),$a=Ya(Ia),Xa=Ya(Ma),qa=Ya(Ba);function Ya(e){return e&&e.__esModule?e:{default:e}}wa.MSI=Fa.default,wa.MSI10=Ga.default,wa.MSI11=$a.default,wa.MSI1010=Xa.default,wa.MSI1110=qa.default;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.pharmacode=void 0;var Ja=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Qa=function(e){return e&&e.__esModule?e:{default:e}}(Jn),Za=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.number=parseInt(e,10),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ja(t,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(Qa.default);Wa.pharmacode=Za;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.codabar=void 0;var ei=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ti=function(e){return e&&e.__esModule?e:{default:e}}(Jn),ni=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),n));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ei(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),n=0;n<this.data.length;n++)e.push(t[this.data.charAt(n)]),n!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(ti.default);Ka.codabar=ni;var oi={},ri={},ai={};Object.defineProperty(ai,"__esModule",{value:!0}),ai.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"],ai.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],ai.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"":["($)","G"],"\b":["($)","H"],"\t":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]},Object.defineProperty(ri,"__esModule",{value:!0});var ii=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),li=ai,si=function(e){return e&&e.__esModule?e:{default:e}}(Jn),ci=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ii(t,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.data.split("").flatMap(function(e){return li.MULTI_SYMBOLS[e]||e}),n=e.map(function(e){return t.getEncoding(e)}).join(""),o=t.checksum(e,20),r=t.checksum(e.concat(o),15);return{text:this.text,data:t.getEncoding("ÿ")+n+t.getEncoding(o)+t.getEncoding(r)+t.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(e){return li.BINARIES[t.symbolValue(e)]}},{key:"getSymbol",value:function(e){return li.SYMBOLS[e]}},{key:"symbolValue",value:function(e){return li.SYMBOLS.indexOf(e)}},{key:"checksum",value:function(e,n){var o=e.slice().reverse().reduce(function(e,o,r){var a=r%n+1;return e+t.symbolValue(o)*a},0);return t.getSymbol(o%47)}}]),t}(si.default);ri.default=ci;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});var di=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),pi=function(e){return e&&e.__esModule?e:{default:e}}(ri),fi=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),di(t,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),t}(pi.default);ui.default=fi,Object.defineProperty(oi,"__esModule",{value:!0}),oi.CODE93FullASCII=oi.CODE93=void 0;var hi=mi(ri),gi=mi(ui);function mi(e){return e&&e.__esModule?e:{default:e}}oi.CODE93=hi.default,oi.CODE93FullASCII=gi.default;var vi={};Object.defineProperty(vi,"__esModule",{value:!0}),vi.GenericBarcode=void 0;var bi=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),yi=function(e){return e&&e.__esModule?e:{default:e}}(Jn),wi=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),bi(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(yi.default);vi.GenericBarcode=wi,Object.defineProperty(Yn,"__esModule",{value:!0});var _i=Wn,xi=ao,Ei=Ko,Ci=aa,Oi=wa,ki=Wa,Si=Ka,Ai=oi,Ti=vi;Yn.default={CODE39:_i.CODE39,CODE128:xi.CODE128,CODE128A:xi.CODE128A,CODE128B:xi.CODE128B,CODE128C:xi.CODE128C,EAN13:Ei.EAN13,EAN8:Ei.EAN8,EAN5:Ei.EAN5,EAN2:Ei.EAN2,UPC:Ei.UPC,UPCE:Ei.UPCE,ITF14:Ci.ITF14,ITF:Ci.ITF,MSI:Oi.MSI,MSI10:Oi.MSI10,MSI11:Oi.MSI11,MSI1010:Oi.MSI1010,MSI1110:Oi.MSI1110,pharmacode:ki.pharmacode,codabar:Si.codabar,CODE93:Ai.CODE93,CODE93FullASCII:Ai.CODE93FullASCII,GenericBarcode:Ti.GenericBarcode};var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});var Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};Pi.default=function(e,t){return Ii({},e,t)};var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.default=function(e){var t=[];return function e(n){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(n[o]);else n.text=n.text||"",n.data=n.data||"",t.push(n)}(e),t};var Li={};Object.defineProperty(Li,"__esModule",{value:!0}),Li.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e};var Ri={},Mi={},ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in t)t.hasOwnProperty(n)&&"string"==typeof e[n=t[n]]&&(e[n]=parseInt(e[n],10));return"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue),e};var zi={};Object.defineProperty(zi,"__esModule",{value:!0}),zi.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}},Object.defineProperty(Mi,"__esModule",{value:!0});var Ni=Vi(ji),Bi=Vi(zi);function Vi(e){return e&&e.__esModule?e:{default:e}}Mi.default=function(e){var t={};for(var n in Bi.default)Bi.default.hasOwnProperty(n)&&(e.hasAttribute("jsbarcode-"+n.toLowerCase())&&(t[n]=e.getAttribute("jsbarcode-"+n.toLowerCase())),e.hasAttribute("data-"+n.toLowerCase())&&(t[n]=e.getAttribute("data-"+n.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,Ni.default)(t)};var Hi={},Ui={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.getTotalWidthOfEncodings=Fi.calculateEncodingAttributes=Fi.getBarcodePadding=Fi.getEncodingHeight=Fi.getMaximumHeightOfEncodings=void 0;var Gi=function(e){return e&&e.__esModule?e:{default:e}}(Pi);function $i(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function Xi(e,t,n){if(n.displayValue&&t<e){if("center"==n.textAlign)return Math.floor((e-t)/2);if("left"==n.textAlign)return 0;if("right"==n.textAlign)return Math.floor(e-t)}return 0}function qi(e,t,n){var o;if(n)o=n;else{if("undefined"==typeof document)return 0;o=document.createElement("canvas").getContext("2d")}o.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var r=o.measureText(e);return r?r.width:0}Fi.getMaximumHeightOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)e[n].height>t&&(t=e[n].height);return t},Fi.getEncodingHeight=$i,Fi.getBarcodePadding=Xi,Fi.calculateEncodingAttributes=function(e,t,n){for(var o=0;o<e.length;o++){var r,a=e[o],i=(0,Gi.default)(t,a.options);r=i.displayValue?qi(a.text,i,n):0;var l=a.data.length*i.width;a.width=Math.ceil(Math.max(r,l)),a.height=$i(a,i),a.barcodePadding=Xi(r,l,i)}},Fi.getTotalWidthOfEncodings=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width;return t},Object.defineProperty(Ui,"__esModule",{value:!0});var Yi=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Wi=function(e){return e&&e.__esModule?e:{default:e}}(Pi),Ji=Fi,Qi=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=n,this.options=o}return Yi(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,Wi.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,Ji.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,Ji.getTotalWidthOfEncodings)(this.encodings),n=(0,Ji.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var n,o=this.canvas.getContext("2d"),r=t.data;n="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,o.fillStyle=e.lineColor;for(var a=0;a<r.length;a++){var i=a*e.width+t.barcodePadding;"1"===r[a]?o.fillRect(i,n,e.width,e.height):r[a]&&o.fillRect(i,n,e.width,e.height*r[a])}}},{key:"drawCanvasText",value:function(e,t){var n,o,r=this.canvas.getContext("2d"),a=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(o="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,r.font=a,"left"==e.textAlign||t.barcodePadding>0?(n=0,r.textAlign="left"):"right"==e.textAlign?(n=t.width-1,r.textAlign="right"):(n=t.width/2,r.textAlign="center"),r.fillText(t.text,n,o))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();Ui.default=Qi;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var Ki=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),el=function(e){return e&&e.__esModule?e:{default:e}}(Pi),tl=Fi,nl="http://www.w3.org/2000/svg",ol=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=n,this.options=o,this.document=o.xmlDocument||document}return Ki(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var n=this.encodings[t],o=(0,el.default)(this.options,n.options),r=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(r,o),this.drawSvgBarcode(r,o,n),this.drawSVGText(r,o,n),e+=n.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,tl.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,tl.getTotalWidthOfEncodings)(this.encodings),t=(0,tl.getMaximumHeightOfEncodings)(this.encodings),n=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,t),this.options.background&&this.drawRect(0,0,n,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,n){var o,r=n.data;o="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var a=0,i=0,l=0;l<r.length;l++)i=l*t.width+n.barcodePadding,"1"===r[l]?a++:a>0&&(this.drawRect(i-t.width*a,o,t.width*a,t.height,e),a=0);a>0&&this.drawRect(i-t.width*(a-1),o,t.width*a,t.height,e)}},{key:"drawSVGText",value:function(e,t,n){var o,r,a=this.document.createElementNS(nl,"text");t.displayValue&&(a.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),r="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||n.barcodePadding>0?(o=0,a.setAttribute("text-anchor","start")):"right"==t.textAlign?(o=n.width-1,a.setAttribute("text-anchor","end")):(o=n.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",o),a.setAttribute("y",r),a.appendChild(this.document.createTextNode(n.text)),e.appendChild(a))}},{key:"setSvgAttributes",value:function(e,t){var n=this.svg;n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+e+" "+t),n.setAttribute("xmlns",nl),n.setAttribute("version","1.1"),n.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,n){var o=this.document.createElementNS(nl,"g");return o.setAttribute("transform","translate("+e+", "+t+")"),n.appendChild(o),o}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,n,o,r){var a=this.document.createElementNS(nl,"rect");return a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",n),a.setAttribute("height",o),r.appendChild(a),a}}]),e}();Zi.default=ol;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});var al=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),il=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.encodings=n,this.options=o}return al(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();rl.default=il,Object.defineProperty(Hi,"__esModule",{value:!0});var ll=ul(Ui),sl=ul(Zi),cl=ul(rl);function ul(e){return e&&e.__esModule?e:{default:e}}Hi.default={CanvasRenderer:ll.default,SVGRenderer:sl.default,ObjectRenderer:cl.default};var dl={};function pl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function hl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(dl,"__esModule",{value:!0});var gl=function(){function e(t,n){pl(this,e);var o=fl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=t,o.input=n,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return hl(e,Error),e}(),ml=function(){function e(){pl(this,e);var t=fl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return hl(e,Error),e}(),vl=function(){function e(){pl(this,e);var t=fl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return hl(e,Error),e}();dl.InvalidInputException=gl,dl.InvalidElementException=ml,dl.NoElementException=vl,Object.defineProperty(Ri,"__esModule",{value:!0});var bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl=xl(Mi),wl=xl(Hi),_l=dl;function xl(e){return e&&e.__esModule?e:{default:e}}function El(e){if("string"==typeof e)return function(e){var t=document.querySelectorAll(e);if(0!==t.length){for(var n=[],o=0;o<t.length;o++)n.push(El(t[o]));return n}}(e);if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(El(e[n]));return t}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return o=e,{element:r=document.createElement("canvas"),options:(0,yl.default)(o),renderer:wl.default.CanvasRenderer,afterRender:function(){o.setAttribute("src",r.toDataURL())}};if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,yl.default)(e),renderer:wl.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,yl.default)(e),renderer:wl.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:wl.default.CanvasRenderer};if(e&&"object"===(void 0===e?"undefined":bl(e))&&!e.nodeName)return{element:e,renderer:wl.default.ObjectRenderer};throw new _l.InvalidElementException;var o,r}Ri.default=El;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});var Ol=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),kl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}return Ol(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(n){return this.handleCatch(n),this.api}}}]),e}();Cl.default=kl;var Sl=jl(Yn),Al=jl(Pi),Tl=jl(Di),Pl=jl(Li),Il=jl(Ri),Dl=jl(ji),Ll=jl(Cl),Rl=dl,Ml=jl(zi);function jl(e){return e&&e.__esModule?e:{default:e}}var zl=function(){},Nl=function(e,t,n){var o=new zl;if(void 0===e)throw Error("No element to render on was provided.");return o._renderProperties=(0,Il.default)(e),o._encodings=[],o._options=Ml.default,o._errorHandler=new Ll.default(o),void 0!==t&&((n=n||{}).format||(n.format=Ul()),o.options(n)[n.format](t,n).render()),o};for(var Bl in Nl.getModule=function(e){return Sl.default[e]},Sl.default)Sl.default.hasOwnProperty(Bl)&&Vl(Sl.default,Bl);function Vl(e,t){zl.prototype[t]=zl.prototype[t.toUpperCase()]=zl.prototype[t.toLowerCase()]=function(n,o){var r=this;return r._errorHandler.wrapBarcodeCall(function(){o.text=void 0===o.text?void 0:""+o.text;var a=(0,Al.default)(r._options,o);a=(0,Dl.default)(a);var i=e[t],l=Hl(n,i,a);return r._encodings.push(l),r})}}function Hl(e,t,n){var o=new t(e=""+e,n);if(!o.valid())throw new Rl.InvalidInputException(o.constructor.name,e);var r=o.encode();r=(0,Tl.default)(r);for(var a=0;a<r.length;a++)r[a].options=(0,Al.default)(n,r[a].options);return r}function Ul(){return Sl.default.CODE128?"CODE128":Object.keys(Sl.default)[0]}function Fl(e,t,n){t=(0,Tl.default)(t);for(var o=0;o<t.length;o++)t[o].options=(0,Al.default)(n,t[o].options),(0,Pl.default)(t[o].options);(0,Pl.default)(n),new(0,e.renderer)(e.element,t,n).render(),e.afterRender&&e.afterRender()}zl.prototype.options=function(e){return this._options=(0,Al.default)(this._options,e),this},zl.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},zl.prototype.init=function(){var e;if(this._renderProperties)for(var t in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){e=this._renderProperties[t];var n=(0,Al.default)(this._options,e.options);"auto"==n.format&&(n.format=Ul()),this._errorHandler.wrapBarcodeCall(function(){var t=Hl(n.value,Sl.default[n.format.toUpperCase()],n);Fl(e,t,n)})}},zl.prototype.render=function(){if(!this._renderProperties)throw new Rl.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)Fl(this._renderProperties[e],this._encodings,this._options);else Fl(this._renderProperties,this._encodings,this._options);return this},zl.prototype._defaults=Ml.default,"undefined"!=typeof window&&(window.JsBarcode=Nl),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var n=[];return jQuery(this).each(function(){n.push(this)}),Nl(n,e,t)});const Gl=ln(Nl),$l=Pt(A({__name:"BarCode",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){P({data:[]});const n=Wt(),o=e;s(),d(()=>o.element,e=>{e&&(console.log("手动更新测试"),z(()=>{const e=o.element;e.id&&Gl(r.value,""==n.getRenderType?e.attrs.defaultValue:Fe(o.model,e.prop),{format:e.attrs.format,lineColor:e.attrs.lineColor,width:e.attrs.width,margin:e.attrs.margin,fontSize:e.attrs.fontSize,displayValue:e.attrs.displayValue,height:e.attrs.height})}))},{deep:!0,immediate:!0});const r=s(null);return f(()=>{}),(t,n)=>{const o=h("Popover");return g(),x(o,null,{default:b(()=>[y("img",{style:O({width:e.element.styles.w-2+"px",height:e.element.styles.h-2+"px"}),ref_key:"barcodeRef",ref:r},null,4)]),_:1})}}}),[["__scopeId","data-v-dd453d58"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/BarCode.vue"]]),Xl=["src"],ql=Pt(A({__name:"Image",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=Wt();return P({data:[]}),(t,o)=>{const r=h("Popover");return g(),x(r,null,{default:b(()=>[(""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop))?(g(),m("img",{key:0,style:O({width:e.element.styles.w+"px",height:e.element.styles.h+"px"}),src:""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop),alt:"",objectfit:"cover"},null,12,Xl)):k("",!0)]),_:1})}}}),[["__scopeId","data-v-ebe8edf2"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/Image.vue"]]),Yl=Pt(A({__name:"uploadImg",props:{element:{type:Object,required:!0,default:()=>({})},fileType:{type:Array,default:()=>["png","jpg","jpeg"]},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=t,o=s(!1),r=s([]),a=s([]),i=e;P({data:[]});const l=e=>{r.value=[e.url],o.value=!0},c=e=>{n("update:modelValue",""),n("change","")};d(()=>i.modelValue,e=>{e&&(a.value=[{name:e,url:e}])},{deep:!0,immediate:!0});const u=(e,t)=>{$.warning("不能超过一个")},p=e=>{(e=>new Promise(function(t,n){const o=new FileReader;let r="";o.readAsDataURL(e),o.onload=function(){r=o.result},o.onerror=function(e){n(e)},o.onloadend=function(){t(r)}}))(e.raw).then(e=>{n("update:modelValue",e),n("change",e)})};return(e,t)=>{const n=h("el-upload");return g(),m("div",null,[v(n,{"list-type":"picture-card",accept:"image/png, image/jpeg",limit:1,"on-change":p,"on-remove":c,"auto-upload":!1,"on-preview":l,"file-list":a.value,"onUpdate:fileList":t[0]||(t[0]=e=>a.value=e),multiple:!1,"on-exceed":u},{default:b(()=>t[2]||(t[2]=[C(" 只支持图片一张 "),y("br",null,null,-1),C("png/jpg/jpeg ")])),_:1,__:[2]},8,["file-list"]),o.value?(g(),x(E(G),{key:0,onClose:t[1]||(t[1]=e=>o.value=!1),"initial-index":0,"url-list":r.value},null,8,["url-list"])):k("",!0)])}}}),[["__scopeId","data-v-3583eb4d"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/uploadImg.vue"]]),Wl=["innerHTML"],Jl=Pt(A({__name:"richText",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=Wt();P({data:[]});const o=s();return f(()=>{o.value.getBoundingClientRect()}),(t,r)=>{const a=h("Popover");return g(),x(a,{style:O({...E(Ge)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:b(()=>[y("div",{ref_key:"textRef",ref:o,innerHTML:""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop)},null,8,Wl)]),_:1},8,["style"])}}}),[["__scopeId","data-v-046d542c"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/richText.vue"]]),Ql=Pt(A({__name:"RichTextContent",props:{element:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=t,o=s(!1);s([]),s([]);const r=Wt(),a=c(()=>r.getRichTextContent),i=e,l=P({data:[],htmls:""}),u=()=>{o.value=!0},p=e=>{o.value=!1,n("update:modelValue",l.htmls),n("change",l.htmls)};return d(()=>i.modelValue,e=>{l.htmls=e},{deep:!0,immediate:!0}),(e,t)=>{const n=h("el-button");return g(),m("div",null,[v(n,{type:"primary",class:"ml10",onClick:u},{default:b(()=>t[4]||(t[4]=[C("内容设置")])),_:1,__:[4]}),v(E(an),{onMousedown:t[2]||(t[2]=S(()=>{},["stop"])),modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),title:"内容设置"},{footer:b(()=>[y("div",null,[v(n,{size:"large",onClick:t[1]||(t[1]=e=>o.value=!1)},{default:b(()=>t[5]||(t[5]=[C("取消")])),_:1,__:[5]}),v(n,{size:"large",type:"primary",onClick:p},{default:b(()=>t[6]||(t[6]=[C("保存")])),_:1,__:[6]})])]),default:b(()=>[a.value?(g(),x(j(a.value),{key:0,modelValue:l.htmls,"onUpdate:modelValue":t[0]||(t[0]=e=>l.htmls=e)},null,8,["modelValue"])):k("",!0)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-ee488066"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/RichTextContent.vue"]]),Zl=Pt(A({__name:"line",props:{element:{type:Object,required:!0,default:()=>({})},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change"],setup:(e,{emit:t})=>(P({data:[]}),(t,n)=>{const o=h("Popover");return g(),x(o,{style:O({...e.element.styles,width:e.element.styles.w+"px",height:e.element.styles.h+"px"})},null,8,["style"])})}),[["__scopeId","data-v-86d9c6c5"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/line.vue"]]);function Kl(e){return""===e?e:"true"===e||"1"==e}function es(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function ts(e,t){for(var n,o="",r=0,a=-1,i=0,l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===i);else if(a!==l-1&&2===i){if(o.length<2||2!==r||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){var s=o.lastIndexOf("/");if(s!==o.length-1){-1===s?(o="",r=0):r=(o=o.slice(0,s)).length-1-o.lastIndexOf("/"),a=l,i=0;continue}}else if(2===o.length||1===o.length){o="",r=0,a=l,i=0;continue}t&&(o.length>0?o+="/..":o="..",r=2)}else o.length>0?o+="/"+e.slice(a+1,l):o=e.slice(a+1,l),r=l-a-1;a=l,i=0}else 46===n&&-1!==i?++i:i=-1}return o}var ns={resolve:function(){for(var e,t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var r;o>=0?r=arguments[o]:(void 0===e&&(e=process.cwd()),r=e),es(r),0!==r.length&&(t=r+"/"+t,n=47===r.charCodeAt(0))}return t=ts(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(es(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=ts(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return es(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];es(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":ns.normalize(e)},relative:function(e,t){if(es(e),es(t),e===t)return"";if((e=ns.resolve(e))===(t=ns.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,r=o-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var i=t.length-a,l=r<i?r:i,s=-1,c=0;c<=l;++c){if(c===l){if(i>l){if(47===t.charCodeAt(a+c))return t.slice(a+c+1);if(0===c)return t.slice(a+c)}else r>l&&(47===e.charCodeAt(n+c)?s=c:0===c&&(s=0));break}var u=e.charCodeAt(n+c);if(u!==t.charCodeAt(a+c))break;47===u&&(s=c)}var d="";for(c=n+s+1;c<=o;++c)c!==o&&47!==e.charCodeAt(c)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(a+s):(a+=s,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(es(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,r=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!r){o=a;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');es(e);var n,o=0,r=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var i=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var s=e.charCodeAt(n);if(47===s){if(!a){o=n+1;break}}else-1===l&&(a=!1,l=n+1),i>=0&&(s===t.charCodeAt(i)?-1===--i&&(r=n):(i=-1,r=l))}return o===r?r=l:-1===r&&(r=e.length),e.slice(o,r)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){o=n+1;break}}else-1===r&&(a=!1,r=n+1);return-1===r?"":e.slice(o,r)},extname:function(e){es(e);for(var t=-1,n=0,o=-1,r=!0,a=0,i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47!==l)-1===o&&(r=!1,o=i+1),46===l?-1===t?t=i:1!==a&&(a=1):-1!==t&&(a=-1);else if(!r){n=i+1;break}}return-1===t||-1===o||0===a||1===a&&t===o-1&&t===n+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+o:n+e+o:o}("/",e)},parse:function(e){es(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,o=e.charCodeAt(0),r=47===o;r?(t.root="/",n=1):n=0;for(var a=-1,i=0,l=-1,s=!0,c=e.length-1,u=0;c>=n;--c)if(47!==(o=e.charCodeAt(c)))-1===l&&(s=!1,l=c+1),46===o?-1===a?a=c:1!==u&&(u=1):-1!==a&&(u=-1);else if(!s){i=c+1;break}return-1===a||-1===l||0===u||1===u&&a===l-1&&a===i+1?-1!==l&&(t.base=t.name=0===i&&r?e.slice(1,l):e.slice(i,l)):(0===i&&r?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(i,a),t.base=e.slice(i,l)),t.ext=e.slice(a,l)),i>0?t.dir=e.slice(0,i-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};ns.posix=ns;const os=ns.extname,rs=ns.basename;class as{constructor(){let e=(()=>"undefined"==typeof global)(),t="image/png",n="image/jpeg",o="image/jpeg",r="image/webp",a="application/pdf",i="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:e?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:e?{png:t,jpg:n,jpeg:o,webp:r}:{png:t,jpg:n,jpeg:o,pdf:a,svg:i},mimes:e?{[t]:"png",[n]:"jpg",[r]:"webp"}:{[t]:"png",[n]:"jpg",[a]:"pdf",[i]:"svg"}})}toMime(e){return this.formats[(e||"").replace(/^\./,"").toLowerCase()]}fromMime(e){return this.mimes[e]}}class is{static for(e){return(new is).append(e).get()}constructor(){this.crc=-1}get(){return~this.crc}append(e){for(var t=0|this.crc,n=this.table,o=0,r=0|e.length;o<r;o++)t=t>>>8^n[255&(t^e[o])];return this.crc=t,this}}function ls(e){let t=new Uint8Array(e),n=new DataView(t.buffer),o={array:t,view:n,size:e,set8:(e,t)=>(n.setUint8(e,t),o),set16:(e,t)=>(n.setUint16(e,t,!0),o),set32:(e,t)=>(n.setUint32(e,t,!0),o),bytes:(e,n)=>(t.set(n,e),o)};return o}is.prototype.table=(()=>{var e,t,n,o=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)n=1&n?n>>>1^3988292384:n>>>1;o[e]=n}return o})();class ss{constructor(e){let t=new Date;Object.assign(this,{directory:e,offset:0,files:[],time:(t.getHours()<<6|t.getMinutes())<<5|t.getSeconds()/2,date:(t.getFullYear()-1980<<4|t.getMonth()+1)<<5|t.getDate()}),this.add(e)}async add(e,t){let n=!t,o=ss.encoder.encode(`${this.directory}/${n?"":e}`),r=new Uint8Array(n?0:await t.arrayBuffer()),a=30+o.length,i=a+r.length,{offset:l}=this,s=ls(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,is.for(r)).set32(14,r.length).set32(18,r.length).set16(22,o.length);l+=a;let c=ls(a+r.length+16).set32(0,67324752).bytes(4,s.array).bytes(30,o).bytes(a,r);l+=r.length,c.set32(i,134695760).bytes(i+4,s.array.slice(10,22)),l+=16,this.files.push({offset:l,folder:n,name:o,header:s,payload:c}),this.offset=l}toBuffer(){let e=this.files.reduce((e,{name:t})=>46+t.length+e,0),t=ls(e+22),n=0;for(var{offset:o,name:r,header:a,folder:i}of this.files)t.set32(n,33639248).set16(n+4,20).bytes(n+6,a.array).set8(n+38,i?16:0).set32(n+42,o).bytes(n+46,r),n+=46+r.length;t.set32(n,101010256).set16(n+8,this.files.length).set16(n+10,this.files.length).set32(n+12,e).set32(n+16,this.offset);let l=new Uint8Array(this.offset+t.size),s=0;for(var{payload:c}of this.files)l.set(c.array,s),s+=c.size;return l.set(t.array,s),l}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}ss.encoder=new TextEncoder;const cs=(e,t,n,o)=>{if(o){let{width:t,height:n}=e,r=Object.assign(document.createElement("canvas"),{width:t,height:n}),a=r.getContext("2d");a.fillStyle=o,a.fillRect(0,0,t,n),a.drawImage(e,0,0),e=r}return new Promise((o,r)=>e.toBlob(o,t,n))},us=(e,t)=>{const n=window.URL.createObjectURL(t),o=document.createElement("a");o.style.display="none",o.href=n,o.setAttribute("download",e),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>window.URL.revokeObjectURL(n),100)},ds={asBuffer:(...e)=>cs(...e).then(e=>e.arrayBuffer()),asDownload:async(e,t,n,o,r)=>{us(r,await cs(e,t,n,o))},asZipDownload:async(e,t,n,o,r,a,i)=>{let l=rs(r,".zip")||"archive",s=new ss(l);await Promise.all(e.map(async(e,r)=>{let l=(e=>a.replace("{}",String(e+1).padStart(i,"0")))(r);await s.add(l,await cs(e,t,n,o))})),us(`${l}.zip`,s.blob)},atScale:(e,t,n)=>e.map(e=>{if(1==t&&!n)return e.canvas;let o=document.createElement("canvas"),r=o.getContext("2d"),a=e.canvas?e.canvas:e;return o.width=a.width*t,o.height=a.height*t,n&&(r.fillStyle=n,r.fillRect(0,0,o.width,o.height)),r.scale(t,t),r.drawImage(a,0,0),o}),options:function(e,{filename:t="",extension:n="",format:o,page:r,quality:a,matte:i,density:l,outline:s,archive:c}={}){var{fromMime:u,toMime:d,expected:p}=new as,f=(c=c||"canvas",o||n.replace(/@\d+x$/i,"")||os(t)),h=(o=u(d(f)||f),d(o)),g=e.length;if(!f)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!o)throw new Error(`Unsupported file format "${f}" (expected ${p})`);if(!g)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let m,v,b=t.replace(/{(\d*)}/g,(e,t)=>(v=!0,t=parseInt(t,10),m=isFinite(t)?t:isFinite(m)?m:-1,"{}")),y=r>0?r-1:r<0?g+r:void 0;if(isFinite(y)&&y<0||y>=g)throw new RangeError(1==g?`Canvas only has a ‘page 1’ (${y} is out of bounds)`:`Canvas has pages 1–${g} (${y} is out of bounds)`);if(e=isFinite(y)?[e[y]]:v||"pdf"==o?e:e.slice(-1),void 0===a)a=.92;else if("number"!=typeof a||!isFinite(a)||a<0||a>1)throw new TypeError("The quality option must be an number in the 0.0–1.0 range");if(void 0===l){let e=(n||rs(t,f)).match(/@(\d+)x$/i);l=e?parseInt(e[1],10):1}else if("number"!=typeof l||!Number.isInteger(l)||l<1)throw new TypeError("The density option must be a non-negative integer");return void 0===s?s=!0:"svg"==o&&(s=!!s),{filename:t,pattern:b,format:o,mime:h,pages:e,padding:m,quality:a,matte:i,density:l,outline:s,archive:c}}},{asBuffer:ps,asDownload:fs,asZipDownload:hs,atScale:gs,options:ms}=ds,vs=Symbol.for("toDataURL"),bs={Canvas:class{constructor(e,t){let n=document.createElement("canvas"),o=[];for(var[r,a]of(Object.defineProperty(n,"async",{value:!0,writable:!1,enumerable:!0}),Object.entries({png:()=>ps(n,"image/png"),jpg:()=>ps(n,"image/jpeg"),pages:()=>o.concat(n).map(e=>e.getContext("2d"))})))Object.defineProperty(n,r,{get:a});return Object.assign(n,{width:e,height:t,newPage(...e){var{width:t,height:r}=n,a=Object.assign(document.createElement("canvas"),{width:t,height:r});a.getContext("2d").drawImage(n,0,0),o.push(a);var[t,r]=e.length?e:[t,r];return Object.assign(n,{width:t,height:r}).getContext("2d")},saveAs(e,t){t="number"==typeof t?{quality:t}:t;let n=ms(this.pages,{filename:e,...t}),{pattern:o,padding:r,mime:a,quality:i,matte:l,density:s,archive:c}=n,u=gs(n.pages,s);return null==r?fs(u[0],a,i,l,e):hs(u,a,i,l,c,o,r)},toBuffer(e="png",t={}){t="number"==typeof t?{quality:t}:t;let n=ms(this.pages,{extension:e,...t}),{mime:o,quality:r,matte:a,pages:i,density:l}=n,s=gs(i,l,a)[0];return ps(s,o,r,a)},[vs]:n.toDataURL.bind(n),toDataURL(e="png",t={}){t="number"==typeof t?{quality:t}:t;let o=ms(this.pages,{extension:e,...t}),{mime:r,quality:a,matte:i,pages:l,density:s}=o,c=gs(l,s,i)[0],u=c[c===n?vs:"toDataURL"](r,a);return Promise.resolve(u)}})}}},ys=(e,t,n={},o=n)=>{if(Array.isArray(t))t.forEach(t=>ys(e,t,n,o));else if("function"==typeof t)t(e,n,o,ys);else{const r=Object.keys(t)[0];Array.isArray(t[r])?(o[r]={},ys(e,t[r],n,o[r])):o[r]=t[r](e,n,o,ys)}return n},ws=(e,t)=>(n,o,r,a)=>{t(n,o,r)&&a(n,e,o,r)},_s=()=>e=>e.data[e.pos++],xs=(e=0)=>t=>t.data[t.pos+e],Es=e=>t=>t.data.subarray(t.pos,t.pos+=e),Cs=e=>t=>t.data.subarray(t.pos,t.pos+e),Os=e=>t=>Array.from(Es(e)(t)).map(e=>String.fromCharCode(e)).join(""),ks=e=>e=>{const t=Es(2)(e);return(t[1]<<8)+t[0]},Ss=(e,t)=>(n,o,r)=>{const a="function"==typeof t?t(n,o,r):t,i=Es(e),l=new Array(a);for(var s=0;s<a;s++)l[s]=i(n);return l},As=e=>t=>{const n=(e=>e.data[e.pos++])(t),o=new Array(8);for(var r=0;r<8;r++)o[7-r]=!!(n&1<<r);return Object.keys(e).reduce((t,n)=>{const r=e[n];return r.length?t[n]=((e,t,n)=>{for(var o=0,r=0;r<n;r++)o+=e[t+r]&&2**(n-r-1);return o})(o,r.index,r.length):t[n]=o[r.index],t},{})};var Ts={blocks:e=>{const t=[],n=e.data.length;for(var o=0,r=(e=>e.data[e.pos++])(e);0!==r&&r;r=_s()(e)){if(e.pos+r>=n){const r=n-e.pos;t.push(Es(r)(e)),o+=r;break}t.push(Es(r)(e)),o+=r}const a=new Uint8Array(o);for(var i=0,l=0;l<t.length;l++)a.set(t[l],i),i+=t[l].length;return a}};const Ps=ws({gce:[{codes:Es(2)},{byteSize:e=>e.data[e.pos++]},{extras:As({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:ks()},{transparentColorIndex:e=>e.data[e.pos++]},{terminator:e=>e.data[e.pos++]}]},e=>{var t=Cs(2)(e);return 33===t[0]&&249===t[1]}),Is=ws({image:[{code:e=>e.data[e.pos++]},{descriptor:[{left:ks()},{top:ks()},{width:ks()},{height:ks()},{lct:As({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},ws({lct:Ss(3,(e,t,n)=>Math.pow(2,n.descriptor.lct.size+1))},(e,t,n)=>n.descriptor.lct.exists),{data:[{minCodeSize:e=>e.data[e.pos++]},Ts]}]},e=>44===xs()(e)),Ds=ws({text:[{codes:Es(2)},{blockSize:e=>e.data[e.pos++]},{preData:(e,t,n)=>Es(n.text.blockSize)(e)},Ts]},e=>{var t=Cs(2)(e);return 33===t[0]&&1===t[1]}),Ls=ws({application:[{codes:Es(2)},{blockSize:e=>e.data[e.pos++]},{id:(e,t,n)=>Os(n.blockSize)(e)},Ts]},e=>{var t=Cs(2)(e);return 33===t[0]&&255===t[1]}),Rs=ws({comment:[{codes:Es(2)},Ts]},e=>{var t=Cs(2)(e);return 33===t[0]&&254===t[1]}),Ms=[{header:[{signature:Os(3)},{version:Os(3)}]},{lsd:[{width:ks()},{height:ks()},{gct:As({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:e=>e.data[e.pos++]},{pixelAspectRatio:e=>e.data[e.pos++]}]},ws({gct:Ss(3,(e,t)=>Math.pow(2,t.lsd.gct.size+1))},(e,t)=>t.lsd.gct.exists),{frames:(js=[Ps,Ls,Rs,Is,Ds],zs=e=>{var t=xs()(e);return 33===t||44===t},(e,t,n,o)=>{const r=[];let a=e.pos;for(;zs(e,t,n);){const n={};if(o(e,js,t,n),e.pos===a)break;a=e.pos,r.push(n)}return r})}];var js,zs;const Ns=(e,t,n)=>{if(!e.image)return void console.warn("gif frame does not have associated image.");const{image:o}=e,r=o.descriptor.width*o.descriptor.height;var a=((e,t,n)=>{const o=4096,r=n;var a,i,l,s,c,u,d,p,f,h;const g=new Array(n),m=new Array(o),v=new Array(o),b=new Array(4097);for(c=1+(i=1<<(h=e)),a=i+2,d=-1,l=(1<<(s=h+1))-1,p=0;p<i;p++)m[p]=0,v[p]=p;var y,w,_,x,E,C;for(y=w=_=x=E=C=0,f=0;f<r;){if(0===x){if(w<s){y+=t[C]<<w,w+=8,C++;continue}if(p=y&l,y>>=s,w-=s,p>a||p==c)break;if(p==i){l=(1<<(s=h+1))-1,a=i+2,d=-1;continue}if(-1==d){b[x++]=v[p],d=p,_=p;continue}for(u=p,p==a&&(b[x++]=_,p=d);p>i;)b[x++]=v[p],p=m[p];_=255&v[p],b[x++]=_,a<o&&(m[a]=d,v[a]=_,0===(++a&l)&&a<o&&(s++,l+=a)),d=u}x--,g[E++]=b[x],f++}for(f=E;f<r;f++)g[f]=0;return g})(o.data.minCodeSize,o.data.blocks,r);o.descriptor.lct.interlaced&&(a=((e,t)=>{const n=new Array(e.length),o=e.length/t,r=function(o,r){const a=e.slice(r*t,(r+1)*t);n.splice.apply(n,[o*t,t].concat(a))},a=[0,4,2,1],i=[8,8,4,2];for(var l=0,s=0;s<4;s++)for(var c=a[s];c<o;c+=i[s])r(c,l),l++;return n})(a,o.descriptor.width));const i={pixels:a,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return o.descriptor.lct&&o.descriptor.lct.exists?i.colorTable=o.lct:i.colorTable=t,e.gce&&(i.delay=10*(e.gce.delay||10),i.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(i.transparentIndex=e.gce.transparentColorIndex)),i.patch=(e=>{const t=e.pixels.length,n=new Uint8ClampedArray(4*t);for(var o=0;o<t;o++){const t=4*o,r=e.pixels[o],a=e.colorTable[r];n[t]=a[0],n[t+1]=a[1],n[t+2]=a[2],n[t+3]=r!==e.transparentIndex?255:0}return n})(i),i};function Bs(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(e)?3:0)}class Vs{constructor(e){this.mode=Fs.MODE_8BIT_BYTE,this.parsedData=[],this.data=e;const t=[];for(let n=0,o=this.data.length;n<o;n++){const e=[],o=this.data.charCodeAt(n);o>65536?(e[0]=240|(1835008&o)>>>18,e[1]=128|(258048&o)>>>12,e[2]=128|(4032&o)>>>6,e[3]=128|63&o):o>2048?(e[0]=224|(61440&o)>>>12,e[1]=128|(4032&o)>>>6,e[2]=128|63&o):o>128?(e[0]=192|(1984&o)>>>6,e[1]=128|63&o):e[0]=o,t.push(e)}this.parsedData=Array.prototype.concat.apply([],t),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}}class Hs{constructor(e=-1,t=Us.L){this.moduleCount=0,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=t,this.moduleCount=0,this.dataList=[]}addData(e){if(this.typeNumber<=0)this.typeNumber=function(e,t){for(var n=1,o=Bs(e),r=0,a=Js.length;r<a;r++){var i=0;switch(t){case Us.L:i=Js[r][0];break;case Us.M:i=Js[r][1];break;case Us.Q:i=Js[r][2];break;case Us.H:i=Js[r][3]}if(o<=i)break;n++}if(n>Js.length)throw new Error("Too long data");return n}(e,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!function(e,t,n){const o=Bs(t),r=e-1;let a=0;switch(n){case Us.L:a=Js[r][0];break;case Us.M:a=Js[r][1];break;case Us.Q:a=Js[r][2];break;case Us.H:a=Js[r][3]}return o<=a}(this.typeNumber,e,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const t=new Vs(e);this.dataList.push(t),this.dataCache=void 0}isDark(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(`${e},${t}`);return this.modules[e][t]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let e=0;e<this.moduleCount;e++)this.modules[n][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=Hs.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}setupPositionProbePattern(e,t){for(let n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(let o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+n][t+o]=0<=n&&n<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=o&&o<=4)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(Gs).includes(this.maskPattern))return this.maskPattern;let e=0,t=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);const o=$s.getLostPoint(this);(0==n||e>o)&&(e=o,t=n)}return t}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){const e=$s.getPatternPosition(this.typeNumber);for(let t=0;t<e.length;t++)for(let n=0;n<e.length;n++){const o=e[t],r=e[n];if(null==this.modules[o][r])for(let e=-2;e<=2;e++)for(let t=-2;t<=2;t++)this.modules[o+e][r+t]=-2==e||2==e||-2==t||2==t||0==e&&0==t}}setupTypeNumber(e){const t=$s.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var o=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(n=0;n<18;n++)o=!e&&1==(t>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}setupTypeInfo(e,t){const n=this.errorCorrectLevel<<3|t,o=$s.getBCHTypeInfo(n);for(var r=0;r<15;r++){var a=!e&&1==(o>>r&1);r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(r=0;r<15;r++)a=!e&&1==(o>>r&1),r<8?this.modules[8][this.moduleCount-r-1]=a:r<9?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a;this.modules[this.moduleCount-8][8]=!e}mapData(e,t){let n=-1,o=this.moduleCount-1,r=7,a=0;for(let i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(let n=0;n<2;n++)if(null==this.modules[o][i-n]){let l=!1;a<e.length&&(l=1==(e[a]>>>r&1)),$s.getMask(t,o,i-n)&&(l=!l),this.modules[o][i-n]=l,r--,-1==r&&(a++,r=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}static createData(e,t,n){const o=Ys.getRSBlocks(e,t),r=new Ws;for(var a=0;a<n.length;a++){const t=n[a];r.put(t.mode,4),r.put(t.getLength(),$s.getLengthInBits(t.mode,e)),t.write(r)}let i=0;for(a=0;a<o.length;a++)i+=o[a].dataCount;if(r.getLengthInBits()>8*i)throw new Error(`code length overflow. (${r.getLengthInBits()}>${8*i})`);for(r.getLengthInBits()+4<=8*i&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*i||(r.put(Hs.PAD0,8),r.getLengthInBits()>=8*i));)r.put(Hs.PAD1,8);return Hs.createBytes(r,o)}static createBytes(e,t){let n=0,o=0,r=0;const a=new Array(t.length),i=new Array(t.length);for(var l=0;l<t.length;l++){const c=t[l].dataCount,u=t[l].totalCount-c;o=Math.max(o,c),r=Math.max(r,u),a[l]=new Array(c);for(var s=0;s<a[l].length;s++)a[l][s]=255&e.buffer[s+n];n+=c;const d=$s.getErrorCorrectPolynomial(u),p=new qs(a[l],d.getLength()-1).mod(d);for(i[l]=new Array(d.getLength()-1),s=0;s<i[l].length;s++){const e=s+p.getLength()-i[l].length;i[l][s]=e>=0?p.get(e):0}}let c=0;for(s=0;s<t.length;s++)c+=t[s].totalCount;const u=new Array(c);let d=0;for(s=0;s<o;s++)for(l=0;l<t.length;l++)s<a[l].length&&(u[d++]=a[l][s]);for(s=0;s<r;s++)for(l=0;l<t.length;l++)s<i[l].length&&(u[d++]=i[l][s]);return u}}Hs.PAD0=236,Hs.PAD1=17;const Us={L:1,M:0,Q:3,H:2},Fs={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Gs={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class $s{static getBCHTypeInfo(e){let t=e<<10;for(;$s.getBCHDigit(t)-$s.getBCHDigit($s.G15)>=0;)t^=$s.G15<<$s.getBCHDigit(t)-$s.getBCHDigit($s.G15);return(e<<10|t)^$s.G15_MASK}static getBCHTypeNumber(e){let t=e<<12;for(;$s.getBCHDigit(t)-$s.getBCHDigit($s.G18)>=0;)t^=$s.G18<<$s.getBCHDigit(t)-$s.getBCHDigit($s.G18);return e<<12|t}static getBCHDigit(e){let t=0;for(;0!=e;)t++,e>>>=1;return t}static getPatternPosition(e){return $s.PATTERN_POSITION_TABLE[e-1]}static getMask(e,t,n){switch(e){case Gs.PATTERN000:return(t+n)%2==0;case Gs.PATTERN001:return t%2==0;case Gs.PATTERN010:return n%3==0;case Gs.PATTERN011:return(t+n)%3==0;case Gs.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case Gs.PATTERN101:return t*n%2+t*n%3==0;case Gs.PATTERN110:return(t*n%2+t*n%3)%2==0;case Gs.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error(`bad maskPattern:${e}`)}}static getErrorCorrectPolynomial(e){let t=new qs([1],0);for(let n=0;n<e;n++)t=t.multiply(new qs([1,Xs.gexp(n)],0));return t}static getLengthInBits(e,t){if(1<=t&&t<10)switch(e){case Fs.MODE_NUMBER:return 10;case Fs.MODE_ALPHA_NUM:return 9;case Fs.MODE_8BIT_BYTE:case Fs.MODE_KANJI:return 8;default:throw new Error(`mode:${e}`)}else if(t<27)switch(e){case Fs.MODE_NUMBER:return 12;case Fs.MODE_ALPHA_NUM:return 11;case Fs.MODE_8BIT_BYTE:return 16;case Fs.MODE_KANJI:return 10;default:throw new Error(`mode:${e}`)}else{if(!(t<41))throw new Error(`type:${t}`);switch(e){case Fs.MODE_NUMBER:return 14;case Fs.MODE_ALPHA_NUM:return 13;case Fs.MODE_8BIT_BYTE:return 16;case Fs.MODE_KANJI:return 12;default:throw new Error(`mode:${e}`)}}}static getLostPoint(e){const t=e.getModuleCount();let n=0;for(var o=0;o<t;o++)for(var r=0;r<t;r++){let a=0;const i=e.isDark(o,r);for(let n=-1;n<=1;n++)if(!(o+n<0||t<=o+n))for(let l=-1;l<=1;l++)r+l<0||t<=r+l||0==n&&0==l||i==e.isDark(o+n,r+l)&&a++;a>5&&(n+=3+a-5)}for(o=0;o<t-1;o++)for(r=0;r<t-1;r++){let t=0;e.isDark(o,r)&&t++,e.isDark(o+1,r)&&t++,e.isDark(o,r+1)&&t++,e.isDark(o+1,r+1)&&t++,0!=t&&4!=t||(n+=3)}for(o=0;o<t;o++)for(r=0;r<t-6;r++)e.isDark(o,r)&&!e.isDark(o,r+1)&&e.isDark(o,r+2)&&e.isDark(o,r+3)&&e.isDark(o,r+4)&&!e.isDark(o,r+5)&&e.isDark(o,r+6)&&(n+=40);for(r=0;r<t;r++)for(o=0;o<t-6;o++)e.isDark(o,r)&&!e.isDark(o+1,r)&&e.isDark(o+2,r)&&e.isDark(o+3,r)&&e.isDark(o+4,r)&&!e.isDark(o+5,r)&&e.isDark(o+6,r)&&(n+=40);let a=0;for(r=0;r<t;r++)for(o=0;o<t;o++)e.isDark(o,r)&&a++;return n+=Math.abs(100*a/t/t-50)/5*10,n}}$s.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],$s.G15=1335,$s.G18=7973,$s.G15_MASK=21522;class Xs{static glog(e){if(e<1)throw new Error(`glog(${e})`);return Xs.LOG_TABLE[e]}static gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Xs.EXP_TABLE[e]}}Xs.EXP_TABLE=new Array(256),Xs.LOG_TABLE=new Array(256),Xs._constructor=function(){for(var e=0;e<8;e++)Xs.EXP_TABLE[e]=1<<e;for(e=8;e<256;e++)Xs.EXP_TABLE[e]=Xs.EXP_TABLE[e-4]^Xs.EXP_TABLE[e-5]^Xs.EXP_TABLE[e-6]^Xs.EXP_TABLE[e-8];for(e=0;e<255;e++)Xs.LOG_TABLE[Xs.EXP_TABLE[e]]=e}();class qs{constructor(e,t){if(null==e.length)throw new Error(`${e.length}/${t}`);let n=0;for(;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(let o=0;o<e.length-n;o++)this.num[o]=e[o+n]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){const t=new Array(this.getLength()+e.getLength()-1);for(let n=0;n<this.getLength();n++)for(let o=0;o<e.getLength();o++)t[n+o]^=Xs.gexp(Xs.glog(this.get(n))+Xs.glog(e.get(o)));return new qs(t,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;const t=Xs.glog(this.get(0))-Xs.glog(e.get(0)),n=new Array(this.getLength());for(var o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=Xs.gexp(Xs.glog(e.get(o))+t);return new qs(n,0).mod(e)}}class Ys{constructor(e,t){this.totalCount=e,this.dataCount=t}static getRSBlocks(e,t){const n=Ys.getRsBlockTable(e,t);if(null==n)throw new Error(`bad rs block @ typeNumber:${e}/errorCorrectLevel:${t}`);const o=n.length/3,r=[];for(let a=0;a<o;a++){const e=n[3*a+0],t=n[3*a+1],o=n[3*a+2];for(let n=0;n<e;n++)r.push(new Ys(t,o))}return r}static getRsBlockTable(e,t){switch(t){case Us.L:return Ys.RS_BLOCK_TABLE[4*(e-1)+0];case Us.M:return Ys.RS_BLOCK_TABLE[4*(e-1)+1];case Us.Q:return Ys.RS_BLOCK_TABLE[4*(e-1)+2];case Us.H:return Ys.RS_BLOCK_TABLE[4*(e-1)+3];default:return}}}Ys.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class Ws{constructor(){this.buffer=[],this.length=0}get(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)}put(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))}getLengthInBits(){return this.length}putBit(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}}const Js=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var Qs=256,Zs=1024,Ks=1<<18;function ec(e,t){var n,o,r,a,i;function l(e,t,o,r,a){n[t][0]-=e*(n[t][0]-o)/Zs,n[t][1]-=e*(n[t][1]-r)/Zs,n[t][2]-=e*(n[t][2]-a)/Zs}function s(e,t,o,r,a){for(var l,s,c=Math.abs(t-e),u=Math.min(t+e,Qs),d=t+1,p=t-1,f=1;d<u||p>c;)s=i[f++],d<u&&((l=n[d++])[0]-=s*(l[0]-o)/Ks,l[1]-=s*(l[1]-r)/Ks,l[2]-=s*(l[2]-a)/Ks),p>c&&((l=n[p--])[0]-=s*(l[0]-o)/Ks,l[1]-=s*(l[1]-r)/Ks,l[2]-=s*(l[2]-a)/Ks)}function c(e,t,o){var i,l,s,c,u,d=2147483647,p=d,f=-1,h=f;for(i=0;i<Qs;i++)l=n[i],(s=Math.abs(l[0]-e)+Math.abs(l[1]-t)+Math.abs(l[2]-o))<d&&(d=s,f=i),(c=s-(r[i]>>12))<p&&(p=c,h=i),u=a[i]>>10,a[i]-=u,r[i]+=u<<10;return a[f]+=64,r[f]-=65536,h}this.buildColormap=function(){!function(){var e,t;for(n=[],o=new Int32Array(256),r=new Int32Array(Qs),a=new Int32Array(Qs),i=new Int32Array(32),e=0;e<Qs;e++)t=(e<<12)/Qs,n[e]=new Float64Array([t,t,t,0]),a[e]=256,r[e]=0}(),function(){var n,o,r,a,u,d,p=e.length,f=30+(t-1)/3,h=p/(3*t),g=~~(h/100),m=Zs,v=2048,b=v>>6;for(b<=1&&(b=0),n=0;n<b;n++)i[n]=m*(256*(b*b-n*n)/(b*b));p<1509?(t=1,o=3):o=p%499!=0?1497:p%491!=0?1473:p%487!=0?1461:1509;var y=0;for(n=0;n<h;)if(l(m,d=c(r=(255&e[y])<<4,a=(255&e[y+1])<<4,u=(255&e[y+2])<<4),r,a,u),0!==b&&s(b,d,r,a,u),(y+=o)>=p&&(y-=p),0===g&&(g=1),++n%g===0)for(m-=m/f,(b=(v-=v/30)>>6)<=1&&(b=0),d=0;d<b;d++)i[d]=m*(256*(b*b-d*d)/(b*b))}(),function(){for(var e=0;e<Qs;e++)n[e][0]>>=4,n[e][1]>>=4,n[e][2]>>=4,n[e][3]=e}(),function(){var e,t,r,a,i,l,s=0,c=0;for(e=0;e<Qs;e++){for(i=e,l=(r=n[e])[1],t=e+1;t<Qs;t++)(a=n[t])[1]<l&&(i=t,l=a[1]);if(a=n[i],e!=i&&(t=a[0],a[0]=r[0],r[0]=t,t=a[1],a[1]=r[1],r[1]=t,t=a[2],a[2]=r[2],r[2]=t,t=a[3],a[3]=r[3],r[3]=t),l!=s){for(o[s]=c+e>>1,t=s+1;t<l;t++)o[t]=e;s=l,c=e}}for(o[s]=c+255>>1,t=s+1;t<256;t++)o[t]=255}()},this.getColormap=function(){for(var e=[],t=[],o=0;o<Qs;o++)t[n[o][3]]=o;for(var r=0,a=0;a<Qs;a++){var i=t[a];e[r++]=n[i][0],e[r++]=n[i][1],e[r++]=n[i][2]}return e},this.lookupRGB=function(e,t,r){for(var a,i,l,s=1e3,c=-1,u=o[t],d=u-1;u<Qs||d>=0;)u<Qs&&((l=(i=n[u])[1]-t)>=s?u=Qs:(u++,l<0&&(l=-l),(a=i[0]-e)<0&&(a=-a),(l+=a)<s&&((a=i[2]-r)<0&&(a=-a),(l+=a)<s&&(s=l,c=i[3])))),d>=0&&((l=t-(i=n[d])[1])>=s?d=-1:(d--,l<0&&(l=-l),(a=i[0]-e)<0&&(a=-a),(l+=a)<s&&((a=i[2]-r)<0&&(a=-a),(l+=a)<s&&(s=l,c=i[3]))));return c}}var tc=5003,nc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function oc(e,t,n,o){var r,a,i,l,s,c,u,d,p,f=Math.max(2,o),h=new Uint8Array(256),g=new Int32Array(tc),m=new Int32Array(tc),v=0,b=0,y=!1;function w(e,t){h[a++]=e,a>=254&&E(t)}function _(e){x(tc),b=s+2,y=!0,k(s,e)}function x(e){for(var t=0;t<e;++t)g[t]=-1}function E(e){a>0&&(e.writeByte(a),e.writeBytes(h,0,a),a=0)}function C(e){return(1<<e)-1}function O(){return 0===u?-1:(--u,255&n[d++])}function k(e,t){for(r&=nc[v],v>0?r|=e<<v:r=e,v+=p;v>=8;)w(255&r,t),r>>=8,v-=8;if((b>i||y)&&(y?(i=C(p=l),y=!1):(++p,i=12==p?4096:C(p))),e==c){for(;v>0;)w(255&r,t),r>>=8,v-=8;E(t)}}this.encode=function(n){n.writeByte(f),u=e*t,d=0,function(e,t){var n,o,r,u,d,f,h;for(y=!1,i=C(p=l=e),c=1+(s=1<<e-1),b=s+2,a=0,u=O(),h=0,n=tc;n<65536;n*=2)++h;h=8-h,x(f=tc),k(s,t);e:for(;-1!=(o=O());)if(n=(o<<12)+u,g[r=o<<h^u]!==n){if(g[r]>=0){d=f-r,0===r&&(d=1);do{if((r-=d)<0&&(r+=f),g[r]===n){u=m[r];continue e}}while(g[r]>=0)}k(u,t),u=o,b<4096?(m[r]=b++,g[r]=n):_(t)}else u=m[r];k(u,t),k(c,t)}(f+1,n),n.writeByte(0)}}function rc(){this.page=-1,this.pages=[],this.newPage()}rc.pageSize=4096,rc.charMap={};for(var ac=0;ac<256;ac++)rc.charMap[ac]=String.fromCharCode(ac);function ic(e,t){this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new rc}rc.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(rc.pageSize),this.cursor=0},rc.prototype.getData=function(){for(var e="",t=0;t<this.pages.length;t++)for(var n=0;n<rc.pageSize;n++)e+=rc.charMap[this.pages[t][n]];return e},rc.prototype.toFlattenUint8Array=function(){const e=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const n=Uint8Array.from(this.pages[t].slice(0,this.cursor));e.push(n)}else e.push(this.pages[t]);const n=new Uint8Array(e.reduce((e,t)=>e+t.length,0));return e.reduce((e,t)=>(n.set(t,e),e+t.length),0),n},rc.prototype.writeByte=function(e){this.cursor>=rc.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=e},rc.prototype.writeUTFBytes=function(e){for(var t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))},rc.prototype.writeBytes=function(e,t,n){for(var o=n||e.length,r=t||0;r<o;r++)this.writeByte(e[r])},ic.prototype.setDelay=function(e){this.delay=Math.round(e/10)},ic.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)},ic.prototype.setDispose=function(e){e>=0&&(this.dispose=e)},ic.prototype.setRepeat=function(e){this.repeat=e},ic.prototype.setTransparent=function(e){this.transparent=e},ic.prototype.addFrame=function(e){this.image=e,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},ic.prototype.finish=function(){this.out.writeByte(59)},ic.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e},ic.prototype.setDither=function(e){!0===e&&(e="FloydSteinberg"),this.dither=e},ic.prototype.setGlobalPalette=function(e){this.globalPalette=e},ic.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},ic.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},ic.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new ec(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},ic.prototype.indexPixels=function(e){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var n=0,o=0;o<t;o++){var r=this.findClosestRGB(255&this.pixels[n++],255&this.pixels[n++],255&this.pixels[n++]);this.usedEntry[r]=!0,this.indexedPixels[o]=r}},ic.prototype.ditherPixels=function(e,t){var n={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!e||!n[e])throw"Unknown dithering kernel: "+e;var o=n[e],r=0,a=this.height,i=this.width,l=this.pixels,s=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<a;c++){t&&(s*=-1);for(var u=1==s?0:i-1,d=1==s?i:0;u!==d;u+=s){var p=3*(r=c*i+u),f=l[p],h=l[p+1],g=l[p+2];p=this.findClosestRGB(f,h,g),this.usedEntry[p]=!0,this.indexedPixels[r]=p,p*=3;for(var m=f-this.colorTab[p],v=h-this.colorTab[p+1],b=g-this.colorTab[p+2],y=1==s?0:o.length-1,w=1==s?o.length:0;y!==w;y+=s){var _=o[y][1],x=o[y][2];if(_+u>=0&&_+u<i&&x+c>=0&&x+c<a){var E=o[y][0];p=r+_+x*i,l[p*=3]=Math.max(0,Math.min(255,l[p]+m*E)),l[p+1]=Math.max(0,Math.min(255,l[p+1]+v*E)),l[p+2]=Math.max(0,Math.min(255,l[p+2]+b*E))}}}}},ic.prototype.findClosest=function(e,t){return this.findClosestRGB((16711680&e)>>16,(65280&e)>>8,255&e,t)},ic.prototype.findClosestRGB=function(e,t,n,o){if(null===this.colorTab)return-1;if(this.neuQuant&&!o)return this.neuQuant.lookupRGB(e,t,n);for(var r=0,a=16777216,i=this.colorTab.length,l=0,s=0;l<i;s++){var c=e-(255&this.colorTab[l++]),u=t-(255&this.colorTab[l++]),d=n-(255&this.colorTab[l++]),p=c*c+u*u+d*d;(!o||this.usedEntry[s])&&p<a&&(a=p,r=s)}return r},ic.prototype.getImagePixels=function(){var e=this.width,t=this.height;this.pixels=new Uint8Array(e*t*3);for(var n=this.image,o=0,r=0,a=0;a<t;a++)for(var i=0;i<e;i++)this.pixels[r++]=n[o++],this.pixels[r++]=n[o++],this.pixels[r++]=n[o++],o++},ic.prototype.writeGraphicCtrlExt=function(){var e,t;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=7&this.dispose),t<<=2,this.out.writeByte(0|t|e),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},ic.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},ic.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},ic.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},ic.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var e=768-this.colorTab.length,t=0;t<e;t++)this.out.writeByte(0)},ic.prototype.writeShort=function(e){this.out.writeByte(255&e),this.out.writeByte(e>>8&255)},ic.prototype.writePixels=function(){new oc(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},ic.prototype.stream=function(){return this.out};var lc=function(e,t,n,o){return new(n||(n=Promise))(function(t,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function i(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n(function(e){e(o)})).then(a,i)}l((o=o.apply(e,[])).next())})};const{Canvas:sc}=bs,cc=.4;function uc(e){if(e)return new Promise(function(n,o){if("data"==e.slice(0,4)){let r=new Image;return r.onload=function(){n(r),t(r)},r.onerror=function(){o("Image load error"),t(r)},void(r.src=e)}let r=new Image;r.setAttribute("crossOrigin","Anonymous"),r.onload=function(){n(r)},r.onerror=function(){o("Image load error")},r.src=e});function t(e){e.onload=null,e.onerror=null}}class dc{constructor(e){const t=Object.assign({},e);if(Object.keys(dc.defaultOptions).forEach(e=>{e in t||Object.defineProperty(t,e,{value:dc.defaultOptions[e],enumerable:!0,writable:!0})}),t.components?"object"==typeof t.components&&Object.keys(dc.defaultComponentOptions).forEach(e=>{e in t.components?Object.defineProperty(t.components,e,{value:Object.assign(Object.assign({},dc.defaultComponentOptions[e]),t.components[e]),enumerable:!0,writable:!0}):Object.defineProperty(t.components,e,{value:dc.defaultComponentOptions[e],enumerable:!0,writable:!0})}):t.components=dc.defaultComponentOptions,null!==t.dotScale&&void 0!==t.dotScale){if(t.dotScale<=0||t.dotScale>1)throw new Error("dotScale should be in range (0, 1].");t.components.data.scale=t.dotScale,t.components.timing.scale=t.dotScale,t.components.alignment.scale=t.dotScale}this.options=t,this.canvas=new sc(e.size,e.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new Hs(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(e=>this._draw().then(e))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(e,t,n,o,r,a){e.beginPath(),e.moveTo(t,n),e.arcTo(t+o,n,t+o,n+r,a),e.arcTo(t+o,n+r,t,n+r,a),e.arcTo(t,n+r,t,n,a),e.arcTo(t,n,t+o,n,a),e.closePath()}static _getAverageRGB(e){const t={r:0,g:0,b:0};let n,o,r=-4;const a={r:0,g:0,b:0};let i=0;o=e.naturalHeight||e.height,n=e.naturalWidth||e.width;const l=new sc(n,o).getContext("2d");if(!l)return t;let s;l.drawImage(e,0,0);try{s=l.getImageData(0,0,n,o)}catch(c){return t}for(;(r+=20)<s.data.length;)s.data[r]>200||s.data[r+1]>200||s.data[r+2]>200||(++i,a.r+=s.data[r],a.g+=s.data[r+1],a.b+=s.data[r+2]);return a.r=~~(a.r/i),a.g=~~(a.g/i),a.b=~~(a.b/i),a}static _drawDot(e,t,n,o,r=0,a=1){e.fillRect((t+r)*o,(n+r)*o,a*o,a*o)}static _drawAlignProtector(e,t,n,o){e.clearRect((t-2)*o,(n-2)*o,5*o,5*o),e.fillRect((t-2)*o,(n-2)*o,5*o,5*o)}static _drawAlign(e,t,n,o,r=0,a=1,i,l){const s=e.fillStyle;e.fillStyle=i,new Array(4).fill(0).map((i,l)=>{dc._drawDot(e,t-2+l,n-2,o,r,a),dc._drawDot(e,t+2,n-2+l,o,r,a),dc._drawDot(e,t+2-l,n+2,o,r,a),dc._drawDot(e,t-2,n+2-l,o,r,a)}),dc._drawDot(e,t,n,o,r,a),l||(e.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((i,l)=>{dc._drawDot(e,t-1+l,n-1,o,r,a),dc._drawDot(e,t+1,n-1+l,o,r,a),dc._drawDot(e,t+1-l,n+1,o,r,a),dc._drawDot(e,t-1,n+1-l,o,r,a)})),e.fillStyle=s}_draw(){var e,t,n,o,r,a,i,l,s,c,u,d,p,f,h,g,m,v,b;return lc(this,0,void 0,function*(){const y=null===(e=this.qrCode)||void 0===e?void 0:e.moduleCount,w=this.options.size;let _=this.options.margin;(_<0||2*_>=w)&&(_=0);const x=Math.ceil(_),E=w-2*_,C=this.options.whiteMargin,O=this.options.backgroundDimming,k=Math.ceil(E/y),S=k*y,A=S+2*x,T=new sc(A,A),P=T.getContext("2d");this._clear(),P.save(),P.translate(x,x);const I=new sc(A,A),D=I.getContext("2d");let L=null,R=[];if(this.options.gifBackground){const e=(e=>{const t=new Uint8Array(e);return ys({data:t,pos:0},Ms)})(this.options.gifBackground);if(L=e,R=(M=e).frames.filter(e=>e.image).map(e=>Ns(e,M.gct)),this.options.autoColor){let e=0,t=0,n=0,o=0;for(let r=0;r<R[0].colorTable.length;r++){const a=R[0].colorTable[r];a[0]>200||a[1]>200||a[2]>200||0===a[0]&&0===a[1]&&0===a[2]||(o++,e+=a[0],t+=a[1],n+=a[2])}e=~~(e/o),t=~~(t/o),n=~~(n/o),this.options.colorDark=`rgb(${e},${t},${n})`}}else if(this.options.backgroundImage){const e=yield uc(this.options.backgroundImage);if(this.options.autoColor){const t=dc._getAverageRGB(e);this.options.colorDark=`rgb(${t.r},${t.g},${t.b})`}D.drawImage(e,0,0,e.width,e.height,0,0,A,A),D.rect(0,0,A,A),D.fillStyle=O,D.fill()}else D.rect(0,0,A,A),D.fillStyle=this.options.colorLight,D.fill();var M;const j=$s.getPatternPosition(this.qrCode.typeNumber),z=(null===(n=null===(t=this.options.components)||void 0===t?void 0:t.data)||void 0===n?void 0:n.scale)||cc,N=.5*(1-z);for(let e=0;e<y;e++)for(let t=0;t<y;t++){const n=this.qrCode.isDark(e,t),o=t<8&&(e<8||e>=y-8)||t>=y-8&&e<8;let r=o||6==e&&t>=8&&t<=y-8||6==t&&e>=8&&e<=y-8;for(let l=1;l<j.length-1;l++)r=r||e>=j[l]-2&&e<=j[l]+2&&t>=j[l]-2&&t<=j[l]+2;const a=t*k+(r?0:N*k),i=e*k+(r?0:N*k);P.strokeStyle=n?this.options.colorDark:this.options.colorLight,P.lineWidth=.5,P.fillStyle=n?this.options.colorDark:this.options.colorLight,0===j.length?r||P.fillRect(a,i,(r?1:z)*k,(r?1:z)*k):r||t<y-4&&t>=y-4-5&&e<y-4&&e>=y-4-5||P.fillRect(a,i,(r?1:z)*k,(r?1:z)*k)}const B=j[j.length-1],V=this.options.colorLight;if(P.fillStyle=V,P.fillRect(0,0,8*k,8*k),P.fillRect(0,(y-8)*k,8*k,8*k),P.fillRect((y-8)*k,0,8*k,8*k),(null===(r=null===(o=this.options.components)||void 0===o?void 0:o.timing)||void 0===r?void 0:r.protectors)&&(P.fillRect(8*k,6*k,(y-8-8)*k,k),P.fillRect(6*k,8*k,k,(y-8-8)*k)),(null===(i=null===(a=this.options.components)||void 0===a?void 0:a.cornerAlignment)||void 0===i?void 0:i.protectors)&&dc._drawAlignProtector(P,B,B,k),null===(s=null===(l=this.options.components)||void 0===l?void 0:l.alignment)||void 0===s?void 0:s.protectors)for(let e=0;e<j.length;e++)for(let t=0;t<j.length;t++){const n=j[t],o=j[e];(6!==n||6!==o&&o!==B)&&(6!==o||6!==n&&n!==B)&&(n===B&&o===B||dc._drawAlignProtector(P,n,o,k))}P.fillStyle=this.options.colorDark,P.fillRect(0,0,7*k,k),P.fillRect((y-7)*k,0,7*k,k),P.fillRect(0,6*k,7*k,k),P.fillRect((y-7)*k,6*k,7*k,k),P.fillRect(0,(y-7)*k,7*k,k),P.fillRect(0,(y-7+6)*k,7*k,k),P.fillRect(0,0,k,7*k),P.fillRect(6*k,0,k,7*k),P.fillRect((y-7)*k,0,k,7*k),P.fillRect((y-7+6)*k,0,k,7*k),P.fillRect(0,(y-7)*k,k,7*k),P.fillRect(6*k,(y-7)*k,k,7*k),P.fillRect(2*k,2*k,3*k,3*k),P.fillRect((y-7+2)*k,2*k,3*k,3*k),P.fillRect(2*k,(y-7+2)*k,3*k,3*k);const H=(null===(u=null===(c=this.options.components)||void 0===c?void 0:c.timing)||void 0===u?void 0:u.scale)||cc,U=.5*(1-H);for(let e=0;e<y-8;e+=2)dc._drawDot(P,8+e,6,k,U,H),dc._drawDot(P,6,8+e,k,U,H);const F=(null===(p=null===(d=this.options.components)||void 0===d?void 0:d.cornerAlignment)||void 0===p?void 0:p.scale)||cc,G=.5*(1-F);dc._drawAlign(P,B,B,k,G,F,this.options.colorDark,(null===(h=null===(f=this.options.components)||void 0===f?void 0:f.cornerAlignment)||void 0===h?void 0:h.protectors)||!1);const $=(null===(m=null===(g=this.options.components)||void 0===g?void 0:g.alignment)||void 0===m?void 0:m.scale)||cc,X=.5*(1-$);for(let e=0;e<j.length;e++)for(let t=0;t<j.length;t++){const n=j[t],o=j[e];(6!==n||6!==o&&o!==B)&&(6!==o||6!==n&&n!==B)&&(n===B&&o===B||dc._drawAlign(P,n,o,k,X,$,this.options.colorDark,(null===(b=null===(v=this.options.components)||void 0===v?void 0:v.alignment)||void 0===b?void 0:b.protectors)||!1))}if(C&&(P.fillStyle=this.options.backgroundColor,P.fillRect(-x,-x,A,x),P.fillRect(-x,S,A,x),P.fillRect(S,-x,x,A),P.fillRect(-x,-x,x,A)),this.options.logoImage){const e=yield uc(this.options.logoImage);let t=this.options.logoScale,n=this.options.logoMargin,o=this.options.logoCornerRadius;(t<=0||t>=1)&&(t=.2),n<0&&(n=0),o<0&&(o=0);const r=S*t,a=.5*(A-r),i=a;P.restore(),P.fillStyle=this.options.logoBackgroundColor,P.save(),dc._prepareRoundedCornerClip(P,a-n,i-n,r+2*n,r+2*n,o+n),P.clip();const l=P.globalCompositeOperation;P.globalCompositeOperation="destination-out",P.fill(),P.globalCompositeOperation=l,P.restore(),P.save(),dc._prepareRoundedCornerClip(P,a,i,r,r,o),P.clip(),P.drawImage(e,a,i,r,r),P.restore(),P.save(),P.translate(x,x)}if(L){let e,t,n,o,r,a;if(R.forEach(function(i){e||(e=new ic(w,w),e.setDelay(i.delay),e.setRepeat(0));const{width:l,height:s}=i.dims;t||(t=new sc(l,s),n=t.getContext("2d"),n.rect(0,0,t.width,t.height),n.fillStyle="#ffffff",n.fill()),o&&a&&l===o.width&&s===o.height||(o=new sc(l,s),r=o.getContext("2d"),a=r.createImageData(l,s)),a.data.set(i.patch),r.putImageData(a,0,0),n.drawImage(o.getContext("2d").canvas,i.dims.left,i.dims.top);const c=new sc(A,A),u=c.getContext("2d");u.drawImage(t.getContext("2d").canvas,0,0,A,A),u.rect(0,0,A,A),u.fillStyle=O,u.fill(),u.drawImage(T.getContext("2d").canvas,0,0,A,A);const d=new sc(w,w),p=d.getContext("2d");p.drawImage(c.getContext("2d").canvas,0,0,w,w),e.addFrame(p.getImageData(0,0,d.width,d.height).data)}),!e)throw new Error("No frames.");if(e.finish(),pc(this.canvas)){const t=e.stream().toFlattenUint8Array().reduce((e,t)=>e+String.fromCharCode(t),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(t)}`)}return Promise.resolve(Buffer.from(e.stream().toFlattenUint8Array()))}{D.drawImage(T.getContext("2d").canvas,0,0,A,A),P.drawImage(I.getContext("2d").canvas,-x,-x,A,A);const e=new sc(w,w);e.getContext("2d").drawImage(T.getContext("2d").canvas,0,0,w,w),this.canvas=e;const t=this.options.gifBackground?"gif":"png";return pc(this.canvas)?Promise.resolve(this.canvas.toDataURL(t)):Promise.resolve(this.canvas.toBuffer(t))}})}}function pc(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}dc.CorrectLevel=Us,dc.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}},dc.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:Us.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:dc.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};const fc={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data:()=>({imgUrl:""}),watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const t=await(e=this.gifBgSrc,new Promise((t,n)=>{var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsArrayBuffer(o.response)},o.open("GET",e),o.send()})),n=this.logoSrc;return void this.render(void 0,n,t)}var e;const t=this.bgSrc,n=this.logoSrc;this.render(t,n)},async render(e,t,n){const o=this;new dc({gifBackground:n,text:o.text,size:o.size,margin:o.margin,colorDark:o.colorDark,colorLight:o.colorLight,backgroundColor:o.backgroundColor,backgroundImage:e,backgroundDimming:o.backgroundDimming,logoImage:t,logoScale:o.logoScale,logoBackgroundColor:o.logoBackgroundColor,correctLevel:o.correctLevel,logoMargin:o.logoMargin,logoCornerRadius:o.logoCornerRadius,whiteMargin:Kl(o.whiteMargin),dotScale:o.dotScale,autoColor:Kl(o.autoColor),binarize:Kl(o.binarize),binarizeThreshold:o.binarizeThreshold,components:o.components}).draw().then(e=>{this.imgUrl=e,o.callback&&o.callback(e,o.qid)})}}},hc=["src"],gc=Pt(fc,[["render",function(e,t,n,o,r,a){return n.bindElement?(g(),m("img",{key:0,style:{display:"inline-block"},src:r.imgUrl},null,8,hc)):k("",!0)}],["__file","D:/work/public/easy-print/node_modules/vue-qr/src/packages/vue-qr.vue"]]),mc={key:0},vc={key:1},bc=Pt(A({__name:"index",props:{modelValue:{type:Array,required:!0,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{emit:t}){s([{name:"图片",value:Le.IMG},{name:"文本",value:Le.TEXT}]);const n=P({data:[]}),o=s(""),r=s(""),a=s(""),i=Wt(),l=c(()=>i.getActiveTd);d(()=>l.value,(e,t)=>{n.data.forEach(e=>{e.children.forEach(e=>{e.id==l.value&&(o.value=e.key,r.value=e.defaultValue,a.value=e.dataType)})})});const u=t,p=e;d(()=>p.modelValue,e=>{n.data=e},{deep:!0,immediate:!0});const f=(e,t)=>{n.data.forEach(n=>{n.children.forEach(n=>{n.id==l.value&&(n[t]=e)})}),y()},y=()=>{u("update:modelValue",n.data)};return(e,t)=>{const n=h("el-form-item"),a=h("InputOrSelectData"),i=h("el-input"),s=h("el-form"),c=h("el-result");return l.value?(g(),m("div",mc,[v(s,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef"},{default:b(()=>[v(n,{label:"当前id"},{default:b(()=>[C(L(l.value),1)]),_:1}),v(n,{label:"单元绑定key"},{default:b(()=>[v(a,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),onChange:t[1]||(t[1]=e=>f(e,"key"))},null,8,["modelValue"])]),_:1}),v(n,{label:"单元默认数据"},{default:b(()=>[v(i,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),onChange:t[3]||(t[3]=e=>f(e,"defaultValue"))},null,8,["modelValue"])]),_:1})]),_:1},512)])):(g(),m("div",vc,[v(c,{icon:"warning",title:"提示","sub-title":"ctrl + 鼠标点击单元格选取"})]))}}}),[["__scopeId","data-v-5809100f"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tabletdSelect/index.vue"]]),yc={class:"inputOrSelectData"},wc={class:"dataSourceList"},_c=Pt(A({__name:"inputOrSelectData",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=Wt(),o=P({data:[],printOption:{}}),r=t,a=s(null),i=s(""),l=c(()=>(n.getDataCource&&n.getDataCource.length>0&&(i.value=n.getDataCource[0].module_field),n.getDataCource)),p=e;d(()=>p.modelValue,e=>{o.data=e},{deep:!0,immediate:!0});const f=()=>{r("update:modelValue",o.data),r("change",o.data)},O=u(!1),k=()=>{var e;n.getDataSourceType!=Re.Parameter&&(O.value=!0,null==(e=a.value)||e.blur())};return(e,t)=>{const n=h("el-input"),r=h("el-card"),s=h("el-tab-pane"),c=h("el-tabs"),u=h("el-button");return g(),m("div",yc,[v(n,{modelValue:o.data,"onUpdate:modelValue":t[0]||(t[0]=e=>o.data=e),onFocus:k,onInput:f,clearable:"",ref_key:"myInput",ref:a},null,8,["modelValue"]),v(E(an),{onMousedown:t[3]||(t[3]=S(()=>{},["stop"])),modelValue:O.value,"onUpdate:modelValue":t[4]||(t[4]=e=>O.value=e),title:"数据源"},{footer:b(()=>[y("div",null,[v(u,{size:"large",onClick:t[2]||(t[2]=e=>O.value=!1)},{default:b(()=>t[5]||(t[5]=[C("取消")])),_:1,__:[5]})])]),default:b(()=>[v(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"demo-tabs"},{default:b(()=>[(g(!0),m(w,null,_(l.value,(e,t)=>(g(),x(s,{key:t,name:e.module_field,label:e.module_name},{default:b(()=>[y("div",wc,[(g(!0),m(w,null,_(e.module_content,(t,n)=>(g(),x(r,{class:"cp",onClick:n=>((e,t)=>{O.value=!1,o.data=e.module_field+"."+t.field,f()})(e,t),key:n,style:{width:"100%"},shadow:"hover"},{default:b(()=>[C(L(t.name),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-743f749f"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/inputOrSelectData.vue"]]),xc=["src"],Ec=["innerHTML"],Cc=Pt(A({__name:"webView",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=Wt(),o=s(!1);P({data:[]});const r=s(null),a=s(),i=e,l=s(!0);async function u(e){console.log("data :>> ",e);try{var t=a.value.contentDocument||a.value.contentWindow.document;o.value=!0,setTimeout(()=>{"complete"==t.readyState&&(r.value=t.documentElement.outerHTML),o.value=!1},n.getWebViewLoadingTime)}catch(i){}}return c(()=>{}),d(()=>i.element.attrs.defaultValue,e=>{l.value=!1,r.value=null,setTimeout(()=>{l.value=!0,console.log("111 :>> ",e)},500)},{deep:!0,immediate:!0}),s(),s(),f(()=>{}),(t,i)=>{const s=h("Popover"),c=N("loading");return g(),x(s,{class:"relative",style:O({...E(Ge)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:b(()=>[!r.value&&l.value?(g(),m("iframe",{key:0,ref_key:"iframeef",ref:a,style:O({border:"none",height:e.element.styles.h-12+"px",width:e.element.styles.w-12+"px"}),onLoad:u,src:""==E(n).getRenderType?e.element.attrs.defaultValue:E(Fe)(e.model,e.element.prop)},null,44,xc)):k("",!0),B(y("div",{class:"easyprintWebview",innerHTML:r.value},null,8,Ec),[[c,o.value]])]),_:1},8,["style"])}}}),[["__scopeId","data-v-aaf206a2"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/webView.vue"]]),Oc=Pt({__name:"CrossDomainInput",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},size:{type:String,default:"default"},allowedDomains:{type:Array,default:()=>[window.location.host]},detectionMode:{type:String,default:"strict",validator:e=>["strict","loose"].includes(e)},detectionTrigger:{type:String,default:"change",validator:e=>["change","input"].includes(e)}},emits:["update:modelValue","blur","focus","clear","change","input"],setup(e,{emit:t}){const n=e,o=t,r=s(n.modelValue),a=e=>{try{const t=new URL(e),o=t.host,r=t.hostname;return!n.allowedDomains.some(e=>e.includes(":")?e===o:e===r)}catch(t){return!1}},i=e=>!!(e=>{if(!e)return!1;if("loose"!==n.detectionMode){const t=/https?:\/\/[^\s/$.?#].[^\s]*/g,n=e.match(t);return!!n&&n.some(e=>a(e))}try{return a(e)}catch(t){return!1}})(e)&&(r.value="",o("update:modelValue",""),console.warn("检测到跨域内容，已自动清空输入框"),!0),l=e=>{r.value=e,o("input",e),"input"===n.detectionTrigger&&i(e)},c=e=>{o("blur",e),"change"===n.detectionTrigger&&i(r.value)},u=e=>{o("change",e)},p=()=>{r.value="",o("clear"),o("update:modelValue","")};return d(()=>n.modelValue,e=>{e!==r.value&&(r.value=e)}),d(r,e=>{o("update:modelValue",e)}),(t,n)=>{const o=h("el-input");return g(),x(o,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=e=>r.value=e),placeholder:e.placeholder,type:e.type,clearable:e.clearable,disabled:e.disabled,readonly:e.readonly,"show-password":e.showPassword,size:e.size,onBlur:c,onInput:l,onChange:u,onClear:p},null,8,["modelValue","placeholder","type","clearable","disabled","readonly","show-password","size"])}}},[["__scopeId","data-v-c06ad340"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/CrossDomainInput.vue"]]),kc={key:0},Sc=A({__name:"index",props:{element:{type:Object,required:!0,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change","handledRaggable"],setup(e,{emit:t}){s(!1),s({col:2,row:1}),s([]);const n=s(),o=Wt(),r=Jt();P({data:[],startX:0,startY:0,index:0,colIndex:0,rowIndex:0,type:"row"});const a=e;d(()=>a.modelValue,e=>{},{deep:!0,immediate:!0}),d(()=>a.element,e=>{},{deep:!0,immediate:!0});const i=c(()=>a.element.attrs.columns),l=s(),u=s([]),p=s();return s(!1),f(()=>{u.value=""==o.getRenderType?[]:Fe(a.model,a.element.prop),u.value=u.value.filter(e=>!e._style),setTimeout(()=>{!function(){if(!l.value)return;const e=l.value.rows;if(!e)return;const t=r.getPageOption.height+(r.getPage-10);let n=a.element.styles.y%t;l.value.children[1].children;for(let o=0;o<e.length;o++)if(n+=e[o].offsetHeight,n>=t){let r=t-(n-e[o-1].offsetHeight);u.value.splice(o-1,0,{_style:{height:30+r+"px"}}),n=0}}()},1e3)}),(t,o)=>{const r=h("Popover");return g(),m("div",{ref_key:"containerRef",ref:n,class:"tablecontainerRef"},[v(r,{style:O(E(Ge)(e.element.styles)),onHandleTable:t.handleControls},{default:b(()=>[y("table",{cellpadding:"0",style:O({...e.element.styles,width:e.element.styles.w,height:e.element.styles.h,"table-layout":"fixed"}),cellspacing:"0",ref_key:"tableRef",ref:l},[y("thead",null,[y("tr",null,[(g(!0),m(w,null,_(i.value,(e,t)=>(g(),m("td",{key:t,style:O({width:e.width+"px"})},L(e.name),5))),128))])]),y("tbody",{ref_key:"tbodyRef",ref:p},[(g(!0),m(w,null,_(u.value,(e,t)=>(g(),m(w,{key:t},[e._style?k("",!0):(g(),m("tr",kc,[(g(!0),m(w,null,_(i.value,(t,n)=>(g(),m("td",{key:n},L(e[t.prop]),1))),128))])),e._style?(g(),m("div",{key:1,style:O(e._style)},null,4)):k("",!0)],64))),128))],512)],4)]),_:1},8,["style","onHandleTable"])],512)}}}),Ac=Pt(Sc,[["__scopeId","data-v-be1962ce"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tableList/index.vue"]]),Tc=Pt(A({__name:"TableHeaderSetting",props:{element:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=t,o=s(!1);s([]),s([]);const r=e,a=P({data:[]}),i=()=>{o.value=!0},l=e=>{o.value=!1,n("update:modelValue",a.data),n("change",a.data)};d(()=>r.modelValue,e=>{a.data=e},{deep:!0,immediate:!0});const c=()=>{a.data.push({})};return(e,t)=>{const n=h("el-button"),r=h("el-input"),s=h("el-table-column"),u=h("el-table");return g(),m("div",null,[v(n,{type:"primary",class:"ml10",onClick:i},{default:b(()=>t[3]||(t[3]=[C("设置表头")])),_:1,__:[3]}),v(E(an),{onMousedown:t[1]||(t[1]=S(()=>{},["stop"])),modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),title:"标题设置"},{footer:b(()=>[y("div",null,[v(n,{size:"large",onClick:t[0]||(t[0]=e=>o.value=!1)},{default:b(()=>t[5]||(t[5]=[C("取消")])),_:1,__:[5]}),v(n,{size:"large",type:"primary",onClick:l},{default:b(()=>t[6]||(t[6]=[C("保存")])),_:1,__:[6]})])]),default:b(()=>[y("div",null,[v(n,{type:"primary",onClick:c},{default:b(()=>t[4]||(t[4]=[C("新增列")])),_:1,__:[4]})]),v(u,{data:a.data,stripe:"",style:{width:"100%"}},{default:b(()=>[v(s,{prop:"name",label:"表头名字",width:"180"},{default:b(e=>[v(r,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,placeholder:"表头名字"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(s,{prop:"prop",label:"数据Key",width:"180"},{default:b(e=>[v(r,{modelValue:e.row.prop,"onUpdate:modelValue":t=>e.row.prop=t,placeholder:"数据渲染对应字段"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),v(s,{prop:"width",label:"宽度",width:"180"},{default:b(e=>[v(r,{modelValue:e.row.width,"onUpdate:modelValue":t=>e.row.width=t,placeholder:"列宽度"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-2d779a54"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tableList/TableHeaderSetting.vue"]]),Pc={install(e){e.use(jn),e.component("CrossDomainInput",Oc),e.component("webViewContainer",Cc),e.component("TableList",Ac),e.component("TableHeaderSetting",Tc),e.component("InputOrSelectData",_c),e.component("tabletdSelect",bc),e.component("Popover",Cn),e.component("textContainer",Xn),e.component("lineContainer",Zl),e.component("RichTextContainer",Jl),e.component("RichTextContent",Ql),e.component("BarCodeContainer",$l),e.component("TwoCodeContainer",qn),e.component("ImageContainer",ql),e.component("uploadImg",Yl),e.component("vueQr",gc)}};e("i",{install(e){const t=o();e.use(t),e.component("EasyPrint",$n),e.component("PreviewPrint",mn),e.use(Pc)}})}}});
