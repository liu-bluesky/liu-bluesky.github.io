import"./vue-CVNGtIj_.js";import{u as q}from"./vue-router-D7bIofKn.js";import{_ as G,c as M,l as j,n as K,r as S}from"./index-DkSUJrfs.js";import{u as $}from"./regular-CgHwq5XP.js";import{u as P}from"./vue-i18n-Bt9z2wfA.js";import{a as z}from"./element-plus-CvdjtRA4.js";import{d as H,r as f,i as k,b as J,j as _,c as V,a as B,B as n,u as a,k as o,l,al as O,o as p,t as Q,x as A,A as c}from"./@vue-4wuvJO_G.js";import"./axios-CdcsOsvR.js";import"./vuex-CDsxXceG.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./@vueuse-g1uILd_S.js";import"./element-easy-print-IlIR9WEy.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-BhhoUBD4.js";import"./element-easy-form-j6O3PxFI.js";import"./vuedraggable-C23OG9zM.js";import"./sortablejs-C1wvN1Nu.js";import"./@vue-monaco-CTUC9hHy.js";import"./uuid-CQkTLCs1.js";import"./nprogress-C1nr5Arz.js";import"./@element-plus-DtKFL0Hn.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./@intlify-fCQYzvHO.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const W={class:"login-form mxauto white-bg"},X={class:"title"},Y={key:0},Z={class:"login-code"},ee=["src"],oe={key:1},te={class:"aic"},ae={class:"jcb aic w100"},le=H({__name:"login-form",emits:["handleGoregister"],setup(ue,{emit:E}){const{t:u}=P();let x=E;q();const{openLoading:ie,closeLoading:D}=M(),h=f(),{regEmail:T}=$(),y=()=>{x("handleGoregister",!0)};let C=f("获取验证码"),g=60;const w=()=>{if(g==0){C.value="获取验证码",g=60;return}else C.value=g+"s",g--;setTimeout(function(){w()},1e3)},I=()=>{if(!T(e.loginValidateForm.email)){z.warning("请输入邮箱");return}w()};let F=f(!0);const U=k({email:[{required:!0,type:"email",message:"请输入邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"密码不能为空"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}]});let L=f(!1);const e=k({loginValidateForm:{username:"admin",password:"admin123",email:"",code:"",uuid:""},captchaEnabled:!1,image:""}),v=()=>{j().then(r=>{e.captchaEnabled=r.captchaEnabled,e.loginValidateForm.uuid=r.uuid,e.image="data:image/gif;base64,"+r.img})},b=async r=>{r&&(await(r==null?void 0:r.validate()),K.dispatch("loginModule/Login",e.loginValidateForm).then(t=>{S("/")}).catch(()=>{e.captchaEnabled&&v()}))},N=()=>{F.value=!F.value};return J(()=>{D(),v()}),(r,t)=>{const m=_("el-input"),s=_("el-form-item"),d=_("el-button"),R=_("el-form");return p(),V("div",W,[B("h1",X,n(a(u)("登录")),1),o(R,{rules:U,model:e.loginValidateForm,ref_key:"ruleFormRef",ref:h,onKeyup:t[6]||(t[6]=O(i=>b(h.value),["enter","native"])),class:"ruleForm mt30"},{default:l(()=>[a(F)?(p(),V("div",Y,[o(s,{prop:"username",class:"mt30"},{default:l(()=>[o(m,{type:"text",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.username,"onUpdate:modelValue":t[0]||(t[0]=i=>e.loginValidateForm.username=i),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),o(s,{class:"mt30",prop:"password"},{default:l(()=>[o(m,{"show-password":"",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.password,"onUpdate:modelValue":t[1]||(t[1]=i=>e.loginValidateForm.password=i),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),e.captchaEnabled?(p(),Q(s,{key:0,prop:"code"},{default:l(()=>[o(m,{modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[2]||(t[2]=i=>e.loginValidateForm.code=i),placeholder:a(u)("请输入"),style:{width:"63%"}},null,8,["modelValue","placeholder"]),B("div",Z,[e.image?(p(),V("img",{key:0,src:e.image,onClick:v,class:"login-code-img"},null,8,ee)):A("",!0)])]),_:1})):A("",!0)])):(p(),V("div",oe,[o(s,{prop:"email"},{default:l(()=>[B("div",te,[o(m,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.email,"onUpdate:modelValue":t[3]||(t[3]=i=>e.loginValidateForm.email=i)},null,8,["placeholder","modelValue"]),o(d,{type:"primary",onClick:I,class:"ml15"},{default:l(()=>[c(n(a(C)),1)]),_:1})])]),_:1}),o(s,{prop:"code"},{default:l(()=>[o(m,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[4]||(t[4]=i=>e.loginValidateForm.code=i),type:"text"},null,8,["placeholder","modelValue"])]),_:1})])),o(s,{class:"mt30"},{default:l(()=>[o(d,{type:"primary",class:"w100",loading:a(L),onClick:t[5]||(t[5]=i=>b(h.value))},{default:l(()=>[c(n(a(u)("登录")),1)]),_:1},8,["loading"])]),_:1}),o(s,{class:"mt30"},{default:l(()=>[B("div",ae,[o(d,{onClick:y},{default:l(()=>[c(n(a(u)("注册")),1)]),_:1}),o(d,{onClick:y},{default:l(()=>[c(n(a(u)("忘记密码")),1)]),_:1}),o(d,{onClick:N},{default:l(()=>[c(n(a(F)?a(u)("邮箱登录"):a(u)("账户密码登录")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])])}}}),Me=G(le,[["__scopeId","data-v-65213428"]]);export{Me as default};
