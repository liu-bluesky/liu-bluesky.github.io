System.register(["./vue-legacy.DZW26p5p.js","./role-legacy.fNOhVEdK.js","./index-legacy.g-6wOtEQ.js","./menu-legacy.6nsTK9MF.js","./vue-i18n-legacy.DQtF4IMh.js","./element-plus-legacy.DEXlAKjv.js","./@vue-legacy.BCONSmQk.js"],(function(e,t){"use strict";var l,a,o,n,r,u,s,d,m,p,c,i,h,y,g,v,f,k,N,C,V,b,E;return{setters:[null,e=>{l=e.d,a=e.e,o=e.g},e=>{n=e.e,r=e.p},e=>{u=e.t,s=e.r},e=>{d=e.u},e=>{m=e.a},e=>{p=e.d,c=e.s,i=e.r,h=e.A,y=e.w,g=e.i,v=e.o,f=e.m,k=e.k,N=e.a,C=e.j,V=e.q,b=e.u,E=e.n}],execute:function(){e("_",p({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(e,{emit:t}){const{t:p}=d(),A=t,_=c(!1),I=c(!1),x=i(),j=async()=>{try{const e=await x.value.validate();w.value.model.menuIds=(()=>{let e=K.value.getCheckedKeys(),t=K.value.getHalfCheckedKeys();return e.unshift.apply(e,t),e})(),S.id?l(e).then((e=>{m.success(p("操作成功")),U(),A("update")})):a(e).then((e=>{m.success(p("操作成功")),U(),A("update")}))}catch(e){console.log("error :>> ",e)}},O=h({menuOptions:[],menuExpand:!1,menuNodeAll:!1}),w=i({rowAttrs:{gutter:20,justify:"start",align:"middle"},schema:[{label:"角色名称",prop:"roleName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入"},rules:[{required:!0,message:"不能为空",trigger:"change"}]},{label:"权限字符",prop:"roleKey",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请选择"},rules:[{required:!1,message:"不能为空",trigger:"change"}]},{label:"角色顺序",prop:"roleSort",colAttrs:{span:12},componentName:"ElInputNumber",attrs:{placeholder:"请输入",precision:2,"controls-position":"right",...r}},{label:"邮箱",prop:"email",colAttrs:{span:12},componentName:"ElInput",attrs:{type:"number",placeholder:"请选择"}},{label:"用户名称",prop:"userName",colAttrs:{span:12},componentName:"ElInput",hidden:{matchPattern:"&&",dataSelect:[],type:"function",value:!1,dataJs:(e,t)=>null!=t.userId},attrs:{placeholder:"请输入"}},{label:"状态",prop:"status",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_normal_disable",placeholder:"请选择",showPassword:!0}},{label:"菜单权限",prop:"menuIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"备注",type:"COMPONENT",formItemAttrs:{},attrs:{placeholder:"请输入",type:"textarea"},rules:[],prop:"remark",componentName:"ElInput",colAttrs:{span:24}}],model:{}});let S=e;const K=i(),P=e=>s(e).then((e=>(O.menuOptions=e.menus,e)));y((()=>S.modelValue),(e=>{_.value=e,S.id&&e?(()=>{const e=P(S.id);o(S.id).then((t=>{w.value.model=t.data,E((()=>{e.then((e=>{e.checkedKeys.forEach((e=>{E((()=>{K.value.setChecked(e,!0,!1)}))}))}))}))}))})():!S.id&&e&&(u().then((e=>{O.menuOptions=e.data})),w.value.model={})}),{immediate:!0});const U=()=>{A("update:modelValue",!1)};return y((()=>_.value),(e=>{e||U()})),(t,l)=>{const a=g("el-checkbox"),o=g("el-tree"),r=g("ElementEasyForm"),u=g("el-button"),s=g("ComDialog");return v(),f(s,{modelValue:_.value,"onUpdate:modelValue":l[6]||(l[6]=e=>_.value=e),width:b(n),title:e.id?"编辑":"新增"},{footer:k((()=>[N("div",null,[C(u,{size:"large",onClick:U},{default:k((()=>l[10]||(l[10]=[V("取消")]))),_:1}),C(u,{size:"large",loading:I.value,type:"primary",onClick:j},{default:k((()=>l[11]||(l[11]=[V("保存")]))),_:1},8,["loading"])])])),default:k((()=>[C(r,{ref_key:"comFromRef",ref:x,formJson:w.value},{menuIds:k((()=>[N("div",null,[N("div",null,[C(a,{modelValue:O.menuExpand,"onUpdate:modelValue":l[0]||(l[0]=e=>O.menuExpand=e),onChange:l[1]||(l[1]=e=>((e,t)=>{{let t=O.menuOptions;for(let l=0;l<t.length;l++)K.value.store.nodesMap[t[l].id].expanded=e}})(e))},{default:k((()=>l[7]||(l[7]=[V("展开/折叠")]))),_:1},8,["modelValue"]),C(a,{modelValue:O.menuNodeAll,"onUpdate:modelValue":l[2]||(l[2]=e=>O.menuNodeAll=e),onChange:l[3]||(l[3]=e=>{return t=e,void K.value.setCheckedNodes(t?O.menuOptions:[]);var t})},{default:k((()=>l[8]||(l[8]=[V("全选/全不选")]))),_:1},8,["modelValue"]),C(a,{modelValue:w.value.model.menuCheckStrictly,"onUpdate:modelValue":l[4]||(l[4]=e=>w.value.model.menuCheckStrictly=e),onChange:l[5]||(l[5]=e=>{return t=e,void(w.value.model.menuCheckStrictly=!!t);var t})},{default:k((()=>l[9]||(l[9]=[V("父子联动")]))),_:1},8,["modelValue"])]),C(o,{class:"tree-border",data:O.menuOptions,"show-checkbox":"",ref_key:"treeRef",ref:K,"node-key":"id","check-strictly":!w.value.model.menuCheckStrictly,"empty-text":"加载中，请稍候",props:O.defaultProps},null,8,["data","check-strictly","props"])])])),_:1},8,["formJson"])])),_:1},8,["modelValue","width","title"])}}}))}}}));
