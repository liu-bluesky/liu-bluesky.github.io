System.register(["./vue-legacy.Bl-PfySD.js","./element-easy-form-legacy.BNKL2ogN.js","./role-legacy.BaDpfq01.js","./index-legacy.Bt4yn6-Y.js","./menu-legacy.CGXcxTKH.js","./element-plus-legacy.70wpbogp.js","./@vue-legacy.CwdyZYS1.js"],(function(e,l){"use strict";var a,o,n,r,s,u,d,m,p,c,i,h,y,g,v,f,k,N,C,V,b,E;return{setters:[null,e=>{a=e.E},e=>{o=e.d,n=e.e,r=e.g},e=>{s=e.d,u=e.e},e=>{d=e.t,m=e.r},e=>{p=e.a},e=>{c=e.d,i=e.r,h=e.i,y=e.w,g=e.j,v=e.t,f=e.l,k=e.u,N=e.o,C=e.a,V=e.k,b=e.A,E=e.n}],execute:function(){e("_",c({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(e,{emit:l}){const c=l,_=i(!1),A=i(!1),I=i(),x=async()=>{try{const e=await I.value.validate();j.value.model.menuIds=(()=>{let e=S.value.getCheckedKeys(),l=S.value.getHalfCheckedKeys();return e.unshift.apply(e,l),e})(),w.id?o(e).then((e=>{p.success(t("操作成功")),P(),c("update")})):n(e).then((e=>{p.success(t("操作成功")),P(),c("update")}))}catch(e){console.log("error :>> ",e)}},O=h({menuOptions:[],menuExpand:!1,menuNodeAll:!1}),j=i({schema:[{label:"角色名称",prop:"roleName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入"},rules:[{required:!0,message:"不能为空",trigger:"change"}]},{label:"权限字符",prop:"roleKey",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请选择"},rules:[{required:!1,message:"不能为空",trigger:"change"}]},{label:"角色顺序",prop:"roleSort",colAttrs:{span:12},componentName:"ElInputNumber",attrs:{placeholder:"请输入",precision:2,"controls-position":"right",...u}},{label:"邮箱",prop:"email",colAttrs:{span:12},componentName:"ElInput",attrs:{type:"number",placeholder:"请选择"}},{label:"用户名称",prop:"userName",colAttrs:{span:12},componentName:"ElInput",hidden:(e,l)=>null!=l.userId,attrs:{placeholder:"请输入"}},{label:"状态",prop:"status",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_normal_disable",placeholder:"请选择",showPassword:!0}},{label:"菜单权限",prop:"menuIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"备注",type:"COMPONENT",formItemAttrs:{},attrs:{placeholder:"请输入",type:"textarea"},rules:[],prop:"remark",componentName:"ElInput",colAttrs:{span:24}}],model:{}});let w=e;const S=i(),K=e=>m(e).then((e=>(O.menuOptions=e.menus,e)));y((()=>w.modelValue),(e=>{_.value=e,console.log("props.id :>> ",w.id),w.id&&e?(()=>{const e=K(w.id);r(w.id).then((l=>{j.value.model=l.data,E((()=>{e.then((e=>{e.checkedKeys.forEach((e=>{E((()=>{S.value.setChecked(e,!0,!1)}))}))}))}))}))})():!w.id&&e&&(d().then((e=>{O.menuOptions=e.data})),j.value.model={})}),{immediate:!0});const P=()=>{c("update:modelValue",!1)};return y((()=>_.value),(e=>{e||P()})),(l,t)=>{const o=g("el-checkbox"),n=g("el-tree"),r=g("el-button"),u=g("ComDialog");return N(),v(u,{modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=e=>_.value=e),width:k(s),title:e.id?"编辑":"新增"},{footer:f((()=>[C("div",null,[V(r,{size:"large",onClick:P},{default:f((()=>[b("取消")])),_:1}),V(r,{size:"large",loading:A.value,type:"primary",onClick:x},{default:f((()=>[b("保存")])),_:1},8,["loading"])])])),default:f((()=>[V(k(a),{ref_key:"comFromRef",ref:I,formJson:j.value},{menuIds:f((()=>[C("div",null,[C("div",null,[V(o,{modelValue:O.menuExpand,"onUpdate:modelValue":t[0]||(t[0]=e=>O.menuExpand=e),onChange:t[1]||(t[1]=e=>((e,l)=>{{let l=O.menuOptions;for(let t=0;t<l.length;t++)S.value.store.nodesMap[l[t].id].expanded=e}})(e))},{default:f((()=>[b("展开/折叠")])),_:1},8,["modelValue"]),V(o,{modelValue:O.menuNodeAll,"onUpdate:modelValue":t[2]||(t[2]=e=>O.menuNodeAll=e),onChange:t[3]||(t[3]=e=>{return l=e,void S.value.setCheckedNodes(l?O.menuOptions:[]);var l})},{default:f((()=>[b("全选/全不选")])),_:1},8,["modelValue"]),V(o,{modelValue:j.value.model.menuCheckStrictly,"onUpdate:modelValue":t[4]||(t[4]=e=>j.value.model.menuCheckStrictly=e),onChange:t[5]||(t[5]=e=>{return l=e,void(j.value.model.menuCheckStrictly=!!l);var l})},{default:f((()=>[b("父子联动")])),_:1},8,["modelValue"])]),V(n,{class:"tree-border",data:O.menuOptions,"show-checkbox":"",ref_key:"treeRef",ref:S,"node-key":"id","check-strictly":!j.value.model.menuCheckStrictly,"empty-text":"加载中，请稍候",props:O.defaultProps},null,8,["data","check-strictly","props"])])])),_:1},8,["formJson"])])),_:1},8,["modelValue","width","title"])}}}))}}}));
