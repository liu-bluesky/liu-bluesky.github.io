import"./vue-BCJY8gBf.js";import{M as na}from"./mockjs-CpzBLoCE.js";import{c as bi,d as ra}from"./pinia-TB7j859w.js";import{a as Pe}from"./lodash-Ce2coQ-v.js";import{s as br,V as Rn}from"./vue3-draggable-resizable-yn-CG0QmAMT.js";import{r as C,f as ie,s as oa,w as le,t as et,b as Je,j as q,o as T,c as j,k as M,l as R,a as U,F as be,m as xe,q as se,u as z,v as ue,M as ae,y as Ae,L as $e,d as fe,J as aa,B as ve,D as _t,H as Ut,x as De,T as _i,z as Ct,A as Ln,n as ft,P as wi,Q as At,R as jt,g as ia,G as Ei,e as la}from"./@vue-BwKUEgJD.js";import{E as Si,a as sa}from"./element-plus-BIk4sW6s.js";var Me=[];for(var er=0;er<256;++er)Me.push((er+256).toString(16).slice(1));function Oi(e,t=0){return(Me[e[t+0]]+Me[e[t+1]]+Me[e[t+2]]+Me[e[t+3]]+"-"+Me[e[t+4]]+Me[e[t+5]]+"-"+Me[e[t+6]]+Me[e[t+7]]+"-"+Me[e[t+8]]+Me[e[t+9]]+"-"+Me[e[t+10]]+Me[e[t+11]]+Me[e[t+12]]+Me[e[t+13]]+Me[e[t+14]]+Me[e[t+15]]).toLowerCase()}var yn,xi=new Uint8Array(16);function ki(){if(!yn&&(yn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yn(xi)}var Ci=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const bo={randomUUID:Ci};function We(e,t,r){if(bo.randomUUID&&!t&&!e)return bo.randomUUID();e=e||{};var n=e.random||(e.rng||ki)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Oi(n)}/*!vue3-sketch-ruler v2.2.102025年6月Wed Jun 18 2025 17:41:08 GMT+0800 (中国标准时间)制作*/const Ai=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1;function Pi(e,t,r,n,o,l){l?o.moveTo(e,0):o.moveTo(0,e),o.save(),l?o.translate(e+5,n*.2):o.translate(r*.1,e+32),l||o.rotate(-Math.PI/2),o.fillText(Math.round(t).toString(),4,7),o.restore(),l?o.lineTo(e,n):o.lineTo(r,e),o.stroke(),o.closePath(),o.setTransform(1,0,0,1,0,0)}function bn(e,t,r,n,o,l){n.fillStyle=o.fontShadowColor,n.strokeStyle=o.longfgColor,n.save(),n.translate(e,t),l||n.rotate(-Math.PI/2),n.font="bold 12px  Aria",n.fillText(String(r),0,0),n.restore()}const Di=(e,t,r,n,o,l)=>{const{scale:a,width:i,height:s,ratio:u,palette:c,gridRatio:d,showShadowText:f}=o,{bgColor:p,fontColor:h,shadowColor:m,longfgColor:A}=c,g=l?o.canvasWidth:o.canvasHeight;e.setTransform(1,0,0,1,0,0),e.scale(u,u),e.clearRect(0,0,i,s),e.fillStyle=p,e.fillRect(0,0,i,s);const v=Ai(a)*d*10,y=v*a,_=Math.floor(t/v)*v,k=(_-t)/v*y,w=t+Math.ceil((l?i:s)/a);if(n){const b=(r-t)*a,O=n*a;if(e.fillStyle=m,l?e.fillRect(b,0,O,s):e.fillRect(0,b,i,O),f)if(l){bn(b,s*.4,Math.round(r),e,c,l);const E=(r+n-t)*a;bn(E,s*.4,Math.round(r+n),e,c,l)}else{bn(i*.4,b,Math.round(r),e,c,l);const E=(r+n-t)*a;bn(i*.4,E,Math.round(r+n),e,c,l)}}e.beginPath(),e.fillStyle=h,e.strokeStyle=A;for(let b=_,O=0;b<w;b+=v,O++){const E=k+O*y+.5;if(b-v<g&&b>g||b==g){const V=k+O*y+.5+(g-b)*a;Pi(V,g,i,s,e,l);return}b>=0&&b<=g&&(b==0?l?(e.moveTo(E,0),e.lineTo(E,s)):(e.moveTo(0,E),e.lineTo(i,E)):l?(e.moveTo(E,20),e.lineTo(E,s/1.3)):(e.moveTo(20,E),e.lineTo(i/1.3,E)),e.save(),b==0?l?e.translate(E-15,s*.01):e.translate(i*.3,E-5):l?e.translate(E-12,s*.05):e.translate(i*.05,E+12),l||e.rotate(-Math.PI/2),g-b>v/2&&(!f||n==0||Math.abs(b-r)>v/2&&Math.abs(b-(r+n))>v/2)&&e.fillText(b.toString(),4,9),e.restore())}e.stroke(),e.closePath()};function _r(e,t=100){let r=null;const n=function(...o){r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...o)},t)};return n.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n}function ua(e,t){const r=C(0),n=C(0),o=C(!1),l=ie(()=>({backgroundColor:e.palette.hoverBg,color:e.palette.hoverColor,[t?"top":"left"]:"-8px",[t?"left":"top"]:"".concat(r.value+10,"px")})),a=({offsetX:p,offsetY:h})=>{r.value=t?p:h},i=(p,h)=>new Promise(m=>{if(e.lockLine)return;const A=t?p.clientY:p.clientX;a(p);const g=h||n.value;let v=g;const y=k=>{let w=((t?k.clientY:k.clientX)-A)/e.scale+g,b=w;const O=(t?e.snapsObj.h:e.snapsObj.v).slice().sort((E,V)=>Math.abs(b-E)-Math.abs(b-V));O.length&&Math.abs(O[0]-w)<e.snapThreshold/e.scale&&(b=O[0],w=b),v=Math.round(w),n.value=v},_=()=>{document.removeEventListener("mousemove",y),s(v,e.index),m()};document.addEventListener("mousemove",y),document.addEventListener("mouseup",_,{once:!0})}),s=(p,h)=>{var m,A;const g=t?(m=e.lines)==null?void 0:m.h:(A=e.lines)==null?void 0:A.v,v=u(p);if(g)if(v)if(typeof h=="number")g.splice(h,1);else return;else typeof h!="number"?g.push(p):g[h]=p},u=p=>{const h=t?e.canvasHeight:e.canvasWidth;return p<0||p>h},c=ie(()=>u(n.value)?"放开删除":"".concat(t?"Y":"X","：").concat(n.value*e.rate)),d=_r(()=>{o.value=!1},200),f=_r(()=>{o.value=!0},200);return{showLabel:o,startValue:n,actionStyle:l,labelContent:c,handleMouseDown:i,handleMouseenter:p=>{e.lockLine||(a(p),f(),d.cancel())},handleMouseLeave:()=>{d()}}}const Ii={key:0,class:"value"},Ti=fe({__name:"ruler-line",props:{scale:{},palette:{},index:{},start:{},vertical:{type:Boolean},value:{},canvasWidth:{},canvasHeight:{},lines:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},lockLine:{type:Boolean}},setup(e){const t=e,r=C(!1),{actionStyle:n,handleMouseDown:o,labelContent:l,startValue:a,showLabel:i,handleMouseenter:s,handleMouseLeave:u}=ua(t,t.vertical),c=ie(()=>a.value>=t.start),d=ie(()=>{const{lineType:p,lockLineColor:h,lineColor:m}=t.palette,A=t.lockLine?h:m!=null?m:"black",g=t.lockLine||r.value?"none":"auto",v=t.isShowReferLine&&!t.lockLine?t.vertical?"ns-resize":"ew-resize":"default",y=t.vertical?"borderTop":"borderLeft",_=(a.value-t.start)*t.scale;return{[y]:"1px ".concat(p," ").concat(A),pointerEvents:g,cursor:v,[t.vertical?"top":"left"]:"".concat(_,"px")}});Je(()=>{var p;a.value=(p=t.value)!=null?p:0});const f=_r(()=>{r.value=!1},1e3);return le([()=>t.scale],()=>{r.value=!0,f()}),(p,h)=>At((T(),j("div",{class:"line",style:ae(d.value),onMouseenter:h[0]||(h[0]=$e((...m)=>z(s)&&z(s)(...m),["stop"])),onMouseleave:h[1]||(h[1]=$e((...m)=>z(u)&&z(u)(...m),["stop"])),onMousedown:h[2]||(h[2]=$e((...m)=>z(o)&&z(o)(...m),["stop"]))},[U("div",{class:"action",style:ae(z(n))},[z(i)?(T(),j("span",Ii,De(z(l)),1)):Ae("",!0)],4)],36)),[[jt,c.value]])}}),Ri=fe({__name:"index",props:{scale:{},palette:{},vertical:{type:Boolean},showShadowText:{type:Boolean},start:{},width:{},height:{},selectStart:{},selectLength:{},canvasWidth:{},canvasHeight:{},rate:{},gridRatio:{}},emits:["handleDragStart"],setup(e,{emit:t}){const r=e,n=t,o=ve({isDragging:!1,canvasContext:null});let l=window.devicePixelRatio;const a=C(null);Je(()=>{window.addEventListener("resize",i),s(),c(l),d(l)});const i=()=>{l=window.devicePixelRatio,c(l),d(l)},s=()=>{var p;o.canvasContext=((p=a.value)==null?void 0:p.getContext("2d"))||null},u=ie(()=>({width:r.width+"px",height:r.height+"px",cursor:r.vertical?"ew-resize":"ns-resize",[r.vertical?"borderRight":"borderBottom"]:"1px solid ".concat(r.palette.borderColor||"#eeeeef"," ")}));la(()=>{window.removeEventListener("resize",i)});const c=p=>{if(a.value){a.value.width=Math.round(r.width*p),a.value.height=Math.round(r.height*p);const h=o.canvasContext;h&&(h.font='11px -apple-system,\n                "Helvetica Neue", ".SFNSText-Regular",\n                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",\n                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif',h.lineWidth=1,h.textBaseline="middle")}},d=p=>{const h={scale:r.scale,width:r.width,height:r.height,palette:r.palette,canvasWidth:r.canvasWidth,canvasHeight:r.canvasHeight,ratio:p,rate:r.rate,gridRatio:r.gridRatio,showShadowText:r.showShadowText};h.scale=r.scale/r.rate,h.canvasWidth=r.canvasWidth*r.rate,h.canvasHeight=r.canvasHeight*r.rate,o.canvasContext&&Di(o.canvasContext,r.start*r.rate,r.selectStart,r.selectLength,h,!r.vertical)};le([()=>r.width,()=>r.height,()=>r.start,()=>r.palette,()=>r.selectStart,()=>r.selectLength],()=>{d(l)}),le([()=>r.width,()=>r.height],()=>{c(l)});const f=p=>{n("handleDragStart",p)};return(p,h)=>(T(),j("canvas",{ref_key:"canvas",ref:a,class:"ruler",style:ae(u.value),onMousedown:$e(f,["stop"])},null,36))}}),Mi={class:"lines"},Li={key:0,class:"value"},_o=fe({__name:"ruler-wrapper",props:{scale:{},thick:{},canvasWidth:{},canvasHeight:{},palette:{},vertical:{type:Boolean},width:{},height:{},start:{},startOther:{},lines:{},selectStart:{},selectLength:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},gridRatio:{},lockLine:{type:Boolean},showShadowText:{type:Boolean}},emits:["changeLineState"],setup(e,{emit:t}){const r=e,{showLabel:n,actionStyle:o,handleMouseenter:l,handleMouseLeave:a,handleMouseDown:i,labelContent:s,startValue:u}=ua(r,!r.vertical),c=C(!1),d=C(!1),f=ie(()=>r.vertical?"v-container":"h-container"),p=t,h=ie(()=>{var g,v;return r.vertical?(g=r.lines)==null?void 0:g.h:(v=r.lines)==null?void 0:v.v}),m=ie(()=>{const g=r.palette.lineType;let v=r.vertical?"left":"top",y=r.vertical?"top":"left",_=r.vertical?"borderLeft":"borderBottom";const k=(u.value-r.startOther)*r.scale+r.thick;return{[v]:k+"px",[y]:-r.thick+"px",cursor:r.vertical?"ew-resize":"ns-resize",[_]:"1px ".concat(g," ").concat(r.palette.lineColor)}}),A=async g=>{const{offsetX:v,offsetY:y}=g,{scale:_,vertical:k,thick:w,startOther:b}=r;if(!c.value){d.value=!0,p("changeLineState",!1);let O=Math.round(b-w/_+(k?v:y)/_);u.value=O,await i(g,O),d.value=!1}};return le([()=>r.lockLine],()=>{c.value=r.lockLine}),(g,v)=>(T(),j("div",{class:Ut(f.value)},[M(Ri,Ct(g.$props,{onHandleDragStart:A}),null,16),At(U("div",Mi,[(T(!0),j(be,null,xe(h.value,(y,_)=>(T(),se(Ti,Ct({key:y+_,index:_,value:y>>0,ref_for:!0},g.$props),null,16,["index","value"]))),128))],512),[[jt,g.isShowReferLine]]),g.isShowReferLine?At((T(),j("div",{key:0,class:"indicator",style:ae(m.value),onMouseenter:v[0]||(v[0]=(...y)=>z(l)&&z(l)(...y)),onMouseleave:v[1]||(v[1]=(...y)=>z(a)&&z(a)(...y))},[U("div",{class:"action",style:ae(z(o))},[z(n)?(T(),j("span",Li,De(z(s)),1)):Ae("",!0)],4)],36)),[[jt,d.value]]):Ae("",!0)],2))}}),$i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC",Bi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=";/*!simple-panzoom v1.0.72024年8月Sat Aug 10 2024 16:04:04 GMT+0800 (中国标准时间)制作*/typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}));function ca(e,t){let r=e.length;for(;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function wr(e,t){let r;if(t.touches){r=0;for(const n of t.touches)n.pointerId=r++,wr(e,n);return}r=ca(e,t),r>-1&&e.splice(r,1),e.push(t)}function Ni(e,t){if(t.touches){for(;e.length;)e.pop();return}const r=ca(e,t);r>-1&&e.splice(r,1)}function wo(e){e=e.slice(0);let t=e.pop(),r;for(;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function tr(e){if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}let cn={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?cn={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(cn={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function nr(e,t,r,n){cn[e].split(" ").forEach(o=>{t.addEventListener(o,r,n)})}function rr(e,t,r){cn[e].split(" ").forEach(n=>{t.removeEventListener(n,r)})}const Vi=typeof document<"u"&&!!document.documentMode;let Eo;function zi(){return Eo||(Eo=document.createElement("div").style)}const So=["webkit","moz","ms"],_n={};function Pr(e){if(_n[e])return _n[e];const t=zi();if(e in t)return _n[e]=e;const r=e[0].toUpperCase()+e.slice(1);let n=So.length;for(;n--;){const o="".concat(So[n]).concat(r);if(o in t)return _n[e]=o}}function wn(e,t){return parseFloat(t[Pr(e)])||0}function En(e,t,r=window.getComputedStyle(e)){const n=t==="border"?"Width":"";return{left:wn("".concat(t,"Left").concat(n),r),right:wn("".concat(t,"Right").concat(n),r),top:wn("".concat(t,"Top").concat(n),r),bottom:wn("".concat(t,"Bottom").concat(n),r)}}function zt(e,t,r){e.style[Pr(t)]=r}function ji(e,t){const r=Pr("transform");zt(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function Hi(e,{x:t,y:r,scale:n,isSVG:o},l){if(zt(e,"transform","scale(".concat(n,") translate(").concat(t,"px, ").concat(r,"px)")),o&&Vi){const a=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",a)}}function Sn(e){const t=e.parentNode,r=window.getComputedStyle(e),n=window.getComputedStyle(t),o=e.getBoundingClientRect(),l=t.getBoundingClientRect();return{elem:{style:r,width:o.width,height:o.height,top:o.top,bottom:o.bottom,left:o.left,right:o.right,margin:En(e,"margin",r),border:En(e,"border",r)},parent:{style:n,width:l.width,height:l.height,top:l.top,bottom:l.bottom,left:l.left,right:l.right,padding:En(t,"padding",n),border:En(t,"border",n)}}}function Ui(e){let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function Fi(e){return(e.getAttribute("class")||"").trim()}function Gi(e,t){return e.nodeType===1&&" ".concat(Fi(e)," ").indexOf(" ".concat(t," "))>-1}function Xi(e,t){for(let r=e;r!=null;r=r.parentNode)if(Gi(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}const qi=/^http:[\w\.\/]+svg$/;function Wi(e){return qi.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function Yi(e){const t={};for(const r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}const da={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:e=>{e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:Hi,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function fa(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!Ui(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t={...da,...t};const r=Wi(e),n=e.parentNode;n.style.overflow=t.overflow,n.style.userSelect="none",n.style.touchAction=t.touchAction,(t.canvas?n:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,zt(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function o(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",zt(e,"transformOrigin","")}function l(x={}){for(const I in x)x.hasOwnProperty(I)&&(t[I]=x[I]);(x.hasOwnProperty("cursor")||x.hasOwnProperty("canvas"))&&(n.style.cursor=e.style.cursor="",(t.canvas?n:e).style.cursor=t.cursor),x.hasOwnProperty("overflow")&&(n.style.overflow=x.overflow),x.hasOwnProperty("touchAction")&&(n.style.touchAction=x.touchAction,e.style.touchAction=x.touchAction)}let a=0,i=0,s=1,u=!1;m(t.startScale,{animate:!1,force:!0}),setTimeout(()=>{h(t.startX,t.startY,{animate:!1,force:!0})});function c(x,I,X){if(X.silent)return;const W=new CustomEvent(x,{detail:I});e.dispatchEvent(W)}function d(x,I,X){const W={x:a,y:i,scale:s,isSVG:r,originalEvent:X,dimsOut:{}};typeof I.animate=="boolean"&&(I.animate?ji(e,I):zt(e,"transition","none")),I.setTransform(e,W,I);function N(){const ee=Sn(e);W.dimsOut=ee,c(x,W,I),c("panzoomchange",W,I)}return I.animate?setTimeout(()=>{N()},I.duration+50):requestAnimationFrame(()=>{N()}),W}function f(x,I,X,W){const N={...t,...W},ee={x:a,y:i,opts:N};if(!N.force&&(N.disablePan||N.panOnlyWhenZoomed&&s===N.startScale))return ee;if(x=parseFloat(x),I=parseFloat(I),N.disableXAxis||(ee.x=(N.relative?a:0)+x),N.disableYAxis||(ee.y=(N.relative?i:0)+I),N.contain){const Z=Sn(e),Le=Z.elem.width/s,Re=Z.elem.height/s,nt=Le*X,Xe=Re*X,Ke=(nt-Le)/2,F=(Xe-Re)/2;if(N.contain==="inside"){const Y=(-Z.elem.margin.left-Z.parent.padding.left+Ke)/X,K=(Z.parent.width-nt-Z.parent.padding.left-Z.elem.margin.left-Z.parent.border.left-Z.parent.border.right+Ke)/X;ee.x=Math.max(Math.min(ee.x,K),Y);const Q=(-Z.elem.margin.top-Z.parent.padding.top+F)/X,Ee=(Z.parent.height-Xe-Z.parent.padding.top-Z.elem.margin.top-Z.parent.border.top-Z.parent.border.bottom+F)/X;ee.y=Math.max(Math.min(ee.y,Ee),Q)}else if(N.contain==="outside"){const Y=(-(nt-Z.parent.width)-Z.parent.padding.left-Z.parent.border.left-Z.parent.border.right+Ke)/X,K=(Ke-Z.parent.padding.left)/X;ee.x=Math.max(Math.min(ee.x,K),Y);const Q=(-(Xe-Z.parent.height)-Z.parent.padding.top-Z.parent.border.top-Z.parent.border.bottom+F)/X,Ee=(F-Z.parent.padding.top)/X;ee.y=Math.max(Math.min(ee.y,Ee),Q)}}return N.roundPixels&&(ee.x=Math.round(ee.x),ee.y=Math.round(ee.y)),ee}function p(x,I){const X={...t,...I},W={scale:s,opts:X};if(!X.force&&X.disableZoom)return W;let N=t.minScale,ee=t.maxScale;if(X.contain){const Z=Sn(e),Le=Z.elem.width/s,Re=Z.elem.height/s;if(Le>1&&Re>1){const nt=Z.parent.width-Z.parent.border.left-Z.parent.border.right,Xe=Z.parent.height-Z.parent.border.top-Z.parent.border.bottom,Ke=nt/Le,F=Xe/Re;t.contain==="inside"?ee=Math.min(ee,Ke,F):t.contain==="outside"&&(N=Math.max(N,Ke,F))}}return W.scale=Math.min(Math.max(x,N),ee),W}function h(x,I,X,W){const N=f(x,I,s,X);return a!==N.x||i!==N.y?(a=N.x,i=N.y,d("panzoompan",N.opts,W)):{x:a,y:i,scale:s,isSVG:r,originalEvent:W}}function m(x,I,X){const W=p(x,I),N=W.opts;if(!N.force&&N.disableZoom)return;x=W.scale;let ee=a,Z=i;if(N.focal){const Re=N.focal;ee=(Re.x/x-Re.x/s+a*x)/x,Z=(Re.y/x-Re.y/s+i*x)/x}const Le=f(ee,Z,x,{relative:!1,force:!0});return a=Le.x,i=Le.y,s=x,d("panzoomzoom",N,X)}function A(x,I){const X={...t,animate:!0,...I};return m(s*Math.exp((x?1:-1)*X.step),X)}function g(x){return A(!0,x)}function v(x){return A(!1,x)}function y(x,I,X,W){const N=Sn(e),ee={width:N.parent.width-N.parent.padding.left-N.parent.padding.right-N.parent.border.left-N.parent.border.right,height:N.parent.height-N.parent.padding.top-N.parent.padding.bottom-N.parent.border.top-N.parent.border.bottom};let Z=I.clientX-N.parent.left-N.parent.padding.left-N.parent.border.left-N.elem.margin.left,Le=I.clientY-N.parent.top-N.parent.padding.top-N.parent.border.top-N.elem.margin.top;r||(Z-=N.elem.width/s/2,Le-=N.elem.height/s/2);const Re={x:Z/ee.width*(ee.width*x),y:Le/ee.height*(ee.height*x)};return m(x,{...X,animate:!1,focal:Re},W)}function _(x,I){x.preventDefault();const X={...t,...I,animate:!1},W=(x.deltaY===0&&x.deltaX?x.deltaX:x.deltaY)<0?1:-1,N=p(s*Math.exp(W*X.step/3),X).scale;return y(N,x,X,x)}function k(x){const I={...t,animate:!0,force:!0,...x};s=p(I.startScale,I).scale;const X=f(I.startX,I.startY,s,I);return a=X.x,i=X.y,d("panzoomreset",I)}let w,b,O,E,V,S;const H=[];function L(x){if(Xi(x.target,t))return;wr(H,x),u=!0,t.handleStartEvent(x),w=a,b=i,c("panzoomstart",{x:a,y:i,scale:s,isSVG:r,originalEvent:x},t);const I=wo(H);O=I.clientX,E=I.clientY,V=s,S=tr(H)}function J(x){if(!u||w===void 0||b===void 0||O===void 0||E===void 0)return;wr(H,x);const I=wo(H),X=H.length>1;let W=s;if(X){S===0&&(S=tr(H));const N=tr(H)-S;W=p(N*t.step/80+V).scale,y(W,I,{animate:!1},x)}(!X||t.pinchAndPan)&&h(w+(I.clientX-O)/W,b+(I.clientY-E)/W,{animate:!1},x)}function P(x){H.length===1&&c("panzoomend",{x:a,y:i,scale:s,isSVG:r,originalEvent:x},t),Ni(H,x),u&&(u=!1,w=b=O=E=void 0)}let Se=!1;function ne(){Se||(Se=!0,nr("down",t.canvas?n:e,L),nr("move",document,J,{passive:!0}),nr("up",document,P,{passive:!0}))}function D(){Se=!1,rr("down",t.canvas?n:e,L),rr("move",document,J),rr("up",document,P)}return t.noBind||ne(),{bind:ne,destroy:D,eventNames:cn,getPan:()=>({x:a,y:i}),getScale:()=>s,getOptions:()=>Yi(t),handleDown:L,handleMove:J,handleUp:P,pan:h,reset:k,resetStyle:o,setOptions:l,setStyle:(x,I)=>zt(e,x,I),zoom:m,zoomIn:g,zoomOut:v,zoomToPoint:y,zoomWithWheel:_}}fa.defaultOptions=da;const Ji={class:"sketch-ruler"},Zi=fe({__name:"index",props:{showRuler:{type:Boolean,default:!0},eyeIcon:{},closeEyeIcon:{},scale:{default:1},rate:{default:1},thick:{default:16},palette:{},width:{default:1400},height:{default:800},paddingRatio:{default:.2},autoCenter:{type:Boolean,default:!0},shadow:{default:()=>({x:0,y:0,width:0,height:0})},lines:{default:()=>({h:[],v:[]})},isShowReferLine:{type:Boolean,default:!0},canvasWidth:{default:700},canvasHeight:{default:700},snapsObj:{default:()=>({h:[],v:[]})},snapThreshold:{default:5},gridRatio:{default:1},lockLine:{type:Boolean,default:!1},selfHandle:{type:Boolean,default:!1},showShadowText:{type:Boolean,default:!0},panzoomOption:{}},emits:["onCornerClick","update:scale","zoomchange","update:lockLine"],setup(e,{expose:t,emit:r}){aa(D=>({"89f302c6":ne.value}));const n=e,o=r,l=C(null),a=C(0),i=C(0);let s=0,u=0;const c=C(1),d=C(n.isShowReferLine),f=C(null),p=C("defaultCursor"),h=ie(()=>({bgColor:"#f6f7f9",longfgColor:"#BABBBC",fontColor:"#7D8694",fontShadowColor:"#106ebe",shadowColor:"#e9f7fe",lineColor:"#51d6a9",lineType:"solid",lockLineColor:"#d4d7dc",hoverBg:"#000",hoverColor:"#fff",borderColor:"#eeeeef",...n.palette})),m=ie(()=>{var D,x;return{backgroundImage:d.value?"url(".concat((D=n.eyeIcon)!=null?D:$i,")"):"url(".concat((x=n.closeEyeIcon)!=null?x:Bi,")"),width:n.thick+"px",height:n.thick+"px",borderRight:"1px solid ".concat(h.value.borderColor),borderBottom:"1px solid ".concat(h.value.borderColor)}}),A=ie(()=>({background:h.value.bgColor,width:g.value+"px",height:v.value+"px"})),g=ie(()=>n.width-n.thick),v=ie(()=>n.height-n.thick),y=D=>{var x;(D.ctrlKey||D.metaKey)&&((x=f.value)==null||x.zoomWithWheel(D))},_=D=>{var x;const I=document.activeElement;I!=null&&I.closest(".monaco-editor")||(I==null?void 0:I.tagName)==="INPUT"||(I==null?void 0:I.tagName)==="TEXTAREA"||(I==null?void 0:I.getAttribute("contenteditable"))==="true"||D.key===" "&&(p.value="grabCursor",(x=f.value)==null||x.bind(),D.preventDefault())},k=D=>{var x;const I=document.activeElement;I!=null&&I.closest(".monaco-editor")||(I==null?void 0:I.tagName)==="INPUT"||(I==null?void 0:I.tagName)==="TEXTAREA"||(I==null?void 0:I.getAttribute("contenteditable"))==="true"||D.key===" "&&((x=f.value)==null||x.destroy(),p.value="defaultCursor")};function w(D){var x;D.preventDefault(),D.stopPropagation(),(x=f.value)==null||x.bind()}Je(()=>{if(E(),!n.selfHandle&&l.value){const D=l.value.parentElement;if(!D)return;D.addEventListener("wheel",y),document.addEventListener("keydown",_),document.addEventListener("keyup",k),D.addEventListener("touchstart",w)}});const b=D=>({noBind:!0,startScale:D,startX:s,startY:u,smoothScroll:!0,canvas:!0,...n.panzoomOption}),O=D=>{const{scale:x,dimsOut:I}=D.detail;if(I){o("update:scale",x),c.value=x;const X=(I.parent.left-I.elem.left)/x,W=(I.parent.top-I.elem.top)/x;a.value=X,o("zoomchange",D.detail),i.value=W}},E=()=>{if(l.value=document.querySelector(".canvasedit"),l.value){let D=n.scale;n.autoCenter&&(D=V()),f.value=fa(l.value,b(D)),l.value&&l.value.addEventListener("panzoomchange",O)}},V=()=>{const D=g.value*(1-n.paddingRatio)/n.canvasWidth,x=v.value*(1-n.paddingRatio)/n.canvasHeight,I=Math.min(D,x);return s=g.value/2-n.canvasWidth/2,I<1?u=(n.canvasHeight*I/2-n.canvasHeight/2)/I-(n.canvasHeight*I-v.value)/I/2:I>1?u=(n.canvasHeight*I-n.canvasHeight)/2/I+(v.value-n.canvasHeight*I)/I/2:u=0,I},S=()=>{var D;return(D=f.value)==null?void 0:D.reset()},H=()=>{var D;return(D=f.value)==null?void 0:D.zoomIn()},L=()=>{var D;return(D=f.value)==null?void 0:D.zoomOut()},J=()=>{var D;(D=f.value)==null||D.setOptions(b(n.scale))},P=()=>{d.value=!d.value,o("onCornerClick",d.value)},Se=D=>{o("update:lockLine",D)},ne=ie(()=>n.thick+"px");return le([()=>n.isShowReferLine],()=>{d.value=n.isShowReferLine}),le([()=>n.canvasWidth,()=>n.canvasHeight,()=>n.width,()=>n.height],()=>{E()}),le(()=>n.panzoomOption,()=>{J()},{deep:!0}),t({initPanzoom:E,panzoomInstance:f,reset:S,zoomIn:H,zoomOut:L,cursorClass:p}),(D,x)=>(T(),j("div",Ji,[_t(D.$slots,"btn",{reset:S,zoomIn:H,zoomOut:L}),U("div",{class:Ut(["canvasedit-parent",p.value]),style:ae(A.value)},[U("div",{class:Ut(["canvasedit",p.value])},[_t(D.$slots,"default")],2)],6),At(M(_o,{style:ae({marginLeft:D.thick+"px",width:g.value+"px"}),vertical:!1,width:D.width,height:D.thick,"is-show-refer-line":d.value,thick:D.thick,start:a.value,"start-other":i.value,lines:D.lines,"select-start":D.shadow.x,"snap-threshold":D.snapThreshold,"snaps-obj":D.snapsObj,"select-length":D.shadow.width,scale:c.value,palette:h.value,"canvas-width":D.canvasWidth,"show-shadow-text":D.showShadowText,"canvas-height":D.canvasHeight,rate:D.rate,"grid-ratio":D.gridRatio,"lock-line":D.lockLine,onChangeLineState:Se},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","snap-threshold","snaps-obj","select-length","scale","palette","canvas-width","show-shadow-text","canvas-height","rate","grid-ratio","lock-line"]),[[jt,D.showRuler]]),At(M(_o,{style:ae({marginTop:D.thick+"px",top:0,height:v.value+"px"}),vertical:!0,width:D.thick,height:D.height,"is-show-refer-line":d.value,thick:D.thick,start:i.value,"start-other":a.value,lines:D.lines,"select-start":D.shadow.y,"select-length":D.shadow.height,"snap-threshold":D.snapThreshold,"snaps-obj":D.snapsObj,scale:c.value,palette:h.value,"canvas-width":D.canvasWidth,"canvas-height":D.canvasHeight,"show-shadow-text":D.showShadowText,rate:D.rate,"grid-ratio":D.gridRatio,"lock-line":D.lockLine,onChangeLineState:Se},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","select-length","snap-threshold","snaps-obj","scale","palette","canvas-width","canvas-height","show-shadow-text","rate","grid-ratio","lock-line"]),[[jt,D.showRuler]]),At(U("a",{class:"corner",style:ae(m.value),onClick:P},null,4),[[jt,D.showRuler]])]))}});var G=(e=>(e.TableList="TableList",e.CrossDomainInput="CrossDomainInput",e.TableHeaderSetting="TableHeaderSetting",e.InputOrSelectData="InputOrSelectData",e.ElCascaderProps="ElCascaderProps",e.webViewContainer="webViewContainer",e.TabletdSelect="tabletdSelect",e.Td="td",e.Tr="tr",e.Table="table",e.ElSliderMarks="ElSliderMarks",e.ElRateColors="ElRateColors",e.ImageContainer="ImageContainer",e.TwoCodeContainer="TwoCodeContainer",e.BarCodeContainer="BarCodeContainer",e.tableContainer="tableContainer",e.RichTextContainer="RichTextContainer",e.RichTextContent="RichTextContent",e.lineContainer="lineContainer",e.uploadImg="uploadImg",e.textContainer="textContainer",e.ElCheckboxs="ElCheckboxs",e.ElRadios="ElRadios",e.ElSelectOption="ElSelectOption",e.ElRowAttrs="ElRowAttrs",e.ElAffix="ElAffix",e.ElAlert="ElAlert",e.ElAside="ElAside",e.ElAutoResizer="ElAutoResizer",e.ElAutocomplete="ElAutocomplete",e.ElAvatar="ElAvatar",e.ElBacktop="ElBacktop",e.ElBadge="ElBadge",e.ElBreadcrumb="ElBreadcrumb",e.ElBreadcrumbItem="ElBreadcrumbItem",e.ElButton="ElButton",e.ElButtonGroup="ElButtonGroup",e.ElCalendar="ElCalendar",e.ElCard="ElCard",e.ElCarousel="ElCarousel",e.ElCarouselItem="ElCarouselItem",e.ElCascader="ElCascader",e.ElCascaderPanel="ElCascaderPanel",e.ElCheckTag="ElCheckTag",e.ElCheckbox="ElCheckbox",e.ElCheckboxButton="ElCheckboxButton",e.ElCheckboxGroup="ElCheckboxGroup",e.ElCol="ElCol",e.ElCollapse="ElCollapse",e.ElCollapseItem="ElCollapseItem",e.ElCollapseTransition="ElCollapseTransition",e.ElCollection="ElCollection",e.ElCollectionItem="ElCollectionItem",e.ElColorPicker="ElColorPicker",e.ElConfigProvider="ElConfigProvider",e.ElContainer="ElContainer",e.ElCountdown="ElCountdown",e.ElDatePicker="ElDatePicker",e.ElDescriptions="ElDescriptions",e.ElDescriptionsItem="ElDescriptionsItem",e.ElDialog="ElDialog",e.ElDivider="ElDivider",e.ElDrawer="ElDrawer",e.ElDropdown="ElDropdown",e.ElDropdownItem="ElDropdownItem",e.ElDropdownMenu="ElDropdownMenu",e.ElEmpty="ElEmpty",e.ElFooter="ElFooter",e.ElForm="ElForm",e.ElFormItem="ElFormItem",e.ElHeader="ElHeader",e.ElIcon="ElIcon",e.ElImage="ElImage",e.ElImageViewer="ElImageViewer",e.ElInfiniteScroll="ElInfiniteScroll",e.ElInput="ElInput",e.ElInputNumber="ElInputNumber",e.ElLink="ElLink",e.ElLoading="ElLoading",e.ElLoadingDirective="ElLoadingDirective",e.ElLoadingService="ElLoadingService",e.ElMain="ElMain",e.ElMenu="ElMenu",e.ElMenuItem="ElMenuItem",e.ElMenuItemGroup="ElMenuItemGroup",e.ElMessage="ElMessage",e.ElMessageBox="ElMessageBox",e.ElNotification="ElNotification",e.ElOption="ElOption",e.ElOptionGroup="ElOptionGroup",e.ElOverlay="ElOverlay",e.ElPageHeader="ElPageHeader",e.ElPagination="ElPagination",e.ElPopconfirm="ElPopconfirm",e.ElPopover="ElPopover",e.ElPopoverDirective="ElPopoverDirective",e.ElPopper="ElPopper",e.ElPopperArrow="ElPopperArrow",e.ElPopperContent="ElPopperContent",e.ElPopperTrigger="ElPopperTrigger",e.ElProgress="ElProgress",e.ElRadio="ElRadio",e.ElRadioButton="ElRadioButton",e.ElRadioGroup="ElRadioGroup",e.ElRate="ElRate",e.ElResult="ElResult",e.ElRow="ElRow",e.ElScrollbar="ElScrollbar",e.ElSelect="ElSelect",e.ElSelectV2="ElSelectV2",e.ElSkeleton="ElSkeleton",e.ElSkeletonItem="ElSkeletonItem",e.ElSlider="ElSlider",e.ElSpace="ElSpace",e.ElStatistic="ElStatistic",e.ElStep="ElStep",e.ElSteps="ElSteps",e.ElSubMenu="ElSubMenu",e.ElSwitch="ElSwitch",e.ElTabPane="ElTabPane",e.ElTable="ElTable",e.ElTableColumn="ElTableColumn",e.ElTableV2="ElTableV2",e.ElTabs="ElTabs",e.ElTag="ElTag",e.ElText="ElText",e.ElTimePicker="ElTimePicker",e.ElTimeSelect="ElTimeSelect",e.ElTimeline="ElTimeline",e.ElTimelineItem="ElTimelineItem",e.ElTooltip="ElTooltip",e.ElTour="ElTour",e.ElTourStep="ElTourStep",e.ElTransfer="ElTransfer",e.ElTree="ElTree",e.ElTreeSelect="ElTreeSelect",e.ElTreeV2="ElTreeV2",e.ElUpload="ElUpload",e.ElWatermark="ElWatermark",e))(G||{}),oe=(e=>(e.FORMITEM="FORMITEM",e.COMPONENT="COMPONENT",e.LAYOUT="LAYOUT",e.STYLE="STYLE",e))(oe||{}),Er=(e=>(e.IMG="img",e.TEXT="text",e))(Er||{}),Ht=(e=>(e.Parameter="Parameter",e.API="API",e))(Ht||{});const Ki=e=>na.mock("@cname(".concat(e,")")).replace(/\s+/g,""),Qi=e=>na.mock("@name(11)").replace(/\s+/g,"");function xt(e){let t;if(window.screen.deviceXDPI)t=window.screen.deviceXDPI;else{const n=document.createElement("div");n.style.cssText="width:1in;height:0;visibility:hidden;position:absolute",document.body.appendChild(n),t=n.offsetWidth,document.body.removeChild(n)}const r=e/25.4;return Math.round(r*t)}const el=async e=>{var t;e.attrsJson&&((t=e.attrsJson)==null||t.forEach(r=>{ha(e,r)}))},or=async(e,t,r)=>{var n;e.attrsJson&&((n=e.attrsJson)==null||n.forEach(o=>{o.prop==t&&(o.defaultValue=r)}))},tl=e=>{var t;e.attrsJson&&((t=e.attrsJson)==null||t.forEach(r=>{r.prop=="label"?r.defaultValue=Ki(5):r.prop=="prop"&&(r.defaultValue=Qi())}))},gt=(e={w:80,h:20})=>[{label:"字段",type:oe.FORMITEM,prop:"prop",defaultValue:"",componentName:G.InputOrSelectData,attrs:{placeholder:"请输入"},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"宽",type:oe.STYLE,prop:"w",defaultValue:e.w,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"高",type:oe.STYLE,prop:"h",defaultValue:e.h,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"x轴",type:oe.STYLE,prop:"x",defaultValue:0,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"y轴",type:oe.STYLE,prop:"y",defaultValue:0,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],nl=(e,t)=>{for(const r in e){const n=e[r];t.forEach(o=>{o.prop==r&&(o.defaultValue=n)})}},ha=async(e,t)=>{t.type==oe.FORMITEM?t.prop=="prop"&&t.defaultValue!=null&&t.defaultValue!=null&&t.defaultValue!=""&&(e[t.prop]=t.defaultValue):t.type==oe.COMPONENT?t.defaultValue!==null&&t.defaultValue!==void 0&&t.defaultValue!==""&&ft(()=>{t.componentName==G.ElInputNumber?e.attrs[t.prop]=Number(t.defaultValue):e.attrs[t.prop]=t.defaultValue}):t.type==oe.STYLE&&t.defaultValue!==null&&t.defaultValue!==void 0&&t.defaultValue!==""&&ft(()=>{e.styles[t.prop]=t.defaultValue})},Oo=(e,t,r)=>{r.forEach((n,o)=>{n.prop=="defaultValue"?e.value[t]=n.defaultValue:n.prop=="rowColData"&&n.defaultValue.forEach(l=>{l.children.forEach(a=>{a.dataType&&a.key&&(e.value[t][a.key]=a.defaultValue?a.defaultValue:"")})})})},rl=e=>new Promise(function(t,r){const n=new FileReader;let o="";n.readAsDataURL(e),n.onload=function(){o=n.result},n.onerror=function(l){r(l)},n.onloadend=function(){t(o)}}),ol=e=>{const t={};function r(o){const l={};for(const[a,i]of Object.entries(o)){const s=a.split(".");let u=l;for(let c=0;c<s.length;c++){const d=s[c];u[d]||(u[d]=c===s.length-1?i:{}),u=u[d]}}return l}function n(o){var l;for(let a=0;a<o.length;a++){const i=o[a];if(i.prop){let s=(l=i.attrsJson)==null?void 0:l.find(u=>u.prop=="defaultValue");t[i.prop]=s!=null&&s.defaultValue?s==null?void 0:s.defaultValue:""}if(i.componentName==G.tableContainer)for(let s=0;s<i.attrs.rowColData.length;s++){const u=i.attrs.rowColData[s];if(u.children)for(let c=0;c<u.children.length;c++){const d=u.children[c];d.key&&(t[d.key]=d.defaultValue?d.defaultValue:"")}}i.children&&n(i.children)}}for(let o=0;o<e.length;o++){const l=e[o].renderList;n(l)}return r(t)},Sr=e=>{let t=e.replace(/^#/,"");if(t&&t.length===3&&(t=t.split("").map(l=>l+l).join("")),t.length!==6)throw new Error("Invalid hexadecimal color value. It must be 6 characters long or 3 characters long for shorthand.");const r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return[r,n,o]},pt=(e,t)=>{var r;return t.includes(".")?(t.split(".").forEach(n=>{var o;return e=(o=e[n])!=null?o:"--"}),e):(r=e[t])!=null?r:"--"},al=(e,t)=>'\n                \n  <!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\n<title>Document</title>\n</head>\n\n<style>\ntable {\n  border-collapse: collapse; /* 边框合并 */\n  width: 100%;\n}\n \n\n \n/* 设置表头和单元格样式 */\nth,\ntd {\n  border: 1px solid black; /* 设置边框 */\n  padding: 8px; /* 内边距 */\n  text-align: center; /* 文本居中对齐 */\n}\n\n *{\n    margin: 0;\n    outline: none;\n    box-sizing: border-box;\n  }\n  \n  #app,html,body {\n    \n    font-size: 12px;\n    height: 100%;\n  }\n    \n\n@media print {\n  @page {\n    size: '.concat(t.width,"mm ").concat(t.height,"mm;\n    padding-top:").concat(t.marginTop?t.marginTop:0,"mm;\n    padding-right: ").concat(t.marginRight?t.marginRight:0,"mm;\n    padding-bottom: ").concat(t.marginBottom?t.marginBottom:0,"mm;\n    padding-left: ").concat(t.marginLeft?t.marginLeft:0,"mm;\n  }\n\n\n}\n.vdr-container {\nposition: absolute;\nborder: 1px solid transparent;\nbox-sizing: border-box;\n}\n.vdr-container.active {\nborder-color: #000;\nborder-style: dashed;\n}\n.vdr-container.dragging {\nborder-color: #000;\nborder-style: solid;\n}\n.vdr-handle {\nbox-sizing: border-box;\nposition: absolute;\nwidth: 7px;\nheight: 7px;\nbackground: #f0f0f0;\nborder: 1px solid #333;\n}\n.vdr-handle-tl {\ntop: -4px;\nleft: -4px;\ncursor: nw-resize;\n}\n.vdr-handle-tm {\ntop: -4px;\nleft: 50%;\nmargin-left: -3px;\ncursor: n-resize;\n}\n.vdr-handle-tr {\ntop: -4px;\nright: -4px;\ncursor: ne-resize;\n}\n.vdr-handle-ml {\ntop: 50%;\nmargin-top: -3px;\nleft: -4px;\ncursor: w-resize;\n}\n.vdr-handle-mr {\ntop: 50%;\nmargin-top: -3px;\nright: -4px;\ncursor: e-resize;\n}\n.vdr-handle-bl {\nbottom: -4px;\nleft: -4px;\ncursor: sw-resize;\n}\n.vdr-handle-bm {\nbottom: -4px;\nleft: 50%;\nmargin-left: -4px;\ncursor: s-resize;\n}\n.vdr-handle-br {\nbottom: -4px;\nright: -4px;\ncursor: se-resize;\n}\n.printContentRef{\n\n   position: relative;\n}\n   .easy-print-paper{\n   }\n</style>\n<body>\n").concat(e,"\n</body>\n</html>\n  "),dn=e=>({...e,height:e.h+"px",width:e.w+"px"}),il=[...gt({w:200,h:60}),{type:oe.COMPONENT,label:"条形码格式",prop:"format",defaultValue:null,componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"编码内容",prop:"defaultValue",defaultValue:"123456789",componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"线颜色",prop:"lineColor",defaultValue:"#000",componentName:G.ElColorPicker,attrs:{},zIndex:0},{label:"是否显示值",prop:"displayValue",type:oe.COMPONENT,defaultValue:!0,componentName:G.ElSwitch,attrs:{},zIndex:0},{label:"条形码宽度",type:oe.COMPONENT,prop:"width",defaultValue:2,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"条形码高度",type:oe.COMPONENT,prop:"height",defaultValue:30,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"外边距",type:oe.COMPONENT,prop:"margin",defaultValue:10,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0},{label:"字体大小",type:oe.COMPONENT,prop:"fontSize",defaultValue:12,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],ll=Object.freeze(Object.defineProperty({__proto__:null,BarCodeContainer:il},Symbol.toStringTag,{value:"Module"})),sl=[...gt({w:80,h:80}),{type:oe.COMPONENT,label:"图片",prop:"defaultValue",defaultValue:"https://qz.io/assets/im g/clients/pakaneo.63268af2.webp",componentName:G.uploadImg,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"网络地址",prop:"defaultValue",defaultValue:"https://qz.io/assets/img/clients/pakaneo.63268af2.webp",componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],ul=Object.freeze(Object.defineProperty({__proto__:null,ImageContainer:sl},Symbol.toStringTag,{value:"Module"})),cl=[...gt({w:600,h:900}),{type:oe.COMPONENT,label:"富文本内容",prop:"defaultValue",defaultValue:"请输入内容",componentName:G.RichTextContent,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],dl=Object.freeze(Object.defineProperty({__proto__:null,RichTextContainer:cl},Symbol.toStringTag,{value:"Module"})),fl=[...gt({w:80,h:80}),{type:oe.COMPONENT,label:"尺寸大小",prop:"size",defaultValue:100,componentName:G.ElInputNumber,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"icon",prop:"logoSrc",defaultValue:null,componentName:G.uploadImg,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"icon网络地址",prop:"logoSrc",defaultValue:null,componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:" change"}],zIndex:0},{type:oe.COMPONENT,label:"编码内容",prop:"defaultValue",defaultValue:"https://qz.io/assets/img/clients/pakaneo.63268af2.webp",componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.COMPONENT,label:"背景色",prop:"backgroundColor",defaultValue:"#FFF",componentName:G.ElColorPicker,attrs:{},zIndex:0},{type:oe.COMPONENT,label:"容错级别 0-3",prop:"correctLevel",defaultValue:1,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",min:0,max:3},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],hl=Object.freeze(Object.defineProperty({__proto__:null,TwoCodeContainer:fl},Symbol.toStringTag,{value:"Module"})),pl=[...gt(),{type:oe.STYLE,label:"颜色",prop:"background",defaultValue:"#000",componentName:G.ElColorPicker,attrs:{},zIndex:0}],gl=Object.freeze(Object.defineProperty({__proto__:null,lineContainer:pl},Symbol.toStringTag,{value:"Module"})),vl=[...gt({w:500,h:300}).filter(e=>e.prop!="prop"),{type:oe.COMPONENT,label:"单元格数据",prop:"rowColData",defaultValue:[],componentName:G.TabletdSelect,attrs:{placeholder:"请输入",rows:"2",readonly:!0,type:"textarea"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],ml=Object.freeze(Object.defineProperty({__proto__:null,tableContainer:vl},Symbol.toStringTag,{value:"Module"})),yl=[...gt({w:500,h:300}),{type:oe.COMPONENT,label:"表格数据",prop:"columns",defaultValue:[],componentName:G.TableHeaderSetting,attrs:{},rules:[{required:!0,message:"",trigger:"change"}]}],bl=Object.freeze(Object.defineProperty({__proto__:null,tableListContainer:yl},Symbol.toStringTag,{value:"Module"})),_l=[...gt(),{type:oe.COMPONENT,label:"默认值",prop:"defaultValue",defaultValue:"请输入文字",componentName:G.ElInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0},{type:oe.STYLE,label:"文本颜色",prop:"color",defaultValue:"#000",componentName:G.ElColorPicker,attrs:{},zIndex:0},{label:"对齐方式",prop:"textAlign",type:oe.STYLE,defaultValue:"left",componentName:G.ElSelect,attrs:{placeholder:"请选择类型",clearable:!0},rules:[{required:!0,message:"类型不能为空",trigger:"change"}],children:[{componentName:G.ElOption,value:"center",label:"居中"},{componentName:G.ElOption,value:"left",label:"左对齐"},{componentName:G.ElOption,value:"right",label:"右对齐"}],zIndex:0},{label:"字体类型",prop:"fontFamily",type:oe.STYLE,defaultValue:"雅黑",componentName:G.ElSelect,attrs:{placeholder:"请选择类型",clearable:!0},rules:[{required:!0,message:"类型不能为空",trigger:"change"}],children:[{componentName:G.ElOption,value:"宋体",label:"宋体"},{componentName:G.ElOption,label:"雅黑",value:"雅黑"},{componentName:G.ElOption,label:"Arial",value:"Arial"}],zIndex:0},{label:"字体大小",type:oe.STYLE,prop:"fontSize",defaultValue:12,componentName:G.ElInputNumber,attrs:{placeholder:"请输入",controlsPosition:"right",min:0},rules:[{required:!0,message:"不能为空",trigger:"change"}],zIndex:0}],wl=Object.freeze(Object.defineProperty({__proto__:null,textContainer:_l},Symbol.toStringTag,{value:"Module"})),El=[...gt({w:600,h:900}),{type:oe.COMPONENT,label:"网址(不能跨域，跨域就报错了)",prop:"defaultValue",defaultValue:"https://www.baidu.com/",componentName:G.CrossDomainInput,attrs:{placeholder:"请输入"},rules:[{required:!1,message:"",trigger:"change"}],zIndex:0}],Sl=Object.freeze(Object.defineProperty({__proto__:null,webViewContainer:El},Symbol.toStringTag,{value:"Module"})),xo=Object.assign({"./lib/BarCodeContainer.ts":ll,"./lib/ImageContainer.ts":ul,"./lib/RichTextContainer.ts":dl,"./lib/TwoCodeContainer.ts":hl,"./lib/lineContainer.ts":gl,"./lib/tableContainer.ts":ml,"./lib/tableListContainer.ts":bl,"./lib/textContainer.ts":wl,"./lib/webViewContainer.ts":Sl});let pa={};Object.keys(xo).forEach(e=>{const t=xo[e]||{};Object.assign(pa,t)});const ct={...pa},ar=[{width:297,height:420,title:"A3"},{width:210,height:297,title:"A4"},{width:148,height:210,title:"A5"},{width:353,height:500,title:"B3"},{width:250,height:353,title:"B4"},{width:176,height:250,title:"B5"},{type:"custom",title:"设置"}],Ol={componentName:G.RichTextContainer,title:"富文本",prop:"",attrs:{},active:!1,attrsJson:ct.RichTextContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},xl={componentName:G.webViewContainer,title:"网页",prop:"",attrs:{},active:!1,attrsJson:ct.webViewContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},kl=[{componentName:G.lineContainer,attrsJson:ct.lineContainer,title:"线段",prop:"",attrs:{},type:oe.COMPONENT,styles:{resizable:!0,x:0,y:0,draggable:!0},active:!1,zIndex:0},xl,Ol,{componentName:G.textContainer,attrsJson:ct.textContainer,title:"文本",prop:"",attrs:{},type:oe.COMPONENT,active:!1,styles:{resizable:!0,active:!0,x:0,y:0,draggable:!0},zIndex:0},{componentName:G.TwoCodeContainer,attrsJson:ct.TwoCodeContainer,title:"二维码",attrs:{},prop:"",active:!1,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},{title:"条形码",prop:"",componentName:G.BarCodeContainer,attrsJson:ct.BarCodeContainer,attrs:{},active:!1,styles:{x:0,y:0,resizable:!1,draggable:!0},zIndex:0},{componentName:G.ImageContainer,title:"图片",prop:"",active:!1,attrs:{},attrsJson:ct.ImageContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0},{componentName:G.TableList,title:"列表",prop:"",active:!1,attrs:{},attrsJson:ct.tableListContainer,styles:{x:0,y:0,resizable:!0,draggable:!0},zIndex:0}],ko={componentName:G.tableContainer,title:"表格",prop:"",attrs:{},active:!1,attrsJson:ct.tableContainer,styles:{x:0,y:0,resizable:!0,draggable:!0}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Cl(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}const Al=typeof window<"u",Pl=e=>typeof e=="string",ir=()=>{};function Dl(e,t){function r(...n){e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return r}const Il=e=>e();function Tl(e,t,r={}){const{eventFilter:n=Il}=r,o=Cl(r,["eventFilter"]);return le(e,Dl(n,t),o)}function Rl(e,t=!0){ia()?Je(e):t?e():ft(e)}function ga(e){ia()&&la(e)}const tt=Al?window:void 0;function Ml(e){var t,r;const n=z(e);return(r=(t=n)===null||t===void 0?void 0:t.$el)!==null&&r!==void 0?r:n}function Ll(...e){let t,r,n,o;if(Pl(e[0])?([r,n,o]=e,t=tt):[t,r,n,o]=e,!t)return ir;let l=ir;const a=le(()=>z(t),s=>{l(),s&&(s.addEventListener(r,n,o),l=()=>{s.removeEventListener(r,n,o),l=ir})},{immediate:!0,flush:"post"}),i=()=>{a(),l()};return ga(i),i}function $l(e,t={}){const{window:r=tt}=t;if(!r)return C(!1);const n=r.matchMedia(e),o=C(n.matches),l=a=>{o.value=a.matches};return"addEventListener"in n?n.addEventListener("change",l):n.addListener(l),ga(()=>{"removeEventListener"in n?n.removeEventListener("change",l):n.removeListener(l)}),o}function $n(e,t,{window:r=tt}={}){const n=C(""),o=ie(()=>{var l;return Ml(t)||((l=r==null?void 0:r.document)===null||l===void 0?void 0:l.documentElement)});return le(o,l=>{l&&r&&(n.value=r.getComputedStyle(l).getPropertyValue(e))},{immediate:!0}),le(n,l=>{var a;!((a=o.value)===null||a===void 0)&&a.style&&o.value.style.setProperty(e,l)}),n}const Bl={boolean:{read:e=>e!=null?e==="true":null,write:e=>String(e)},object:{read:e=>e?JSON.parse(e):null,write:e=>JSON.stringify(e)},number:{read:e=>e!=null?Number.parseFloat(e):null,write:e=>String(e)},any:{read:e=>e!=null?e:null,write:e=>String(e)},string:{read:e=>e!=null?e:null,write:e=>String(e)}};function Nl(e,t,r=tt==null?void 0:tt.localStorage,n={}){var o;const{flush:l="pre",deep:a=!0,listenToStorageChanges:i=!0,window:s=tt,eventFilter:u}=n,c=C(t),f=(o=n.serializer)!==null&&o!==void 0?o:Bl["string"];function p(h){if(r&&!(h&&h.key!==e))try{const m=h?h.newValue:r.getItem(e);m==null?(c.value=t,r.setItem(e,f.write(t))):c.value=f.read(m)}catch(m){console.warn(m)}}return p(),s&&i&&Ll(s,"storage",p),Tl(c,()=>{if(r)try{c.value==null?r.removeItem(e):r.setItem(e,f.write(c.value))}catch(h){console.warn(h)}},{flush:l,deep:a,eventFilter:u}),c}function Vl(e){return $l("(prefers-color-scheme: dark)",e)}function zl(e={}){const{selector:t="html",attribute:r="class",valueDark:n="dark",valueLight:o="",window:l=tt,storage:a=tt==null?void 0:tt.localStorage,storageKey:i="vueuse-color-scheme",listenToStorageChanges:s=!0}=e,u=Vl({window:l}),c=i==null?C("auto"):Nl(i,"auto",a,{window:l,listenToStorageChanges:s}),d=ie({get(){return c.value==="auto"?u.value:c.value==="dark"},set(p){p===u.value?c.value="auto":c.value=p?"dark":"light"}}),f=e.onChanged||(p=>{const h=l==null?void 0:l.document.querySelector(t);r==="class"?(h==null||h.classList.toggle(n,p),o&&(h==null||h.classList.toggle(o,!p))):h==null||h.setAttribute(r,p?n:o)});return le(d,f,{flush:"post"}),Rl(()=>f(d.value)),d}var Co;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Co||(Co={}));const ge=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},jl={t:"1724918368981",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4319"},Hl=["fill"],Ul=fe({__name:"settingIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",jl,[U("path",{d:"M85.333333 768h298.666667v85.333333H85.333333v-85.333333z m0-298.666667h384v85.333334H85.333333v-85.333334z m0-298.666666h853.333334v85.333333H85.333333V170.666667z m796.757334 385.066666l49.322666-16.682666 42.666667 73.898666-39.082667 34.346667a171.392 171.392 0 0 1 0 70.741333l39.082667 34.346667-42.666667 73.898667-49.322666-16.682667c-17.493333 15.786667-38.314667 27.946667-61.226667 35.413333L810.666667 896h-85.333334l-10.24-51.029333a170.496 170.496 0 0 1-61.184-35.413334l-49.322666 16.725334-42.666667-73.898667 39.082667-34.346667a171.392 171.392 0 0 1 0-70.741333l-39.082667-34.346667 42.666667-73.898666 49.322666 16.682666c17.493333-15.786667 38.314667-27.946667 61.226667-35.413333L725.333333 469.333333h85.333334l10.24 51.029334c22.869333 7.424 43.690667 19.626667 61.184 35.413333v-0.042667zM768 725.333333a42.666667 42.666667 0 1 0 0-85.333333 42.666667 42.666667 0 0 0 0 85.333333z","p-id":"4320",fill:e.fill},null,8,Hl)]))}}),va=ge(Ul,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/settingIcon.vue"]]),Fl={t:"1724918949032",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6150"},Gl=["fill"],Xl=fe({__name:"RightIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",Fl,[U("path",{d:"M678.4 499.2L312.832 119.296c-13.824-13.824-13.824-36.352 0-50.176 13.824-13.824 35.84-13.824 49.664 0l400.896 404.992c13.824 13.824 13.824 36.352 0 50.176l-400.896 404.992c-13.824 13.824-35.84 13.824-49.664 0-13.824-13.824-13.824-36.352 0-50.176l365.568-379.904z",fill:e.fill,"p-id":"6151"},null,8,Gl)]))}}),ql=ge(Xl,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/RightIcon.vue"]]),Wl={t:"1724919140255",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7270"},Yl=["fill"],Jl=fe({__name:"downIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",Wl,[U("path",{d:"M904 332c0-8.189-3.124-16.379-9.372-22.628-12.497-12.496-32.759-12.496-45.256 0L512 646.745 174.628 309.372c-12.497-12.496-32.758-12.496-45.255 0-12.497 12.498-12.497 32.758 0 45.256l360 360c12.497 12.496 32.758 12.496 45.255 0l360-360C900.876 348.379 904 340.189 904 332z",fill:e.fill,"p-id":"7271"},null,8,Yl)]))}}),ma=ge(Jl,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/downIcon.vue"]]),Zl={t:"1724979512335",class:"icon",viewBox:"0 0 1027 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5409"},Kl=["fill"],Ql=fe({__name:"paperSizeIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",Zl,[U("path",{d:"M979.968 0v44.032H269.312V0h-47.104v135.168h47.104V91.136h710.656v44.032h47.104V0zM91.136 262.144H135.168V215.04H0v47.104h44.032v714.752H0v47.104H135.168v-47.104H91.136zM871.424 215.04H222.208v808.96h804.864V391.168L871.424 215.04z m-8.192 634.88H387.072v-47.104h476.16V849.92z m0-143.36H387.072v-47.104h476.16V706.56z m0-143.36H387.072v-47.104h476.16V563.2z","p-id":"5410",fill:e.fill},null,8,Kl)]))}}),es=ge(Ql,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/paperSizeIcon.vue"]]),ts={t:"1728700369302",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6985"},ns=["fill"],rs=fe({__name:"dataSourceIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",ts,[r[0]||(r[0]=U("path",{d:"M883.5 96.2H140c-6.6 0-12 5.4-12 12V916c0 6.6 5.4 12 12 12h743.5c6.6 0 12-5.4 12-12l0.1-807.8c-0.1-6.6-5.5-12-12.1-12z m-685.5 64h627.5c3.3 0 6 2.7 6 6v116c0 3.3-2.7 6-6 6H198c-3.3 0-6-2.7-6-6v-116c0-3.3 2.7-6 6-6zM825.4 864H198c-3.3 0-6-2.7-6-6V742c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6v116c-0.1 3.4-2.7 6-6.1 6z m0-192H198c-3.3 0-6-2.7-6-6V551.4c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6V666c-0.1 3.4-2.7 6-6.1 6zM192 474V359.4c0-3.3 2.7-6 6-6h627.5c3.3 0 6 2.7 6 6V474c0 3.3-2.7 6-6 6H198c-3.4 0-6-2.6-6-6z",fill:"#040000","p-id":"6986"},null,-1)),r[1]||(r[1]=U("path",{d:"M265.437891 246.56086a32 32 0 1 0 45.299044-45.210581 32 32 0 1 0-45.299044 45.210581Z",fill:"#040000","p-id":"6987"},null,-1)),r[2]||(r[2]=U("path",{d:"M265.436844 438.556329a32 32 0 1 0 45.299044-45.210581 32 32 0 1 0-45.299044 45.210581Z",fill:"#040000","p-id":"6988"},null,-1)),r[3]||(r[3]=U("path",{d:"M265.493962 630.627162a32 32 0 1 0 45.209791-45.299833 32 32 0 1 0-45.209791 45.299833Z",fill:"#040000","p-id":"6989"},null,-1)),U("path",{d:"M265.430553 822.654293a32 32 0 1 0 45.20979-45.299833 32 32 0 1 0-45.20979 45.299833Z",fill:e.fill,"p-id":"6990"},null,8,ns)]))}}),os=ge(rs,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/dataSourceIcon.vue"]]),as={t:"1729491969344",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7878"},is=["fill"],ls=fe({__name:"settingPrintIcon",props:{fill:{type:String,required:!0}},setup(e){return ve({}),(t,r)=>(T(),j("svg",as,[U("path",{d:"M256 755.2l55.466667-17.066667 17.066666 12.8c21.333333 12.8 38.4 25.6 64 38.4l21.333334 8.533334 8.533333 55.466666h145.066667l12.8-55.466666 21.333333-8.533334c21.333333-8.533333 42.666667-21.333333 64-38.4l17.066667-12.8 55.466666 17.066667 72.533334-128-42.666667-38.4 4.266667-21.333333c0-12.8 4.266667-25.6 4.266666-38.4s0-25.6-4.266666-38.4l-4.266667-17.066667 42.666667-38.4-72.533334-128-55.466666 21.333333-17.066667-12.8c-21.333333-12.8-38.4-25.6-64-38.4l-21.333333-8.533333-12.8-55.466667H422.4l-12.8 55.466667-21.333333 8.533333c-21.333333 8.533333-42.666667 21.333333-59.733334 34.133334l-21.333333 17.066666L256 311.466667l-72.533333 128 42.666666 38.4-4.266666 21.333333c0 12.8-4.266667 25.6-4.266667 38.4s0 25.6 4.266667 38.4l4.266666 21.333333-42.666666 38.4L256 755.2z m-76.8-179.2c0-12.8-4.266667-25.6-4.266667-42.666667s0-29.866667 4.266667-42.666666L128 443.733333l106.666667-183.466666 64 21.333333c21.333333-17.066667 46.933333-29.866667 72.533333-42.666667L388.266667 170.666667h213.333333l17.066667 68.266666c25.6 12.8 51.2 25.6 72.533333 42.666667l64-21.333333 106.666667 183.466666-51.2 46.933334c0 12.8 4.266667 25.6 4.266666 42.666666s0 29.866667-4.266666 42.666667l51.2 46.933333-106.666667 183.466667-64-21.333333c-21.333333 17.066667-46.933333 29.866667-72.533333 42.666666l-17.066667 68.266667h-213.333333l-17.066667-68.266667c-25.6-12.8-51.2-25.6-72.533333-42.666666l-64 21.333333L128 622.933333l51.2-46.933333z m315.733333 64c59.733333 0 106.666667-46.933333 106.666667-106.666667S554.666667 426.666667 494.933333 426.666667s-106.666667 46.933333-106.666666 106.666666 46.933333 106.666667 106.666666 106.666667z m0 42.666667c-81.066667 0-149.333333-68.266667-149.333333-149.333334S413.866667 384 494.933333 384s149.333333 68.266667 149.333334 149.333333-68.266667 149.333333-149.333334 149.333334z",fill:e.fill,"p-id":"7879"},null,8,is)]))}}),ss=ge(ls,[["__file","D:/work/public/easy-print/src/packages/easy-print/icon/settingPrintIcon.vue"]]),Ne=ra({id:"useEasyPrintStore",state:()=>({scale:1,offset:{x:0,y:0},scaleX:()=>{},activeTd:"",richTextContent:null,scaleY:()=>{},currentSelected:[],controlLeft:!1,down:!1,dataSource:[],webViewLoadingTime:4e3,dataSourceType:Ht.Parameter,renderType:""}),getters:{getWebViewLoadingTime:e=>e.webViewLoadingTime,getRichTextContent:e=>e.richTextContent,getScale:e=>e.scale,getOffset:e=>e.offset,getScaleX:e=>e.scaleX,getScaleY:e=>e.scaleY,getCurrentSelected:e=>e.currentSelected,getControlLeft:e=>e.controlLeft,getDown:e=>e.down,getActiveTd:e=>e.activeTd,getDataCource:e=>e.dataSource,getRenderType:e=>e.renderType,getDataSourceType:e=>e.dataSourceType},actions:{setWebViewLoadingTime(e){this.webViewLoadingTime=e},setRichTextContent(e){this.richTextContent=e},setScale(e){this.scale=e},setOffset(e){this.offset=e},setScaleX(e){this.scaleX=e},setScaleY(e){this.scaleY=e},setCurrentSelected(e){this.currentSelected=e},setControlLeft(e){this.controlLeft=e},setDown(e){this.down=e},setActiveTd(e){this.activeTd=e},setDataCource(e){this.dataSource=e},setRenderType(e){this.renderType=e},setDataSourceType(e){this.dataSourceType=e}}}),qt=ra({id:"useRenderListStoreStore",state:()=>({renderList:[],activeData:void 0,targetChart:{hoverId:void 0,selectId:[]},pageData:[],page:1,pageOption:{height:"",width:""},printOption:{}}),getters:{getPageData:e=>e.pageData,getPrintOption:e=>e.printOption,getPageOption:e=>e.pageOption,getRenderList:e=>e.renderList,getActiveData:e=>e.activeData,getPage:e=>e.page},actions:{removePageData(){this.pageData.pop()},updatePageDataItem(e,t){let r=e.pageIndex;this.pageData[r].renderList=this.pageData[r].renderList.filter(n=>n.id!=e.id),e.pageIndex=t,this.pageData[t].renderList.push(e)},setPageDataItem(e,t){e.pageIndex=t,e.styles.zIndex=this.pageData[t].renderList.length,this.pageData[t].renderList.push(e),this.setActiveData(e)},addPageData(e){this.pageData.push(e)},setPageData(e){this.pageData=e},setPrintOption(e){this.printOption=e},setPage(e){this.page=e},setPageOption(e){this.pageOption=e},setActiveData(e){this.activeData=e,this.activeData},setUpdataActiveStyles(e,t,r){this.renderList.forEach(n=>{n.id==r&&(n.styles[e]=t)})},allDraggable(e){this.pageData.forEach(t=>{t.renderList.forEach(r=>{r.styles.draggable=e,r.styles.active=!1})})},setActiveDraggable(e){this.pageData.forEach(t=>{t.renderList.forEach(r=>{var n;((n=this.activeData)==null?void 0:n.id)==r.id&&(r.styles.draggable=e)})})},deleteActiveData(){this.pageData.forEach((e,t)=>{console.log("this.activeData :>> ",this.activeData),this.activeData&&this.activeData.pageIndex==t&&(e.renderList=e.renderList.filter(r=>{var n;return r.id!=((n=this.activeData)==null?void 0:n.id)}),console.log("renderListItem :>> ",e),this.activeData=void 0)})},setItemZIndexTop(){if(this.activeData){let e=0;this.pageData.forEach((t,r)=>{t.renderList.forEach(n=>{r=Math.max(r,n.zIndex)})}),this.activeData.zIndex=e+1}},setItemZIndexBottom(){if(this.activeData){let e=0;this.pageData.forEach((t,r)=>{t.renderList.forEach(n=>{r=Math.min(r,n.zIndex)})}),this.activeData.zIndex=e-1}}}}),us=e=>{let t={x:0,y:0};e.offset&&(t=e.offset);let r=null;typeof e.container=="string"?r=document.querySelector(e.container):r=e.container,(()=>{let o=!1,l=null,a=null,i=null,s=null,u=null;const c=ie(()=>{var g;return(g=f.getActiveData)==null?void 0:g.styles.active}),d=Ne(),f=qt();function p(g){d.getControlLeft&&(o=!0,l=g.clientX-t.x,a=g.clientY-t.y,i=g.clientX-t.x,s=g.clientY-t.y,u=document.createElement("div"),u.className="selection",r.appendChild(u),h())}function h(){document.querySelectorAll(".targetSelecto").forEach(v=>{const y=v.getBoundingClientRect(),_=y.right>=Math.min(l,i)&&y.left<=Math.max(l,i)&&y.bottom>=Math.min(a,s)&&y.top<=Math.max(a,s);v.classList.toggle("selected",_)})}function m(g){if(!d.getControlLeft&&c.value||!o)return;i=g.clientX-t.x,s=g.clientY-t.y;const v=$n("--el-color-primary"),y=u;y.style.zIndex="9999",y.style.position="absolute",y.style.border="2px dashed rgba(".concat(Sr(v.value).join(",")," ,1)"),y.style.background="rgba(".concat(Sr(v.value).join(",")," , 0.3)"),y.style.left="".concat(Math.min(l,i),"px"),y.style.top="".concat(Math.min(a,s),"px"),y.style.width="".concat(Math.abs(i-l),"px"),y.style.height="".concat(Math.abs(s-a),"px"),h()}function A(){if(o=!1,u){r.removeChild(u),u=null;const g=document.querySelectorAll(".selected");e.select(g)}}r.addEventListener("mousedown",p),r.addEventListener("mousemove",m),document.addEventListener("mouseup",A)})()},cs=fe({__name:"CustomComponent",props:{type:{type:String,default:""},element:{type:Object,required:!0},model:{type:Object,required:!0}},setup(e){return ve({}),C(""),(t,r)=>(T(),j("div",null,[(T(),se(Ln(e.element.componentName),{element:e.element,model:e.model},null,8,["element","model"]))]))}}),ya=ge(cs,[["__file","D:/work/public/easy-print/src/packages/easy-print/CustomComponent.vue"]]),ds={class:"tableData"},fs={key:0},hs=["onMouseenter","onClick"],ps=6,gs=18,vs=fe({__name:"tableData",props:{},emits:["handleTables"],setup(e,{emit:t}){const r=t;ve({});const n=C(""),o=C(""),l=(c,d)=>{n.value=c,o.value=d},a=(c,d)=>{r("handleTables",c,d),u()},i=C(!1),s=()=>{i.value=!0},u=()=>{i.value=!1,n.value="",o.value=""};return(c,d)=>(T(),j("div",ds,[U("div",{onMouseenter:s,onMouseleave:u},[_t(c.$slots,"default",{},void 0,!0)],32),i.value?(T(),j("div",{key:0,class:"popoverBox",onMouseenter:s,onMouseleave:u},[n.value&&o.value?(T(),j("div",fs," 行 "+De(n.value)+"- 列"+De(o.value),1)):Ae("",!0),(T(),j(be,null,xe(ps,f=>U("div",{class:"popoverItemBox",key:f},[(T(),j(be,null,xe(gs,p=>U("div",{key:p,onMouseenter:h=>l(f,p),class:Ut(["popoverItem",[n.value>=f&&o.value>=p?"selectedTable":""]]),onClick:h=>a(f,p)},null,42,hs)),64))])),64))],32)):Ae("",!0)]))}}),ms=ge(vs,[["__scopeId","data-v-3e314043"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/table/tableData.vue"]]),ys={class:"attr-title el-button--primary"},bs=fe({__name:"attrsContainer",props:{title:{type:String,default:""}},emits:["handleisunfold","handleDraggable"],setup(e,{emit:t}){const r=t;ve({});const n=C(!0),o=a=>{r("handleDraggable",a)};C("");const l=()=>{n.value=!n.value};return(a,i)=>(T(),j("div",null,[U("div",{class:"attr-container",onMouseenter:i[0]||(i[0]=s=>o(!0))},[M(z(va),{fill:"#FFF",style:{width:"20px"}}),U("div",ys,De(e.title),1),n.value?Ae("",!0):(T(),se(z(ql),{key:0,onClick:l,fill:"#FFF",style:{width:"15px",cursor:"pointer"}})),n.value?(T(),se(z(ma),{key:1,onClick:l,fill:"#FFF",style:{width:"15px",cursor:"pointer"}})):Ae("",!0)],32),U("div",{class:"attr-content",onMouseenter:i[1]||(i[1]=s=>o(!1)),style:ae({height:n.value?"auto":"0"})},[_t(a.$slots,"default",{},void 0,!0)],36)]))}}),Ao=ge(bs,[["__scopeId","data-v-c0c9b7d3"],["__file","D:/work/public/easy-print/src/packages/easy-print/attrsContainer.vue"]]),_s={class:"content__wrap"},ws=fe({__name:"index",props:{title:{type:String,default:""},showFullscreen:{type:Boolean,default:!1},width:{type:[String,Number],default:"850px"}},setup(e){ve({});const t=C(null),r=C(!1);return(n,o)=>{const l=q("el-scrollbar"),a=q("el-dialog");return T(),se(a,Ct({ref_key:"dialogRef",ref:t},n.$attrs,{fullscreen:r.value,"destroy-on-close":"","append-to-body":!0,"lock-scroll":!1,"close-on-click-modal":!1,width:e.width,top:"10vh"}),Ei({header:R(()=>[_t(n.$slots,"title",{},()=>[ue(De(e.title),1)],!0)]),default:R(()=>[M(l,{class:Ut(r.value&&n.$slots.footer?"com-dialog__content--footer":r.value&&!n.$slots.footer?"com-dialog__content--fullscreen":"com-dialog__content")},{default:R(()=>[U("div",_s,[_t(n.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])]),_:2},[n.$slots.footer?{name:"footer",fn:R(()=>[_t(n.$slots,"footer",{},void 0,!0)]),key:"0"}:void 0]),1040,["fullscreen","width"])}}}),Wt=ge(ws,[["__scopeId","data-v-091b437b"],["__file","D:/work/public/easy-print/src/packages/easy-print/Dialog/index.vue"]]);function Es(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ss(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Os={exports:{}};const xs=new Proxy({},{get(e,t){throw new Error('Module "" has been externalized for browser compatibility. Cannot access ".'.concat(t,'" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.'))}}),ks=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"})),Cs=Ss(ks);(function(e,t){/**
 * @version 2.2.4
 * @overview QZ Tray Connector
 * @license LGPL-2.1-only
 * <p/>
 * Connects a web client to the QZ Tray software.
 * Enables printing and device communication from javascript.
 */var r=function(){Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),Number.isInteger||(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a});var n={VERSION:"2.2.4",DEBUG:!1,log:{trace:function(){n.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){n.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,shutdown:!1,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(a,i,s){if(n.websocket.shutdown){s(new Error("Connection attempt cancelled by user"));return}if(a.port.secure.length)!a.port.insecure.length&&!a.usingSecure&&(n.log.trace("No insecure ports specified - forcing secure connection"),a.usingSecure=!0);else if(a.port.insecure.length)a.usingSecure&&(n.log.error("No secure ports specified - forcing insecure connection"),a.usingSecure=!1);else{s(new Error("No ports have been specified to connect over"));return}var u=function(){if(n.websocket.shutdown){s(new Error("Connection attempt cancelled by user"));return}if(a.port.portIndex++,a.usingSecure&&a.port.portIndex>=a.port.secure.length||!a.usingSecure&&a.port.portIndex>=a.port.insecure.length)if(a.hostIndex>=a.host.length-1){s(new Error("Unable to establish connection with QZ"));return}else a.hostIndex++,a.port.portIndex=0;n.websocket.setup.findConnection(a,i,s)},c;a.usingSecure?c=a.protocol.secure+a.host[a.hostIndex]+":"+a.port.secure[a.port.portIndex]:c=a.protocol.insecure+a.host[a.hostIndex]+":"+a.port.insecure[a.port.portIndex];try{n.log.trace("Attempting connection",c),n.websocket.connection=new n.tools.ws(c)}catch(d){n.log.error(d),u();return}n.websocket.connection!=null?(n.websocket.connection.established=!1,n.websocket.connection.onopen=function(d){if(!n.websocket.connection.established&&(n.log.trace(d),n.log.info("Established connection with QZ Tray on "+c),n.websocket.setup.openConnection({resolve:i,reject:s}),a.keepAlive>0)){var f=setInterval(function(){if(!n.tools.isActive()||n.websocket.connection.interval!==f){clearInterval(f);return}n.websocket.connection.send("ping")},a.keepAlive*1e3);n.websocket.connection.interval=f}},n.websocket.connection.onclose=function(){n.websocket.connection&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&n.websocket.connection.onerror()},n.websocket.connection.onerror=function(d){n.log.trace(d),n.websocket.connection=null,u()}):s(new Error("Unable to create a websocket connection"))},openConnection:function(a){n.websocket.connection.established=!0,n.websocket.connection.onclose=function(s){n.log.trace(s),n.websocket.connection=null,n.websocket.callClose(s),n.log.info("Closed connection with QZ Tray");for(var u in n.websocket.pendingCalls)n.websocket.pendingCalls.hasOwnProperty(u)&&n.websocket.pendingCalls[u].reject(new Error("Connection closed before response received"));this.promise!=null&&this.promise.resolve()},n.websocket.connection.onerror=function(s){n.websocket.callError(s)},n.websocket.connection.sendData=function(s){n.log.trace("Preparing object for websocket",s),s.timestamp==null&&(s.timestamp=Date.now(),typeof s.timestamp!="number"&&(s.timestamp=new Date().getTime())),s.promise!=null&&(s.uid=n.websocket.setup.newUID(),n.websocket.pendingCalls[s.uid]=s.promise),s.position={x:typeof screen<"u"?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft||0):0,y:typeof screen<"u"?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop||0):0};try{if(s.call!=null&&s.signature==null&&n.security.needsSigned(s.call)){var u={call:s.call,params:s.params,timestamp:s.timestamp},c=n.tools.hash(n.tools.stringify(u));c.then||(c=n.tools.promise(function(d){d(c)})),c.then(function(d){return n.security.callSign(d)}).then(function(d){n.log.trace("Signature for call",d),s.signature=d||"",s.signAlgorithm=n.security.signAlgorithm,n.signContent=void 0,n.websocket.connection.send(n.tools.stringify(s))}).catch(function(d){n.log.error("Signing failed",d),s.promise!=null&&(s.promise.reject(new Error("Failed to sign request")),delete n.websocket.pendingCalls[s.uid])})}else n.log.trace("Signature for call",s.signature),n.websocket.connection.send(n.tools.stringify(s))}catch(d){n.log.error(d),s.promise!=null&&(s.promise.reject(d),delete n.websocket.pendingCalls[s.uid])}},n.websocket.connection.onmessage=function(s){var u=JSON.parse(s.data);if(u.uid==null){if(u.type==null)n.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(u.type){case n.streams.serial:u.event||(u.event=JSON.stringify({portName:u.key,output:u.data})),n.serial.callSerial(JSON.parse(u.event));break;case n.streams.socket:n.socket.callSocket(JSON.parse(u.event));break;case n.streams.usb:u.event||(u.event=JSON.stringify({vendorId:u.key[0],productId:u.key[1],output:u.data})),n.usb.callUsb(JSON.parse(u.event));break;case n.streams.hid:n.hid.callHid(JSON.parse(u.event));break;case n.streams.printer:n.printers.callPrinter(JSON.parse(u.event));break;case n.streams.file:n.file.callFile(JSON.parse(u.event));break;default:n.log.allay("Cannot determine stream type for callback",u);break}return}n.log.trace("Received response from websocket",u);var c=n.websocket.pendingCalls[u.uid];c==null?n.log.allay("No promise found for returned response"):u.error!=null?c.reject(new Error(u.error)):c.resolve(u.result),delete n.websocket.pendingCalls[u.uid]};function i(s){s===void 0&&(s=null),l.api.getVersion().then(function(u){n.websocket.connection.version=u,n.websocket.connection.semver=u.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var c=0;c<n.websocket.connection.semver.length;c++){try{if(c==3&&n.websocket.connection.semver[c].toLowerCase().indexOf("rc")==0){n.websocket.connection.semver[c]=-n.websocket.connection.semver[c].replace(/\D/g,"");continue}n.websocket.connection.semver[c]=parseInt(n.websocket.connection.semver[c])}catch(d){}n.websocket.connection.semver.length<4&&(n.websocket.connection.semver[3]=0)}n.compatible.algorithm(!0)}).then(function(){n.websocket.connection.sendData({certificate:s,promise:a})})}n.security.callCert().then(i).catch(function(s){n.log.warn("Failed to get certificate:",s),n.security.rejectOnCertFailure?a.reject(s):i(null)})},newUID:function(){var a=6;return(new Array(a+1).join("0")+(Math.random()*Math.pow(36,a)<<0).toString(36)).slice(-a)}},dataPromise:function(a,i,s,u){return n.tools.promise(function(c,d){var f={call:a,promise:{resolve:c,reject:d},params:i,signature:s,timestamp:u};n.websocket.connection.sendData(f)})},pendingCalls:{},errorCallbacks:[],callError:function(a){if(Array.isArray(n.websocket.errorCallbacks))for(var i=0;i<n.websocket.errorCallbacks.length;i++)n.websocket.errorCallbacks[i](a);else n.websocket.errorCallbacks(a)},closedCallbacks:[],callClose:function(a){if(Array.isArray(n.websocket.closedCallbacks))for(var i=0;i<n.websocket.closedCallbacks.length;i++)n.websocket.closedCallbacks[i](a);else n.websocket.closedCallbacks(a)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",forceRaw:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(a){if(Array.isArray(n.serial.serialCallbacks))for(var i=0;i<n.serial.serialCallbacks.length;i++)n.serial.serialCallbacks[i](a);else n.serial.serialCallbacks(a)}},socket:{socketCallbacks:[],callSocket:function(a){if(Array.isArray(n.socket.socketCallbacks))for(var i=0;i<n.socket.socketCallbacks.length;i++)n.socket.socketCallbacks[i](a);else n.socket.socketCallbacks(a)}},usb:{usbCallbacks:[],callUsb:function(a){if(Array.isArray(n.usb.usbCallbacks))for(var i=0;i<n.usb.usbCallbacks.length;i++)n.usb.usbCallbacks[i](a);else n.usb.usbCallbacks(a)}},hid:{hidCallbacks:[],callHid:function(a){if(Array.isArray(n.hid.hidCallbacks))for(var i=0;i<n.hid.hidCallbacks.length;i++)n.hid.hidCallbacks[i](a);else n.hid.hidCallbacks(a)}},printers:{printerCallbacks:[],callPrinter:function(a){if(Array.isArray(n.printers.printerCallbacks))for(var i=0;i<n.printers.printerCallbacks.length;i++)n.printers.printerCallbacks[i](a);else n.printers.printerCallbacks(a)}},file:{fileCallbacks:[],callFile:function(a){if(Array.isArray(n.file.fileCallbacks))for(var i=0;i<n.file.fileCallbacks.length;i++)n.file.fileCallbacks[i](a);else n.file.fileCallbacks(a)}},security:{certHandler:function(a,i){i()},callCert:function(){return typeof n.security.certHandler.then=="function"?n.security.certHandler:n.security.certHandler.constructor.name==="AsyncFunction"?n.security.certHandler():n.tools.promise(n.security.certHandler)},signatureFactory:function(){return function(a){a()}},callSign:function(a){return n.security.signatureFactory.constructor.name==="AsyncFunction"?n.security.signatureFactory(a):n.tools.promise(n.security.signatureFactory(a))},signAlgorithm:"SHA1",rejectOnCertFailure:!1,needsSigned:function(a){const i=["printers.getStatus","printers.stopListening","usb.isClaimed","usb.closeStream","usb.releaseDevice","hid.stopListening","hid.isClaimed","hid.closeStream","hid.releaseDevice","file.stopListening","getVersion"];return a!=null&&i.indexOf(a)===-1}},tools:{promise:function(a){if(typeof RSVP<"u")return new RSVP.Promise(a);if(typeof Promise<"u")return new Promise(a);n.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},reject:function(a){return n.tools.promise(function(i,s){s(a)})},stringify:function(a){var i=Array.prototype.toJSON;delete Array.prototype.toJSON;function s(c,d){if(c!=="promise")return d}var u=JSON.stringify(a,s);return i&&(Array.prototype.toJSON=i),u},hash:function(a){return typeof Sha256<"u"?Sha256.hash(a):n.SHA.hash(a)},ws:typeof WebSocket<"u"?WebSocket:null,absolute:function(a){if(typeof window<"u"&&typeof document.createElement=="function"){var i=document.createElement("a");return i.href=a,i.href}else Cs.resolve(a);return a},relative:function(a){for(var i=0;i<a.length;i++)if(a[i].constructor===Object){var s=!1;a[i].data&&a[i].data.search&&a[i].data.search(/data:image\/\w+;base64,/)===0?(a[i].flavor="base64",a[i].data=a[i].data.replace(/^data:image\/\w+;base64,/,"")):a[i].flavor?["FILE","XML"].indexOf(a[i].flavor.toUpperCase())>-1&&(s=!0):(a[i].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(a[i].format.toUpperCase())>-1||a[i].type&&(["PIXEL","IMAGE","PDF"].indexOf(a[i].type.toUpperCase())>-1&&!a[i].format||["HTML","PDF"].indexOf(a[i].type.toUpperCase())>-1&&(!a[i].format||a[i].format.toUpperCase()==="FILE")))&&(s=!0),s&&(a[i].data=n.tools.absolute(a[i].data)),a[i].options&&typeof a[i].options.overlay=="string"&&(a[i].options.overlay=n.tools.absolute(a[i].options.overlay))}},extend:function(a){typeof a!="object"&&(a={});for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s){for(var u in s)if(s.hasOwnProperty(u)){if(a===s[u])continue;if(s[u]&&s[u].constructor&&s[u].constructor===Object){var c;Array.isArray(s[u])?c=a[u]||[]:c=a[u]||{},a[u]=n.tools.extend(c,s[u])}else s[u]!==void 0&&(a[u]=s[u])}}}return a},versionCompare:function(a,i,s,u){if(n.tools.assertActive()){var c=n.websocket.connection.semver;return c[0]!=a?c[0]-a:i!=null&&c[1]!=i?c[1]-i:s!=null&&c[2]!=s?c[2]-s:u!=null&&c.length>3&&c[3]!=u?Number.isInteger(c[3])&&Number.isInteger(u)?c[3]-u:c[3].toString().localeCompare(u.toString()):0}},isVersion:function(a,i,s,u){return n.tools.versionCompare(a,i,s,u)==0},isActive:function(){return!n.websocket.shutdown&&n.websocket.connection!=null&&(n.websocket.connection.readyState===n.tools.ws.OPEN||n.websocket.connection.readyState===n.tools.ws.CONNECTING)},assertActive:function(){if(n.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")},uint8ArrayToHex:function(a){return Array.from(a).map(function(i){return i.toString(16).padStart(2,"0")}).join("")},uint8ArrayToBase64:function(a){var i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],s="",u,c=a.length;for(u=2;u<c;u+=3)s+=i[a[u-2]>>2],s+=i[(a[u-2]&3)<<4|a[u-1]>>4],s+=i[(a[u-1]&15)<<2|a[u]>>6],s+=i[a[u]&63];return u===c+1&&(s+=i[a[u-2]>>2],s+=i[(a[u-2]&3)<<4],s+="=="),u===c&&(s+=i[a[u-2]>>2],s+=i[(a[u-2]&3)<<4|a[u-1]>>4],s+=i[(a[u-1]&15)<<2],s+="="),s}},compatible:{data:function(a){for(var i=0;i<a.length;i++)if(a[i].constructor===Object&&a[i].data instanceof Uint8Array&&a[i].flavor){var s=a[i].flavor.toString().toUpperCase();switch(s){case"BASE64":a[i].data=n.tools.uint8ArrayToBase64(a[i].data);break;case"HEX":a[i].data=n.tools.uint8ArrayToHex(a[i].data);break;default:throw new Error("Uint8Array conversion to '"+s+"' is not supported.")}}if(n.tools.versionCompare(2,2,4)<0)for(var i=0;i<a.length;i++)a[i].constructor===Object&&a[i].options&&typeof a[i].options.dotDensity=="string"&&(a[i].options.dotDensity=a[i].options.dotDensity.toLowerCase().replace("-legacy",""));if(n.tools.isVersion(2,0)){n.log.trace("Converting print data to v2.0 for "+n.websocket.connection.version);for(var i=0;i<a.length;i++)a[i].constructor===Object&&(a[i].type&&a[i].type.toUpperCase()==="RAW"&&a[i].format&&a[i].format.toUpperCase()==="IMAGE"&&(a[i].flavor&&a[i].flavor.toUpperCase()==="BASE64"&&(a[i].data="data:image/compat;base64,"+a[i].data),a[i].flavor="IMAGE"),(a[i].type&&a[i].type.toUpperCase()==="RAW"||a[i].format&&a[i].format.toUpperCase()==="COMMAND")&&(a[i].format="RAW"),a[i].type=a[i].format,a[i].format=a[i].flavor,delete a[i].flavor)}},config:function(a,i){return n.tools.isVersion(2,0)&&(i.rasterize||(a.rasterize=!0)),n.tools.versionCompare(2,2)<0&&a.forceRaw!=="undefined"&&(a.altPrinting=a.forceRaw,delete a.forceRaw),n.tools.versionCompare(2,1,2,11)<0&&a.spool&&(a.spool.size&&(a.perSpool=a.spool.size,delete a.spool.size),a.spool.end&&(a.endOfDoc=a.spool.end,delete a.spool.end),delete a.spool),a},networking:function(a,i,s,u,c){return n.tools.isVersion(2,0)?n.tools.promise(function(d,f){n.websocket.dataPromise("websocket.getNetworkInfo",{hostname:a,port:i},s,u).then(function(p){d(typeof c<"u"?c(p):p)},f)}):n.tools.promise(function(d,f){n.websocket.dataPromise("networking.device",{hostname:a,port:i},s,u).then(function(p){d({ipAddress:p.ip,macAddress:p.mac})},f)})},algorithm:function(a){return n.tools.isActive()&&n.tools.isVersion(2,0)?(a||n.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1):!0}},SHA:{hash:function(a){a=n.SHA._utf8Encode(a)+"";for(var i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u=a.length/4+2,c=Math.ceil(u/16),d=new Array(c),f=0;f<c;f++){d[f]=new Array(16);for(var p=0;p<16;p++)d[f][p]=a.charCodeAt(f*64+p*4)<<24|a.charCodeAt(f*64+p*4+1)<<16|a.charCodeAt(f*64+p*4+2)<<8|a.charCodeAt(f*64+p*4+3)}d[c-1][14]=(a.length-1)*8/Math.pow(2,32),d[c-1][14]=Math.floor(d[c-1][14]),d[c-1][15]=(a.length-1)*8&4294967295;for(var h=new Array(64),m,A,g,v,y,_,k,w,f=0;f<c;f++){for(var b=0;b<16;b++)h[b]=d[f][b];for(var b=16;b<64;b++)h[b]=n.SHA._dev1(h[b-2])+h[b-7]+n.SHA._dev0(h[b-15])+h[b-16]&4294967295;m=s[0],A=s[1],g=s[2],v=s[3],y=s[4],_=s[5],k=s[6],w=s[7];for(var b=0;b<64;b++){var O=w+n.SHA._sig1(y)+n.SHA._ch(y,_,k)+i[b]+h[b],E=n.SHA._sig0(m)+n.SHA._maj(m,A,g);w=k,k=_,_=y,y=v+O&4294967295,v=g,g=A,A=m,m=O+E&4294967295}s[0]=s[0]+m&4294967295,s[1]=s[1]+A&4294967295,s[2]=s[2]+g&4294967295,s[3]=s[3]+v&4294967295,s[4]=s[4]+y&4294967295,s[5]=s[5]+_&4294967295,s[6]=s[6]+k&4294967295,s[7]=s[7]+w&4294967295}return n.SHA._hexStr(s[0])+n.SHA._hexStr(s[1])+n.SHA._hexStr(s[2])+n.SHA._hexStr(s[3])+n.SHA._hexStr(s[4])+n.SHA._hexStr(s[5])+n.SHA._hexStr(s[6])+n.SHA._hexStr(s[7])},_rotr:function(a,i){return i>>>a|i<<32-a},_sig0:function(a){return n.SHA._rotr(2,a)^n.SHA._rotr(13,a)^n.SHA._rotr(22,a)},_sig1:function(a){return n.SHA._rotr(6,a)^n.SHA._rotr(11,a)^n.SHA._rotr(25,a)},_dev0:function(a){return n.SHA._rotr(7,a)^n.SHA._rotr(18,a)^a>>>3},_dev1:function(a){return n.SHA._rotr(17,a)^n.SHA._rotr(19,a)^a>>>10},_ch:function(a,i,s){return a&i^~a&s},_maj:function(a,i,s){return a&i^a&s^i&s},_hexStr:function(a){for(var i="",s,u=7;u>=0;u--)s=a>>>u*4&15,i+=s.toString(16);return i},_unescape:function(a){return a.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(i){if(i.length-1)return String.fromCharCode(parseInt(i.substring(i.length-3?2:1),16));var s=i.charCodeAt(0);return s<256?"%"+(0+s.toString(16)).slice(-2).toUpperCase():"%u"+("000"+s.toString(16)).slice(-4).toUpperCase()})},_utf8Encode:function(a){return n.SHA._unescape(encodeURIComponent(a))}}};function o(a,i){this.config=n.tools.extend({},n.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(s){typeof s=="string"&&(s={name:s}),this.printer=s},this.getPrinter=function(){return this.printer},this.reconfigure=function(s){for(var u in s)s[u]!==void 0&&(this._dirtyOpts[u]=!0);n.tools.extend(this.config,s)},this.getOptions=function(){return n.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(a),this.reconfigure(i)}o.prototype.print=function(a,i,s){l.print(this,a,i,s)};var l={websocket:{isActive:function(){return n.tools.isActive()},connect:function(a){return n.tools.promise(function(i,s){if(n.websocket.connection){const c=n.websocket.connection.readyState;if(c===n.tools.ws.OPEN){s(new Error("An open connection with QZ Tray already exists"));return}else if(c===n.tools.ws.CONNECTING){s(new Error("The current connection attempt has not returned yet"));return}else if(c===n.tools.ws.CLOSING){s(new Error("Waiting for previous disconnect request to complete"));return}}if(n.tools.ws){if(!n.tools.ws.CLOSED||n.tools.ws.CLOSED==2){s(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));return}}else{s(new Error("WebSocket not supported by this browser"));return}a==null&&(a={}),(typeof location>"u"||location.protocol!=="https:")&&typeof a.usingSecure>"u"&&(n.log.trace("Disabling secure ports due to insecure page"),a.usingSecure=!1),typeof a.host<"u"&&!Array.isArray(a.host)&&(a.host=[a.host]),n.websocket.shutdown=!1;var u=function(c){var d=!1,f=function(){d||(d=!0,a&&c<a.retries?u(c+1):(n.websocket.connection=null,s.apply(null,arguments)))},p=function(){var h=n.tools.extend({},n.websocket.connectConfig,a);n.websocket.setup.findConnection(h,i,f)};c==0?p():setTimeout(p,a.delay*1e3)};u(0)})},disconnect:function(){return n.tools.promise(function(a,i){n.websocket.connection!=null?n.tools.isActive()?(n.websocket.shutdown=!0,n.websocket.connection.promise={resolve:a,reject:i},n.websocket.connection.close()):i(new Error("Current connection is still closing")):i(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(a){n.websocket.errorCallbacks=a},setClosedCallbacks:function(a){n.websocket.closedCallbacks=a},getNetworkInfo:n.compatible.networking,getConnectionInfo:function(){if(n.tools.assertActive()){var a=n.websocket.connection.url.split(/[:\/]+/g);return{socket:a[0],host:a[1],port:+a[2]}}}},printers:{getDefault:function(a,i){return n.websocket.dataPromise("printers.getDefault",null,a,i)},find:function(a,i,s){return n.websocket.dataPromise("printers.find",{query:a},i,s)},details:function(){return n.websocket.dataPromise("printers.detail")},startListening:function(a,i){Array.isArray(a)||(a=[a]);var s={printerNames:a};return i&&i.jobData==!0&&(s.jobData=!0),i&&i.maxJobData&&(s.maxJobData=i.maxJobData),i&&i.flavor&&(s.flavor=i.flavor),n.websocket.dataPromise("printers.startListening",s)},clearQueue:function(a){return typeof a!="object"&&(a={printerName:a}),n.websocket.dataPromise("printers.clearQueue",a)},stopListening:function(){return n.websocket.dataPromise("printers.stopListening")},getStatus:function(){return n.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(a){n.printers.printerCallbacks=a}},configs:{setDefaults:function(a){n.tools.extend(n.printing.defaultConfig,a)},create:function(a,i){return new o(a,i)}},print:function(a,i){var s=!1,u=[],c=[];arguments.length>=3&&(typeof arguments[2]=="boolean"?(s=arguments[2],arguments.length>=5&&(u=arguments[3],c=arguments[4])):arguments.length>=4&&(u=arguments[2],c=arguments[3]),u&&!Array.isArray(u)&&(u=[u]),c&&!Array.isArray(c)&&(c=[c])),Array.isArray(a)||(a=[a]),Array.isArray(i[0])||(i=[i]);for(var d=0;d<i.length;d++)n.tools.relative(i[d]),n.compatible.data(i[d]);for(var f=function(v){var y={printer:v.config.getPrinter(),options:v.config.getOptions(),data:v.data};return n.websocket.dataPromise("print",y,v.signature,v.timestamp)},p=[],h=0;h<a.length||h<i.length;h++)(function(v){var y={config:a[Math.min(v,a.length-1)],data:i[Math.min(v,i.length-1)],signature:u[v],timestamp:c[v]};p.push(function(){return f(y)})})(h);var m=null;if(s){var A=[];m=function(v){A.push(v)},p.push(function(){return n.tools.promise(function(v,y){A.length?y(A):v()})})}var g=null;return p.reduce(function(v,y){return g=v.catch(m).then(y),g},n.tools.promise(function(v){v()})),g},serial:{findPorts:function(){return n.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(a){n.serial.serialCallbacks=a},openPort:function(a,i){var s={port:a,options:i};return n.websocket.dataPromise("serial.openPort",s)},sendData:function(a,i,s){n.tools.versionCompare(2,1,0,12)>=0&&(typeof i!="object"&&(i={data:i,type:"PLAIN"}),i.type&&i.type.toUpperCase()=="FILE"&&(i.data=n.tools.absolute(i.data)));var u={port:a,data:i,options:s};return n.websocket.dataPromise("serial.sendData",u)},closePort:function(a){return n.websocket.dataPromise("serial.closePort",{port:a})}},socket:{open:function(a,i,s){var u={host:a,port:i,options:s};return n.websocket.dataPromise("socket.open",u)},close:function(a,i){var s={host:a,port:i};return n.websocket.dataPromise("socket.close",s)},sendData:function(a,i,s){typeof s!="object"&&(s={data:s,type:"PLAIN"});var u={host:a,port:i,data:s};return n.websocket.dataPromise("socket.sendData",u)},setSocketCallbacks:function(a){n.socket.socketCallbacks=a}},usb:{listDevices:function(a){return n.websocket.dataPromise("usb.listDevices",{includeHubs:a})},listInterfaces:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.listInterfaces",a)},listEndpoints:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),n.websocket.dataPromise("usb.listEndpoints",a)},setUsbCallbacks:function(a){n.usb.usbCallbacks=a},claimDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),n.websocket.dataPromise("usb.claimDevice",a)},isClaimed:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.isClaimed",a)},sendData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),n.tools.versionCompare(2,1,0,12)>=0&&(typeof a.data!="object"&&(a.data={data:a.data,type:"PLAIN"}),a.data.type&&a.data.type.toUpperCase()=="FILE"&&(a.data.data=n.tools.absolute(a.data.data))),n.websocket.dataPromise("usb.sendData",a)},readData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),n.websocket.dataPromise("usb.readData",a)},openStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),n.websocket.dataPromise("usb.openStream",a)},closeStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),n.websocket.dataPromise("usb.closeStream",a)},releaseDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.releaseDevice",a)}},hid:{listDevices:function(){return n.websocket.dataPromise("hid.listDevices")},startListening:function(){return n.websocket.dataPromise("hid.startListening")},stopListening:function(){return n.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(a){n.hid.hidCallbacks=a},claimDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.claimDevice",a)},isClaimed:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.isClaimed",a)},sendData:function(a){if(typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),n.tools.versionCompare(2,1,0,12)>=0)typeof a.data!="object"&&(a.data={data:a.data,type:"PLAIN"}),a.data.type&&a.data.type.toUpperCase()=="FILE"&&(a.data.data=n.tools.absolute(a.data.data));else if(typeof a.data=="object"){if(a.data.type.toUpperCase()!=="PLAIN"||typeof a.data.data!="string")return n.tools.reject(new Error("Data format is not supported with connected QZ Tray version "+n.websocket.connection.version));a.data=a.data.data}return n.websocket.dataPromise("hid.sendData",a)},readData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),n.websocket.dataPromise("hid.readData",a)},sendFeatureReport:function(a){return n.websocket.dataPromise("hid.sendFeatureReport",a)},getFeatureReport:function(a){return n.websocket.dataPromise("hid.getFeatureReport",a)},openStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),n.websocket.dataPromise("hid.openStream",a)},closeStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.closeStream",a)},releaseDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.releaseDevice",a)}},file:{list:function(a,i){var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.list",s)},read:function(a,i){var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.read",s)},write:function(a,i){var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.write",s)},remove:function(a,i){var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.remove",s)},startListening:function(a,i){i&&typeof i.include<"u"&&!Array.isArray(i.include)&&(i.include=[i.include]),i&&typeof i.exclude<"u"&&!Array.isArray(i.exclude)&&(i.exclude=[i.exclude]);var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.startListening",s)},stopListening:function(a,i){var s=n.tools.extend({path:a},i);return n.websocket.dataPromise("file.stopListening",s)},setFileCallbacks:function(a){n.file.fileCallbacks=a}},networking:{device:function(a,i){return n.tools.isVersion(2,0)?n.compatible.networking(a,i,null,null,function(s){return{ip:s.ipAddress,mac:s.macAddress}}):n.websocket.dataPromise("networking.device",{hostname:a,port:i})},hostname:function(a,i){return n.tools.versionCompare(2,2,2)<0?n.tools.promise(function(s,u){n.websocket.dataPromise("networking.device",{hostname:a,port:i}).then(function(c){console.log(c),s(c.hostname)})}):n.websocket.dataPromise("networking.hostname")},devices:function(a,i){return n.tools.isVersion(2,0)?n.compatible.networking(a,i,null,null,function(s){return[{ip:s.ipAddress,mac:s.macAddress}]}):n.websocket.dataPromise("networking.devices",{hostname:a,port:i})}},security:{setCertificatePromise:function(a,i){n.security.certHandler=a,n.security.rejectOnCertFailure=!!(i&&i.rejectOnFailure)},setSignaturePromise:function(a){n.security.signatureFactory=a},setSignatureAlgorithm:function(a){n.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(a.toUpperCase())<0?n.log.error("Signing algorithm '"+a+"' is not supported."):n.security.signAlgorithm=a)},getSignatureAlgorithm:function(){return n.security.signAlgorithm}},api:{showDebug:function(a){return n.DEBUG=a},getVersion:function(){return n.websocket.dataPromise("getVersion")},isVersion:n.tools.isVersion,isVersionGreater:function(a,i,s,u){return n.tools.versionCompare(a,i,s,u)>0},isVersionLess:function(a,i,s,u){return n.tools.versionCompare(a,i,s,u)<0},setPromiseType:function(a){n.tools.promise=a},setSha256Type:function(a){n.tools.hash=a},setWebSocketType:function(a){n.tools.ws=a}},version:n.VERSION};return l}();(function(){e.exports=r})()})(Os);const As={class:"print-drawer"},Ps={key:0,class:"aic jcc fdc",style:{"background-color":"#edeef3",overflow:"hidden"}},Ds={"data-pageShow":"xx"},Is={__name:"Preview",props:{options:{type:Object,default:()=>({width:210,height:297,data:[],dataSource:"Parameter",model:{},qzOption:null})},renderType:{type:String,default:"render"},modelValue:{type:Boolean,defalut:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const r=t;C();const n=C(!1),o=C(!1),l=C(!1),a=Ne(),i=qt();let s=e;const u=ie(()=>{let O=[];try{Array.isArray(s.options.model)?O=s.options.model:s.options.model&&!Array.isArray(s.options.model)&&(O=[s.options.model])}catch(E){console.error(E)}return O}),c=C({marginLeft:0,marginRight:0,marginTop:0,marginBottom:0}),d=C({marginLeft:0,marginRight:0,marginTop:0,marginBottom:0}),f=()=>{o.value=!0},p=()=>{o.value=!1,c.value.marginBottom=d.value.marginBottom,c.value.marginRight=d.value.marginRight,c.value.marginTop=d.value.marginTop,c.value.marginLeft=d.value.marginLeft},h=()=>{o.value=!1,d.value.marginBottom=c.value.marginBottom,d.value.marginRight=c.value.marginRight,d.value.marginTop=c.value.marginTop,d.value.marginLeft=c.value.marginLeft,i.setPrintOption(et(d.value))};function m(O,E){return O-E.pageIndex*xt(d.value.height)+(l.value?0:-10)}const A=C(),g=oa(!1),v=async()=>{sa.warning("驱动打印设备需要QQ群 953344438")};le(()=>s.modelValue,O=>{n.value=O,O&&(s.options.qzOption&&(d.value.width=s.options.qzOption.size.width,d.value.height=s.options.qzOption.size.height),i.setPrintOption(et(d.value))),O?a.setRenderType(s.renderType):a.setRenderType("")},{immediate:!0});const y=()=>{r("update:modelValue",!1)},_=C(),k=()=>{l.value=!0,setTimeout(()=>{const O=al(Pe.cloneDeep(_.value.map(V=>V.outerHTML).join("")),et(d.value));l.value=!1;const E=window.open("","");E&&(E.document.write(O),E.document.close(),E.print(),E.close())},200)};le(()=>n.value,O=>{O||y()});const w=C(""),b=C([]);return Je(()=>{}),(O,E)=>{const V=q("el-option"),S=q("el-select"),H=q("el-form-item"),L=q("el-link"),J=q("el-form"),P=q("el-button"),Se=q("el-drawer"),ne=q("el-divider"),D=q("el-input-number");return T(),j("div",As,[M(Se,{modelValue:n.value,"onUpdate:modelValue":E[1]||(E[1]=x=>n.value=x),"custom-class":"",size:"100%"},{header:R(()=>[E[9]||(E[9]=U("div",{class:"aic"},[U("h2",null,"打印预览 "),U("div",null," (打印驱动加QQ群咨询： 953344438) ")],-1)),M(J,{ref:"queryForm",size:"small",inline:!0},{default:R(()=>[M(H,{label:"选择打印设备",prop:"payMethod"},{default:R(()=>[M(S,{modelValue:w.value,"onUpdate:modelValue":E[0]||(E[0]=x=>w.value=x),placeholder:"请选择",clearable:"",style:{width:"140px"}},{default:R(()=>[(T(!0),j(be,null,xe(b.value,(x,I)=>(T(),se(V,{key:I,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),M(H,{label:"",prop:""},{default:R(()=>[U("div",{class:"aic",onClick:f},[M(z(ss),{fill:"#474747",class:"CP",style:{width:"20px"}}),M(L,{type:"primary",size:"small",style:{"margin-left":"10px"},href:"https://qz.io/docs/pixel#html-printing",target:"_blank"},{default:R(()=>E[8]||(E[8]=[ue("打印驱动文档")])),_:1,__:[8]})])]),_:1})]),_:1},512)]),footer:R(()=>[U("div",null,[M(P,{size:"large",onClick:y},{default:R(()=>E[10]||(E[10]=[ue("取消")])),_:1,__:[10]}),M(P,{size:"large",loading:g.value,type:"primary",onClick:v},{default:R(()=>E[11]||(E[11]=[ue("驱动打印")])),_:1,__:[11]},8,["loading"]),M(P,{type:"primary",size:"large",class:"ml10",onClick:k},{default:R(()=>E[12]||(E[12]=[ue("浏览器打印")])),_:1,__:[12]})])]),default:R(()=>[n.value?(T(),j("div",Ps,[(T(!0),j(be,null,xe(u.value,(x,I)=>(T(),se(z(br.DraggableContainer),{class:"aic jcc",key:I,grid:O.grid,onClick:O.handleCanvas},{default:R(()=>[U("div",null,[U("div",{style:{position:"relative",overflow:"hidden"},ref_for:!0,ref_key:"browserPrintRef",ref:_},[(T(!0),j(be,null,xe(e.options.data,X=>(T(),j("div",{"data-type":"page",ref_for:!0,ref_key:"printContentRef",ref:A,class:"printContentRef",key:X.id,style:ae({height:"".concat(z(xt)(d.value.height),"px"),width:"".concat(z(xt)(d.value.width),"px"),backgroundColor:" #fff",borderTop:l.value?"0px solid #EDEEF3":"10px solid #EDEEF3"})},[U("div",Ds,[(T(!0),j(be,null,xe(X.renderList,(W,N)=>(T(),se(z(Rn),{key:N,x:W.styles.x,"onUpdate:x":ee=>W.styles.x=ee,zIndex:N,y:m(W.styles.y,W),w:W.styles.w,"onUpdate:w":ee=>W.styles.w=ee,resizable:!1,draggable:!1,h:W.styles.h,"onUpdate:h":ee=>W.styles.h=ee,initH:W.styles.h,initW:W.styles.w},{default:R(()=>[M(z(ya),{element:W,model:x},null,8,["element","model"])]),_:2},1032,["x","onUpdate:x","zIndex","y","w","onUpdate:w","h","onUpdate:h","initH","initW"]))),128))])],4))),128))],512)])]),_:2},1032,["grid","onClick"]))),128))])):Ae("",!0)]),_:1},8,["modelValue"]),M(z(Wt),{"append-to-body":"",onMousedown:E[6]||(E[6]=$e(()=>{},["stop"])),modelValue:o.value,"onUpdate:modelValue":E[7]||(E[7]=x=>o.value=x),title:"打印设置"},{footer:R(()=>[U("div",null,[M(P,{size:"large",onClick:p},{default:R(()=>E[14]||(E[14]=[ue("取消")])),_:1,__:[14]}),M(P,{size:"large",type:"primary",onClick:h},{default:R(()=>E[15]||(E[15]=[ue("保存")])),_:1,__:[15]})])]),default:R(()=>[M(ne,{"content-position":"left"},{default:R(()=>E[13]||(E[13]=[ue("页面边距")])),_:1,__:[13]}),M(J,{inline:!0,style:{"margin-left":"10px"}},{default:R(()=>[M(H,{label:"上边距(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(D,{modelValue:c.value.marginTop,"onUpdate:modelValue":E[2]||(E[2]=x=>c.value.marginTop=x),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),M(H,{label:"右边距(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(D,{modelValue:c.value.marginRight,"onUpdate:modelValue":E[3]||(E[3]=x=>c.value.marginRight=x),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),M(H,{label:"下边距(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(D,{modelValue:c.value.marginBottom,"onUpdate:modelValue":E[4]||(E[4]=x=>c.value.marginBottom=x),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),M(H,{label:"左边距(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(D,{modelValue:c.value.marginLeft,"onUpdate:modelValue":E[5]||(E[5]=x=>c.value.marginLeft=x),style:{width:"120px"},min:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Ts=ge(Is,[["__scopeId","data-v-6d3d957e"],["__file","D:/work/public/easy-print/src/packages/easy-print/Preview.vue"]]);var he=(e=>(e.MERGE="merge",e.ADD_ROW_TOP="addRowTop",e.ADD_ROW_BOTTOM="addRowBottom",e.ADD_COL_LEFT="addColLeft",e.ADD_COL_RIGHT="addColRight",e.RECOVERY_SPLIT="recoverySplit",e))(he||{}),Ot=(e=>(e.DELETE="delete",e.TOP="top",e.BOTTOM="bottom",e))(Ot||{});const Rs={class:"titleSub"},Ms={class:"popoverContent__arrow__children"},Ls=["onClick"],$s=["onClick"],Bs=fe({__name:"popover",props:{},emits:["handleTable"],setup(e,{emit:t}){aa(m=>({"26a2be6b-bindColor":p}));const r=t,n=C(!1),o=C({position:"absolute",left:"0",top:"0",background:"#FFF","z-index":"999"}),l=C(),a=C([]),i=Ne(),s=qt(),u=(m,A)=>{function g(v){let y=m.length>1?!0:i.getCurrentSelected.length!=1;if(v==he.RECOVERY_SPLIT&&!y){for(const _ in A)if(Object.prototype.hasOwnProperty.call(A,_)){const k=A[_][0],w=k?k.getAttribute("rowspan"):null,b=k?k.getAttribute("colspan"):null;w||b?y=!1:y=!0}}return y}return{name:"表格",disabled:!1,children:[{name:"合并表格",value:he.MERGE,disabled:m.length>1?!0:!(i.getCurrentSelected.length>1)},{name:"恢复拆分",value:he.RECOVERY_SPLIT,disabled:g(he.RECOVERY_SPLIT)},{name:"向上添加一行",value:he.ADD_ROW_TOP,disabled:g(he.ADD_ROW_TOP)},{name:"向下添加一行",value:he.ADD_ROW_BOTTOM,disabled:g(he.ADD_ROW_BOTTOM)},{name:"向左添加一列",value:he.ADD_COL_LEFT,disabled:g(he.ADD_COL_LEFT)},{name:"向右添加一列",value:he.ADD_COL_RIGHT,disabled:g(he.ADD_COL_RIGHT)}]}},c=m=>{var A;const g=[{name:"删除",value:Ot.DELETE,disabled:!1},{name:"置顶",value:Ot.TOP,disabled:!1},{name:"置底",value:Ot.BOTTOM,disabled:!1}];if(m.preventDefault(),o.value.left=m.clientX+"px",o.value.top=m.clientY+"px",n.value=!0,s.getActiveData&&((A=s.getActiveData)==null?void 0:A.componentName)==G.tableContainer){let v=[];for(let k=0;k<i.getCurrentSelected.length;k++){const w=i.getCurrentSelected[k];w.dataset.type==G.tableContainer&&v.push(w)}let y={};v.forEach(k=>{let w=k.dataset.id;y[w]?y[w].push(k):y[w]=[k]});let _=Object.keys(y);a.value=[u(_,y),...g]}else a.value=g},d=()=>{n.value=!1};ve({}),document.addEventListener("click",d),document.addEventListener("click",d);const f=$n("--el-color-primary"),p="rgba(".concat(Sr(f.value).join(",")," , 0.8)"),h=m=>{switch(m.value){case he.MERGE:case he.ADD_ROW_TOP:case he.ADD_ROW_BOTTOM:case he.ADD_COL_LEFT:case he.ADD_COL_RIGHT:case he.RECOVERY_SPLIT:r("handleTable",m.value);break;case Ot.DELETE:s.deleteActiveData();break;case Ot.TOP:s.setItemZIndexTop();break;case Ot.BOTTOM:s.setItemZIndexBottom();break}d()};return(m,A)=>(T(),j("div",{class:"popover",ref_key:"popoverRef",ref:l,onContextmenu:$e(c,["stop"])},[_t(m.$slots,"default",{},void 0,!0),(T(),se(_i,{to:"body"},[n.value?(T(),j("div",{key:0,class:"popoverContent",style:ae(o.value)},[(T(!0),j(be,null,xe(a.value,(g,v)=>(T(),j("div",{key:v,style:ae(g.disabled?"color:#ccc;cursor:not-allowed":"color:#333;cursor:pointer"),class:Ut(g.children?"":"popoverContent__arrow")},[g.children&&g.children.length>0?(T(),j(be,{key:0},[U("span",Rs,De(g.name),1),U("div",Ms,[(T(!0),j(be,null,xe(g.children,(y,_)=>(T(),j("div",{class:"popoverContent__arrow__children__item",key:_,style:ae(y.disabled?"color:#ccc;cursor:not-allowed":"color:#333;cursor:pointer"),onClick:$e(k=>h(y),["stop"])},De(y.name),13,Ls))),128))])],64)):(T(),j("div",{key:1,onClick:$e(y=>h(g),["stop"])},De(g.name),9,$s))],6))),128))],4)):Ae("",!0)]))],544))}}),Ns=ge(Bs,[["__scopeId","data-v-26a2be6b"],["__file","D:/work/public/easy-print/src/packages/easy-print/popover.vue"]]),Vs=["onMousedown","onMousemove","data-id","data-type","data-index"],zs=fe({__name:"table",props:{element:{type:Object,required:!0,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change","handledRaggable"],setup(e,{emit:t}){const r=C(!1),n=C({col:2,row:1}),o=C([]),l=C(),a=Ne(),i=qt(),s=ve({data:[],startX:0,startY:0,index:0,colIndex:0,rowIndex:0,type:"row"}),u=e;le(()=>u.modelValue,w=>{},{deep:!0,immediate:!0}),le(()=>u.element,w=>{let b=w.attrsJson.find(O=>O.prop=="rowColData");o.value=b.defaultValue},{deep:!0,immediate:!0});const c=()=>{u.element.attrsJson.forEach(w=>{w.prop=="rowColData"&&(w.defaultValue=o.value,u.element.attrs.rowColData=o.value)})},d=C(),f=(w,b,O)=>{if(!m.value||!a.getControlLeft)return;w.stopPropagation(),w==null||w.target;const E=d.value.querySelectorAll("tbody tr");if(s.type=="col"){const V=w.clientX-s.startX;let S=s.index-1;const L=E[s.rowIndex].children[S],P=parseFloat(window.getComputedStyle(L).width)+V;L.style.width="".concat(P,"px"),s.startX=w.clientX,o.value[s.rowIndex].children[S].style.width="".concat(P)}else if(s.type=="row"){const V=w.clientY-s.startY;let S=s.index-1;if(S){let H=E[S];try{const J=parseFloat(window.getComputedStyle(H).height)+V;o.value[S].style.height="".concat(J,"px"),s.startY=w.clientY}catch(L){console.log("e :>> ",L)}}}c()},p=()=>{m.value=!1,s.index=0,a.setControlLeft(!1),console.log("11 :>> ",11),i.setUpdataActiveStyles("draggable",!0,u.element.id),c()},h=C(),m=C(!1),A=w=>{const{target:b}=w,O=b.getBoundingClientRect(),E=w.clientX,V=w.clientY,S=E-O.left,H=O.right-E,L=V-O.top,J=O.bottom-V,P=1;return L<=P&&S>P&&H>P||J<=P&&S>P&&H>P?"row-resize":S<=P&&L>P&&J>P||H<=P&&L>P&&J>P?"col-resize":"auto"},g=(w,b,O)=>{s.startX=w.clientX,s.startY=w.clientY;let E=et(o.value);if(E[b].children&&a.getControlLeft){let V=E[b];a.setActiveTd(V.children[O].id)}A(w)=="row-resize"?(s.index=b,s.type="row",h.value.children):A(w)=="col-resize"&&(s.index=O,s.rowIndex=b,s.type="col"),Hs(w)?(m.value=!0,i.setUpdataActiveStyles("draggable",!1,u.element.id)):m.value=!1},v=(w,b,O)=>{const{target:E}=w;a.getControlLeft&&(E.style.cursor=A(w))},y=C(),_=w=>{let b=[];for(let E=0;E<a.getCurrentSelected.length;E++){const V=a.getCurrentSelected[E];V.dataset.type==G.tableContainer&&b.push(V)}let O={};b.forEach(E=>{let V=E.dataset.id;O[V]?O[V].push(E):O[V]=[E]}),w==he.MERGE&&(o.value=qs(O,et(o.value))),(w==he.ADD_ROW_TOP||w==he.ADD_ROW_BOTTOM||he.ADD_COL_LEFT||he.ADD_COL_RIGHT)&&(o.value=Po(O,w,et(o.value))),w==he.RECOVERY_SPLIT&&(o.value=Gs(O,et(o.value))),c()},k=()=>{r.value=!1,o.value=Po(et(y.value),et(n.value),et(o.value)),c()};return Je(()=>{}),(w,b)=>{const O=q("Popover"),E=q("el-input-number"),V=q("el-form-item"),S=q("el-form"),H=q("el-button");return T(),j("div",{ref_key:"containerRef",ref:l,class:"tablecontainerRef"},[M(O,{style:ae(z(dn)(e.element.styles)),onHandleTable:_},{default:R(()=>[U("table",{onMousemove:f,cellpadding:"0",style:ae({...e.element.styles,width:e.element.styles.w,height:e.element.styles.h,"table-layout":"fixed"}),cellspacing:"0",ref_key:"tableRef",ref:d},[U("tbody",{ref_key:"tbodyRef",ref:h},[(T(!0),j(be,null,xe(o.value,(L,J)=>(T(),j("tr",{key:J,style:ae(L.style)},[(T(!0),j(be,null,xe(L.children,(P,Se)=>(T(),j(be,{key:Se},[P.delete?Ae("",!0):(T(),j("td",Ct({key:0,onMousedown:ne=>g(ne,L.index,P.index),onMousemove:ne=>v(ne,L.index,P.index),onMouseup:p,class:[[(e.element.styles.draggable,"targetSelecto")],"targetSelecto"],style:{borderRightWidth:(Se<L.children.length-1,"1px"),width:P.style.width+"px",height:P.style.height+"px"},"data-id":e.element.id,"data-type":z(G).tableContainer,"data-index":L.index+","+P.index},{ref_for:!0},P.bind),De(P.key?z(a).getRenderType==""?P.defaultValue:P.key?z(pt)(e.model,P.key):"":P.defaultValue),17,Vs))],64))),128))],4))),128))],512)],36)]),_:1},8,["style"]),M(Wt,{modelValue:r.value,"onUpdate:modelValue":b[3]||(b[3]=L=>r.value=L),width:"400px",title:"拆分单元格"},{footer:R(()=>[U("div",null,[M(H,{size:"large",onClick:b[2]||(b[2]=L=>r.value=!1)},{default:R(()=>b[4]||(b[4]=[ue("取消")])),_:1,__:[4]}),M(H,{size:"large",type:"primary",onClick:k},{default:R(()=>b[5]||(b[5]=[ue("保存")])),_:1,__:[5]})])]),default:R(()=>[M(S,{inline:!0,style:{"margin-left":"10px"},class:"jcc"},{default:R(()=>[M(V,{label:"列",style:{"margin-bottom":"0"}},{default:R(()=>[M(E,{modelValue:n.value.col,"onUpdate:modelValue":b[0]||(b[0]=L=>n.value.col=L),style:{width:"120px"},min:1,precision:0,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),M(V,{label:"行",style:{"margin-bottom":"0"}},{default:R(()=>[M(E,{placeholder:"请输入尺寸",min:1,modelValue:n.value.row,"onUpdate:modelValue":b[1]||(b[1]=L=>n.value.row=L),style:{width:"120px"},size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],512)}}}),js=ge(zs,[["__scopeId","data-v-9844ec0b"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/table/table.vue"]]),ba=e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];for(let n=0;n<r.length;n++)r[n].classList.toggle("selected",!1)}},Hs=e=>{const{target:t}=e,r=t.getBoundingClientRect(),n=parseInt(getComputedStyle(t).borderWidth),o=e.clientX-r.left,l=e.clientY-r.top;return o<=n||o>=t.offsetWidth-n||l<=n||l>=t.offsetHeight-n},Us=(e,t,r,n,o)=>{let l=0,a=0;for(let i=n;i<=o;i++){const s=r[e];if(s.children){let u=s.children[i],c=u.bind&&u.bind.colspan?u.bind.colspan:1;u.delete||(a+=c)}}for(let i=e;i<=t;i++){const s=r[i];if(s.children){let u=s.children[n];console.log("td :>> ",u);let c=u.bind&&u.bind.rowspan?u.bind.rowspan:1;u.delete||(l+=c)}}return{...l>1?{rowspan:l}:{},...a>1?{colspan:a}:{}}},Fs=(e,t,r,n,o)=>{let l=JSON.parse(JSON.stringify(r));for(let a=e;a<=t;a++){const i=l[a];for(let s=n;s<=o;s++){if(i.children&&!(a==e&&s==n)){const u=i.children[s];u.delete=!0,u.bind={}}if(i.children){let u=0;i.children.forEach(c=>{c.delete&&u++}),u==i.children.length&&(i.delete=!0)}}}return console.log("tableDelete :>> ",l),l},Gs=(e,t)=>{let r=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n][0],{index:l}=o.dataset,a=o.getAttribute("rowspan")?o.getAttribute("rowspan"):1,i=o.getAttribute("colspan")?o.getAttribute("colspan"):1;r=Pe.cloneDeep(t);let s=l==null?void 0:l.split(",");const u=Number(s[0]),c=u+Number(a)-1,d=Number(s[1]),f=d+Number(i)-1;for(let p=0;p<r.length;p++){const h=r[p];if(h.index=p,h.children)for(let m=0;m<h.children.length;m++){const A=h.children[m];A.index=m,u<=p&&p<=c&&d<=m&&m<=f&&(h.delete=!1,A.bind={},A.delete=!1)}}}return ba(e),r},Po=(e,t,r)=>{let n=[];for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o][0],{index:a}=l.dataset;n=Pe.cloneDeep(r);let i=a==null?void 0:a.split(",");const s=Number(i[0]),u=Number(i[1]);let c=Pe.cloneDeep(Mn());c.children=[];let d=n[s];for(let f=0;f<d.children.length;f++)c.children.push(Pe.cloneDeep(yt()));if(t==he.ADD_ROW_TOP){let f=Pe.cloneDeep(n[s]);const p=s;let h=[];for(let A=0;A<n.length;A++){const g=n[A];for(let v=0;v<g.children.length;v++){const y=g.children[v];let _=y.bind&&y.bind.rowspan?y.bind.rowspan:0;if(!y.delete){let k=_-1;if(_>1&&p>A&&p<=k){y.bind.rowspan=y.bind.rowspan+1,h.push(v);break}}}}let m=Pe.cloneDeep(Mn());for(let A=0;A<f.children.length;A++){let g=Pe.cloneDeep(yt());h.includes(A)&&(g.delete=!0),m.children&&m.children.push(g)}n.splice(p,0,m)}else if(t==he.ADD_ROW_BOTTOM){let f=n[s].children[u],p=f.bind&&f.bind.rowspan?f.bind.rowspan:1,h=s+p,m=Pe.cloneDeep(n[s]),A=[];for(let v=0;v<n.length;v++){const y=n[v];for(let _=0;_<y.children.length;_++){const k=y.children[_];let w=k.bind&&k.bind.rowspan?k.bind.rowspan:0;if(!k.delete){let b=w-1;if(w>1&&h>v&&h<=b){k.bind.rowspan=k.bind.rowspan+1,A.push(_);break}}}}let g=Pe.cloneDeep(Mn());for(let v=0;v<m.children.length;v++){let y=Pe.cloneDeep(yt());A.includes(v)&&(y.delete=!0),g.children&&g.children.push(y)}n.splice(h,0,g)}else if(t==he.ADD_COL_LEFT){let f=[];const p=u;for(let h=0;h<n.length;h++){const m=n[h];let A=[];for(let g=0;g<m.children.length;g++){const v=m.children[g];let y=v.bind&&v.bind.colspan?v.bind.colspan:0;if(!v.delete){let _=g+y-1,k=Pe.cloneDeep(yt());if(y>1&&p>g&&p<=_){v.bind.colspan=v.bind.colspan+1,k.delete=!0,A.push(k);break}}}A.length==0&&A.push(Pe.cloneDeep(yt())),f.push(A)}for(let h=0;h<n.length;h++)n[h].children.splice(p,0,...f[h])}else if(t==he.ADD_COL_RIGHT){let f=[],p=d.children[u],h=p.bind&&p.bind.colspan?p.bind.colspan:1;const m=u+h;for(let A=0;A<n.length;A++){const g=n[A];let v=[];for(let y=0;y<g.children.length;y++){const _=g.children[y];let k=_.bind&&_.bind.colspan?_.bind.colspan:0;if(!_.delete){let w=y+k-1,b=Pe.cloneDeep(yt());if(k>1&&m>=y&&m<=w){_.bind.colspan=_.bind.colspan+1,b.delete=!0,v.push(b);break}}}v.length==0&&v.push(Pe.cloneDeep(yt())),f.push(v)}for(let A=0;A<n.length;A++)n[A].children.splice(m,0,...f[A])}console.log("object :>> ",n);for(let f=0;f<n.length;f++){const p=n[f];if(p.index=f,p.children)for(let h=0;h<p.children.length;h++){const m=p.children[h];m.index=h}}}return n},Xs=(e,t,r,n,o)=>{let l=JSON.parse(JSON.stringify(r));return Object.assign(l[e].children[n].bind,Us(e,t,l,n,o)),Fs(e,t,l,n,o)},qs=(e,t)=>{let r=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];let l=0,a=0,i=0,s=0,u=[],c=[];o.forEach((f,p)=>{const{index:h}=f.dataset;let m=h==null?void 0:h.split(","),A=f.getAttribute("rowspan")?f.getAttribute("rowspan"):0,g=f.getAttribute("colspan")?f.getAttribute("colspan"):0;a=Number(m[0]),l=Number(m[1]),s=a,i=l,A&&(s=Number(A)-1+a),g&&(i=Number(g)-1+l),c.push(Number(a)),c.push(Number(s)),u.push(Number(l)),u.push(Number(i))}),l=Math.min(...u),a=Math.min(...c),i=Math.max(...u),s=Math.max(...c);let d=JSON.parse(JSON.stringify(t));r=Xs(a,s,d,l,i)}return console.log("newData :>> ",r),ba(e),r},yt=()=>({id:We(),style:{width:"auto",height:"auto"},bind:{},type:G.Td}),Mn=()=>({id:We(),style:{width:"auto",height:"auto"},bind:{},type:G.Tr,children:[]});We(),G.Tr,We(),G.Td,We(),G.Td,We(),G.Td;const Ws=(e,t)=>{const r=[];for(let n=0;n<e;n++){let o=Pe.cloneDeep(Mn());o.index=n,o.id=We(),o.type=G.Tr;for(let l=0;l<t;l++){const a=Pe.cloneDeep(yt());a.index=l,a.type=G.Td,a.id=We(),o.children||(o.children=[]),o.children.push(a)}r.push(o)}return r},Ys={install(e){e.component("tableContainer",js)}},Js={class:"aic jcfend toolSetting"},Zs={class:"fd"},Ks={class:"drag-form-right"},Qs={key:1},eu={class:"drag-form-right"},tu={class:"drag-form-right-conetnt"},Do="#18181C",nu="#232323",lr="#e2e2e2",ru=fe({__name:"easy-print",props:{dataSource:{type:Object,default:()=>[]},selectoOption:{type:Object,default:()=>({container:document.body,offset:{x:0,y:0}})},richTextContent:{type:Object,default:()=>({})},webViewLoadingTime:{type:Object,default:4e3},options:{type:Object,default:()=>({width:210,height:297,data:[],model:{},qzOption:{},page:1})}},emits:["handleSave","handlePreview"],setup(e,{emit:t}){const r=C([1,1]),n=t,o=C(1),l=e,a=C(kl);C(null),C(null);const i=C();C(["属性"]);const s=C(ar[1].width),u=C(ar[1].height),c=C(xt(s.value)),d=C(xt(u.value)),f=C(0),p=C(1),h=C(),m=C(!0),A=C({});C(!1);const g=C(!0),v=C(!0),y=C({}),_=C(Ht.Parameter),k=C([{name:"默认值(手写静态参数)",value:Ht.Parameter},{name:"API(外部接口返回预设值)",value:Ht.API}]),w=ie(()=>b.getActiveData),b=qt(),O=Ne(),E=ie(()=>b.getPageData),V=ie(()=>O.getScale),S=()=>{O.setDataSourceType(_.value)},H=C({}),L=C(0),J=C(0),P=C();le(()=>y.value,$=>{if(w.value){nl(y.value,w.value.attrsJson);let B=w.value.attrsJson.find(te=>te.prop=="prop");B&&Oo(H,B.defaultValue,w.value.attrsJson)}},{deep:!0,immediate:!0}),le(()=>l.webViewLoadingTime,$=>{$&&O.setWebViewLoadingTime($)},{deep:!0,immediate:!0}),le(()=>l.richTextContent,$=>{$&&O.setRichTextContent($)},{deep:!0,immediate:!0}),le(()=>l.dataSource,$=>{$&&Array.isArray($)&&$.length>0&&O.setDataCource($)},{deep:!0,immediate:!0});const Se=()=>{c.value=xt(s.value)},ne=()=>{d.value=xt(u.value)};C(0);const D=C({width:0,height:0});le(()=>l.options,$=>{$?($.width&&$.height&&(s.value=$.width?$.width:s.value,u.value=$.height?$.height:u.value),Array.isArray(l.options.data)&&l.options.data.length>=1?b.setPageData(l.options.data):b.setPageData([{id:We(),renderList:[]}]),Array.isArray($.model)?H.value=$.model[0]:$.model&&!Array.isArray($.model)&&(H.value=$.model?$.model:{}),_.value=$.dataSource?$.dataSource:_.value,o.value=$.page?$.page:1):(b.setPageData([{id:We(),renderList:[]}]),H.value={},o.value=1),Se(),ne(),D.value.width=s.value,D.value.height=u.value,b.setPageOption({height:d.value,width:c.value}),b.setPage(et(o.value))},{immediate:!0,deep:!0});const x=C(),I=()=>{n("handlePreview",!0,mo())},X=($,B)=>{let te={prop:""};w.value.attrsJson&&(te=w.value.attrsJson[B]),ft(()=>{ha(w.value,te)})},W=ve({scale:1,isBlack:!1,lines:{h:[],v:[]},thick:20,isShowRuler:!0,isShowReferLine:!0});zl();const N=C(!1),ee=($,B)=>{if(b.setPage($),$>B){let te=$-B;for(let Oe=1;Oe<=te;Oe++)b.addPageData({id:We(),renderList:[]})}else{let te=B-$;for(let Oe=1;Oe<=te;Oe++)b.removePageData()}},Z=()=>{s.value=D.value.width,u.value=D.value.height,ne(),Se(),N.value=!1},Le=$=>{$.type=="custom"?N.value=!0:(s.value=$.width,u.value=$.height,Se(),ne()),D.value.width=s.value,D.value.height=u.value},Re=$=>{O.setScale($.scale),O.setOffset({x:$.x,y:$.y})},nt=$=>Math.floor($*100)+"%";function Xe($){return $/(c.value*V.value)*c.value}function Ke($){return $/(d.value*V.value)*d.value}O.setScaleX(Xe),O.setScaleY(Ke);const F=()=>i.value?i.value.getBoundingClientRect().height-50:500,Y=()=>i.value?i.value.getBoundingClientRect().width-0:1400,K=C(1400),Q=C(500),Ee=$=>{h.value&&h.value.panzoomInstance.zoom($)},ye=C(),_e=($,B)=>{P.value=B};function He($,B,te){return{x:B/$,y:te/$}}const Ie=($,B)=>{let te=He(V.value,$,B),Oe=Math.ceil(te.y/d.value);L.value=$,J.value=B,or(P.value,"x",Xe(L.value)),or(P.value,"y",Xe(J.value)),tl(P.value);let vt=P.value.attrsJson.find(nn=>nn.prop=="prop");vt&&Oo(H,vt.defaultValue,P.value.attrsJson);let Qe=Pe.cloneDeep({...P.value,id:We()});el(Qe),b.setPageDataItem(Qe,Oe-1),P.value={}},Lt=($,B)=>{let te=Ws($,B),Oe=Pe.cloneDeep(ko);or(Oe,"rowColData",te),P.value=Oe,Ie(10,10)},St=($,B)=>{ft(()=>{if(x.value){const te=x.value.$el.getBoundingClientRect(),Oe=Math.floor($.clientX),vt=Math.floor($.clientY);if(Oe>=te.left&&Oe<=te.right&&vt>=te.top&&vt<=te.bottom){let Qe=Oe-te.x,nn=vt-te.y;Ie(Qe,nn)}else console.log("鼠标没有悬浮在指定DOM上方")}})},Qt=()=>{};Je(()=>{setTimeout(()=>{us({scale:O.getScale,selectableTargets:[".targetSelecto"],...l.selectoOption,select:B=>{O.setCurrentSelected(B)}})},200),f.value++,ho(),i.value&&(K.value=Y(),Q.value=F()),window.addEventListener("resize",ii),document.addEventListener("keydown",function(B){var te,Oe;B.code=="Space"&&((te=document.querySelector(".canvas"))==null||te.classList.add("space-key-pressed"),(Oe=$.value)==null||Oe.bind()),B.code=="ControlLeft"&&(O.setControlLeft(!0),b.allDraggable(!1))}),document.addEventListener("keyup",function(B){var te,Oe;B.code=="Space"&&((te=$.value)==null||te.destroy(),(Oe=document.querySelector(".canvas"))==null||Oe.classList.remove("space-key-pressed")),B.code=="ControlLeft"&&(O.setControlLeft(!1),b.allDraggable(!0))});const $=h.value.panzoomInstance;document.addEventListener("wheel",function(B){B.ctrlKey||B.metaKey})});const en=()=>{if(w.value){let $=function(te){return te<1?1:te>d.value*o.value?o.value:Math.floor(te/d.value)+1};w.value.attrsJson.forEach(te=>{(te.prop=="w"||te.prop=="h"||te.prop=="x"||te.prop=="y")&&(y.value[te.prop]=w.value.styles[te.prop])});let B=$(w.value.styles.y);b.updatePageDataItem(w.value,B-1)}},ni=()=>{ft(()=>{en()})},ri=$=>{ft(()=>{en()})},oi=()=>{},ai=$=>{b.setActiveData($),ft(()=>{w.value.attrsJson.forEach(B=>{y.value[B.prop]=B.defaultValue}),y.value.id=$.id})},ii=()=>{h.value&&(ho(),h.value.initPanzoom()),i.value&&(K.value=Y(),Q.value=F())},ho=()=>{const $=Number(window.devicePixelRatio||1);p.value=$.toFixed(2)*1},li=C({h:[],v:[]}),si=ie(()=>({width:"".concat(K.value,"px"),height:"".concat(Q.value,"px")})),po=C("horizontal"),ui=ie(()=>W.isBlack?lr:Do);ie(()=>W.isBlack?Do:lr);const tn=$n("--el-color-primary"),go=$n("--el-color-white");ie(()=>W.isBlack?po.value=="vertical"?"#fff":tn.value:po.value=="vertical"?tn.value:lr);const ci=ie(()=>({bgColor:"#EDEEF3",backgroundSize:"15px 15px, 15px 15px",hoverBg:tn.value,longfgColor:"#BABBBC",fontColor:"#2C2C2C",shadowColor:"#999",lineColor:tn.value,borderColor:"#B5B5B5",cornerActiveColor:"#c48"}));ie(()=>Number(V.value).toFixed(2));const di=ie(()=>({width:"".concat(c.value,"px"),height:"".concat(d.value,"px"),background:W.isBlack?nu:"#fff"})),Kn=C(!0),vo=$=>{Kn.value=$},mo=()=>({width:D.value.width,height:D.value.height,data:E.value,qzOption:{size:{width:D.value.width,height:D.value.height},units:"mm"},page:o.value,dataSource:_.value,model:ol(E.value)}),fi=$=>{n("handleSave",mo())};return($,B)=>{const te=q("el-dropdown-item"),Oe=q("el-dropdown-menu"),vt=q("el-dropdown"),Qe=q("el-button"),nn=q("ElInputNumber"),hi=q("el-text"),pi=q("el-slider"),mn=q("el-form-item"),Qn=q("el-form"),gi=q("el-result"),vi=q("el-option"),mi=q("el-select"),yi=q("el-divider"),yo=q("el-input-number");return T(),se(z(br.DraggableContainer),{grid:r.value,ref_key:"preViewHtmlRef",ref:x,disabled:!0,adsorbParent:!1,referenceLineVisible:!1},{default:R(()=>[U("div",{class:"easyPrint",ref_key:"easyPrintRef",ref:i},[U("div",{class:"easyPringTool",onMousedown:B[2]||(B[2]=$e(()=>{},["stop"]))},[U("div",{class:"easyPrintTop",style:ae({color:z(go)})},[M(vt,{onCommand:Le},{dropdown:R(()=>[M(Oe,null,{default:R(()=>[(T(!0),j(be,null,xe(z(ar),(re,ce)=>(T(),se(te,{command:re,key:ce},{default:R(()=>[ue(De(re.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:R(()=>[U("div",null,[M(z(es),{class:"CP",fill:z(go),style:{width:"18px"}},null,8,["fill"]),M(z(ma),{class:"CP",fill:z(tn),style:{width:"13px","margin-left":"3px"}},null,8,["fill"])])]),_:1}),(T(!0),j(be,null,xe(a.value,re=>(T(),se(Qe,{key:re.title,onMousedown:ce=>_e(ce,re),onDragend:ce=>St(ce),type:"primary",draggable:"true",class:"ml10"},{default:R(()=>[ue(De(re.title),1)]),_:2},1032,["onMousedown","onDragend"]))),128)),M(z(ms),{onHandleTables:Lt},{default:R(()=>[M(Qe,{type:"primary",class:"ml10"},{default:R(()=>[ue(De(z(ko).title),1)]),_:1})]),_:1}),M(Qe,{type:"primary",class:"ml10",onClick:I},{default:R(()=>B[15]||(B[15]=[ue("预览")])),_:1,__:[15]}),M(Qe,{type:"primary",class:"ml10",onClick:fi},{default:R(()=>B[16]||(B[16]=[ue("保存")])),_:1,__:[16]})],4),U("div",Js,[M(z(os),{fill:"#474747",class:"CP mr10",onClick:B[0]||(B[0]=re=>v.value=!v.value),style:{width:"20px"}}),M(z(va),{fill:"#474747",class:"CP",onClick:B[1]||(B[1]=re=>g.value=!g.value),style:{width:"20px"}})])],32),U("div",Zs,[U("div",{class:"wrapper",style:ae(si.value)},[(T(),se(z(Zi),{key:f.value,rate:1,onZoomchange:Re,scale:V.value,"onUpdate:scale":B[6]||(B[6]=re=>V.value=re),thick:W.thick,width:K.value,showRuler:m.value,height:Q.value,palette:ci.value,snapsObj:li.value,canvasWidth:c.value,class:"sketchruleRef",canvasHeight:d.value,panzoomOption:A.value,ref_key:"sketchruleRef",ref:h,isShowReferLine:W.isShowReferLine,lines:W.lines},{default:R(()=>[M(z(br.DraggableContainer),{grid:r.value,onClick:Qt,ref_key:"preViewHtmlRef",ref:x},{default:R(()=>[(T(!0),j(be,null,xe(E.value,re=>(T(),j("div",{"data-type":"page",key:re,class:"canvas",ref_for:!0,ref_key:"DraggableContainerRef",ref:ye,style:ae({...di.value,borderTop:"10px solid #EDEEF3"})},[U("div",null,[(T(!0),j(be,null,xe(re.renderList,(ce,lt)=>(T(),se(z(Rn),{key:lt,x:ce.styles.x,"onUpdate:x":Ce=>ce.styles.x=Ce,onActivated:Ce=>ai(ce),active:ce.styles.active,"onUpdate:active":Ce=>ce.styles.active=Ce,onDragEnd:Ce=>ri(),onDeactivated:Ce=>oi(),style:ae({zIndex:ce.styles.zIndex}),onResizeEnd:Ce=>ni(),y:ce.styles.y,"onUpdate:y":Ce=>ce.styles.y=Ce,w:ce.styles.w,"onUpdate:w":Ce=>ce.styles.w=Ce,resizable:ce.styles.resizable,draggable:ce.styles.draggable,"onUpdate:draggable":Ce=>ce.styles.draggable=Ce,classNameActive:ce.styles.classNameActive,h:ce.styles.h,"onUpdate:h":Ce=>ce.styles.h=Ce,"parent-scale-x":V.value,"parent-scale-y":V.value,minH:1,minW:1,initH:ce.styles.h,initW:ce.styles.w},{default:R(()=>[M(z(ya),{element:ce,model:H.value},null,8,["element","model"])]),_:2},1032,["x","onUpdate:x","onActivated","active","onUpdate:active","onDragEnd","onDeactivated","style","onResizeEnd","y","onUpdate:y","w","onUpdate:w","resizable","draggable","onUpdate:draggable","classNameActive","h","onUpdate:h","parent-scale-x","parent-scale-y","initH","initW"]))),128))])],4))),128))]),_:1},8,["grid"])]),btn:R(({reset:re,zoomIn:ce,zoomOut:lt})=>[U("div",{class:"btns",onMousedown:B[5]||(B[5]=$e(()=>{},["stop"]))},[U("div",null,[B[17]||(B[17]=ue(" 页数 ")),M(nn,{modelValue:o.value,"onUpdate:modelValue":B[3]||(B[3]=Ce=>o.value=Ce),onChange:ee,controlsPosition:"right",min:1,style:{width:"80px","margin-right":"10px"}},null,8,["modelValue"])]),M(hi,{class:"mx-1",style:ae({color:ui.value}),type:"primary"},{default:R(()=>[ue(De(nt(V.value)),1)]),_:1},8,["style"]),M(pi,{min:.3,max:4,step:.1,"format-tooltip":nt,style:{width:"150px","margin-left":"10px"},modelValue:V.value,"onUpdate:modelValue":B[4]||(B[4]=Ce=>V.value=Ce),onInput:Ee},null,8,["modelValue"])],32)]),_:1},8,["scale","thick","width","showRuler","height","palette","snapsObj","canvasWidth","canvasHeight","panzoomOption","isShowReferLine","lines"]))],4),g.value?(T(),se(z(Rn),{key:0,onMousedown:B[7]||(B[7]=$e(()=>{},["stop"])),style:{"z-index":"99"},draggable:Kn.value,classNameActive:"activeNO",x:Y()-280,y:70,w:250,resizable:!1},{default:R(()=>[M(z(Ao),{title:"属性配置",onHandleDraggable:vo},{default:R(()=>[U("div",Ks,[w.value?(T(),j("div",{key:0,class:"drag-form-right-conetnt",style:ae({height:Q.value-100+"px"})},[M(Qn,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef",size:"small",model:y.value},{default:R(()=>[(T(!0),j(be,null,xe(w.value.attrsJson,(re,ce)=>(T(),se(mn,Ct({key:ce},{ref_for:!0},re.formItemAttrs,{prop:re.prop,label:re.label,rules:re.rules}),{default:R(()=>[(T(),se(Ln(re.componentName),Ct({style:{width:"100%"}},{ref_for:!0},{...re.attrs},{modelValue:y.value[re.prop],"onUpdate:modelValue":lt=>y.value[re.prop]=lt,onChange:lt=>X(lt,ce)}),{default:R(()=>[re.children?(T(!0),j(be,{key:0},xe(re.children,(lt,Ce)=>(T(),se(Ln(lt.componentName),Ct({key:Ce},{ref_for:!0},lt),null,16))),128)):Ae("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"]))]),_:2},1040,["prop","label","rules"]))),128))]),_:1},8,["model"])],4)):(T(),j("div",Qs,[M(gi,{icon:"warning",title:"提示","sub-title":"请选中元素设置属性值"})]))])]),_:1})]),_:1},8,["draggable","x"])):Ae("",!0),v.value?(T(),se(z(Rn),{key:1,onMousedown:B[9]||(B[9]=$e(()=>{},["stop"])),style:{"z-index":"99"},draggable:Kn.value,classNameActive:"activeNO",x:20,y:70,w:250,resizable:!1},{default:R(()=>[M(z(Ao),{title:"数据源",onHandleDraggable:vo},{default:R(()=>[U("div",eu,[U("div",tu,[M(Qn,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef",size:"small"},{default:R(()=>[M(mn,{label:"数据源类型"},{default:R(()=>[M(mi,{modelValue:_.value,"onUpdate:modelValue":B[8]||(B[8]=re=>_.value=re),placeholder:"请选择",size:"small",onChange:S},{default:R(()=>[(T(!0),j(be,null,xe(k.value,(re,ce)=>(T(),se(vi,{key:ce,label:re.name,value:re.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},512)])])]),_:1})]),_:1},8,["draggable"])):Ae("",!0)])],512),M(z(Wt),{onMousedown:B[13]||(B[13]=$e(()=>{},["stop"])),modelValue:N.value,"onUpdate:modelValue":B[14]||(B[14]=re=>N.value=re),title:"纸张尺寸设置"},{footer:R(()=>[U("div",null,[M(Qe,{size:"large",onClick:B[12]||(B[12]=re=>N.value=!1)},{default:R(()=>B[19]||(B[19]=[ue("取消")])),_:1,__:[19]}),M(Qe,{size:"large",type:"primary",onClick:Z},{default:R(()=>B[20]||(B[20]=[ue("保存")])),_:1,__:[20]})])]),default:R(()=>[M(yi,{"content-position":"left"},{default:R(()=>B[18]||(B[18]=[ue("纸张尺寸")])),_:1,__:[18]}),M(Qn,{inline:!0,style:{"margin-left":"10px"}},{default:R(()=>[M(mn,{label:"宽(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(yo,{modelValue:D.value.width,"onUpdate:modelValue":B[10]||(B[10]=re=>D.value.width=re),style:{width:"120px"},min:1,placeholder:"请输入尺寸",size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1}),M(mn,{label:"高(mm)",style:{"margin-bottom":"0"}},{default:R(()=>[M(yo,{placeholder:"请输入尺寸",min:1,modelValue:D.value.height,"onUpdate:modelValue":B[11]||(B[11]=re=>D.value.height=re),style:{width:"120px"},size:"small","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["grid"])}}}),ou=ge(ru,[["__scopeId","data-v-496853f1"],["__file","D:/work/public/easy-print/src/packages/easy-print/easy-print.vue"]]),au=fe({__name:"text",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=Ne();ve({data:[]});const n=C();return Je(()=>{n.value.getBoundingClientRect()}),(o,l)=>{const a=q("Popover");return T(),se(a,{style:ae({...z(dn)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:R(()=>[U("div",{ref_key:"textRef",ref:n},De(z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop)),513)]),_:1},8,["style"])}}}),iu=ge(au,[["__scopeId","data-v-3811fa91"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/text.vue"]]),lu=fe({__name:"TwoCode",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){ve({data:[]});const r=Ne();return(n,o)=>{const l=q("vue-qr"),a=q("Popover");return T(),se(a,null,{default:R(()=>[M(l,{style:ae({width:e.element.styles.w-2+"px",height:e.element.styles.h-2+"px"}),text:z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop),logoSrc:e.element.attrs.logoSrc,backgroundColor:e.element.attrs.backgroundColor,size:e.element.attrs.size,correctLevel:e.element.attrs.correctLevel},null,8,["style","text","logoSrc","backgroundColor","size","correctLevel"])]),_:1})}}}),su=ge(lu,[["__scopeId","data-v-68ddaa06"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/TwoCode.vue"]]);var Dr={},Bn={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});function uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cu=function e(t,r){uu(this,e),this.data=t,this.text=r.text||t,this.options=r};Ve.default=cu;Object.defineProperty(Bn,"__esModule",{value:!0});Bn.CODE39=void 0;var du=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),fu=Ve,hu=pu(fu);function pu(e){return e&&e.__esModule?e:{default:e}}function gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yu=function(e){mu(t,e);function t(r,n){return gu(this,t),r=r.toUpperCase(),n.mod43&&(r+=wu(Eu(r))),vu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return du(t,[{key:"encode",value:function(){for(var n=sr("*"),o=0;o<this.data.length;o++)n+=sr(this.data[o])+"0";return n+=sr("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),t}(hu.default),_a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],bu=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function sr(e){return _u(wa(e))}function _u(e){return bu[e].toString(2)}function wu(e){return _a[e]}function wa(e){return _a.indexOf(e)}function Eu(e){for(var t=0,r=0;r<e.length;r++)t+=wa(e[r]);return t=t%43,t}Bn.CODE39=yu;var at={},Ir={},Yt={},we={};Object.defineProperty(we,"__esModule",{value:!0});var rn;function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ea=we.SET_A=0,Sa=we.SET_B=1,Oa=we.SET_C=2;we.SHIFT=98;var Su=we.START_A=103,Ou=we.START_B=104,xu=we.START_C=105;we.MODULO=103;we.STOP=106;we.FNC1=207;we.SET_BY_CODE=(rn={},ur(rn,Su,Ea),ur(rn,Ou,Sa),ur(rn,xu,Oa),rn);we.SWAP={101:Ea,100:Sa,99:Oa};we.A_START_CHAR="Ð";we.B_START_CHAR="Ñ";we.C_START_CHAR="Ò";we.A_CHARS="[\0-_È-Ï]";we.B_CHARS="[ -È-Ï]";we.C_CHARS="(Ï*[0-9]{2}Ï*)";we.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Yt,"__esModule",{value:!0});var ku=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Cu=Ve,Au=Pu(Cu),Ue=we;function Pu(e){return e&&e.__esModule?e:{default:e}}function Du(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Tu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ru=function(e){Tu(t,e);function t(r,n){Du(this,t);var o=Iu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.substring(1),n));return o.bytes=r.split("").map(function(l){return l.charCodeAt(0)}),o}return ku(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,o=n.shift()-105,l=Ue.SET_BY_CODE[o];if(l===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(Ue.FNC1);var a=t.next(n,1,l);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(o)+a.result+t.getBar((a.checksum+o)%Ue.MODULO)+t.getBar(Ue.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return Ue.BARS[n]?Ue.BARS[n].toString():""}},{key:"correctIndex",value:function(n,o){if(o===Ue.SET_A){var l=n.shift();return l<32?l+64:l-32}else return o===Ue.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,o,l){if(!n.length)return{result:"",checksum:0};var a=void 0,i=void 0;if(n[0]>=200){i=n.shift()-105;var s=Ue.SWAP[i];s!==void 0?a=t.next(n,o+1,s):((l===Ue.SET_A||l===Ue.SET_B)&&i===Ue.SHIFT&&(n[0]=l===Ue.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),a=t.next(n,o+1,l))}else i=t.correctIndex(n,l),a=t.next(n,o+1,l);var u=t.getBar(i),c=i*o;return{result:u+a.result,checksum:c+a.checksum}}}]),t}(Au.default);Yt.default=Ru;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});var wt=we,xa=function(t){return t.match(new RegExp("^"+wt.A_CHARS+"*"))[0].length},ka=function(t){return t.match(new RegExp("^"+wt.B_CHARS+"*"))[0].length},Ca=function(t){return t.match(new RegExp("^"+wt.C_CHARS+"*"))[0]};function Rr(e,t){var r=t?wt.A_CHARS:wt.B_CHARS,n=e.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+"Ì"+Aa(e.substring(n[1].length));var o=e.match(new RegExp("^"+r+"+"))[0];return o.length===e.length?e:o+String.fromCharCode(t?205:206)+Rr(e.substring(o.length),!t)}function Aa(e){var t=Ca(e),r=t.length;if(r===e.length)return e;e=e.substring(r);var n=xa(e)>=ka(e);return t+String.fromCharCode(n?206:205)+Rr(e,n)}Tr.default=function(e){var t=void 0,r=Ca(e).length;if(r>=2)t=wt.C_START_CHAR+Aa(e);else{var n=xa(e)>ka(e);t=(n?wt.A_START_CHAR:wt.B_START_CHAR)+Rr(e,n)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,l){return"Ë"+l})};Object.defineProperty(Ir,"__esModule",{value:!0});var Mu=Yt,Lu=Pa(Mu),$u=Tr,Bu=Pa($u);function Pa(e){return e&&e.__esModule?e:{default:e}}function Nu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Vu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zu=function(e){Vu(t,e);function t(r,n){if(Nu(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var o=cr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,Bu.default)(r),n));else var o=cr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return cr(o)}return t}(Lu.default);Ir.default=zu;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});var ju=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Hu=Yt,Uu=Fu(Hu),Io=we;function Fu(e){return e&&e.__esModule?e:{default:e}}function Gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Wu=function(e){qu(t,e);function t(r,n){return Gu(this,t),Xu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Io.A_START_CHAR+r,n))}return ju(t,[{key:"valid",value:function(){return new RegExp("^"+Io.A_CHARS+"+$").test(this.data)}}]),t}(Uu.default);Mr.default=Wu;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});var Yu=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ju=Yt,Zu=Ku(Ju),To=we;function Ku(e){return e&&e.__esModule?e:{default:e}}function Qu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ec(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nc=function(e){tc(t,e);function t(r,n){return Qu(this,t),ec(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,To.B_START_CHAR+r,n))}return Yu(t,[{key:"valid",value:function(){return new RegExp("^"+To.B_CHARS+"+$").test(this.data)}}]),t}(Zu.default);Lr.default=nc;var $r={};Object.defineProperty($r,"__esModule",{value:!0});var rc=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),oc=Yt,ac=ic(oc),Ro=we;function ic(e){return e&&e.__esModule?e:{default:e}}function lc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cc=function(e){uc(t,e);function t(r,n){return lc(this,t),sc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Ro.C_START_CHAR+r,n))}return rc(t,[{key:"valid",value:function(){return new RegExp("^"+Ro.C_CHARS+"+$").test(this.data)}}]),t}(ac.default);$r.default=cc;Object.defineProperty(at,"__esModule",{value:!0});at.CODE128C=at.CODE128B=at.CODE128A=at.CODE128=void 0;var dc=Ir,fc=Nn(dc),hc=Mr,pc=Nn(hc),gc=Lr,vc=Nn(gc),mc=$r,yc=Nn(mc);function Nn(e){return e&&e.__esModule?e:{default:e}}at.CODE128=fc.default;at.CODE128A=pc.default;at.CODE128B=vc.default;at.CODE128C=yc.default;var ze={},Br={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.SIDE_BIN="101";Ze.MIDDLE_BIN="01010";Ze.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Ze.EAN2_STRUCTURE=["LL","LG","GL","GG"];Ze.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Ze.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Vn={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var bc=Ze,_c=function(t,r,n){var o=t.split("").map(function(a,i){return bc.BINARIES[r[i]]}).map(function(a,i){return a?a[t[i]]:""});if(n){var l=t.length-1;o=o.map(function(a,i){return i<l?a+n:a})}return o.join("")};Tt.default=_c;Object.defineProperty(Vn,"__esModule",{value:!0});var wc=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),$t=Ze,Ec=Tt,Mo=Da(Ec),Sc=Ve,Oc=Da(Sc);function Da(e){return e&&e.__esModule?e:{default:e}}function xc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ac=function(e){Cc(t,e);function t(r,n){xc(this,t);var o=kc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return o.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return wc(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,o){return this.text.substr(n,o)}},{key:"leftEncode",value:function(n,o){return(0,Mo.default)(n,o)}},{key:"rightText",value:function(n,o){return this.text.substr(n,o)}},{key:"rightEncode",value:function(n,o){return(0,Mo.default)(n,o)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},o={height:this.guardHeight};return[{data:$t.SIDE_BIN,options:o},{data:this.leftEncode(),text:this.leftText(),options:n},{data:$t.MIDDLE_BIN,options:o},{data:this.rightEncode(),text:this.rightText(),options:n},{data:$t.SIDE_BIN,options:o}]}},{key:"encodeFlat",value:function(){var n=[$t.SIDE_BIN,this.leftEncode(),$t.MIDDLE_BIN,this.rightEncode(),$t.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),t}(Oc.default);Vn.default=Ac;Object.defineProperty(Br,"__esModule",{value:!0});var Pc=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),on=function e(t,r,n){t===null&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(o===void 0){var l=Object.getPrototypeOf(t);return l===null?void 0:e(l,r,n)}else{if("value"in o)return o.value;var a=o.get;return a===void 0?void 0:a.call(n)}},Dc=Ze,Ic=Vn,Tc=Rc(Ic);function Rc(e){return e&&e.__esModule?e:{default:e}}function Mc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function $c(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Lo=function(t){var r=t.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,o,l){return l%2?n+o*3:n+o},0);return(10-r%10)%10},Bc=function(e){$c(t,e);function t(r,n){Mc(this,t),r.search(/^[0-9]{12}$/)!==-1&&(r+=Lo(r));var o=Lc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return o.lastChar=n.lastChar,o}return Pc(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===Lo(this.data)}},{key:"leftText",value:function(){return on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),o=Dc.EAN13_STRUCTURE[this.data[0]];return on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,n,o)}},{key:"rightText",value:function(){return on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),t}(Tc.default);Br.default=Bc;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});var Nc=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),On=function e(t,r,n){t===null&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(o===void 0){var l=Object.getPrototypeOf(t);return l===null?void 0:e(l,r,n)}else{if("value"in o)return o.value;var a=o.get;return a===void 0?void 0:a.call(n)}},Vc=Vn,zc=jc(Vc);function jc(e){return e&&e.__esModule?e:{default:e}}function Hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $o=function(t){var r=t.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,o,l){return l%2?n+o:n+o*3},0);return(10-r%10)%10},Gc=function(e){Fc(t,e);function t(r,n){return Hc(this,t),r.search(/^[0-9]{7}$/)!==-1&&(r+=$o(r)),Uc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Nc(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===$o(this.data)}},{key:"leftText",value:function(){return On(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return On(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return On(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return On(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),t}(zc.default);Nr.default=Gc;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});var Xc=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),qc=Ze,Wc=Tt,Yc=Ia(Wc),Jc=Ve,Zc=Ia(Jc);function Ia(e){return e&&e.__esModule?e:{default:e}}function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ed(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var td=function(t){var r=t.split("").map(function(n){return+n}).reduce(function(n,o,l){return l%2?n+o*9:n+o*3},0);return r%10},nd=function(e){ed(t,e);function t(r,n){return Kc(this,t),Qc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Xc(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=qc.EAN5_STRUCTURE[td(this.data)];return{data:"1011"+(0,Yc.default)(this.data,n,"01"),text:this.text}}}]),t}(Zc.default);Vr.default=nd;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});var rd=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),od=Ze,ad=Tt,id=Ta(ad),ld=Ve,sd=Ta(ld);function Ta(e){return e&&e.__esModule?e:{default:e}}function ud(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function dd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fd=function(e){dd(t,e);function t(r,n){return ud(this,t),cd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return rd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=od.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,id.default)(this.data,n,"01"),text:this.text}}}]),t}(sd.default);zr.default=fd;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});var hd=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();fn.checksum=Or;var pd=Tt,Bt=Ra(pd),gd=Ve,vd=Ra(gd);function Ra(e){return e&&e.__esModule?e:{default:e}}function md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _d=function(e){bd(t,e);function t(r,n){md(this,t),r.search(/^[0-9]{11}$/)!==-1&&(r+=Or(r));var o=yd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return o.displayValue=n.displayValue,n.fontSize>n.width*10?o.fontSize=n.width*10:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return hd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Or(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,Bt.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,Bt.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,Bt.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,Bt.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,Bt.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,Bt.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),t}(vd.default);function Or(e){var t=0,r;for(r=1;r<11;r+=2)t+=parseInt(e[r]);for(r=0;r<11;r+=2)t+=parseInt(e[r])*3;return(10-t%10)%10}fn.default=_d;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});var wd=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ed=Tt,Sd=Ma(Ed),Od=Ve,xd=Ma(Od),kd=fn;function Ma(e){return e&&e.__esModule?e:{default:e}}function Cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ad(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pd=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Dd=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Id=function(e){Ad(t,e);function t(r,n){Cd(this,t);var o=dr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));if(o.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)o.middleDigits=r,o.upcA=Bo(r,"0"),o.text=n.text||""+o.upcA[0]+r+o.upcA[o.upcA.length-1],o.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=r.substring(1,r.length-1),o.upcA=Bo(o.middleDigits,r[0]),o.upcA[o.upcA.length-1]===r[r.length-1])o.isValid=!0;else return dr(o);else return dr(o);return o.displayValue=n.displayValue,n.fontSize>n.width*10?o.fontSize=n.width*10:o.fontSize=n.fontSize,o.guardHeight=n.height+o.fontSize/2+n.textMargin,o}return wd(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],o=this.upcA[this.upcA.length-1],l=Dd[parseInt(o)][parseInt(n)];return(0,Sd.default)(this.middleDigits,l)}}]),t}(xd.default);function Bo(e,t){for(var r=parseInt(e[e.length-1]),n=Pd[r],o="",l=0,a=0;a<n.length;a++){var i=n[a];i==="X"?o+=e[l++]:o+=i}return o=""+t+o,""+o+(0,kd.checksum)(o)}jr.default=Id;Object.defineProperty(ze,"__esModule",{value:!0});ze.UPCE=ze.UPC=ze.EAN2=ze.EAN5=ze.EAN8=ze.EAN13=void 0;var Td=Br,Rd=Jt(Td),Md=Nr,Ld=Jt(Md),$d=Vr,Bd=Jt($d),Nd=zr,Vd=Jt(Nd),zd=fn,jd=Jt(zd),Hd=jr,Ud=Jt(Hd);function Jt(e){return e&&e.__esModule?e:{default:e}}ze.EAN13=Rd.default;ze.EAN8=Ld.default;ze.EAN5=Bd.default;ze.EAN2=Vd.default;ze.UPC=jd.default;ze.UPCE=Ud.default;var Ft={},zn={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.START_BIN="1010";hn.END_BIN="11101";hn.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(zn,"__esModule",{value:!0});var Fd=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),xn=hn,Gd=Ve,Xd=qd(Gd);function qd(e){return e&&e.__esModule?e:{default:e}}function Wd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Jd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zd=function(e){Jd(t,e);function t(){return Wd(this,t),Yd(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fd(t,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,o=this.data.match(/.{2}/g).map(function(l){return n.encodePair(l)}).join("");return{data:xn.START_BIN+o+xn.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var o=xn.BINARIES[n[1]];return xn.BINARIES[n[0]].split("").map(function(l,a){return(l==="1"?"111":"1")+(o[a]==="1"?"000":"0")}).join("")}}]),t}(Xd.default);zn.default=Zd;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});var Kd=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Qd=zn,ef=tf(Qd);function tf(e){return e&&e.__esModule?e:{default:e}}function nf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function of(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var No=function(t){var r=t.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,o,l){return n+o*(3-l%2*2)},0);return Math.ceil(r/10)*10-r},af=function(e){of(t,e);function t(r,n){return nf(this,t),r.search(/^[0-9]{13}$/)!==-1&&(r+=No(r)),rf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return Kd(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===No(this.data)}}]),t}(ef.default);Hr.default=af;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.ITF14=Ft.ITF=void 0;var lf=zn,sf=La(lf),uf=Hr,cf=La(uf);function La(e){return e&&e.__esModule?e:{default:e}}Ft.ITF=sf.default;Ft.ITF14=cf.default;var qe={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var df=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ff=Ve,hf=pf(ff);function pf(e){return e&&e.__esModule?e:{default:e}}function gf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yf=function(e){mf(t,e);function t(r,n){return gf(this,t),vf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return df(t,[{key:"encode",value:function(){for(var n="110",o=0;o<this.data.length;o++){var l=parseInt(this.data[o]),a=l.toString(2);a=bf(a,4-a.length);for(var i=0;i<a.length;i++)n+=a[i]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),t}(hf.default);function bf(e,t){for(var r=0;r<t;r++)e="0"+e;return e}Rt.default=yf;var Ur={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.mod10=_f;Mt.mod11=wf;function _f(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2===0?t+=n:t+=n*2%10+Math.floor(n*2/10)}return(10-t%10)%10}function wf(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var o=parseInt(e[e.length-1-n]);t+=r[n%r.length]*o}return(11-t%11)%11}Object.defineProperty(Ur,"__esModule",{value:!0});var Ef=Rt,Sf=xf(Ef),Of=Mt;function xf(e){return e&&e.__esModule?e:{default:e}}function kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Af(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pf=function(e){Af(t,e);function t(r,n){return kf(this,t),Cf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r+(0,Of.mod10)(r),n))}return t}(Sf.default);Ur.default=Pf;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});var Df=Rt,If=Rf(Df),Tf=Mt;function Rf(e){return e&&e.__esModule?e:{default:e}}function Mf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function $f(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bf=function(e){$f(t,e);function t(r,n){return Mf(this,t),Lf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r+(0,Tf.mod11)(r),n))}return t}(If.default);Fr.default=Bf;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});var Nf=Rt,Vf=zf(Nf),Vo=Mt;function zf(e){return e&&e.__esModule?e:{default:e}}function jf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Uf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ff=function(e){Uf(t,e);function t(r,n){return jf(this,t),r+=(0,Vo.mod10)(r),r+=(0,Vo.mod10)(r),Hf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return t}(Vf.default);Gr.default=Ff;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});var Gf=Rt,Xf=qf(Gf),zo=Mt;function qf(e){return e&&e.__esModule?e:{default:e}}function Wf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Jf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zf=function(e){Jf(t,e);function t(r,n){return Wf(this,t),r+=(0,zo.mod11)(r),r+=(0,zo.mod10)(r),Yf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return t}(Xf.default);Xr.default=Zf;Object.defineProperty(qe,"__esModule",{value:!0});qe.MSI1110=qe.MSI1010=qe.MSI11=qe.MSI10=qe.MSI=void 0;var Kf=Rt,Qf=pn(Kf),e1=Ur,t1=pn(e1),n1=Fr,r1=pn(n1),o1=Gr,a1=pn(o1),i1=Xr,l1=pn(i1);function pn(e){return e&&e.__esModule?e:{default:e}}qe.MSI=Qf.default;qe.MSI10=t1.default;qe.MSI11=r1.default;qe.MSI1010=a1.default;qe.MSI1110=l1.default;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.pharmacode=void 0;var s1=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u1=Ve,c1=d1(u1);function d1(e){return e&&e.__esModule?e:{default:e}}function f1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function p1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g1=function(e){p1(t,e);function t(r,n){f1(this,t);var o=h1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return o.number=parseInt(r,10),o}return s1(t,[{key:"encode",value:function(){for(var n=this.number,o="";!isNaN(n)&&n!=0;)n%2===0?(o="11100"+o,n=(n-2)/2):(o="100"+o,n=(n-1)/2);return o=o.slice(0,-2),{data:o,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(c1.default);jn.pharmacode=g1;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.codabar=void 0;var v1=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m1=Ve,y1=b1(m1);function b1(e){return e&&e.__esModule?e:{default:e}}function _1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function E1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S1=function(e){E1(t,e);function t(r,n){_1(this,t),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var o=w1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.toUpperCase(),n));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return v1(t,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],o=this.getEncodings(),l=0;l<this.data.length;l++)n.push(o[this.data.charAt(l)]),l!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(y1.default);Hn.codabar=S1;var Gt={},Un={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","ÿ"];gn.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];gn.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(Un,"__esModule",{value:!0});var O1=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),kn=gn,x1=Ve,k1=C1(x1);function C1(e){return e&&e.__esModule?e:{default:e}}function A1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function D1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I1=function(e){D1(t,e);function t(r,n){return A1(this,t),P1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return O1(t,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(i){return kn.MULTI_SYMBOLS[i]||i}),o=n.map(function(i){return t.getEncoding(i)}).join(""),l=t.checksum(n,20),a=t.checksum(n.concat(l),15);return{text:this.text,data:t.getEncoding("ÿ")+o+t.getEncoding(l)+t.getEncoding(a)+t.getEncoding("ÿ")+"1"}}}],[{key:"getEncoding",value:function(n){return kn.BINARIES[t.symbolValue(n)]}},{key:"getSymbol",value:function(n){return kn.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return kn.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,o){var l=n.slice().reverse().reduce(function(a,i,s){var u=s%o+1;return a+t.symbolValue(i)*u},0);return t.getSymbol(l%47)}}]),t}(k1.default);Un.default=I1;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});var T1=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),R1=Un,M1=L1(R1);function L1(e){return e&&e.__esModule?e:{default:e}}function $1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function N1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V1=function(e){N1(t,e);function t(r,n){return $1(this,t),B1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return T1(t,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),t}(M1.default);qr.default=V1;Object.defineProperty(Gt,"__esModule",{value:!0});Gt.CODE93FullASCII=Gt.CODE93=void 0;var z1=Un,j1=$a(z1),H1=qr,U1=$a(H1);function $a(e){return e&&e.__esModule?e:{default:e}}Gt.CODE93=j1.default;Gt.CODE93FullASCII=U1.default;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.GenericBarcode=void 0;var F1=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),G1=Ve,X1=q1(G1);function q1(e){return e&&e.__esModule?e:{default:e}}function W1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function J1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Z1=function(e){J1(t,e);function t(r,n){return W1(this,t),Y1(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n))}return F1(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(X1.default);Fn.GenericBarcode=Z1;Object.defineProperty(Dr,"__esModule",{value:!0});var K1=Bn,Cn=at,Nt=ze,jo=Ft,an=qe,Q1=jn,e0=Hn,Ho=Gt,t0=Fn;Dr.default={CODE39:K1.CODE39,CODE128:Cn.CODE128,CODE128A:Cn.CODE128A,CODE128B:Cn.CODE128B,CODE128C:Cn.CODE128C,EAN13:Nt.EAN13,EAN8:Nt.EAN8,EAN5:Nt.EAN5,EAN2:Nt.EAN2,UPC:Nt.UPC,UPCE:Nt.UPCE,ITF14:jo.ITF14,ITF:jo.ITF,MSI:an.MSI,MSI10:an.MSI10,MSI11:an.MSI11,MSI1010:an.MSI1010,MSI1110:an.MSI1110,pharmacode:Q1.pharmacode,codabar:e0.codabar,CODE93:Ho.CODE93,CODE93FullASCII:Ho.CODE93FullASCII,GenericBarcode:t0.GenericBarcode};var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});var n0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};Zt.default=function(e,t){return n0({},e,t)};var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.default=r0;function r0(e){var t=[];function r(n){if(Array.isArray(n))for(var o=0;o<n.length;o++)r(n[o]);else n.text=n.text||"",n.data=n.data||"",t.push(n)}return r(e),t}var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.default=o0;function o0(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}var Jr={},Zr={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.default=a0;function a0(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&(r=t[r],typeof e[r]=="string"&&(e[r]=parseInt(e[r],10)));return typeof e.displayValue=="string"&&(e.displayValue=e.displayValue!="false"),e}var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});var i0={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Xn.default=i0;Object.defineProperty(Zr,"__esModule",{value:!0});var l0=Gn,s0=Ba(l0),u0=Xn,Uo=Ba(u0);function Ba(e){return e&&e.__esModule?e:{default:e}}function c0(e){var t={};for(var r in Uo.default)Uo.default.hasOwnProperty(r)&&(e.hasAttribute("jsbarcode-"+r.toLowerCase())&&(t[r]=e.getAttribute("jsbarcode-"+r.toLowerCase())),e.hasAttribute("data-"+r.toLowerCase())&&(t[r]=e.getAttribute("data-"+r.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,s0.default)(t),t}Zr.default=c0;var Kr={},Qr={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.getTotalWidthOfEncodings=Ge.calculateEncodingAttributes=Ge.getBarcodePadding=Ge.getEncodingHeight=Ge.getMaximumHeightOfEncodings=void 0;var d0=Zt,f0=h0(d0);function h0(e){return e&&e.__esModule?e:{default:e}}function Na(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function Va(e,t,r){if(r.displayValue&&t<e){if(r.textAlign=="center")return Math.floor((e-t)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(e-t)}return 0}function p0(e,t,r){for(var n=0;n<e.length;n++){var o=e[n],l=(0,f0.default)(t,o.options),a;l.displayValue?a=m0(o.text,l,r):a=0;var i=o.data.length*l.width;o.width=Math.ceil(Math.max(a,i)),o.height=Na(o,l),o.barcodePadding=Va(a,i,l)}}function g0(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t}function v0(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t}function m0(e,t,r){var n;if(r)n=r;else if(typeof document<"u")n=document.createElement("canvas").getContext("2d");else return 0;n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var o=n.measureText(e);if(!o)return 0;var l=o.width;return l}Ge.getMaximumHeightOfEncodings=v0;Ge.getEncodingHeight=Na;Ge.getBarcodePadding=Va;Ge.calculateEncodingAttributes=p0;Ge.getTotalWidthOfEncodings=g0;Object.defineProperty(Qr,"__esModule",{value:!0});var y0=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),b0=Zt,_0=w0(b0),fr=Ge;function w0(e){return e&&e.__esModule?e:{default:e}}function E0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var S0=function(){function e(t,r,n){E0(this,e),this.canvas=t,this.encodings=r,this.options=n}return y0(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,_0.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,fr.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,fr.getTotalWidthOfEncodings)(this.encodings),o=(0,fr.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=o,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var o=this.canvas.getContext("2d"),l=n.data,a;r.textPosition=="top"?a=r.marginTop+r.fontSize+r.textMargin:a=r.marginTop,o.fillStyle=r.lineColor;for(var i=0;i<l.length;i++){var s=i*r.width+n.barcodePadding;l[i]==="1"?o.fillRect(s,a,r.width,r.height):l[i]&&o.fillRect(s,a,r.width,r.height*l[i])}}},{key:"drawCanvasText",value:function(r,n){var o=this.canvas.getContext("2d"),l=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var a,i;r.textPosition=="top"?i=r.marginTop+r.fontSize-r.textMargin:i=r.height+r.textMargin+r.marginTop+r.fontSize,o.font=l,r.textAlign=="left"||n.barcodePadding>0?(a=0,o.textAlign="left"):r.textAlign=="right"?(a=n.width-1,o.textAlign="right"):(a=n.width/2,o.textAlign="center"),o.fillText(n.text,a,i)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),e}();Qr.default=S0;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var O0=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),x0=Zt,k0=C0(x0),hr=Ge;function C0(e){return e&&e.__esModule?e:{default:e}}function A0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var An="http://www.w3.org/2000/svg",P0=function(){function e(t,r,n){A0(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return O0(e,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var o=this.encodings[n],l=(0,k0.default)(this.options,o.options),a=this.createGroup(r,l.marginTop,this.svg);this.setGroupOptions(a,l),this.drawSvgBarcode(a,l,o),this.drawSVGText(a,l,o),r+=o.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,hr.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,hr.getTotalWidthOfEncodings)(this.encodings),n=(0,hr.getMaximumHeightOfEncodings)(this.encodings),o=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(o,n),this.options.background&&this.drawRect(0,0,o,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,o){var l=o.data,a;n.textPosition=="top"?a=n.fontSize+n.textMargin:a=0;for(var i=0,s=0,u=0;u<l.length;u++)s=u*n.width+o.barcodePadding,l[u]==="1"?i++:i>0&&(this.drawRect(s-n.width*i,a,n.width*i,n.height,r),i=0);i>0&&this.drawRect(s-n.width*(i-1),a,n.width*i,n.height,r)}},{key:"drawSVGText",value:function(r,n,o){var l=this.document.createElementNS(An,"text");if(n.displayValue){var a,i;l.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?i=n.fontSize-n.textMargin:i=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||o.barcodePadding>0?(a=0,l.setAttribute("text-anchor","start")):n.textAlign=="right"?(a=o.width-1,l.setAttribute("text-anchor","end")):(a=o.width/2,l.setAttribute("text-anchor","middle")),l.setAttribute("x",a),l.setAttribute("y",i),l.appendChild(this.document.createTextNode(o.text)),r.appendChild(l)}}},{key:"setSvgAttributes",value:function(r,n){var o=this.svg;o.setAttribute("width",r+"px"),o.setAttribute("height",n+"px"),o.setAttribute("x","0px"),o.setAttribute("y","0px"),o.setAttribute("viewBox","0 0 "+r+" "+n),o.setAttribute("xmlns",An),o.setAttribute("version","1.1"),o.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,o){var l=this.document.createElementNS(An,"g");return l.setAttribute("transform","translate("+r+", "+n+")"),o.appendChild(l),l}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,o,l,a){var i=this.document.createElementNS(An,"rect");return i.setAttribute("x",r),i.setAttribute("y",n),i.setAttribute("width",o),i.setAttribute("height",l),a.appendChild(i),i}}]),e}();eo.default=P0;var to={};Object.defineProperty(to,"__esModule",{value:!0});var D0=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function I0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var T0=function(){function e(t,r,n){I0(this,e),this.object=t,this.encodings=r,this.options=n}return D0(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();to.default=T0;Object.defineProperty(Kr,"__esModule",{value:!0});var R0=Qr,M0=no(R0),L0=eo,$0=no(L0),B0=to,N0=no(B0);function no(e){return e&&e.__esModule?e:{default:e}}Kr.default={CanvasRenderer:M0.default,SVGRenderer:$0.default,ObjectRenderer:N0.default};var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ao(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var V0=function(e){ao(t,e);function t(r,n){ro(this,t);var o=oo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.name="InvalidInputException",o.symbology=r,o.input=n,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return t}(Error),z0=function(e){ao(t,e);function t(){ro(this,t);var r=oo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return t}(Error),j0=function(e){ao(t,e);function t(){ro(this,t);var r=oo(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return t}(Error);Kt.InvalidInputException=V0;Kt.InvalidElementException=z0;Kt.NoElementException=j0;Object.defineProperty(Jr,"__esModule",{value:!0});var H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0=Zr,xr=za(U0),F0=Kr,sn=za(F0),G0=Kt;function za(e){return e&&e.__esModule?e:{default:e}}function io(e){if(typeof e=="string")return X0(e);if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(io(e[r]));return t}else{if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLImageElement)return q0(e);if(e&&e.nodeName&&e.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&e instanceof SVGElement)return{element:e,options:(0,xr.default)(e),renderer:sn.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement)return{element:e,options:(0,xr.default)(e),renderer:sn.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:sn.default.CanvasRenderer};if(e&&(typeof e>"u"?"undefined":H0(e))==="object"&&!e.nodeName)return{element:e,renderer:sn.default.ObjectRenderer};throw new G0.InvalidElementException}}function X0(e){var t=document.querySelectorAll(e);if(t.length!==0){for(var r=[],n=0;n<t.length;n++)r.push(io(t[n]));return r}}function q0(e){var t=document.createElement("canvas");return{element:t,options:(0,xr.default)(e),renderer:sn.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}Jr.default=io;var lo={};Object.defineProperty(lo,"__esModule",{value:!0});var W0=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Y0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var J0=function(){function e(t){Y0(this,e),this.api=t}return W0(e,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(o){return this.handleCatch(o),this.api}}}]),e}();lo.default=J0;var Z0=Dr,Pt=Et(Z0),K0=Zt,vn=Et(K0),Q0=Wr,ja=Et(Q0),eh=Yr,Fo=Et(eh),th=Jr,nh=Et(th),rh=Gn,oh=Et(rh),ah=lo,ih=Et(ah),Ha=Kt,lh=Xn,Ua=Et(lh);function Et(e){return e&&e.__esModule?e:{default:e}}var ht=function(){},qn=function(t,r,n){var o=new ht;if(typeof t>"u")throw Error("No element to render on was provided.");return o._renderProperties=(0,nh.default)(t),o._encodings=[],o._options=Ua.default,o._errorHandler=new ih.default(o),typeof r<"u"&&(n=n||{},n.format||(n.format=Ga()),o.options(n)[n.format](r,n).render()),o};qn.getModule=function(e){return Pt.default[e]};for(var Go in Pt.default)Pt.default.hasOwnProperty(Go)&&sh(Pt.default,Go);function sh(e,t){ht.prototype[t]=ht.prototype[t.toUpperCase()]=ht.prototype[t.toLowerCase()]=function(r,n){var o=this;return o._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text>"u"?void 0:""+n.text;var l=(0,vn.default)(o._options,n);l=(0,oh.default)(l);var a=e[t],i=Fa(r,a,l);return o._encodings.push(i),o})}}function Fa(e,t,r){e=""+e;var n=new t(e,r);if(!n.valid())throw new Ha.InvalidInputException(n.constructor.name,e);var o=n.encode();o=(0,ja.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,vn.default)(r,o[l].options);return o}function Ga(){return Pt.default.CODE128?"CODE128":Object.keys(Pt.default)[0]}ht.prototype.options=function(e){return this._options=(0,vn.default)(this._options,e),this};ht.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this};ht.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var e;for(var t in this._renderProperties){e=this._renderProperties[t];var r=(0,vn.default)(this._options,e.options);r.format=="auto"&&(r.format=Ga()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,o=Pt.default[r.format.toUpperCase()],l=Fa(n,o,r);kr(e,l,r)})}}};ht.prototype.render=function(){if(!this._renderProperties)throw new Ha.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)kr(this._renderProperties[e],this._encodings,this._options);else kr(this._renderProperties,this._encodings,this._options);return this};ht.prototype._defaults=Ua.default;function kr(e,t,r){t=(0,ja.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,vn.default)(r,t[n].options),(0,Fo.default)(t[n].options);(0,Fo.default)(r);var o=e.renderer,l=new o(e.element,t,r);l.render(),e.afterRender&&e.afterRender()}typeof window<"u"&&(window.JsBarcode=qn);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),qn(r,e,t)});var uh=qn;const ch=Es(uh),dh=fe({__name:"BarCode",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){ve({data:[]});const r=Ne(),n=e;C(),le(()=>n.element,l=>{l&&(console.log("手动更新测试"),ft(()=>{const a=n.element;a.id&&ch(o.value,r.getRenderType==""?a.attrs.defaultValue:pt(n.model,a.prop),{format:a.attrs.format,lineColor:a.attrs.lineColor,width:a.attrs.width,margin:a.attrs.margin,fontSize:a.attrs.fontSize,displayValue:a.attrs.displayValue,height:a.attrs.height})}))},{deep:!0,immediate:!0});const o=C(null);return Je(()=>{}),(l,a)=>{const i=q("Popover");return T(),se(i,null,{default:R(()=>[U("img",{style:ae({width:e.element.styles.w-2+"px",height:e.element.styles.h-2+"px"}),ref_key:"barcodeRef",ref:o},null,4)]),_:1})}}}),fh=ge(dh,[["__scopeId","data-v-dd453d58"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/BarCode.vue"]]),hh=["src"],ph=fe({__name:"Image",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=Ne();return ve({data:[]}),(n,o)=>{const l=q("Popover");return T(),se(l,null,{default:R(()=>[(z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop))?(T(),j("img",{key:0,style:ae({width:e.element.styles.w+"px",height:e.element.styles.h+"px"}),src:z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop),alt:"",objectfit:"cover"},null,12,hh)):Ae("",!0)]),_:1})}}}),gh=ge(ph,[["__scopeId","data-v-ebe8edf2"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/Image.vue"]]),vh=fe({__name:"uploadImg",props:{element:{type:Object,required:!0,default:()=>({})},fileType:{type:Array,default:()=>["png","jpg","jpeg"]},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=t,n=C(!1),o=C([]),l=C([]),a=e;ve({data:[]});const i=d=>{o.value=[d.url],n.value=!0},s=d=>{r("update:modelValue",""),r("change","")};le(()=>a.modelValue,d=>{d&&(l.value=[{name:d,url:d}])},{deep:!0,immediate:!0});const u=(d,f)=>{sa.warning("不能超过一个")},c=d=>{rl(d.raw).then(f=>{r("update:modelValue",f),r("change",f)})};return(d,f)=>{const p=q("el-upload");return T(),j("div",null,[M(p,{"list-type":"picture-card",accept:"image/png, image/jpeg",limit:1,"on-change":c,"on-remove":s,"auto-upload":!1,"on-preview":i,"file-list":l.value,"onUpdate:fileList":f[0]||(f[0]=h=>l.value=h),multiple:!1,"on-exceed":u},{default:R(()=>f[2]||(f[2]=[ue(" 只支持图片一张 "),U("br",null,null,-1),ue("png/jpg/jpeg ")])),_:1,__:[2]},8,["file-list"]),n.value?(T(),se(z(Si),{key:0,onClose:f[1]||(f[1]=h=>n.value=!1),"initial-index":0,"url-list":o.value},null,8,["url-list"])):Ae("",!0)])}}}),mh=ge(vh,[["__scopeId","data-v-3583eb4d"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/uploadImg.vue"]]),yh=["innerHTML"],bh=fe({__name:"richText",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=Ne();ve({data:[]});const n=C();return Je(()=>{n.value.getBoundingClientRect()}),(o,l)=>{const a=q("Popover");return T(),se(a,{style:ae({...z(dn)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:R(()=>[U("div",{ref_key:"textRef",ref:n,innerHTML:z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop)},null,8,yh)]),_:1},8,["style"])}}}),_h=ge(bh,[["__scopeId","data-v-046d542c"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/richText.vue"]]),wh=fe({__name:"RichTextContent",props:{element:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=t,n=C(!1);C([]),C([]);const o=Ne(),l=ie(()=>o.getRichTextContent),a=e,i=ve({data:[],htmls:""}),s=()=>{n.value=!0},u=c=>{n.value=!1,r("update:modelValue",i.htmls),r("change",i.htmls)};return le(()=>a.modelValue,c=>{i.htmls=c},{deep:!0,immediate:!0}),(c,d)=>{const f=q("el-button");return T(),j("div",null,[M(f,{type:"primary",class:"ml10",onClick:s},{default:R(()=>d[4]||(d[4]=[ue("内容设置")])),_:1,__:[4]}),M(z(Wt),{onMousedown:d[2]||(d[2]=$e(()=>{},["stop"])),modelValue:n.value,"onUpdate:modelValue":d[3]||(d[3]=p=>n.value=p),title:"内容设置"},{footer:R(()=>[U("div",null,[M(f,{size:"large",onClick:d[1]||(d[1]=p=>n.value=!1)},{default:R(()=>d[5]||(d[5]=[ue("取消")])),_:1,__:[5]}),M(f,{size:"large",type:"primary",onClick:u},{default:R(()=>d[6]||(d[6]=[ue("保存")])),_:1,__:[6]})])]),default:R(()=>[l.value?(T(),se(Ln(l.value),{key:0,modelValue:i.htmls,"onUpdate:modelValue":d[0]||(d[0]=p=>i.htmls=p)},null,8,["modelValue"])):Ae("",!0)]),_:1},8,["modelValue"])])}}}),Eh=ge(wh,[["__scopeId","data-v-ee488066"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/RichTextContent.vue"]]),Sh=fe({__name:"line",props:{element:{type:Object,required:!0,default:()=>({})},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change"],setup(e,{emit:t}){return ve({data:[]}),(r,n)=>{const o=q("Popover");return T(),se(o,{style:ae({...e.element.styles,width:e.element.styles.w+"px",height:e.element.styles.h+"px"})},null,8,["style"])}}}),Oh=ge(Sh,[["__scopeId","data-v-86d9c6c5"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/line.vue"]]);function pr(e){return e===""?e:e==="true"||e=="1"}function xh(e,t){return new Promise((r,n)=>{var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var l=new FileReader;l.onloadend=function(){r(l.result)},l.readAsArrayBuffer(o.response)},o.open("GET",e),o.send()})}function rt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Xo(e,t){for(var r="",n=0,o=-1,l=0,a,i=0;i<=e.length;++i){if(i<e.length)a=e.charCodeAt(i);else{if(a===47)break;a=47}if(a===47){if(!(o===i-1||l===1))if(o!==i-1&&l===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){s===-1?(r="",n=0):(r=r.slice(0,s),n=r.length-1-r.lastIndexOf("/")),o=i,l=0;continue}}else if(r.length===2||r.length===1){r="",n=0,o=i,l=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(o+1,i):r=e.slice(o+1,i),n=i-o-1;o=i,l=0}else a===46&&l!==-1?++l:l=-1}return r}function kh(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}var Dt={resolve:function(){for(var t="",r=!1,n,o=arguments.length-1;o>=-1&&!r;o--){var l;o>=0?l=arguments[o]:(n===void 0&&(n=process.cwd()),l=n),rt(l),l.length!==0&&(t=l+"/"+t,r=l.charCodeAt(0)===47)}return t=Xo(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(rt(t),t.length===0)return".";var r=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=Xo(t,!r),t.length===0&&!r&&(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return rt(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];rt(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":Dt.normalize(t)},relative:function(t,r){if(rt(t),rt(r),t===r||(t=Dt.resolve(t),r=Dt.resolve(r),t===r))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var o=t.length,l=o-n,a=1;a<r.length&&r.charCodeAt(a)===47;++a);for(var i=r.length,s=i-a,u=l<s?l:s,c=-1,d=0;d<=u;++d){if(d===u){if(s>u){if(r.charCodeAt(a+d)===47)return r.slice(a+d+1);if(d===0)return r.slice(a+d)}else l>u&&(t.charCodeAt(n+d)===47?c=d:d===0&&(c=0));break}var f=t.charCodeAt(n+d),p=r.charCodeAt(a+d);if(f!==p)break;f===47&&(c=d)}var h="";for(d=n+c+1;d<=o;++d)(d===o||t.charCodeAt(d)===47)&&(h.length===0?h+="..":h+="/..");return h.length>0?h+r.slice(a+c):(a+=c,r.charCodeAt(a)===47&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(rt(t),t.length===0)return".";for(var r=t.charCodeAt(0),n=r===47,o=-1,l=!0,a=t.length-1;a>=1;--a)if(r=t.charCodeAt(a),r===47){if(!l){o=a;break}}else l=!1;return o===-1?n?"/":".":n&&o===1?"//":t.slice(0,o)},basename:function(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');rt(t);var n=0,o=-1,l=!0,a;if(r!==void 0&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var i=r.length-1,s=-1;for(a=t.length-1;a>=0;--a){var u=t.charCodeAt(a);if(u===47){if(!l){n=a+1;break}}else s===-1&&(l=!1,s=a+1),i>=0&&(u===r.charCodeAt(i)?--i===-1&&(o=a):(i=-1,o=s))}return n===o?o=s:o===-1&&(o=t.length),t.slice(n,o)}else{for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!l){n=a+1;break}}else o===-1&&(l=!1,o=a+1);return o===-1?"":t.slice(n,o)}},extname:function(t){rt(t);for(var r=-1,n=0,o=-1,l=!0,a=0,i=t.length-1;i>=0;--i){var s=t.charCodeAt(i);if(s===47){if(!l){n=i+1;break}continue}o===-1&&(l=!1,o=i+1),s===46?r===-1?r=i:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||o===-1||a===0||a===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return kh("/",t)},parse:function(t){rt(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;var n=t.charCodeAt(0),o=n===47,l;o?(r.root="/",l=1):l=0;for(var a=-1,i=0,s=-1,u=!0,c=t.length-1,d=0;c>=l;--c){if(n=t.charCodeAt(c),n===47){if(!u){i=c+1;break}continue}s===-1&&(u=!1,s=c+1),n===46?a===-1?a=c:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||s===-1||d===0||d===1&&a===s-1&&a===i+1?s!==-1&&(i===0&&o?r.base=r.name=t.slice(1,s):r.base=r.name=t.slice(i,s)):(i===0&&o?(r.name=t.slice(1,a),r.base=t.slice(1,s)):(r.name=t.slice(i,a),r.base=t.slice(i,s)),r.ext=t.slice(a,s)),i>0?r.dir=t.slice(0,i-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Dt.posix=Dt;const Ch=Dt.extname,Xa=Dt.basename;class Ah{constructor(){let t=typeof global>"u",r="image/png",n="image/jpeg",o="image/jpeg",l="image/webp",a="application/pdf",i="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:r,jpg:n,jpeg:o,webp:l}:{png:r,jpg:n,jpeg:o,pdf:a,svg:i},mimes:t?{[r]:"png",[n]:"jpg",[l]:"webp"}:{[r]:"png",[n]:"jpg",[a]:"pdf",[i]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function Ph(e,{filename:t="",extension:r="",format:m,page:o,quality:l,matte:a,density:i,outline:s,archive:p}={}){var{fromMime:c,toMime:d,expected:f}=new Ah,p=p||"canvas",h=m||r.replace(/@\d+x$/i,"")||Ch(t),m=c(d(h)||h),A=d(m),g=e.length;if(!h)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!m)throw new Error('Unsupported file format "'.concat(h,'" (expected ').concat(f,")"));if(!g)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let v,y,_=t.replace(/{(\d*)}/g,(w,b)=>(y=!0,b=parseInt(b,10),v=isFinite(b)?b:isFinite(v)?v:-1,"{}")),k=o>0?o-1:o<0?g+o:void 0;if(isFinite(k)&&k<0||k>=g)throw new RangeError(g==1?"Canvas only has a ‘page 1’ (".concat(k," is out of bounds)"):"Canvas has pages 1–".concat(g," (").concat(k," is out of bounds)"));if(e=isFinite(k)?[e[k]]:y||m=="pdf"?e:e.slice(-1),l===void 0)l=.92;else if(typeof l!="number"||!isFinite(l)||l<0||l>1)throw new TypeError("The quality option must be an number in the 0.0–1.0 range");if(i===void 0){let w=(r||Xa(t,h)).match(/@(\d+)x$/i);i=w?parseInt(w[1],10):1}else if(typeof i!="number"||!Number.isInteger(i)||i<1)throw new TypeError("The density option must be a non-negative integer");return s===void 0?s=!0:m=="svg"&&(s=!!s),{filename:t,pattern:_,format:m,mime:A,pages:e,padding:v,quality:l,matte:a,density:i,outline:s,archive:p}}class Wn{static for(t){return new Wn().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var r=this.crc|0,n=this.table,o=0,l=t.length|0;o<l;o++)r=r>>>8^n[(r^t[o])&255];return this.crc=r,this}}Wn.prototype.table=(()=>{var e,t,r,n=[];for(e=0;e<256;e++){for(r=e,t=0;t<8;t++)r=r&1?r>>>1^3988292384:r>>>1;n[e]=r}return n})();function gr(e){let t=new Uint8Array(e),r=new DataView(t.buffer),n={array:t,view:r,size:e,set8(o,l){return r.setUint8(o,l),n},set16(o,l){return r.setUint16(o,l,!0),n},set32(o,l){return r.setUint32(o,l,!0),n},bytes(o,l){return t.set(l,o),n}};return n}class Yn{constructor(t){let r=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(r.getHours()<<6|r.getMinutes())<<5|r.getSeconds()/2,date:(r.getFullYear()-1980<<4|r.getMonth()+1)<<5|r.getDate()}),this.add(t)}async add(t,r){let n=!r,o=Yn.encoder.encode("".concat(this.directory,"/").concat(n?"":t)),l=new Uint8Array(n?0:await r.arrayBuffer()),a=30+o.length,i=a+l.length,s=16,{offset:u}=this,c=gr(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,Wn.for(l)).set32(14,l.length).set32(18,l.length).set16(22,o.length);u+=a;let d=gr(a+l.length+s).set32(0,67324752).bytes(4,c.array).bytes(30,o).bytes(a,l);u+=l.length,d.set32(i,134695760).bytes(i+4,c.array.slice(10,22)),u+=s,this.files.push({offset:u,folder:n,name:o,header:c,payload:d}),this.offset=u}toBuffer(){let t=this.files.reduce((d,{name:f})=>46+f.length+d,0),r=gr(t+22),n=0;for(var{offset:o,name:l,header:a,folder:i}of this.files)r.set32(n,33639248).set16(n+4,20).bytes(n+6,a.array).set8(n+38,i?16:0).set32(n+42,o).bytes(n+46,l),n+=46+l.length;r.set32(n,101010256).set16(n+8,this.files.length).set16(n+10,this.files.length).set32(n+12,t).set32(n+16,this.offset);let s=new Uint8Array(this.offset+r.size),u=0;for(var{payload:c}of this.files)s.set(c.array,u),u+=c.size;return s.set(r.array,u),s}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Yn.encoder=new TextEncoder;const so=(e,t,r,n)=>{if(n){let{width:o,height:l}=e,a=Object.assign(document.createElement("canvas"),{width:o,height:l}),i=a.getContext("2d");i.fillStyle=n,i.fillRect(0,0,o,l),i.drawImage(e,0,0),e=a}return new Promise((o,l)=>e.toBlob(o,t,r))},Dh=(...e)=>so(...e).then(t=>t.arrayBuffer()),Ih=async(e,t,r,n,o)=>{qa(o,await so(e,t,r,n))},Th=async(e,t,r,n,o,l,a)=>{let i=c=>l.replace("{}",String(c+1).padStart(a,"0")),s=Xa(o,".zip")||"archive",u=new Yn(s);await Promise.all(e.map(async(c,d)=>{let f=i(d);await u.add(f,await so(c,t,r,n))})),qa("".concat(s,".zip"),u.blob)},qa=(e,t)=>{const r=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=r,n.setAttribute("download",e),typeof n.download>"u"&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>window.URL.revokeObjectURL(r),100)},Rh=(e,t,r)=>e.map(n=>{if(t==1&&!r)return n.canvas;let o=document.createElement("canvas"),l=o.getContext("2d"),a=n.canvas?n.canvas:n;return o.width=a.width*t,o.height=a.height*t,r&&(l.fillStyle=r,l.fillRect(0,0,o.width,o.height)),l.scale(t,t),l.drawImage(a,0,0),o}),Mh={asBuffer:Dh,asDownload:Ih,asZipDownload:Th,atScale:Rh,options:Ph},{asBuffer:vr,asDownload:Lh,asZipDownload:$h,atScale:mr,options:yr}=Mh,qo=Symbol.for("toDataURL");let Bh=class{constructor(t,r){let n=document.createElement("canvas"),o=[];Object.defineProperty(n,"async",{value:!0,writable:!1,enumerable:!0});for(var[l,a]of Object.entries({png:()=>vr(n,"image/png"),jpg:()=>vr(n,"image/jpeg"),pages:()=>o.concat(n).map(i=>i.getContext("2d"))}))Object.defineProperty(n,l,{get:a});return Object.assign(n,{width:t,height:r,newPage(...i){var{width:u,height:c}=n,s=Object.assign(document.createElement("canvas"),{width:u,height:c});s.getContext("2d").drawImage(n,0,0),o.push(s);var[u,c]=i.length?i:[u,c];return Object.assign(n,{width:u,height:c}).getContext("2d")},saveAs(i,s){s=typeof s=="number"?{quality:s}:s;let u=yr(this.pages,{filename:i,...s}),{pattern:c,padding:d,mime:f,quality:p,matte:h,density:m,archive:A}=u,g=mr(u.pages,m);return d==null?Lh(g[0],f,p,h,i):$h(g,f,p,h,A,c,d)},toBuffer(i="png",s={}){s=typeof s=="number"?{quality:s}:s;let u=yr(this.pages,{extension:i,...s}),{mime:c,quality:d,matte:f,pages:p,density:h}=u,m=mr(p,h,f)[0];return vr(m,c,d,f)},[qo]:n.toDataURL.bind(n),toDataURL(i="png",s={}){s=typeof s=="number"?{quality:s}:s;let u=yr(this.pages,{extension:i,...s}),{mime:c,quality:d,matte:f,pages:p,density:h}=u,m=mr(p,h,f)[0],A=m[m===n?qo:"toDataURL"](c,d);return Promise.resolve(A)}})}};const Nh={Canvas:Bh},un=(e,t,r={},n=r)=>{if(Array.isArray(t))t.forEach(o=>un(e,o,r,n));else if(typeof t=="function")t(e,r,n,un);else{const o=Object.keys(t)[0];Array.isArray(t[o])?(n[o]={},un(e,t[o],r,n[o])):n[o]=t[o](e,r,n,un)}return r},It=(e,t)=>(r,n,o,l)=>{t(r,n,o)&&l(r,e,n,o)},Vh=(e,t)=>(r,n,o,l)=>{const a=[];let i=r.pos;for(;t(r,n,o);){const s={};if(l(r,e,n,s),r.pos===i)break;i=r.pos,a.push(s)}return a},zh=e=>({data:e,pos:0}),Ye=()=>e=>e.data[e.pos++],Wa=(e=0)=>t=>t.data[t.pos+e],it=e=>t=>t.data.subarray(t.pos,t.pos+=e),Jn=e=>t=>t.data.subarray(t.pos,t.pos+e),Cr=e=>t=>Array.from(it(e)(t)).map(r=>String.fromCharCode(r)).join(""),kt=e=>t=>{const r=it(2)(t);return(r[1]<<8)+r[0]},Ya=(e,t)=>(r,n,o)=>{const l=typeof t=="function"?t(r,n,o):t,a=it(e),i=new Array(l);for(var s=0;s<l;s++)i[s]=a(r);return i},jh=(e,t,r)=>{for(var n=0,o=0;o<r;o++)n+=e[t+o]&&2**(r-o-1);return n},uo=e=>t=>{const r=Ye()(t),n=new Array(8);for(var o=0;o<8;o++)n[7-o]=!!(r&1<<o);return Object.keys(e).reduce((l,a)=>{const i=e[a];return i.length?l[a]=jh(n,i.index,i.length):l[a]=n[i.index],l},{})};var Zn={blocks:e=>{const r=[],n=e.data.length;for(var o=0,l=Ye()(e);l!==0&&l;l=Ye()(e)){if(e.pos+l>=n){const u=n-e.pos;r.push(it(u)(e)),o+=u;break}r.push(it(l)(e)),o+=l}const a=new Uint8Array(o);for(var i=0,s=0;s<r.length;s++)a.set(r[s],i),i+=r[s].length;return a}};const Hh=It({gce:[{codes:it(2)},{byteSize:Ye()},{extras:uo({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:kt()},{transparentColorIndex:Ye()},{terminator:Ye()}]},e=>{var t=Jn(2)(e);return t[0]===33&&t[1]===249}),Uh=It({image:[{code:Ye()},{descriptor:[{left:kt()},{top:kt()},{width:kt()},{height:kt()},{lct:uo({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},It({lct:Ya(3,(e,t,r)=>Math.pow(2,r.descriptor.lct.size+1))},(e,t,r)=>r.descriptor.lct.exists),{data:[{minCodeSize:Ye()},Zn]}]},e=>Wa()(e)===44),Fh=It({text:[{codes:it(2)},{blockSize:Ye()},{preData:(e,t,r)=>it(r.text.blockSize)(e)},Zn]},e=>{var t=Jn(2)(e);return t[0]===33&&t[1]===1}),Gh=It({application:[{codes:it(2)},{blockSize:Ye()},{id:(e,t,r)=>Cr(r.blockSize)(e)},Zn]},e=>{var t=Jn(2)(e);return t[0]===33&&t[1]===255}),Xh=It({comment:[{codes:it(2)},Zn]},e=>{var t=Jn(2)(e);return t[0]===33&&t[1]===254}),qh=[{header:[{signature:Cr(3)},{version:Cr(3)}]},{lsd:[{width:kt()},{height:kt()},{gct:uo({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:Ye()},{pixelAspectRatio:Ye()}]},It({gct:Ya(3,(e,t)=>Math.pow(2,t.lsd.gct.size+1))},(e,t)=>t.lsd.gct.exists),{frames:Vh([Hh,Gh,Xh,Uh,Fh],e=>{var t=Wa()(e);return t===33||t===44})}],Wh=(e,t)=>{const r=new Array(e.length),n=e.length/t,o=function(c,d){const f=e.slice(d*t,(d+1)*t);r.splice.apply(r,[c*t,t].concat(f))},l=[0,4,2,1],a=[8,8,4,2];for(var i=0,s=0;s<4;s++)for(var u=l[s];u<n;u+=a[s])o(u,i),i++;return r},Yh=(e,t,r)=>{const l=r;var a,i,s,u,c,d,f,k,p,h,_,m,w,b,E,O;const A=new Array(r),g=new Array(4096),v=new Array(4096),y=new Array(4097);for(m=e,i=1<<m,c=i+1,a=i+2,f=-1,u=m+1,s=(1<<u)-1,p=0;p<i;p++)g[p]=0,v[p]=p;var _,k,w,b,O,E;for(_=k=w=b=O=E=0,h=0;h<l;){if(b===0){if(k<u){_+=t[E]<<k,k+=8,E++;continue}if(p=_&s,_>>=u,k-=u,p>a||p==c)break;if(p==i){u=m+1,s=(1<<u)-1,a=i+2,f=-1;continue}if(f==-1){y[b++]=v[p],f=p,w=p;continue}for(d=p,p==a&&(y[b++]=w,p=f);p>i;)y[b++]=v[p],p=g[p];w=v[p]&255,y[b++]=w,a<4096&&(g[a]=f,v[a]=w,a++,!(a&s)&&a<4096&&(u++,s+=a)),f=d}b--,A[O++]=y[b],h++}for(h=O;h<l;h++)A[h]=0;return A},Jh=e=>{const t=new Uint8Array(e);return un(zh(t),qh)},Zh=e=>{const t=e.pixels.length,r=new Uint8ClampedArray(t*4);for(var n=0;n<t;n++){const o=n*4,l=e.pixels[n],a=e.colorTable[l];r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2],r[o+3]=l!==e.transparentIndex?255:0}return r},Kh=(e,t,r)=>{if(!e.image){console.warn("gif frame does not have associated image.");return}const{image:n}=e,o=n.descriptor.width*n.descriptor.height;var l=Yh(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(l=Wh(l,n.descriptor.width));const a={pixels:l,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?a.colorTable=n.lct:a.colorTable=t,e.gce&&(a.delay=(e.gce.delay||10)*10,a.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(a.transparentIndex=e.gce.transparentColorIndex)),a.patch=Zh(a),a},Qh=(e,t)=>e.frames.filter(r=>r.image).map(r=>Kh(r,e.gct));function ep(e,t,r){const n=Ja(t),o=e-1;let l=0;switch(r){case Be.L:l=ot[o][0];break;case Be.M:l=ot[o][1];break;case Be.Q:l=ot[o][2];break;case Be.H:l=ot[o][3];break}return n<=l}function tp(e,t){for(var r=1,n=Ja(e),o=0,l=ot.length;o<l;o++){var a=0;switch(t){case Be.L:a=ot[o][0];break;case Be.M:a=ot[o][1];break;case Be.Q:a=ot[o][2];break;case Be.H:a=ot[o][3];break}if(n<=a)break;r++}if(r>ot.length)throw new Error("Too long data");return r}function Ja(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(e)?3:0)}class np{constructor(t){this.mode=Fe.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const r=[];for(let n=0,o=this.data.length;n<o;n++){const l=[],a=this.data.charCodeAt(n);a>65536?(l[0]=240|(a&1835008)>>>18,l[1]=128|(a&258048)>>>12,l[2]=128|(a&4032)>>>6,l[3]=128|a&63):a>2048?(l[0]=224|(a&61440)>>>12,l[1]=128|(a&4032)>>>6,l[2]=128|a&63):a>128?(l[0]=192|(a&1984)>>>6,l[1]=128|a&63):l[0]=a,r.push(l)}this.parsedData=Array.prototype.concat.apply([],r),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let r=0,n=this.parsedData.length;r<n;r++)t.put(this.parsedData[r],8)}}class bt{constructor(t=-1,r=Be.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=r,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=tp(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error("Invalid QR version: ".concat(this.typeNumber));if(!ep(this.typeNumber,t,this.errorCorrectLevel))throw new Error("Data is too long for QR version: ".concat(this.typeNumber))}const r=new np(t);this.dataList.push(r),this.dataCache=void 0}isDark(t,r){if(t<0||this.moduleCount<=t||r<0||this.moduleCount<=r)throw new Error("".concat(t,",").concat(r));return this.modules[t][r]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,r){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=bt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)}setupPositionProbePattern(t,r){for(let n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(let o=-1;o<=7;o++)r+o<=-1||this.moduleCount<=r+o||(0<=n&&n<=6&&(o==0||o==6)||0<=o&&o<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=o&&o<=4?this.modules[t+n][r+o]=!0:this.modules[t+n][r+o]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(ut).includes(this.maskPattern))return this.maskPattern;let t=0,r=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);const o=pe.getLostPoint(this);(n==0||t>o)&&(t=o,r=n)}return r}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=pe.getPatternPosition(this.typeNumber);for(let r=0;r<t.length;r++)for(let n=0;n<t.length;n++){const o=t[r],l=t[n];if(this.modules[o][l]==null)for(let a=-2;a<=2;a++)for(let i=-2;i<=2;i++)a==-2||a==2||i==-2||i==2||a==0&&i==0?this.modules[o+a][l+i]=!0:this.modules[o+a][l+i]=!1}}setupTypeNumber(t){const r=pe.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var o=!t&&(r>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(var n=0;n<18;n++){var o=!t&&(r>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}}setupTypeInfo(t,r){const n=this.errorCorrectLevel<<3|r,o=pe.getBCHTypeInfo(n);for(var l=0;l<15;l++){var a=!t&&(o>>l&1)==1;l<6?this.modules[l][8]=a:l<8?this.modules[l+1][8]=a:this.modules[this.moduleCount-15+l][8]=a}for(var l=0;l<15;l++){var a=!t&&(o>>l&1)==1;l<8?this.modules[8][this.moduleCount-l-1]=a:l<9?this.modules[8][15-l-1+1]=a:this.modules[8][15-l-1]=a}this.modules[this.moduleCount-8][8]=!t}mapData(t,r){let n=-1,o=this.moduleCount-1,l=7,a=0;for(let i=this.moduleCount-1;i>0;i-=2)for(i==6&&i--;;){for(let s=0;s<2;s++)if(this.modules[o][i-s]==null){let u=!1;a<t.length&&(u=(t[a]>>>l&1)==1),pe.getMask(r,o,i-s)&&(u=!u),this.modules[o][i-s]=u,l--,l==-1&&(a++,l=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}static createData(t,r,n){const o=dt.getRSBlocks(t,r),l=new rp;for(var a=0;a<n.length;a++){const s=n[a];l.put(s.mode,4),l.put(s.getLength(),pe.getLengthInBits(s.mode,t)),s.write(l)}let i=0;for(var a=0;a<o.length;a++)i+=o[a].dataCount;if(l.getLengthInBits()>i*8)throw new Error("code length overflow. (".concat(l.getLengthInBits(),">").concat(i*8,")"));for(l.getLengthInBits()+4<=i*8&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=i*8||(l.put(bt.PAD0,8),l.getLengthInBits()>=i*8));)l.put(bt.PAD1,8);return bt.createBytes(l,o)}static createBytes(t,r){let n=0,o=0,l=0;const a=new Array(r.length),i=new Array(r.length);for(var s=0;s<r.length;s++){const p=r[s].dataCount,h=r[s].totalCount-p;o=Math.max(o,p),l=Math.max(l,h),a[s]=new Array(p);for(var u=0;u<a[s].length;u++)a[s][u]=255&t.buffer[u+n];n+=p;const m=pe.getErrorCorrectPolynomial(h),g=new Xt(a[s],m.getLength()-1).mod(m);i[s]=new Array(m.getLength()-1);for(var u=0;u<i[s].length;u++){const y=u+g.getLength()-i[s].length;i[s][u]=y>=0?g.get(y):0}}let c=0;for(var u=0;u<r.length;u++)c+=r[u].totalCount;const d=new Array(c);let f=0;for(var u=0;u<o;u++)for(var s=0;s<r.length;s++)u<a[s].length&&(d[f++]=a[s][u]);for(var u=0;u<l;u++)for(var s=0;s<r.length;s++)u<i[s].length&&(d[f++]=i[s][u]);return d}}bt.PAD0=236;bt.PAD1=17;const Be={L:1,M:0,Q:3,H:2},Fe={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ut={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class pe{static getBCHTypeInfo(t){let r=t<<10;for(;pe.getBCHDigit(r)-pe.getBCHDigit(pe.G15)>=0;)r^=pe.G15<<pe.getBCHDigit(r)-pe.getBCHDigit(pe.G15);return(t<<10|r)^pe.G15_MASK}static getBCHTypeNumber(t){let r=t<<12;for(;pe.getBCHDigit(r)-pe.getBCHDigit(pe.G18)>=0;)r^=pe.G18<<pe.getBCHDigit(r)-pe.getBCHDigit(pe.G18);return t<<12|r}static getBCHDigit(t){let r=0;for(;t!=0;)r++,t>>>=1;return r}static getPatternPosition(t){return pe.PATTERN_POSITION_TABLE[t-1]}static getMask(t,r,n){switch(t){case ut.PATTERN000:return(r+n)%2==0;case ut.PATTERN001:return r%2==0;case ut.PATTERN010:return n%3==0;case ut.PATTERN011:return(r+n)%3==0;case ut.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case ut.PATTERN101:return r*n%2+r*n%3==0;case ut.PATTERN110:return(r*n%2+r*n%3)%2==0;case ut.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw new Error("bad maskPattern:".concat(t))}}static getErrorCorrectPolynomial(t){let r=new Xt([1],0);for(let n=0;n<t;n++)r=r.multiply(new Xt([1,ke.gexp(n)],0));return r}static getLengthInBits(t,r){if(1<=r&&r<10)switch(t){case Fe.MODE_NUMBER:return 10;case Fe.MODE_ALPHA_NUM:return 9;case Fe.MODE_8BIT_BYTE:return 8;case Fe.MODE_KANJI:return 8;default:throw new Error("mode:".concat(t))}else if(r<27)switch(t){case Fe.MODE_NUMBER:return 12;case Fe.MODE_ALPHA_NUM:return 11;case Fe.MODE_8BIT_BYTE:return 16;case Fe.MODE_KANJI:return 10;default:throw new Error("mode:".concat(t))}else if(r<41)switch(t){case Fe.MODE_NUMBER:return 14;case Fe.MODE_ALPHA_NUM:return 13;case Fe.MODE_8BIT_BYTE:return 16;case Fe.MODE_KANJI:return 12;default:throw new Error("mode:".concat(t))}else throw new Error("type:".concat(r))}static getLostPoint(t){const r=t.getModuleCount();let n=0;for(var o=0;o<r;o++)for(var l=0;l<r;l++){let s=0;const u=t.isDark(o,l);for(let c=-1;c<=1;c++)if(!(o+c<0||r<=o+c))for(let d=-1;d<=1;d++)l+d<0||r<=l+d||c==0&&d==0||u==t.isDark(o+c,l+d)&&s++;s>5&&(n+=3+s-5)}for(var o=0;o<r-1;o++)for(var l=0;l<r-1;l++){let c=0;t.isDark(o,l)&&c++,t.isDark(o+1,l)&&c++,t.isDark(o,l+1)&&c++,t.isDark(o+1,l+1)&&c++,(c==0||c==4)&&(n+=3)}for(var o=0;o<r;o++)for(var l=0;l<r-6;l++)t.isDark(o,l)&&!t.isDark(o,l+1)&&t.isDark(o,l+2)&&t.isDark(o,l+3)&&t.isDark(o,l+4)&&!t.isDark(o,l+5)&&t.isDark(o,l+6)&&(n+=40);for(var l=0;l<r;l++)for(var o=0;o<r-6;o++)t.isDark(o,l)&&!t.isDark(o+1,l)&&t.isDark(o+2,l)&&t.isDark(o+3,l)&&t.isDark(o+4,l)&&!t.isDark(o+5,l)&&t.isDark(o+6,l)&&(n+=40);let a=0;for(var l=0;l<r;l++)for(var o=0;o<r;o++)t.isDark(o,l)&&a++;const i=Math.abs(100*a/r/r-50)/5;return n+=i*10,n}}pe.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];pe.G15=1335;pe.G18=7973;pe.G15_MASK=21522;class ke{static glog(t){if(t<1)throw new Error("glog(".concat(t,")"));return ke.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return ke.EXP_TABLE[t]}}ke.EXP_TABLE=new Array(256);ke.LOG_TABLE=new Array(256);ke._constructor=function(){for(var e=0;e<8;e++)ke.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)ke.EXP_TABLE[e]=ke.EXP_TABLE[e-4]^ke.EXP_TABLE[e-5]^ke.EXP_TABLE[e-6]^ke.EXP_TABLE[e-8];for(var e=0;e<255;e++)ke.LOG_TABLE[ke.EXP_TABLE[e]]=e}();class Xt{constructor(t,r){if(t.length==null)throw new Error("".concat(t.length,"/").concat(r));let n=0;for(;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+r);for(let o=0;o<t.length-n;o++)this.num[o]=t[o+n]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const r=new Array(this.getLength()+t.getLength()-1);for(let n=0;n<this.getLength();n++)for(let o=0;o<t.getLength();o++)r[n+o]^=ke.gexp(ke.glog(this.get(n))+ke.glog(t.get(o)));return new Xt(r,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const r=ke.glog(this.get(0))-ke.glog(t.get(0)),n=new Array(this.getLength());for(var o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<t.getLength();o++)n[o]^=ke.gexp(ke.glog(t.get(o))+r);return new Xt(n,0).mod(t)}}class dt{constructor(t,r){this.totalCount=t,this.dataCount=r}static getRSBlocks(t,r){const n=dt.getRsBlockTable(t,r);if(n==null)throw new Error("bad rs block @ typeNumber:".concat(t,"/errorCorrectLevel:").concat(r));const o=n.length/3,l=[];for(let a=0;a<o;a++){const i=n[a*3+0],s=n[a*3+1],u=n[a*3+2];for(let c=0;c<i;c++)l.push(new dt(s,u))}return l}static getRsBlockTable(t,r){switch(r){case Be.L:return dt.RS_BLOCK_TABLE[(t-1)*4+0];case Be.M:return dt.RS_BLOCK_TABLE[(t-1)*4+1];case Be.Q:return dt.RS_BLOCK_TABLE[(t-1)*4+2];case Be.H:return dt.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}dt.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class rp{constructor(){this.buffer=[],this.length=0}get(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)==1}put(t,r){for(let n=0;n<r;n++)this.putBit((t>>>r-n-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}}const ot=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var op=100,Te=256,Wo=Te-1,mt=4,Za=16,co=1<<Za,Ka=10,fo=10,ap=co>>fo,ip=co<<Ka-fo,lp=Te>>3,Ar=6,sp=1<<Ar,up=lp*sp,cp=30,Qa=10,Pn=1<<Qa,ei=8,Yo=1<<ei,dp=Qa+ei,Vt=1<<dp,Jo=499,Zo=491,Ko=487,ti=503,fp=3*ti;function hp(e,t){var r,n,o,l,a;function i(){r=[],n=new Int32Array(256),o=new Int32Array(Te),l=new Int32Array(Te),a=new Int32Array(Te>>3);var g,v;for(g=0;g<Te;g++)v=(g<<mt+8)/Te,r[g]=new Float64Array([v,v,v,0]),l[g]=co/Te,o[g]=0}function s(){for(var g=0;g<Te;g++)r[g][0]>>=mt,r[g][1]>>=mt,r[g][2]>>=mt,r[g][3]=g}function u(g,v,y,_,k){r[v][0]-=g*(r[v][0]-y)/Pn,r[v][1]-=g*(r[v][1]-_)/Pn,r[v][2]-=g*(r[v][2]-k)/Pn}function c(g,v,y,_,k){for(var w=Math.abs(v-g),b=Math.min(v+g,Te),O=v+1,E=v-1,V=1,S,H;O<b||E>w;)H=a[V++],O<b&&(S=r[O++],S[0]-=H*(S[0]-y)/Vt,S[1]-=H*(S[1]-_)/Vt,S[2]-=H*(S[2]-k)/Vt),E>w&&(S=r[E--],S[0]-=H*(S[0]-y)/Vt,S[1]-=H*(S[1]-_)/Vt,S[2]-=H*(S[2]-k)/Vt)}function d(g,v,y){var _=2147483647,k=_,w=-1,b=w,O,E,V,S,H;for(O=0;O<Te;O++)E=r[O],V=Math.abs(E[0]-g)+Math.abs(E[1]-v)+Math.abs(E[2]-y),V<_&&(_=V,w=O),S=V-(o[O]>>Za-mt),S<k&&(k=S,b=O),H=l[O]>>fo,l[O]-=H,o[O]+=H<<Ka;return l[w]+=ap,o[w]-=ip,b}function f(){var g,v,y,_,k,w,b=0,O=0;for(g=0;g<Te;g++){for(y=r[g],k=g,w=y[1],v=g+1;v<Te;v++)_=r[v],_[1]<w&&(k=v,w=_[1]);if(_=r[k],g!=k&&(v=_[0],_[0]=y[0],y[0]=v,v=_[1],_[1]=y[1],y[1]=v,v=_[2],_[2]=y[2],y[2]=v,v=_[3],_[3]=y[3],y[3]=v),w!=b){for(n[b]=O+g>>1,v=b+1;v<w;v++)n[v]=g;b=w,O=g}}for(n[b]=O+Wo>>1,v=b+1;v<256;v++)n[v]=Wo}function p(g,v,y){for(var _,k,w,b=1e3,O=-1,E=n[v],V=E-1;E<Te||V>=0;)E<Te&&(k=r[E],w=k[1]-v,w>=b?E=Te:(E++,w<0&&(w=-w),_=k[0]-g,_<0&&(_=-_),w+=_,w<b&&(_=k[2]-y,_<0&&(_=-_),w+=_,w<b&&(b=w,O=k[3])))),V>=0&&(k=r[V],w=v-k[1],w>=b?V=-1:(V--,w<0&&(w=-w),_=k[0]-g,_<0&&(_=-_),w+=_,w<b&&(_=k[2]-y,_<0&&(_=-_),w+=_,w<b&&(b=w,O=k[3]))));return O}function h(){var g,v=e.length,y=30+(t-1)/3,_=v/(3*t),k=~~(_/op),w=Pn,b=up,O=b>>Ar;for(O<=1&&(O=0),g=0;g<O;g++)a[g]=w*((O*O-g*g)*Yo/(O*O));var E;v<fp?(t=1,E=3):v%Jo!==0?E=3*Jo:v%Zo!==0?E=3*Zo:v%Ko!==0?E=3*Ko:E=3*ti;var V,S,H,L,J=0;for(g=0;g<_;)if(V=(e[J]&255)<<mt,S=(e[J+1]&255)<<mt,H=(e[J+2]&255)<<mt,L=d(V,S,H),u(w,L,V,S,H),O!==0&&c(O,L,V,S,H),J+=E,J>=v&&(J-=v),g++,k===0&&(k=1),g%k===0)for(w-=w/y,b-=b/cp,O=b>>Ar,O<=1&&(O=0),L=0;L<O;L++)a[L]=w*((O*O-L*L)*Yo/(O*O))}function m(){i(),h(),s(),f()}this.buildColormap=m;function A(){for(var g=[],v=[],y=0;y<Te;y++)v[r[y][3]]=y;for(var _=0,k=0;k<Te;k++){var w=v[k];g[_++]=r[w][0],g[_++]=r[w][1],g[_++]=r[w][2]}return g}this.getColormap=A,this.lookupRGB=p}var Qo=-1,Dn=12,ln=5003,pp=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function gp(e,t,r,n){var o=Math.max(2,n),l=new Uint8Array(256),a=new Int32Array(ln),i=new Int32Array(ln),s,u=0,c,d=0,f,p=!1,h,m,A,g,v,y;function _(L,J){l[c++]=L,c>=254&&E(J)}function k(L){w(ln),d=m+2,p=!0,H(m,L)}function w(L){for(var J=0;J<L;++J)a[J]=-1}function b(L,J){var P,Se,ne,D,x,I,X;for(h=L,p=!1,y=h,f=V(y),m=1<<L-1,A=m+1,d=m+2,c=0,D=S(),X=0,P=ln;P<65536;P*=2)++X;X=8-X,I=ln,w(I),H(m,J);e:for(;(Se=S())!=Qo;){if(P=(Se<<Dn)+D,ne=Se<<X^D,a[ne]===P){D=i[ne];continue}else if(a[ne]>=0){x=I-ne,ne===0&&(x=1);do if((ne-=x)<0&&(ne+=I),a[ne]===P){D=i[ne];continue e}while(a[ne]>=0)}H(D,J),D=Se,d<1<<Dn?(i[ne]=d++,a[ne]=P):k(J)}H(D,J),H(A,J)}function O(L){L.writeByte(o),g=e*t,v=0,b(o+1,L),L.writeByte(0)}function E(L){c>0&&(L.writeByte(c),L.writeBytes(l,0,c),c=0)}function V(L){return(1<<L)-1}function S(){if(g===0)return Qo;--g;var L=r[v++];return L&255}function H(L,J){for(s&=pp[u],u>0?s|=L<<u:s=L,u+=y;u>=8;)_(s&255,J),s>>=8,u-=8;if((d>f||p)&&(p?(f=V(y=h),p=!1):(++y,y==Dn?f=1<<Dn:f=V(y))),L==A){for(;u>0;)_(s&255,J),s>>=8,u-=8;E(J)}}this.encode=O}function je(){this.page=-1,this.pages=[],this.newPage()}je.pageSize=4096;je.charMap={};for(var In=0;In<256;In++)je.charMap[In]=String.fromCharCode(In);je.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(je.pageSize),this.cursor=0};je.prototype.getData=function(){for(var e="",t=0;t<this.pages.length;t++)for(var r=0;r<je.pageSize;r++)e+=je.charMap[this.pages[t][r]];return e};je.prototype.toFlattenUint8Array=function(){const e=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const n=Uint8Array.from(this.pages[t].slice(0,this.cursor));e.push(n)}else e.push(this.pages[t]);const r=new Uint8Array(e.reduce((n,o)=>n+o.length,0));return e.reduce((n,o)=>(r.set(o,n),n+o.length),0),r};je.prototype.writeByte=function(e){this.cursor>=je.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=e};je.prototype.writeUTFBytes=function(e){for(var t=e.length,r=0;r<t;r++)this.writeByte(e.charCodeAt(r))};je.prototype.writeBytes=function(e,t,r){for(var n=r||e.length,o=t||0;o<n;o++)this.writeByte(e[o])};function me(e,t){this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new je}me.prototype.setDelay=function(e){this.delay=Math.round(e/10)};me.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)};me.prototype.setDispose=function(e){e>=0&&(this.dispose=e)};me.prototype.setRepeat=function(e){this.repeat=e};me.prototype.setTransparent=function(e){this.transparent=e};me.prototype.addFrame=function(e){this.image=e,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};me.prototype.finish=function(){this.out.writeByte(59)};me.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e};me.prototype.setDither=function(e){e===!0&&(e="FloydSteinberg"),this.dither=e};me.prototype.setGlobalPalette=function(e){this.globalPalette=e};me.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};me.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};me.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new hp(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};me.prototype.indexPixels=function(e){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var r=0,n=0;n<t;n++){var o=this.findClosestRGB(this.pixels[r++]&255,this.pixels[r++]&255,this.pixels[r++]&255);this.usedEntry[o]=!0,this.indexedPixels[n]=o}};me.prototype.ditherPixels=function(e,t){var r={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!e||!r[e])throw"Unknown dithering kernel: "+e;var n=r[e],o=0,l=this.height,a=this.width,i=this.pixels,s=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var u=0;u<l;u++){t&&(s=s*-1);for(var c=s==1?0:a-1,d=s==1?a:0;c!==d;c+=s){o=u*a+c;var f=o*3,p=i[f],h=i[f+1],m=i[f+2];f=this.findClosestRGB(p,h,m),this.usedEntry[f]=!0,this.indexedPixels[o]=f,f*=3;for(var A=this.colorTab[f],g=this.colorTab[f+1],v=this.colorTab[f+2],y=p-A,_=h-g,k=m-v,w=s==1?0:n.length-1,b=s==1?n.length:0;w!==b;w+=s){var O=n[w][1],E=n[w][2];if(O+c>=0&&O+c<a&&E+u>=0&&E+u<l){var V=n[w][0];f=o+O+E*a,f*=3,i[f]=Math.max(0,Math.min(255,i[f]+y*V)),i[f+1]=Math.max(0,Math.min(255,i[f+1]+_*V)),i[f+2]=Math.max(0,Math.min(255,i[f+2]+k*V))}}}}};me.prototype.findClosest=function(e,t){return this.findClosestRGB((e&16711680)>>16,(e&65280)>>8,e&255,t)};me.prototype.findClosestRGB=function(e,t,r,n){if(this.colorTab===null)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(e,t,r);for(var o=0,l=256*256*256,a=this.colorTab.length,i=0,s=0;i<a;s++){var u=e-(this.colorTab[i++]&255),c=t-(this.colorTab[i++]&255),d=r-(this.colorTab[i++]&255),f=u*u+c*c+d*d;(!n||this.usedEntry[s])&&f<l&&(l=f,o=s)}return o};me.prototype.getImagePixels=function(){var e=this.width,t=this.height;this.pixels=new Uint8Array(e*t*3);for(var r=this.image,n=0,o=0,l=0;l<t;l++)for(var a=0;a<e;a++)this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],this.pixels[o++]=r[n++],n++};me.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var e,t;this.transparent===null?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|e),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};me.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};me.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};me.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};me.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var e=3*256-this.colorTab.length,t=0;t<e;t++)this.out.writeByte(0)};me.prototype.writeShort=function(e){this.out.writeByte(e&255),this.out.writeByte(e>>8&255)};me.prototype.writePixels=function(){var e=new gp(this.width,this.height,this.indexedPixels,this.colorDepth);e.encode(this.out)};me.prototype.stream=function(){return this.out};var vp=function(e,t,r,n){function o(l){return l instanceof r?l:new r(function(a){a(l)})}return new(r||(r=Promise))(function(l,a){function i(c){try{u(n.next(c))}catch(d){a(d)}}function s(c){try{u(n.throw(c))}catch(d){a(d)}}function u(c){c.done?l(c.value):o(c.value).then(i,s)}u((n=n.apply(e,[])).next())})};const{Canvas:st}=Nh,Tn=.4;function ea(e){if(!e)return;function t(r){r.onload=null,r.onerror=null}return new Promise(function(r,n){if(e.slice(0,4)=="data"){let l=new Image;l.onload=function(){r(l),t(l)},l.onerror=function(){n("Image load error"),t(l)},l.src=e;return}let o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){r(o)},o.onerror=function(){n("Image load error")},o.src=e})}class de{constructor(t){const r=Object.assign({},t);if(Object.keys(de.defaultOptions).forEach(n=>{n in r||Object.defineProperty(r,n,{value:de.defaultOptions[n],enumerable:!0,writable:!0})}),r.components?typeof r.components=="object"&&Object.keys(de.defaultComponentOptions).forEach(n=>{n in r.components?Object.defineProperty(r.components,n,{value:Object.assign(Object.assign({},de.defaultComponentOptions[n]),r.components[n]),enumerable:!0,writable:!0}):Object.defineProperty(r.components,n,{value:de.defaultComponentOptions[n],enumerable:!0,writable:!0})}):r.components=de.defaultComponentOptions,r.dotScale!==null&&r.dotScale!==void 0){if(r.dotScale<=0||r.dotScale>1)throw new Error("dotScale should be in range (0, 1].");r.components.data.scale=r.dotScale,r.components.timing.scale=r.dotScale,r.components.alignment.scale=r.dotScale}this.options=r,this.canvas=new st(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new bt(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,r,n,o,l,a){t.beginPath(),t.moveTo(r,n),t.arcTo(r+o,n,r+o,n+l,a),t.arcTo(r+o,n+l,r,n+l,a),t.arcTo(r,n+l,r,n,a),t.arcTo(r,n,r+o,n,a),t.closePath()}static _getAverageRGB(t){const n={r:0,g:0,b:0};let o,l,a=-4;const i={r:0,g:0,b:0};let s=0;l=t.naturalHeight||t.height,o=t.naturalWidth||t.width;const c=new st(o,l).getContext("2d");if(!c)return n;c.drawImage(t,0,0);let d;try{d=c.getImageData(0,0,o,l)}catch(f){return n}for(;(a+=5*4)<d.data.length;)d.data[a]>200||d.data[a+1]>200||d.data[a+2]>200||(++s,i.r+=d.data[a],i.g+=d.data[a+1],i.b+=d.data[a+2]);return i.r=~~(i.r/s),i.g=~~(i.g/s),i.b=~~(i.b/s),i}static _drawDot(t,r,n,o,l=0,a=1){t.fillRect((r+l)*o,(n+l)*o,a*o,a*o)}static _drawAlignProtector(t,r,n,o){t.clearRect((r-2)*o,(n-2)*o,5*o,5*o),t.fillRect((r-2)*o,(n-2)*o,5*o,5*o)}static _drawAlign(t,r,n,o,l=0,a=1,i,s){const u=t.fillStyle;t.fillStyle=i,new Array(4).fill(0).map((c,d)=>{de._drawDot(t,r-2+d,n-2,o,l,a),de._drawDot(t,r+2,n-2+d,o,l,a),de._drawDot(t,r+2-d,n+2,o,l,a),de._drawDot(t,r-2,n+2-d,o,l,a)}),de._drawDot(t,r,n,o,l,a),s||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((c,d)=>{de._drawDot(t,r-1+d,n-1,o,l,a),de._drawDot(t,r+1,n-1+d,o,l,a),de._drawDot(t,r+1-d,n+1,o,l,a),de._drawDot(t,r-1,n+1-d,o,l,a)})),t.fillStyle=u}_draw(){var t,r,n,o,l,a,i,s,u,c,d,f,p,h,m,A,g,v,y;return vp(this,void 0,void 0,function*(){const _=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,k=this.options.size;let w=this.options.margin;(w<0||w*2>=k)&&(w=0);const b=Math.ceil(w),O=k-2*w,E=this.options.whiteMargin,V=this.options.backgroundDimming,S=Math.ceil(O/_),H=S*_,L=H+2*b,J=new st(L,L),P=J.getContext("2d");this._clear(),P.save(),P.translate(b,b);const Se=new st(L,L),ne=Se.getContext("2d");let D=null,x=[];if(this.options.gifBackground){const F=Jh(this.options.gifBackground);if(D=F,x=Qh(F),this.options.autoColor){let Y=0,K=0,Q=0,Ee=0;for(let ye=0;ye<x[0].colorTable.length;ye++){const _e=x[0].colorTable[ye];_e[0]>200||_e[1]>200||_e[2]>200||_e[0]===0&&_e[1]===0&&_e[2]===0||(Ee++,Y+=_e[0],K+=_e[1],Q+=_e[2])}Y=~~(Y/Ee),K=~~(K/Ee),Q=~~(Q/Ee),this.options.colorDark="rgb(".concat(Y,",").concat(K,",").concat(Q,")")}}else if(this.options.backgroundImage){const F=yield ea(this.options.backgroundImage);if(this.options.autoColor){const Y=de._getAverageRGB(F);this.options.colorDark="rgb(".concat(Y.r,",").concat(Y.g,",").concat(Y.b,")")}ne.drawImage(F,0,0,F.width,F.height,0,0,L,L),ne.rect(0,0,L,L),ne.fillStyle=V,ne.fill()}else ne.rect(0,0,L,L),ne.fillStyle=this.options.colorLight,ne.fill();const I=pe.getPatternPosition(this.qrCode.typeNumber),X=((n=(r=this.options.components)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.scale)||Tn,W=(1-X)*.5;for(let F=0;F<_;F++)for(let Y=0;Y<_;Y++){const K=this.qrCode.isDark(F,Y),Q=Y<8&&(F<8||F>=_-8)||Y>=_-8&&F<8,Ee=F==6&&Y>=8&&Y<=_-8||Y==6&&F>=8&&F<=_-8;let ye=Q||Ee;for(let Ie=1;Ie<I.length-1;Ie++)ye=ye||F>=I[Ie]-2&&F<=I[Ie]+2&&Y>=I[Ie]-2&&Y<=I[Ie]+2;const _e=Y*S+(ye?0:W*S),He=F*S+(ye?0:W*S);if(P.strokeStyle=K?this.options.colorDark:this.options.colorLight,P.lineWidth=.5,P.fillStyle=K?this.options.colorDark:this.options.colorLight,I.length===0)ye||P.fillRect(_e,He,(ye?1:X)*S,(ye?1:X)*S);else{const Ie=Y<_-4&&Y>=_-4-5&&F<_-4&&F>=_-4-5;!ye&&!Ie&&P.fillRect(_e,He,(ye?1:X)*S,(ye?1:X)*S)}}const N=I[I.length-1],ee=this.options.colorLight;if(P.fillStyle=ee,P.fillRect(0,0,8*S,8*S),P.fillRect(0,(_-8)*S,8*S,8*S),P.fillRect((_-8)*S,0,8*S,8*S),!((l=(o=this.options.components)===null||o===void 0?void 0:o.timing)===null||l===void 0)&&l.protectors&&(P.fillRect(8*S,6*S,(_-8-8)*S,S),P.fillRect(6*S,8*S,S,(_-8-8)*S)),!((i=(a=this.options.components)===null||a===void 0?void 0:a.cornerAlignment)===null||i===void 0)&&i.protectors&&de._drawAlignProtector(P,N,N,S),!((u=(s=this.options.components)===null||s===void 0?void 0:s.alignment)===null||u===void 0)&&u.protectors)for(let F=0;F<I.length;F++)for(let Y=0;Y<I.length;Y++){const K=I[Y],Q=I[F];if(!(K===6&&(Q===6||Q===N))){if(Q===6&&(K===6||K===N))continue;if(K===N&&Q===N)continue;de._drawAlignProtector(P,K,Q,S)}}P.fillStyle=this.options.colorDark,P.fillRect(0,0,7*S,S),P.fillRect((_-7)*S,0,7*S,S),P.fillRect(0,6*S,7*S,S),P.fillRect((_-7)*S,6*S,7*S,S),P.fillRect(0,(_-7)*S,7*S,S),P.fillRect(0,(_-7+6)*S,7*S,S),P.fillRect(0,0,S,7*S),P.fillRect(6*S,0,S,7*S),P.fillRect((_-7)*S,0,S,7*S),P.fillRect((_-7+6)*S,0,S,7*S),P.fillRect(0,(_-7)*S,S,7*S),P.fillRect(6*S,(_-7)*S,S,7*S),P.fillRect(2*S,2*S,3*S,3*S),P.fillRect((_-7+2)*S,2*S,3*S,3*S),P.fillRect(2*S,(_-7+2)*S,3*S,3*S);const Z=((d=(c=this.options.components)===null||c===void 0?void 0:c.timing)===null||d===void 0?void 0:d.scale)||Tn,Le=(1-Z)*.5;for(let F=0;F<_-8;F+=2)de._drawDot(P,8+F,6,S,Le,Z),de._drawDot(P,6,8+F,S,Le,Z);const Re=((p=(f=this.options.components)===null||f===void 0?void 0:f.cornerAlignment)===null||p===void 0?void 0:p.scale)||Tn,nt=(1-Re)*.5;de._drawAlign(P,N,N,S,nt,Re,this.options.colorDark,((m=(h=this.options.components)===null||h===void 0?void 0:h.cornerAlignment)===null||m===void 0?void 0:m.protectors)||!1);const Xe=((g=(A=this.options.components)===null||A===void 0?void 0:A.alignment)===null||g===void 0?void 0:g.scale)||Tn,Ke=(1-Xe)*.5;for(let F=0;F<I.length;F++)for(let Y=0;Y<I.length;Y++){const K=I[Y],Q=I[F];if(!(K===6&&(Q===6||Q===N))){if(Q===6&&(K===6||K===N))continue;if(K===N&&Q===N)continue;de._drawAlign(P,K,Q,S,Ke,Xe,this.options.colorDark,((y=(v=this.options.components)===null||v===void 0?void 0:v.alignment)===null||y===void 0?void 0:y.protectors)||!1)}}if(E&&(P.fillStyle=this.options.backgroundColor,P.fillRect(-b,-b,L,b),P.fillRect(-b,H,L,b),P.fillRect(H,-b,b,L),P.fillRect(-b,-b,b,L)),this.options.logoImage){const F=yield ea(this.options.logoImage);let Y=this.options.logoScale,K=this.options.logoMargin,Q=this.options.logoCornerRadius;(Y<=0||Y>=1)&&(Y=.2),K<0&&(K=0),Q<0&&(Q=0);const Ee=H*Y,ye=.5*(L-Ee),_e=ye;P.restore(),P.fillStyle=this.options.logoBackgroundColor,P.save(),de._prepareRoundedCornerClip(P,ye-K,_e-K,Ee+2*K,Ee+2*K,Q+K),P.clip();const He=P.globalCompositeOperation;P.globalCompositeOperation="destination-out",P.fill(),P.globalCompositeOperation=He,P.restore(),P.save(),de._prepareRoundedCornerClip(P,ye,_e,Ee,Ee,Q),P.clip(),P.drawImage(F,ye,_e,Ee,Ee),P.restore(),P.save(),P.translate(b,b)}if(D){let F,Y,K,Q,Ee,ye;if(x.forEach(function(_e){F||(F=new me(k,k),F.setDelay(_e.delay),F.setRepeat(0));const{width:He,height:Ie}=_e.dims;Y||(Y=new st(He,Ie),K=Y.getContext("2d"),K.rect(0,0,Y.width,Y.height),K.fillStyle="#ffffff",K.fill()),(!Q||!ye||He!==Q.width||Ie!==Q.height)&&(Q=new st(He,Ie),Ee=Q.getContext("2d"),ye=Ee.createImageData(He,Ie)),ye.data.set(_e.patch),Ee.putImageData(ye,0,0),K.drawImage(Q.getContext("2d").canvas,_e.dims.left,_e.dims.top);const Lt=new st(L,L),St=Lt.getContext("2d");St.drawImage(Y.getContext("2d").canvas,0,0,L,L),St.rect(0,0,L,L),St.fillStyle=V,St.fill(),St.drawImage(J.getContext("2d").canvas,0,0,L,L);const Qt=new st(k,k),en=Qt.getContext("2d");en.drawImage(Lt.getContext("2d").canvas,0,0,k,k),F.addFrame(en.getImageData(0,0,Qt.width,Qt.height).data)}),!F)throw new Error("No frames.");if(F.finish(),ta(this.canvas)){const He=F.stream().toFlattenUint8Array().reduce((Ie,Lt)=>Ie+String.fromCharCode(Lt),"");return Promise.resolve("data:image/gif;base64,".concat(window.btoa(He)))}return Promise.resolve(Buffer.from(F.stream().toFlattenUint8Array()))}else{ne.drawImage(J.getContext("2d").canvas,0,0,L,L),P.drawImage(Se.getContext("2d").canvas,-b,-b,L,L);const F=new st(k,k);F.getContext("2d").drawImage(J.getContext("2d").canvas,0,0,k,k),this.canvas=F;const K=this.options.gifBackground?"gif":"png";return ta(this.canvas)?Promise.resolve(this.canvas.toDataURL(K)):Promise.resolve(this.canvas.toBuffer(K))}})}}de.CorrectLevel=Be;de.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};de.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:Be.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:de.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function ta(e){try{return e instanceof HTMLElement}catch(t){return typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}}const mp={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const r=await xh(this.gifBgSrc),n=this.logoSrc;this.render(void 0,n,r);return}const e=this.bgSrc,t=this.logoSrc;this.render(e,t)},async render(e,t,r){const n=this;new de({gifBackground:r,text:n.text,size:n.size,margin:n.margin,colorDark:n.colorDark,colorLight:n.colorLight,backgroundColor:n.backgroundColor,backgroundImage:e,backgroundDimming:n.backgroundDimming,logoImage:t,logoScale:n.logoScale,logoBackgroundColor:n.logoBackgroundColor,correctLevel:n.correctLevel,logoMargin:n.logoMargin,logoCornerRadius:n.logoCornerRadius,whiteMargin:pr(n.whiteMargin),dotScale:n.dotScale,autoColor:pr(n.autoColor),binarize:pr(n.binarize),binarizeThreshold:n.binarizeThreshold,components:n.components}).draw().then(o=>{this.imgUrl=o,n.callback&&n.callback(o,n.qid)})}}},yp=["src"];function bp(e,t,r,n,o,l){return r.bindElement?(T(),j("img",{key:0,style:{display:"inline-block"},src:o.imgUrl},null,8,yp)):Ae("",!0)}const _p=ge(mp,[["render",bp],["__file","D:/work/public/easy-print/node_modules/vue-qr/src/packages/vue-qr.vue"]]),wp={key:0},Ep={key:1},Sp=fe({__name:"index",props:{modelValue:{type:Array,required:!0,default:()=>[]}},emits:["update:modelValue","change"],setup(e,{emit:t}){C([{name:"图片",value:Er.IMG},{name:"文本",value:Er.TEXT}]);const r=ve({data:[]}),n=C(""),o=C(""),l=C(""),a=Ne(),i=ie(()=>a.getActiveTd);le(()=>i.value,(f,p)=>{r.data.forEach(h=>{h.children.forEach(m=>{m.id==i.value&&(n.value=m.key,o.value=m.defaultValue,l.value=m.dataType)})})});const s=t,u=e;le(()=>u.modelValue,f=>{r.data=f},{deep:!0,immediate:!0});const c=(f,p)=>{r.data.forEach(h=>{h.children.forEach(m=>{m.id==i.value&&(m[p]=f)})}),d()},d=()=>{s("update:modelValue",r.data)};return(f,p)=>{const h=q("el-form-item"),m=q("InputOrSelectData"),A=q("el-input"),g=q("el-form"),v=q("el-result");return i.value?(T(),j("div",wp,[M(g,{"label-width":"80px","label-position":"top",class:"w100",ref:"formAttrRef"},{default:R(()=>[M(h,{label:"当前id"},{default:R(()=>[ue(De(i.value),1)]),_:1}),M(h,{label:"单元绑定key"},{default:R(()=>[M(m,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=y=>n.value=y),onChange:p[1]||(p[1]=y=>c(y,"key"))},null,8,["modelValue"])]),_:1}),M(h,{label:"单元默认数据"},{default:R(()=>[M(A,{modelValue:o.value,"onUpdate:modelValue":p[2]||(p[2]=y=>o.value=y),onChange:p[3]||(p[3]=y=>c(y,"defaultValue"))},null,8,["modelValue"])]),_:1})]),_:1},512)])):(T(),j("div",Ep,[M(v,{icon:"warning",title:"提示","sub-title":"ctrl + 鼠标点击单元格选取"})]))}}}),Op=ge(Sp,[["__scopeId","data-v-5809100f"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tabletdSelect/index.vue"]]),xp={class:"inputOrSelectData"},kp={class:"dataSourceList"},Cp=fe({__name:"inputOrSelectData",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=Ne(),n=ve({data:[],printOption:{}}),o=t,l=C(null),a=C(""),i=ie(()=>(r.getDataCource&&r.getDataCource.length>0&&(a.value=r.getDataCource[0].module_field),r.getDataCource)),s=e;le(()=>s.modelValue,p=>{n.data=p},{deep:!0,immediate:!0});const u=()=>{o("update:modelValue",n.data),o("change",n.data)},c=oa(!1),d=()=>{var p;r.getDataSourceType!=Ht.Parameter&&(c.value=!0,(p=l.value)==null||p.blur())},f=(p,h)=>{c.value=!1,n.data=p.module_field+"."+h.field,u()};return(p,h)=>{const m=q("el-input"),A=q("el-card"),g=q("el-tab-pane"),v=q("el-tabs"),y=q("el-button");return T(),j("div",xp,[M(m,{modelValue:n.data,"onUpdate:modelValue":h[0]||(h[0]=_=>n.data=_),onFocus:d,onInput:u,clearable:"",ref_key:"myInput",ref:l},null,8,["modelValue"]),M(z(Wt),{onMousedown:h[3]||(h[3]=$e(()=>{},["stop"])),modelValue:c.value,"onUpdate:modelValue":h[4]||(h[4]=_=>c.value=_),title:"数据源"},{footer:R(()=>[U("div",null,[M(y,{size:"large",onClick:h[2]||(h[2]=_=>c.value=!1)},{default:R(()=>h[5]||(h[5]=[ue("取消")])),_:1,__:[5]})])]),default:R(()=>[M(v,{modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=_=>a.value=_),class:"demo-tabs"},{default:R(()=>[(T(!0),j(be,null,xe(i.value,(_,k)=>(T(),se(g,{key:k,name:_.module_field,label:_.module_name},{default:R(()=>[U("div",kp,[(T(!0),j(be,null,xe(_.module_content,(w,b)=>(T(),se(A,{class:"cp",onClick:O=>f(_,w),key:b,style:{width:"100%"},shadow:"hover"},{default:R(()=>[ue(De(w.name),1)]),_:2},1032,["onClick"]))),128))])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Ap=ge(Cp,[["__scopeId","data-v-743f749f"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/inputOrSelectData.vue"]]),Pp=["src"],Dp=["innerHTML"],Ip=fe({__name:"webView",props:{element:{type:Object,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=Ne(),n=C(!1);ve({data:[]});const o=C(null),l=C(),a=e,i=C(!0);ie(()=>{}),le(()=>a.element.attrs.defaultValue,u=>{i.value=!1,o.value=null,setTimeout(()=>{i.value=!0,console.log("111 :>> ",u)},500)},{deep:!0,immediate:!0}),C();async function s(u){console.log("data :>> ",u);try{var c=l.value.contentDocument||l.value.contentWindow.document;n.value=!0,setTimeout(()=>{c.readyState=="complete"&&(o.value=c.documentElement.outerHTML),n.value=!1},r.getWebViewLoadingTime)}catch(d){}}return C(),Je(()=>{}),(u,c)=>{const d=q("Popover"),f=wi("loading");return T(),se(d,{class:"relative",style:ae({...z(dn)(e.element.styles),fontSize:e.element.styles.fontSize+"px"})},{default:R(()=>[!o.value&&i.value?(T(),j("iframe",{key:0,ref_key:"iframeef",ref:l,style:ae({border:"none",height:e.element.styles.h-12+"px",width:e.element.styles.w-12+"px"}),onLoad:s,src:z(r).getRenderType==""?e.element.attrs.defaultValue:z(pt)(e.model,e.element.prop)},null,44,Pp)):Ae("",!0),At(U("div",{class:"easyprintWebview",innerHTML:o.value},null,8,Dp),[[f,n.value]])]),_:1},8,["style"])}}}),Tp=ge(Ip,[["__scopeId","data-v-aaf206a2"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/webView.vue"]]),Rp={__name:"CrossDomainInput",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},size:{type:String,default:"default"},allowedDomains:{type:Array,default:()=>[window.location.host]},detectionMode:{type:String,default:"strict",validator:e=>["strict","loose"].includes(e)},detectionTrigger:{type:String,default:"change",validator:e=>["change","input"].includes(e)}},emits:["update:modelValue","blur","focus","clear","change","input"],setup(e,{emit:t}){const r=e,n=t,o=C(r.modelValue),l=f=>{try{const p=new URL(f),h=p.host,m=p.hostname;return!r.allowedDomains.some(A=>A.includes(":")?A===h:A===m)}catch(p){return!1}},a=f=>{if(!f)return!1;if(r.detectionMode==="loose")try{return l(f)}catch(p){return!1}else{const p=/https?:\/\/[^\s/$.?#].[^\s]*/g,h=f.match(p);return h?h.some(m=>l(m)):!1}},i=f=>a(f)?(o.value="",n("update:modelValue",""),console.warn("检测到跨域内容，已自动清空输入框"),!0):!1,s=f=>{o.value=f,n("input",f),r.detectionTrigger==="input"&&i(f)},u=f=>{n("blur",f),r.detectionTrigger==="change"&&i(o.value)},c=f=>{n("change",f)},d=()=>{o.value="",n("clear"),n("update:modelValue","")};return le(()=>r.modelValue,f=>{f!==o.value&&(o.value=f)}),le(o,f=>{n("update:modelValue",f)}),(f,p)=>{const h=q("el-input");return T(),se(h,{modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value=m),placeholder:e.placeholder,type:e.type,clearable:e.clearable,disabled:e.disabled,readonly:e.readonly,"show-password":e.showPassword,size:e.size,onBlur:u,onInput:s,onChange:c,onClear:d},null,8,["modelValue","placeholder","type","clearable","disabled","readonly","show-password","size"])}}},Mp=ge(Rp,[["__scopeId","data-v-c06ad340"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/CrossDomainInput.vue"]]),Lp={key:0},$p=fe({__name:"index",props:{element:{type:Object,required:!0,default:()=>({})},model:{type:Object,default:()=>{}},modelValue:{type:Array,required:!0,default:()=>""}},emits:["update:modelValue","change","handledRaggable"],setup(e,{emit:t}){C(!1),C({col:2,row:1}),C([]);const r=C(),n=Ne(),o=qt();ve({data:[],startX:0,startY:0,index:0,colIndex:0,rowIndex:0,type:"row"});const l=e;le(()=>l.modelValue,d=>{},{deep:!0,immediate:!0}),le(()=>l.element,d=>{},{deep:!0,immediate:!0});const a=ie(()=>l.element.attrs.columns),i=C(),s=C([]),u=C();C(!1);function c(){if(!i.value)return;const d=i.value.rows;if(!d)return;const f=o.getPageOption.height+(o.getPage-1*10);let h=l.element.styles.y%f;i.value.children[1].children;for(let m=0;m<d.length;m++)if(h+=d[m].offsetHeight,h>=f){let A=h-d[m-1].offsetHeight,g=f-A;s.value.splice(m-1,0,{_style:{height:30+g+"px"}}),h=0}}return Je(()=>{s.value=n.getRenderType==""?[]:pt(l.model,l.element.prop),s.value=s.value.filter(d=>!d._style),setTimeout(()=>{c()},1e3)}),(d,f)=>{const p=q("Popover");return T(),j("div",{ref_key:"containerRef",ref:r,class:"tablecontainerRef"},[M(p,{style:ae(z(dn)(e.element.styles)),onHandleTable:d.handleControls},{default:R(()=>[U("table",{cellpadding:"0",style:ae({...e.element.styles,width:e.element.styles.w,height:e.element.styles.h,"table-layout":"fixed"}),cellspacing:"0",ref_key:"tableRef",ref:i},[U("thead",null,[U("tr",null,[(T(!0),j(be,null,xe(a.value,(h,m)=>(T(),j("td",{key:m,style:ae({width:h.width+"px"})},De(h.name),5))),128))])]),U("tbody",{ref_key:"tbodyRef",ref:u},[(T(!0),j(be,null,xe(s.value,(h,m)=>(T(),j(be,{key:m},[h._style?Ae("",!0):(T(),j("tr",Lp,[(T(!0),j(be,null,xe(a.value,(A,g)=>(T(),j("td",{key:g},De(h[A.prop]),1))),128))])),h._style?(T(),j("div",{key:1,style:ae(h._style)},null,4)):Ae("",!0)],64))),128))],512)],4)]),_:1},8,["style","onHandleTable"])],512)}}}),Bp=ge($p,[["__scopeId","data-v-be1962ce"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tableList/index.vue"]]),Np=fe({__name:"TableHeaderSetting",props:{element:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const r=t,n=C(!1);C([]),C([]);const o=e,l=ve({data:[]}),a=()=>{n.value=!0},i=u=>{n.value=!1,r("update:modelValue",l.data),r("change",l.data)};le(()=>o.modelValue,u=>{l.data=u},{deep:!0,immediate:!0});const s=()=>{l.data.push({})};return(u,c)=>{const d=q("el-button"),f=q("el-input"),p=q("el-table-column"),h=q("el-table");return T(),j("div",null,[M(d,{type:"primary",class:"ml10",onClick:a},{default:R(()=>c[3]||(c[3]=[ue("设置表头")])),_:1,__:[3]}),M(z(Wt),{onMousedown:c[1]||(c[1]=$e(()=>{},["stop"])),modelValue:n.value,"onUpdate:modelValue":c[2]||(c[2]=m=>n.value=m),title:"标题设置"},{footer:R(()=>[U("div",null,[M(d,{size:"large",onClick:c[0]||(c[0]=m=>n.value=!1)},{default:R(()=>c[5]||(c[5]=[ue("取消")])),_:1,__:[5]}),M(d,{size:"large",type:"primary",onClick:i},{default:R(()=>c[6]||(c[6]=[ue("保存")])),_:1,__:[6]})])]),default:R(()=>[U("div",null,[M(d,{type:"primary",onClick:s},{default:R(()=>c[4]||(c[4]=[ue("新增列")])),_:1,__:[4]})]),M(h,{data:l.data,stripe:"",style:{width:"100%"}},{default:R(()=>[M(p,{prop:"name",label:"表头名字",width:"180"},{default:R(m=>[M(f,{modelValue:m.row.name,"onUpdate:modelValue":A=>m.row.name=A,placeholder:"表头名字"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),M(p,{prop:"prop",label:"数据Key",width:"180"},{default:R(m=>[M(f,{modelValue:m.row.prop,"onUpdate:modelValue":A=>m.row.prop=A,placeholder:"数据渲染对应字段"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),M(p,{prop:"width",label:"宽度",width:"180"},{default:R(m=>[M(f,{modelValue:m.row.width,"onUpdate:modelValue":A=>m.row.width=A,placeholder:"列宽度"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}}),Vp=ge(Np,[["__scopeId","data-v-2d779a54"],["__file","D:/work/public/easy-print/src/packages/easy-print/component/tableList/TableHeaderSetting.vue"]]),zp={install(e){e.use(Ys),e.component("CrossDomainInput",Mp),e.component("webViewContainer",Tp),e.component("TableList",Bp),e.component("TableHeaderSetting",Vp),e.component("InputOrSelectData",Ap),e.component("tabletdSelect",Op),e.component("Popover",Ns),e.component("textContainer",iu),e.component("lineContainer",Oh),e.component("RichTextContainer",_h),e.component("RichTextContent",Eh),e.component("BarCodeContainer",fh),e.component("TwoCodeContainer",su),e.component("ImageContainer",gh),e.component("uploadImg",mh),e.component("vueQr",_p)}},Yp={install(e){const t=bi();e.use(t),e.component("EasyPrint",ou),e.component("PreviewPrint",Ts),e.use(zp)}};export{Yp as i};
