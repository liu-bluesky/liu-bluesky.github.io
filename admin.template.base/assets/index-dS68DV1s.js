import"./vue-BOAnm8BJ.js";import{u as I,a as z}from"./vue-router-DgaeXL21.js";import{_ as g}from"./index-D8uVrJWJ.js";import{h as B,f as F}from"./index-CxwxT6J_.js";import{d as L,A as _,r as v,b as M,j as e,i as m,o as f,c as d,k as t,q as l,u as V,a as $,v as r,x as T,m as j}from"./@vue-C7kBaxf_.js";import"./axios-CdcsOsvR.js";import"./vuex-fAqGcTDK.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./vue-i18n-CbYyLErm.js";import"./@intlify-D_0T6EgR.js";import"./@vueuse-C3s7uLKR.js";import"./element-plus-DCyP7bP4.js";import"./lodash-es-CiJSjksT.js";import"./@element-plus-CaqvGD6o.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CuLmuTop.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";/* empty css                    */import"./element-easy-print-4c_yq0aR.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-DIkZKdRf.js";import"./element-easy-form-CEkbENOi.js";import"./vuedraggable-DF9qvgpV.js";import"./pinia-BsMBDaf_.js";import"./vue-demi-Zo4Nq4nd.js";import"./@vue-monaco-CNmGcFBZ.js";import"./uuid-CQkTLCs1.js";function J(c){return B.request({url:"/monitor/operlog/list",method:"get",params:c})}const O={class:"commonBoxmp"},P={key:0},U={key:1},A={class:"dialog-footer"},Ne=L({__name:"index",setup(c){I(),z();const{parseTime:x,addDateRange:E,getDict:b,selectDictLabel:k}=F();let n=_({sys_oper_type:[],sys_common_status:[]});v(),M(async()=>{n.sys_oper_type=await b("sys_oper_type"),n.sys_common_status=await b("sys_common_status")});const h=(p,s)=>k(n.sys_oper_type,p.businessType),w=v(),o=_({form:{},title:"",rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"日志编号",prop:"operId",visible:!0},{label:"系统模块",prop:"title",visible:!0},{label:"操作类型",visible:!0,prop:"businessType",render:({row:p})=>e(g,{values:p.businessType,dataType:"primary",options:n.sys_oper_type},null)},{label:"操作人员",prop:"operName",visible:!0},{label:"操作地址",prop:"operIp",visible:!0},{label:"操作地点",prop:"operLocation",visible:!0},{label:"操作状态",render:({row:p})=>e(g,{values:p.status,dataType:"primary",options:n.sys_common_status},null),prop:"status",visible:!0},{label:"操作日期",prop:"operTime",visible:!0},{label:"消耗时间",prop:"costTime",visible:!0}],loading:!1});_({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),_(JSON.parse(JSON.stringify({pageNum:1,pageSize:10})));const N=p=>{o.form=p,o.userVisible=!0};return(p,s)=>{const y=m("el-button"),q=m("el-table-column"),C=m("TableV2"),a=m("el-form-item"),i=m("el-col"),D=m("el-row"),R=m("el-form"),S=m("el-dialog");return f(),d("div",O,[e(C,{class:"flex1",ref_key:"tableV2Ref",ref:w,isInit:!0,apiFunction:V(J),selection:"",columns:o.columnData},{operation:t(()=>[e(q,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:t(u=>[e(y,{type:"text",onClick:H=>N(u.row)},{default:t(()=>s[2]||(s[2]=[l("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),e(S,{modelValue:o.userVisible,"onUpdate:modelValue":s[1]||(s[1]=u=>o.userVisible=u),title:"操作日志详细",width:"50%","destroy-on-close":"",center:""},{footer:t(()=>[$("span",A,[e(y,{onClick:s[0]||(s[0]=u=>o.userVisible=!1)},{default:t(()=>s[3]||(s[3]=[l("取消")])),_:1})])]),default:t(()=>[e(R,{ref:"form",model:o.form,"label-width":"100px",size:"mini"},{default:t(()=>[e(D,null,{default:t(()=>[e(i,{span:12},{default:t(()=>[e(a,{label:"操作模块："},{default:t(()=>[l(r(o.form.title)+" / "+r(h(o.form)),1)]),_:1}),e(a,{label:"登录信息："},{default:t(()=>[l(r(o.form.operName)+" / "+r(o.form.operIp)+" / "+r(o.form.operLocation),1)]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(a,{label:"请求地址："},{default:t(()=>[l(r(o.form.operUrl),1)]),_:1}),e(a,{label:"请求方式："},{default:t(()=>[l(r(o.form.requestMethod),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(a,{label:"操作方法："},{default:t(()=>[l(r(o.form.method),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(a,{label:"请求参数："},{default:t(()=>[l(r(o.form.operParam),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(a,{label:"返回参数："},{default:t(()=>[l(r(o.form.jsonResult),1)]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(a,{label:"操作状态："},{default:t(()=>[o.form.status===0?(f(),d("div",P,"正常")):o.form.status===1?(f(),d("div",U,"失败")):T("",!0)]),_:1})]),_:1}),e(i,{span:8},{default:t(()=>[e(a,{label:"消耗时间："},{default:t(()=>[l(r(o.form.costTime)+"毫秒",1)]),_:1})]),_:1}),e(i,{span:10},{default:t(()=>[e(a,{label:"操作时间："},{default:t(()=>[l(r(V(x)(o.form.operTime)),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[o.form.status===1?(f(),j(a,{key:0,label:"异常信息："},{default:t(()=>[l(r(o.form.errorMsg),1)]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Ne as default};
