import"./vue-BOAnm8BJ.js";import{u as G}from"./vue-router-DgaeXL21.js";import{_ as M,k as j,n as K,r as S}from"./index-CxwxT6J_.js";import{u as $}from"./regular-CgHwq5XP.js";import{u as L}from"./vue-i18n-CbYyLErm.js";import{a as P}from"./element-plus-DCyP7bP4.js";import{d as z,g as H,r as k,s as b,A,b as J,i as F,o as p,c as _,a as V,v as m,u as a,j as o,k as l,m as O,x as E,q as c,am as Q}from"./@vue-C7kBaxf_.js";import"./axios-CdcsOsvR.js";import"./vuex-fAqGcTDK.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./@vueuse-C3s7uLKR.js";import"./@element-plus-CaqvGD6o.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-4c_yq0aR.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-DIkZKdRf.js";import"./element-easy-form-CEkbENOi.js";import"./vuedraggable-DF9qvgpV.js";import"./pinia-BsMBDaf_.js";import"./vue-demi-Zo4Nq4nd.js";import"./@vue-monaco-CNmGcFBZ.js";import"./uuid-CQkTLCs1.js";import"./@intlify-D_0T6EgR.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const W={class:"login-form mxauto white-bg"},X={class:"title"},Y={key:0},Z={class:"login-code"},ee=["src"],oe={key:1},te={class:"aic"},ae={class:"jcb aic w100"},le=z({__name:"login-form",emits:["handleGoregister"],setup(ue,{emit:x}){const{t:u}=L();let D=x;G(),H();const B=k(),{regEmail:I}=$(),v=()=>{D("handleGoregister",!0)};let h=k("获取验证码"),g=60;const y=()=>{if(g==0){h.value="获取验证码",g=60;return}else h.value=g+"s",g--;setTimeout(function(){y()},1e3)},T=()=>{if(!I(e.loginValidateForm.email)){P.warning("请输入邮箱");return}y()};let f=b(!0);const R=A({email:[{required:!0,type:"email",message:"请输入邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"密码不能为空"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}]});let U=b(!1);const e=A({loginValidateForm:{username:"admin",password:"admin123",email:"",code:"",uuid:""},captchaEnabled:!1,image:""}),C=()=>{j().then(r=>{e.captchaEnabled=r.captchaEnabled,e.loginValidateForm.uuid=r.uuid,e.image="data:image/gif;base64,"+r.img})},w=async r=>{r&&(await(r==null?void 0:r.validate()),K.dispatch("loginModule/Login",e.loginValidateForm).then(t=>{S("/")}).catch(()=>{e.captchaEnabled&&C()}))},q=()=>{f.value=!f.value};return J(()=>{C()}),(r,t)=>{const n=F("el-input"),s=F("el-form-item"),d=F("el-button"),N=F("el-form");return p(),_("div",W,[V("h1",X,m(a(u)("登录")),1),o(N,{rules:R,model:e.loginValidateForm,ref_key:"ruleFormRef",ref:B,onKeyup:t[6]||(t[6]=Q(i=>w(B.value),["enter","native"])),class:"ruleForm mt30"},{default:l(()=>[a(f)?(p(),_("div",Y,[o(s,{prop:"username",class:"mt30"},{default:l(()=>[o(n,{type:"text",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.username,"onUpdate:modelValue":t[0]||(t[0]=i=>e.loginValidateForm.username=i),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),o(s,{class:"mt30",prop:"password"},{default:l(()=>[o(n,{"show-password":"",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.password,"onUpdate:modelValue":t[1]||(t[1]=i=>e.loginValidateForm.password=i),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),e.captchaEnabled?(p(),O(s,{key:0,prop:"code"},{default:l(()=>[o(n,{modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[2]||(t[2]=i=>e.loginValidateForm.code=i),placeholder:a(u)("请输入"),style:{width:"63%"}},null,8,["modelValue","placeholder"]),V("div",Z,[e.image?(p(),_("img",{key:0,src:e.image,onClick:C,class:"login-code-img"},null,8,ee)):E("",!0)])]),_:1})):E("",!0)])):(p(),_("div",oe,[o(s,{prop:"email"},{default:l(()=>[V("div",te,[o(n,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.email,"onUpdate:modelValue":t[3]||(t[3]=i=>e.loginValidateForm.email=i)},null,8,["placeholder","modelValue"]),o(d,{type:"primary",onClick:T,class:"ml15"},{default:l(()=>[c(m(a(h)),1)]),_:1})])]),_:1}),o(s,{prop:"code"},{default:l(()=>[o(n,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[4]||(t[4]=i=>e.loginValidateForm.code=i),type:"text"},null,8,["placeholder","modelValue"])]),_:1})])),o(s,{class:"mt30"},{default:l(()=>[o(d,{type:"primary",class:"w100",loading:a(U),onClick:t[5]||(t[5]=i=>w(B.value))},{default:l(()=>[c(m(a(u)("登录")),1)]),_:1},8,["loading"])]),_:1}),o(s,{class:"mt30"},{default:l(()=>[V("div",ae,[o(d,{onClick:v},{default:l(()=>[c(m(a(u)("注册")),1)]),_:1}),o(d,{onClick:v},{default:l(()=>[c(m(a(u)("忘记密码")),1)]),_:1}),o(d,{onClick:q},{default:l(()=>[c(m(a(f)?a(u)("邮箱登录"):a(u)("账户密码登录")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])])}}}),Me=M(le,[["__scopeId","data-v-65213428"]]);export{Me as default};
