import"./vue-DSB24BnW.js";import{u as R}from"./vue-router-fyTrc5Va.js";import{_ as q,c as G,g as M,e as j,r as K}from"./index-CfbifT15.js";import{u as $}from"./regular-CgHwq5XP.js";import{a as P}from"./element-plus-Cdmo8XhC.js";import{d as z,r as g,v as A,f as H,h as _,c as f,i as o,j as a,ak as J,o as m,u as F,l as O,a as V,n as k,m as n,t as b,U as Q,V as W}from"./@vue-CmN6Z9lx.js";import"./ace-builds-DiBK84cm.js";import"./vuex-CLkfaZ6_.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-Jw_v0k3c.js";import"./@vueuse-D81fD1wx.js";import"./nprogress-C9k5oxGd.js";import"./axios-BNZxzx77.js";import"./@element-plus-DGCe4rM-.js";/* empty css                    */import"./dayjs-BhI1duP8.js";import"./element-easy-form-Dkjp9jsl.js";import"./mockjs-72j0mDZC.js";import"./vuedraggable-C0hio2tq.js";import"./sortablejs-CUXm9Ppf.js";import"./vue3-ace-editor-YX3apWn1.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./uuid-CQkTLCs1.js";import"./vue-i18n-BPZ2p18e.js";import"./@intlify-fCQYzvHO.js";import"./element-easy-print-B_PXcQ-3.js";import"./vue3-draggable-resizable-yn-Cm3Ut1tY.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const X=d=>(Q("data-v-65213428"),d=d(),W(),d),Y={class:"login-form mxauto white-bg"},Z=X(()=>V("h1",{class:"title"},"登录",-1)),ee={key:0},oe={class:"login-code"},te=["src"],ae={key:1},le={class:"aic"},ue={class:"jcb aic w100"},ie=z({__name:"login-form",emits:["handleGoregister"],setup(d,{emit:E}){let x=E;R();const{openLoading:re,closeLoading:D}=G(),B=g(),{regEmail:I}=$(),v=()=>{x("handleGoregister",!0)};let C=g("获取验证码"),p=60;const y=()=>{if(p==0){C.value="获取验证码",p=60;return}else C.value=p+"s",p--;setTimeout(function(){y()},1e3)},T=()=>{if(!I(e.loginValidateForm.email)){P.warning("请输入邮箱");return}y()};let c=g(!0);const U=A({email:[{required:!0,type:"email",message:"请输入邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"密码不能为空"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}]});let S=g(!1);const e=A({loginValidateForm:{username:"admin",password:"admin123",email:"",code:"",uuid:""},captchaEnabled:!1,image:""}),h=()=>{M().then(u=>{e.captchaEnabled=u.captchaEnabled,e.loginValidateForm.uuid=u.uuid,e.image="data:image/gif;base64,"+u.img})},w=async u=>{u&&(await(u==null?void 0:u.validate()),j.dispatch("loginModule/Login",e.loginValidateForm).then(t=>{K("/")}).catch(()=>{e.captchaEnabled&&h()}))},L=()=>{c.value=!c.value};return H(()=>{D(),h()}),(u,t)=>{const r=_("el-input"),i=_("el-form-item"),s=_("el-button"),N=_("el-form");return m(),f("div",Y,[Z,o(N,{rules:U,model:e.loginValidateForm,ref_key:"ruleFormRef",ref:B,onKeyup:t[6]||(t[6]=J(l=>w(B.value),["enter","native"])),class:"ruleForm mt30"},{default:a(()=>[F(c)?(m(),f("div",ee,[o(i,{prop:"username",class:"mt30"},{default:a(()=>[o(r,{type:"text",placeholder:"请输入",modelValue:e.loginValidateForm.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.loginValidateForm.username=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(i,{class:"mt30",prop:"password"},{default:a(()=>[o(r,{"show-password":"",placeholder:"输入密码",modelValue:e.loginValidateForm.password,"onUpdate:modelValue":t[1]||(t[1]=l=>e.loginValidateForm.password=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e.captchaEnabled?(m(),O(i,{key:0,prop:"code"},{default:a(()=>[o(r,{modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[2]||(t[2]=l=>e.loginValidateForm.code=l),placeholder:"验证码",style:{width:"63%"}},null,8,["modelValue"]),V("div",oe,[e.image?(m(),f("img",{key:0,src:e.image,onClick:h,class:"login-code-img"},null,8,te)):k("",!0)])]),_:1})):k("",!0)])):(m(),f("div",ae,[o(i,{prop:"email"},{default:a(()=>[V("div",le,[o(r,{placeholder:"输入邮箱",modelValue:e.loginValidateForm.email,"onUpdate:modelValue":t[3]||(t[3]=l=>e.loginValidateForm.email=l)},null,8,["modelValue"]),o(s,{type:"primary",onClick:T,class:"ml15"},{default:a(()=>[n(b(F(C)),1)]),_:1})])]),_:1}),o(i,{prop:"code"},{default:a(()=>[o(r,{placeholder:"验证码",modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[4]||(t[4]=l=>e.loginValidateForm.code=l),type:"text"},null,8,["modelValue"])]),_:1})])),o(i,{class:"mt30"},{default:a(()=>[o(s,{type:"primary",class:"w100",loading:F(S),onClick:t[5]||(t[5]=l=>w(B.value))},{default:a(()=>[n("登录")]),_:1},8,["loading"])]),_:1}),o(i,{class:"mt30"},{default:a(()=>[V("div",ue,[o(s,{onClick:v},{default:a(()=>[n("注册")]),_:1}),o(s,{onClick:v},{default:a(()=>[n("忘记密码")]),_:1}),o(s,{onClick:L},{default:a(()=>[n(b(F(c)?"邮箱登录":"账户密码登录"),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])])}}}),Ke=q(ie,[["__scopeId","data-v-65213428"]]);export{Ke as default};
