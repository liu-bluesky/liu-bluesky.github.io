import"./vue-D_Lb-A9Z.js";import{u as B,a as I}from"./vue-router-BVkJAzvN.js";import{_ as v}from"./index-AC1cNjEL.js";import{h as z,f as F}from"./index-D5ps7mph.js";import{d as L,i as _,r as d,b as M,j as p,c,k as e,l as t,u as V,o as f,A as s,a as $,B as r,x as h,t as j}from"./@vue-BQoY7e5N.js";import"./axios-CdcsOsvR.js";import"./vuex-DyTWwpEf.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./vue-i18n-Q_0SgK56.js";import"./@intlify-fCQYzvHO.js";import"./@vueuse-4YXd5vDE.js";import"./element-easy-print-DG2WoKE1.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-D9piuQcC.js";import"./element-plus-FIipFbdT.js";import"./lodash-es-CiJSjksT.js";import"./@element-plus-CoZ0GdCx.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CuLmuTop.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";import"./element-easy-form-vZ9-b79u.js";import"./vuedraggable-ClYEMSPW.js";import"./sortablejs-C1wvN1Nu.js";import"./@vue-monaco-CKP0PU5x.js";import"./uuid-CQkTLCs1.js";import"./nprogress-C1nr5Arz.js";/* empty css                    */function J(b){return z.request({url:"/monitor/operlog/list",method:"get",params:b})}const O={class:"commonBoxmp"},P={key:0},U={key:1},A={class:"dialog-footer"},Ne=L({__name:"index",setup(b){B(),I();const{parseTime:T,addDateRange:E,getDict:y,selectDictLabel:x}=F();let m=_({sys_oper_type:[],sys_common_status:[]});d(),M(async()=>{m.sys_oper_type=await y("sys_oper_type"),m.sys_common_status=await y("sys_common_status"),console.log("dict.sys_common_status :>> ",m.sys_common_status)});const k=(i,n)=>x(m.sys_oper_type,i.businessType);d(!0);const w=d(),o=_({form:{},title:"",rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"日志编号",prop:"operId",visible:!0},{label:"系统模块",prop:"title",visible:!0},{label:"操作类型",visible:!0,prop:"businessType",render:({row:i})=>e(v,{values:i.businessType,dataType:"primary",options:m.sys_oper_type},null)},{label:"操作人员",prop:"operName",visible:!0},{label:"操作地址",prop:"operIp",visible:!0},{label:"操作地点",prop:"operLocation",visible:!0},{label:"操作状态",render:({row:i})=>e(v,{values:i.status,dataType:"primary",options:m.sys_common_status},null),prop:"status",visible:!0},{label:"操作日期",prop:"operTime",visible:!0},{label:"消耗时间",prop:"costTime",visible:!0}],loading:!1});_({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),_(JSON.parse(JSON.stringify({pageNum:1,pageSize:10})));const N=i=>{o.form=i,o.userVisible=!0};return(i,n)=>{const g=p("el-button"),C=p("el-table-column"),q=p("TableV2"),l=p("el-form-item"),a=p("el-col"),D=p("el-row"),R=p("el-form"),S=p("el-dialog");return f(),c("div",O,[e(q,{class:"flex1",ref_key:"tableV2Ref",ref:w,isInit:!0,apiFunction:V(J),selection:"",columns:o.columnData},{operation:t(()=>[e(C,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:t(u=>[e(g,{type:"text",onClick:H=>N(u.row)},{default:t(()=>[s("详情")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),e(S,{modelValue:o.userVisible,"onUpdate:modelValue":n[1]||(n[1]=u=>o.userVisible=u),title:"操作日志详细",width:"50%","destroy-on-close":"",center:""},{footer:t(()=>[$("span",A,[e(g,{onClick:n[0]||(n[0]=u=>o.userVisible=!1)},{default:t(()=>[s("取消")]),_:1})])]),default:t(()=>[e(R,{ref:"form",model:o.form,"label-width":"100px",size:"mini"},{default:t(()=>[e(D,null,{default:t(()=>[e(a,{span:12},{default:t(()=>[e(l,{label:"操作模块："},{default:t(()=>[s(r(o.form.title)+" / "+r(k(o.form)),1)]),_:1}),e(l,{label:"登录信息："},{default:t(()=>[s(r(o.form.operName)+" / "+r(o.form.operIp)+" / "+r(o.form.operLocation),1)]),_:1})]),_:1}),e(a,{span:12},{default:t(()=>[e(l,{label:"请求地址："},{default:t(()=>[s(r(o.form.operUrl),1)]),_:1}),e(l,{label:"请求方式："},{default:t(()=>[s(r(o.form.requestMethod),1)]),_:1})]),_:1}),e(a,{span:24},{default:t(()=>[e(l,{label:"操作方法："},{default:t(()=>[s(r(o.form.method),1)]),_:1})]),_:1}),e(a,{span:24},{default:t(()=>[e(l,{label:"请求参数："},{default:t(()=>[s(r(o.form.operParam),1)]),_:1})]),_:1}),e(a,{span:24},{default:t(()=>[e(l,{label:"返回参数："},{default:t(()=>[s(r(o.form.jsonResult),1)]),_:1})]),_:1}),e(a,{span:6},{default:t(()=>[e(l,{label:"操作状态："},{default:t(()=>[o.form.status===0?(f(),c("div",P,"正常")):o.form.status===1?(f(),c("div",U,"失败")):h("",!0)]),_:1})]),_:1}),e(a,{span:8},{default:t(()=>[e(l,{label:"消耗时间："},{default:t(()=>[s(r(o.form.costTime)+"毫秒",1)]),_:1})]),_:1}),e(a,{span:10},{default:t(()=>[e(l,{label:"操作时间："},{default:t(()=>[s(r(V(T)(o.form.operTime)),1)]),_:1})]),_:1}),e(a,{span:24},{default:t(()=>[o.form.status===1?(f(),j(l,{key:0,label:"异常信息："},{default:t(()=>[s(r(o.form.errorMsg),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{Ne as default};
