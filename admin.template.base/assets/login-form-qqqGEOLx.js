import"./vue-BCJY8gBf.js";import{u as D}from"./vue-router-Bk-12vT2.js";import{o as K,p as L,r as M,a as $}from"./index-DnKBT612.js";import{u as P}from"./regular-CgHwq5XP.js";import{u as z}from"./vue-i18n-DkRB_xiH.js";import{a as A}from"./element-plus-BIk4sW6s.js";import{d as H,g as J,r as C,s as x,B as I,b as O,j as _,o as p,c as V,a as h,x as m,u as a,k as o,l,q as Q,y as T,v as c,ag as W}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./@intlify-BnZ-SFqO.js";const X={class:"login-form mxauto white-bg"},Y={class:"title"},Z={key:0},ee={class:"login-code"},oe=["src"],te={key:1},ae={class:"aic"},le={class:"jcb aic w100"},ie=H({__name:"login-form",emits:["handleGoregister"],setup(re,{emit:B}){const{t:i}=z(),R=K();let U=B;D(),J();const v=C(),{regEmail:q}=P(),b=()=>{U("handleGoregister",!0)};let y=C("获取验证码"),g=60;const w=()=>{if(g==0){y.value="获取验证码",g=60;return}else y.value=g+"s",g--;setTimeout(function(){w()},1e3)},N=()=>{if(!q(e.loginValidateForm.email)){A.warning("请输入邮箱");return}w()};let f=x(!0);const S=I({email:[{required:!0,type:"email",message:"请输入邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"密码不能为空"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}]});let E=x(!1);const e=I({loginValidateForm:{username:"admin",password:"admin123",email:"",code:"",uuid:""},captchaEnabled:!1,image:""}),F=()=>{L().then(s=>{e.captchaEnabled=s.captchaEnabled,e.loginValidateForm.uuid=s.uuid,e.image="data:image/gif;base64,"+s.img})},k=async s=>{s&&(await(s==null?void 0:s.validate()),R.Login(e.loginValidateForm).then(t=>{M("/")}).catch(()=>{e.captchaEnabled&&F()}))},G=()=>{f.value=!f.value};return O(()=>{F()}),(s,t)=>{const d=_("el-input"),n=_("el-form-item"),u=_("el-button"),j=_("el-form");return p(),V("div",X,[h("h1",Y,m(a(i)("登录")),1),o(j,{rules:S,model:e.loginValidateForm,ref_key:"ruleFormRef",ref:v,onKeyup:t[6]||(t[6]=W(r=>k(v.value),["enter","native"])),class:"ruleForm mt30"},{default:l(()=>[a(f)?(p(),V("div",Z,[o(n,{prop:"username",class:"mt30"},{default:l(()=>[o(d,{type:"text",placeholder:a(i)("请输入"),modelValue:e.loginValidateForm.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.loginValidateForm.username=r),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),o(n,{class:"mt30",prop:"password"},{default:l(()=>[o(d,{"show-password":"",placeholder:a(i)("请输入"),modelValue:e.loginValidateForm.password,"onUpdate:modelValue":t[1]||(t[1]=r=>e.loginValidateForm.password=r),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),e.captchaEnabled?(p(),Q(n,{key:0,prop:"code"},{default:l(()=>[o(d,{modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[2]||(t[2]=r=>e.loginValidateForm.code=r),placeholder:a(i)("请输入"),style:{width:"63%"}},null,8,["modelValue","placeholder"]),h("div",ee,[e.image?(p(),V("img",{key:0,src:e.image,onClick:F,class:"login-code-img"},null,8,oe)):T("v-if",!0)])]),_:1})):T("v-if",!0)])):(p(),V("div",te,[o(n,{prop:"email"},{default:l(()=>[h("div",ae,[o(d,{placeholder:a(i)("请输入"),modelValue:e.loginValidateForm.email,"onUpdate:modelValue":t[3]||(t[3]=r=>e.loginValidateForm.email=r)},null,8,["placeholder","modelValue"]),o(u,{type:"primary",onClick:N,class:"ml15"},{default:l(()=>[c(m(a(y)),1)]),_:1})])]),_:1}),o(n,{prop:"code"},{default:l(()=>[o(d,{placeholder:a(i)("请输入"),modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[4]||(t[4]=r=>e.loginValidateForm.code=r),type:"text"},null,8,["placeholder","modelValue"])]),_:1})])),o(n,{class:"mt30"},{default:l(()=>[o(u,{type:"primary",class:"w100",loading:a(E),onClick:t[5]||(t[5]=r=>k(v.value))},{default:l(()=>[c(m(a(i)("登录")),1)]),_:1},8,["loading"])]),_:1}),o(n,{class:"mt30"},{default:l(()=>[h("div",le,[o(u,{onClick:b},{default:l(()=>[c(m(a(i)("注册")),1)]),_:1}),o(u,{onClick:b},{default:l(()=>[c(m(a(i)("忘记密码")),1)]),_:1}),o(u,{onClick:G},{default:l(()=>[c(m(a(f)?a(i)("邮箱登录"):a(i)("账户密码登录")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])])}}}),De=$(ie,[["__scopeId","data-v-71f1bbad"],["__file","D:/work/public/admin-tempalte-base/src/views/login/login-form.vue"]]);export{De as default};
