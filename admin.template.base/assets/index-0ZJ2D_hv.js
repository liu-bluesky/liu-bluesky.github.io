import"./vue-Brcqt2vG.js";import{u as oe,b as ae}from"./vue-router-C7rU-wsU.js";import{u as ne,f as se}from"./index-9tbjk_aw.js";import{d as W,f as re,A as T,s as ue,w as me,i as u,o as n,c as F,j as t,k as l,K as de,m,z as X,F as j,l as O,u as E,r as ie,b as pe,au as fe,a as _,q as s,X as R,x as y,v as G}from"./@vue-B5Rjg0tc.js";import{u as _e,a as ce,d as be,g as ye,l as J}from"./menu-zaLs34th.js";import{_ as Ve}from"./index-BN6k9vM8.js";import{a as $,c as ge}from"./element-plus-DELVhQcd.js";import"./axios-CdcsOsvR.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";import"./vue-i18n-oCxI6G6S.js";import"./@intlify-D_0T6EgR.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-I2rWV52J.js";import"./lodash-CcF5vdS9.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const ve=W({__name:"index",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(A,{emit:K}){const D=ne(),N=re(()=>D.getIcons),c=T({icons:[],icon:""});let f=ue(!1);const o=()=>{f.value=!0},h=()=>{f.value=!1},w=K,M=A;me(()=>M.modelValue,C=>{c.icon=C},{deep:!0,immediate:!0});const q=()=>{w("update:modelValue",""),h()},P=C=>{w("update:modelValue",C)};return(C,U)=>{const V=u("el-icon"),z=u("Search"),S=u("el-input"),r=u("el-scrollbar"),e=u("el-popover");return n(),F("div",null,[t(e,{placement:"bottom",width:400,visible:E(f)},{reference:l(()=>[t(S,{modelValue:c.icon,"onUpdate:modelValue":U[0]||(U[0]=d=>c.icon=d),onClick:de(o,["stop"]),onClear:q,placeholder:"点击选择图标"},{prefix:l(()=>[c.icon?(n(),m(V,{key:0,class:"llt-icon-size"},{default:l(()=>[(n(),m(X(c.icon),{class:"llt-icon-size"}))]),_:1})):(n(),m(V,{key:1,class:"llt-icon-size"},{default:l(()=>[t(z)]),_:1}))]),_:1},8,["modelValue"])]),default:l(()=>[t(r,{height:"400px"},{default:l(()=>[(n(!0),F(j,null,O(N.value,d=>(n(),m(V,{key:d,onClick:H=>P(d),class:"llt-icon-size"},{default:l(()=>[(n(),m(X(d)))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["visible"])])}}}),ke={class:"commonBoxmp"},Ce={class:"jcb aic w100"},we={class:"aic"},Ie={class:"aic"},xe={class:"aic"},Te={class:"aic"},Fe={class:"aic"},Ne={class:"aic"},he={class:"aic"},Ue={class:"aic"},ze={class:"dialog-footer"},dl=W({__name:"index",setup(A){oe(),ae();const{parseTime:K,addDateRange:D,handleTree:N,getDict:c}=se();let f=T({sys_normal_disable:[],sys_show_hide:[]});const o=T({menuOptions:[],title:"",form:{},userVisible:!1,rules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"菜单名称",prop:"menuName",visible:!0},{label:"图标",prop:"icon",visible:!0},{label:"排序",prop:"orderNum",visible:!0},{label:"权限标识",prop:"perms",visible:!0},{label:"组件路径",visible:!0,prop:"component"},{label:"状态",prop:"status",visible:!0,render:({row:r})=>t(Ve,{values:r.status,dataType:"primary",options:f.sys_job_status},null)},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),h=T({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),w=T({pageNum:1,pageSize:10,deptId:void 0}),M=async r=>{r&&(await r.validate(),o.form.menuId!=null?(console.log("state.form :>> ",o.form),o.form.parentId=o.form.parentId==null?0:o.form.parentId,_e(o.form).then(e=>{$.success("修改成功"),o.userVisible=!1,V()})):ce(o.form).then(e=>{$.success("新增成功"),o.userVisible=!1,V()}))},q=r=>{const e=r.menuId;ge.confirm('是否确认删除用户编号为"'+e+'"的数据项？').then(function(){return be(e)}).then(()=>{$.success("删除成功"),V()}).catch(function(){})},P=r=>{const e=r.menuId;ye(e).then(d=>{o.title="修改菜单",o.form=d.data,o.userVisible=!0})},C=r=>{z(),o.userVisible=!0,o.title="添加菜单",o.form={},r!=null&&r.menuId?o.form.parentId=r.menuId:o.form.parentId=0},U=r=>{},V=()=>{o.loading=!0,w.pageNum=h.currentPage,w.pageSize=h.pageSize,J(D(w,o.dateRange)).then(r=>{o.tableData=N(r.data,"menuId"),o.loading=!1})},z=()=>{J().then(r=>{o.menuOptions=[];const e={menuId:0,menuName:"主类目",children:[]};e.children=N(r.data,"menuId"),o.menuOptions.push(e)})},S=ie();return pe(async()=>{V(),z(),f.sys_job_status=await c("sys_job_status"),f.sys_normal_disable=await c("sys_normal_disable"),f.sys_show_hide=await c("sys_show_hide")}),(r,e)=>{const d=u("el-button"),H=u("el-table-column"),Y=u("TableV2"),Z=u("el-cascader"),i=u("el-form-item"),p=u("el-col"),L=u("el-row"),b=u("el-radio"),I=u("el-radio-group"),x=u("el-input"),ee=u("el-input-number"),g=u("QuestionFilled"),v=u("el-icon"),k=u("el-tooltip"),le=u("el-form"),te=u("el-dialog"),B=fe("hasPermi");return n(),F("div",ke,[t(Y,{selection:"",onSelectionChange:r.handleselectionChange,columns:o.columnData,dataKey:"data",data:o.tableData,tableOptions:{rowKey:"menuId",border:!0,treeProps:{children:"children",hasChildren:"hasChildren"}}},{tableHeader:l(()=>[_("div",Ce,[t(d,{type:"primary",onClick:C},{default:l(()=>e[16]||(e[16]=[s("添加菜单")])),_:1})])]),operation:l(()=>[t(H,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(a=>[R((n(),m(d,{size:"mini",type:"text",onClick:Q=>P(a.row)},{default:l(()=>e[17]||(e[17]=[s("修改")])),_:2},1032,["onClick"])),[[B,["system:menu:edit"]]]),R((n(),m(d,{size:"mini",type:"text",onClick:Q=>C(a.row)},{default:l(()=>e[18]||(e[18]=[s("新增")])),_:2},1032,["onClick"])),[[B,["system:menu:add"]]]),R((n(),m(d,{size:"mini",type:"text",onClick:Q=>q(a.row)},{default:l(()=>e[19]||(e[19]=[s("删除")])),_:2},1032,["onClick"])),[[B,["system:menu:remove"]]])]),_:1})]),_:1},8,["onSelectionChange","columns","data"]),t(te,{modelValue:o.userVisible,"onUpdate:modelValue":e[15]||(e[15]=a=>o.userVisible=a),title:o.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[_("span",ze,[t(d,{onClick:e[13]||(e[13]=a=>o.userVisible=!1)},{default:l(()=>e[35]||(e[35]=[s("取消")])),_:1}),t(d,{type:"primary",onClick:e[14]||(e[14]=a=>M(S.value))},{default:l(()=>e[36]||(e[36]=[s(" 确定 ")])),_:1})])]),default:l(()=>[t(le,{ref_key:"ruleFormRef",ref:S,model:o.form,rules:o.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[t(L,{gutter:20},{default:l(()=>[t(p,{span:24},{default:l(()=>[t(i,{label:"上级菜单",prop:"parentId"},{default:l(()=>[t(Z,{options:o.menuOptions,modelValue:o.form.parentId,"onUpdate:modelValue":e[0]||(e[0]=a=>o.form.parentId=a),class:"w100",props:{checkStrictly:!0,emitPath:!1,value:"menuId",label:"menuName"},clearable:"",onChange:U},null,8,["options","modelValue"])]),_:1})]),_:1})]),_:1}),t(L,{gutter:20},{default:l(()=>[t(p,{span:24},{default:l(()=>[t(i,{label:"菜单类型",prop:"menuType"},{default:l(()=>[t(I,{modelValue:o.form.menuType,"onUpdate:modelValue":e[1]||(e[1]=a=>o.form.menuType=a)},{default:l(()=>[t(b,{label:"M"},{default:l(()=>e[20]||(e[20]=[s("目录")])),_:1}),t(b,{label:"C"},{default:l(()=>e[21]||(e[21]=[s("菜单")])),_:1}),t(b,{label:"F"},{default:l(()=>e[22]||(e[22]=[s("按钮")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.form.menuType!="F"?(n(),m(p,{key:0,span:24},{default:l(()=>[t(i,{label:"菜单图标"},{default:l(()=>[t(ve,{class:"w100",modelValue:o.form.icon,"onUpdate:modelValue":e[2]||(e[2]=a=>o.form.icon=a)},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),t(p,{span:12},{default:l(()=>[t(i,{label:"菜单名称",prop:"menuName"},{default:l(()=>[t(x,{modelValue:o.form.menuName,"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.menuName=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{span:12},{default:l(()=>[t(i,{label:"显示排序",prop:"orderNum"},{default:l(()=>[t(ee,{modelValue:o.form.orderNum,"onUpdate:modelValue":e[4]||(e[4]=a=>o.form.orderNum=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),o.form.menuType!="F"?(n(),m(p,{key:1,span:12},{default:l(()=>[t(i,{prop:"isFrame"},{label:l(()=>[_("div",we,[t(k,{content:"选择是外链则路由地址需要以`http(s)://`开头",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[23]||(e[23]=s(" 是否外链 "))])]),default:l(()=>[t(I,{modelValue:o.form.isFrame,"onUpdate:modelValue":e[5]||(e[5]=a=>o.form.isFrame=a)},{default:l(()=>[t(b,{label:"0"},{default:l(()=>e[24]||(e[24]=[s("是")])),_:1}),t(b,{label:"1"},{default:l(()=>e[25]||(e[25]=[s("否")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType!="F"?(n(),m(p,{key:2,span:12},{default:l(()=>[t(i,{prop:"path"},{label:l(()=>[_("div",Ie,[t(k,{content:"访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[26]||(e[26]=s(" 路由地址 "))])]),default:l(()=>[t(x,{modelValue:o.form.path,"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.path=a),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType=="C"?(n(),m(p,{key:3,span:12},{default:l(()=>[t(i,{prop:"component"},{label:l(()=>[_("div",xe,[t(k,{content:"访问的组件路径，如：`system/user/index`，默认在`views`目录下",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[27]||(e[27]=s(" 组件路径 "))])]),default:l(()=>[t(x,{modelValue:o.form.component,"onUpdate:modelValue":e[7]||(e[7]=a=>o.form.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType!="M"?(n(),m(p,{key:4,span:12},{default:l(()=>[t(i,{prop:"perms"},{label:l(()=>[_("div",Te,[t(k,{content:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[28]||(e[28]=s(" 权限字符 "))])]),default:l(()=>[t(x,{modelValue:o.form.perms,"onUpdate:modelValue":e[8]||(e[8]=a=>o.form.perms=a),placeholder:"请输入权限标识",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType=="C"?(n(),m(p,{key:5,span:12},{default:l(()=>[t(i,{prop:"query"},{label:l(()=>[_("div",Fe,[t(k,{content:'访问路由的默认传递参数，如：`{"id": 1, "name": "ry"}`',placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[29]||(e[29]=s(" 路由参数 "))])]),default:l(()=>[t(x,{modelValue:o.form.query,"onUpdate:modelValue":e[9]||(e[9]=a=>o.form.query=a),placeholder:"请输入路由参数",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType=="C"?(n(),m(p,{key:6,span:12},{default:l(()=>[t(i,{prop:"isCache"},{label:l(()=>[_("div",Ne,[t(k,{content:"选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[30]||(e[30]=s(" 是否缓存 "))])]),default:l(()=>[t(I,{modelValue:o.form.isCache,"onUpdate:modelValue":e[10]||(e[10]=a=>o.form.isCache=a)},{default:l(()=>[t(b,{label:"0"},{default:l(()=>e[31]||(e[31]=[s("缓存")])),_:1}),t(b,{label:"1"},{default:l(()=>e[32]||(e[32]=[s("不缓存")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType!="F"?(n(),m(p,{key:7,span:12},{default:l(()=>[t(i,{prop:"visible"},{label:l(()=>[_("div",he,[t(k,{content:"选择隐藏则路由将不会出现在侧边栏，但仍然可以访问",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[33]||(e[33]=s(" 显示状态 "))])]),default:l(()=>[t(I,{modelValue:o.form.visible,"onUpdate:modelValue":e[11]||(e[11]=a=>o.form.visible=a)},{default:l(()=>[(n(!0),F(j,null,O(E(f).sys_show_hide,a=>(n(),m(b,{key:a.value,label:a.value},{default:l(()=>[s(G(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0),o.form.menuType!="F"?(n(),m(p,{key:8,span:12},{default:l(()=>[t(i,{prop:"status"},{label:l(()=>[_("div",Ue,[t(k,{content:"选择停用则路由将不会出现在侧边栏，也不能被访问",placement:"top"},{default:l(()=>[t(v,null,{default:l(()=>[t(g)]),_:1})]),_:1}),e[34]||(e[34]=s(" 菜单状态 "))])]),default:l(()=>[t(I,{modelValue:o.form.status,"onUpdate:modelValue":e[12]||(e[12]=a=>o.form.status=a)},{default:l(()=>[(n(!0),F(j,null,O(E(f).sys_normal_disable,a=>(n(),m(b,{key:a.value,label:a.value},{default:l(()=>[s(G(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):y("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{dl as default};
