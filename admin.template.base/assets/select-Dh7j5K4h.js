import"./vue-BM9Tihka.js";import{h as w,f as q,i as A,d as H}from"./index-CEe7SyIl.js";import{_ as I}from"./addOrEdit.vue_vue_type_script_setup_true_lang-e3VcvQTJ.js";import{u as L}from"./vue-i18n-CykCSAY5.js";import{a as y}from"./element-plus-BPBmY4gL.js";import{d as K,r as s,w as M,A as h,f as z,b as W,i as o,c as $,j as l,k as u,L as G,a as v,u as V,F as J,o as P,q as b,aa as Q,t as X}from"./@vue-BKq3Py-p.js";import"./axios-CdcsOsvR.js";import"./vue-router-EuJPeoHv.js";import"./vuex-B5FhxtE1.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./@vueuse-CeKbzKoz.js";import"./nprogress-C1nr5Arz.js";import"./@element-plus-DrU0i_Rz.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DysYZfHv.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CxtjGOry.js";import"./element-easy-form-CSO3c5CP.js";import"./vuedraggable-DBgj9TYl.js";import"./sortablejs-C1wvN1Nu.js";import"./@vue-monaco-Ff2YEyYt.js";import"./uuid-CQkTLCs1.js";import"./@intlify-fCQYzvHO.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const{parseStrEmpty:Y}=q();function Z(a){return w.request({url:"/system/user/list",method:"get",params:a})}function ee(a){return w.request({url:"/system/user/"+Y(a),method:"get"})}const te={class:"jcb aic w100"};function le(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!Q(a)}const Se=K({__name:"select",props:{modelValue:{type:[String],defalut:""},placeholder:{type:String,required:!0,default:"请选择"},multiple:{type:Boolean,default:!1},border:{type:Boolean,default:!1},pageInfo:{type:Object,default:null},options:{type:Object,default:()=>({label:"meterNumber",value:"meterId"})},filter:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:C}){const p=s(!1),m=s(""),g=C,r=a;L(),M(()=>r.modelValue,e=>{e&&ee(e).then(t=>{m.value=t.data[r.options.label]})},{immediate:!0});const x=()=>{p.value=!1};s([]),h({point_type:[]});const B=z(()=>X(r.filter));W(async()=>{});const _=s(""),c=s(!1),i=s(),D=()=>{p.value=!0},F=h({height:0,columnData:[{label:"计量表编号",prop:"meterNumber",visible:!0,renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,flterType:"input",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量表名称",prop:"meterName",visible:!0,renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,flterType:"input",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量表类型",prop:"meterType",visible:!0,render:({row:e})=>{let t;return l(o("el-link"),null,le(t=A(e.meterType))?t:{default:()=>[t]})},renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,dictCode:"meter_type",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量值单位",prop:"unit",visible:!0},{label:"创建时间",visible:!0,prop:"createdTime"},{label:"更新时间",prop:"updatedTime",visible:!0}],tableData:[]}),T=()=>{_.value="",c.value=!0},j=e=>{i.value.getList()},n=s([]),k=(e,t)=>{console.log(" rows ",e),r.multiple?n.value=e:e.length>1?i.value.tableRef().toggleRowSelection(e[0],!1):n.value=e,console.log(" rows ",e,n.value)},N=()=>{if(r.multiple)if(n.value.length==0){y.warning("请选择数据");return}else m.value=n.value.map(e=>e[r.options.label]).join(","),g("update:modelValue",n.value.map(e=>e[r.options.value]));else if(n.value.length==0){y.warning("请选择数据");return}else m.value=n.value[0][r.options.label],g("update:modelValue",n.value[0][r.options.value]);p.value=!1};return(e,t)=>{const E=o("ArrowDown"),O=o("el-icon"),R=o("el-input"),f=o("el-button"),S=o("TableV2"),U=o("ComDialog");return P(),$(J,null,[l(R,{placeholder:"请输入",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=d=>m.value=d),readonly:"",onClick:G(D,["stop"])},{suffix:u(()=>[l(O,null,{default:u(()=>[l(E)]),_:1})]),_:1},8,["modelValue"]),v("div",null,[l(U,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=d=>p.value=d),title:"计量表",width:V(H)},{footer:u(()=>[v("div",null,[l(f,{size:"large",onClick:x},{default:u(()=>[b("取消")]),_:1}),l(f,{size:"large",type:"primary",onClick:N},{default:u(()=>[b("保存")]),_:1})])]),default:u(()=>[l(S,{ref_key:"tableV2Ref",ref:i,selection:!0,tableOptions:{border:!0,height:400},apiFunction:V(Z),filter:B.value,columns:F.columnData,tableEvents:{selectionChange:k}},{tableHeader:u(()=>[v("div",te,[l(f,{type:"primary",onClick:T},{default:u(()=>[b("新增计量表")]),_:1})])]),_:1},8,["apiFunction","filter","columns","tableEvents"]),l(I,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=d=>c.value=d),id:_.value,onUpdate:j},null,8,["modelValue","id"])]),_:1},8,["modelValue","width"])])],64)}}});export{Se as default};
