import"./vue-BCJY8gBf.js";import{t as k,i as A,a as x}from"./index-DnKBT612.js";import{l as B,u as F,a as J,g as R,b as q}from"./dept-l0NSAbG3.js";import{u as P}from"./vue-i18n-DkRB_xiH.js";import{a as v}from"./element-plus-BIk4sW6s.js";import{d as S,s as I,r as y,B as T,w as N,j as n,o as j,q as z,l as r,a as U,k as d,v as _,G,u as L}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./@intlify-BnZ-SFqO.js";const M=S({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(c,{emit:E}){const{t:f}=P(),{handleTree:g}=A(),m=E,s=I(!1),C=I(!1),h=y(),V=async()=>{try{const t=await h.value.validate();o.id?F(t).then(e=>{v.success(f("操作成功")),p(),m("update")}):J(t).then(e=>{v.success(f("操作成功")),p(),m("update")})}catch(t){console.log("error :>> ",t)}},l=T({deptOptions:[],postOptions:[],roleOptions:[],initPassword:""}),a=y({schema:[{label:"上级部门",prop:"parentId",colAttrs:{span:24},componentName:"ElCascader",attrs:{placeholder:"请选择上级部门"},hidden:{matchPattern:"&&",type:"function",value:!1,dataJs:(t,e)=>e.parentId===0}},{label:"部门名称",prop:"deptName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入部门名称"},rules:[{required:!0,message:"部门名称不能为空",trigger:"change"}]},{label:"显示排序",prop:"orderNum",colAttrs:{span:12},componentName:"ElInputNumber",attrs:{min:0,placeholder:"请输入显示排序"},rules:[{required:!0,message:"显示排序不能为空",trigger:"change"}]},{label:"负责人",prop:"leader",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入负责人",maxlength:20}},{label:"联系电话",prop:"phone",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入联系电话"},rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},{label:"邮箱",prop:"email",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入邮箱"},rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},{label:"部门状态",prop:"status",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_normal_disable",placeholder:"请选择部门状态"}}],rowAttrs:{gutter:20,justify:"start",align:"middle"},model:{}});let o=c;const w=()=>{R(o.id).then(t=>{a.value.model=t.data,q(o.id).then(e=>{if(l.deptOptions=g(e.data,"deptId"),l.deptOptions.length==0){const i={deptId:a.value.model.parentId,deptName:a.value.model.parentName,children:[]};l.deptOptions.push(i)}})})};N(()=>o.modelValue,t=>{s.value=t,o.id&&t?w():!o.id&&t&&(B().then(e=>{l.deptOptions=g(e.data,"deptId")}),a.value.model={})},{immediate:!0});const p=()=>{m("update:modelValue",!1)};return N(()=>s.value,t=>{t||p()}),(t,e)=>{const i=n("el-cascader"),O=n("ElementEasyForm"),b=n("el-button"),D=n("ComDialog");return j(),z(D,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value=u),width:L(k),title:c.id?"编辑":"新增"},{footer:r(()=>[U("div",null,[d(b,{size:"large",onClick:p},{default:r(()=>e[2]||(e[2]=[_("取消")])),_:1}),d(b,{size:"large",loading:C.value,type:"primary",onClick:V},{default:r(()=>e[3]||(e[3]=[_("保存")])),_:1},8,["loading"])])]),default:r(()=>[d(O,{ref_key:"comFromRef",ref:h,formJson:a.value},G({_:2},[a.value.model.parentId!==0?{name:"parentId",fn:r(()=>[d(i,{options:l.deptOptions,modelValue:a.value.model.parentId,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.model.parentId=u),class:"w100",props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},clearable:"",onChange:t.handleCascader},null,8,["options","modelValue","onChange"])]),key:"0"}:void 0]),1032,["formJson"])]),_:1},8,["modelValue","width","title"])}}}),Ee=x(M,[["__file","D:/work/public/admin-tempalte-base/src/views/system/dept/component/addOrEdit.vue"]]);export{Ee as default};
