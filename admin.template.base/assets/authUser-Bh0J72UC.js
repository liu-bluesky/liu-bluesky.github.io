import"./vue-DSB24BnW.js";import{u as v,a as x}from"./vue-router-fyTrc5Va.js";import"./index-CfbifT15.js";import{g as y,u as D}from"./user-nCxR8Gyc.js";import{a as B}from"./element-plus-Cdmo8XhC.js";import{d as k,r as c,v as d,f as R,h as r,c as E,i as a,j as l,x as S,o as A,a as f,m as C}from"./@vue-CmN6Z9lx.js";import"./ace-builds-DiBK84cm.js";import"./vuex-CLkfaZ6_.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-Jw_v0k3c.js";import"./@vueuse-D81fD1wx.js";import"./nprogress-C9k5oxGd.js";import"./axios-BNZxzx77.js";import"./@element-plus-DGCe4rM-.js";/* empty css                    */import"./dayjs-BhI1duP8.js";import"./element-easy-form-Dkjp9jsl.js";import"./mockjs-72j0mDZC.js";import"./vuedraggable-C0hio2tq.js";import"./sortablejs-CUXm9Ppf.js";import"./vue3-ace-editor-YX3apWn1.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./uuid-CQkTLCs1.js";import"./vue-i18n-BPZ2p18e.js";import"./@intlify-fCQYzvHO.js";import"./element-easy-print-B_PXcQ-3.js";import"./vue3-draggable-resizable-yn-Cm3Ut1tY.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const T={class:"commonBoxmp"},j={class:"jcb aic w100"},q={class:"aic jcc mt20"},Fe=k({__name:"authUser",setup(w){const b=v(),n=x();c(!0);const e=d({openDataScope:!1,defaultProps:{children:"children",label:"label"},menuOptions:[],deptOptions:[],deptExpand:!1,deptNodeAll:!1,menuExpand:!1,menuNodeAll:!1,title:"",form:{},userVisible:!1,roleIds:[],height:0,tableData:[],columnData:[{label:"角色编号",prop:"roleId",visible:!0},{label:"角色名称",prop:"roleName",visible:!0},{label:"权限字符",prop:"roleKey",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),m=d(JSON.parse(JSON.stringify({pageNum:1,pageSize:10,userName:"",phonenumber:""}))),_=t=>{e.roleIds=t.map(o=>o.roleId)},g=async t=>{const o=m.userId,s=e.roleIds.join(",");D({userId:o,roleIds:s}).then(i=>{B.success("授权成功"),F()})},p=c(),h=()=>{e.loading=!0,y(m.userId).then(t=>{e.form=t.user,e.tableData=t.roles,e.loading=!1,S(()=>{e.tableData.forEach(o=>{o.flag&&p.value.tableRef.toggleRowSelection(o)})})})},F=()=>{b.go(-1)};return R(()=>{const t=n.params&&n.params.userId;t&&(m.userId=t,h())}),(t,o)=>{const s=r("el-input"),i=r("el-form-item"),N=r("el-form"),I=r("el-button"),V=r("TableV2");return A(),E("div",T,[a(V,{class:"flex1",data:e.tableData,ref_key:"tableV2Ref",ref:p,selection:"",onSelectionChange:_,columns:e.columnData},{tableHeader:l(()=>[f("div",j,[a(N,{ref:"queryForm",inline:!0},{default:l(()=>[a(i,{label:"用户昵称",prop:"nickName"},{default:l(()=>[a(s,{modelValue:e.form.nickName,"onUpdate:modelValue":o[0]||(o[0]=u=>e.form.nickName=u),clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),a(i,{label:"登录账号",prop:"userName"},{default:l(()=>[a(s,{modelValue:e.form.userName,"onUpdate:modelValue":o[1]||(o[1]=u=>e.form.userName=u),placeholder:"请输入手机号码",clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},512)]),f("div",q,[a(I,{type:"primary",onClick:o[2]||(o[2]=u=>g())},{default:l(()=>[C("授权")]),_:1})])]),_:1},8,["data","columns"])])}}});export{Fe as default};
