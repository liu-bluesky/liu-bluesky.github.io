import"./vue-BCJY8gBf.js";import{b as T,c as q,d as J,a as S}from"./user-B2FNfbOt.js";import{t as R,w as j,a as z}from"./index-DnKBT612.js";import{b as L}from"./config-Cod_frB-.js";import{u as M}from"./vue-i18n-DkRB_xiH.js";import{a as y}from"./element-plus-BIk4sW6s.js";import{d as K,s as _,r as V,B as W,w as N,j as r,o as d,q as c,l,a as $,k as p,v as E,c as k,m as O,F as A,u as G}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./@intlify-BnZ-SFqO.js";const H=K({__name:"addOrEdit",props:{modelValue:{type:Boolean,defalut:!1},id:{type:String,defalut:""}},emits:["update:modelValue","update"],setup(f,{emit:C}){const{t:g}=M(),u=C,m=_(!1),P=_(!1),b=V(),x=async()=>{try{const e=await b.value.validate();n.id?T(e).then(t=>{y.success(g("操作成功")),i(),u("update")}):q(e).then(t=>{y.success(g("操作成功")),i(),u("update")})}catch(e){console.log("error :>> ",e)}},s=W({deptOptions:[],postOptions:[],roleOptions:[],initPassword:""}),a=V({schema:[{label:"用户昵称",prop:"nickName",colAttrs:{span:12},componentName:"ElInput",attrs:{placeholder:"请输入名字"},rules:[{required:!0,message:"不能为空",trigger:"change"}]},{label:"归属部门",prop:"deptId",colAttrs:{span:12},componentName:"ElDatePicker",attrs:{placeholder:"请选择"},rules:[{required:!1,message:"不能为空",trigger:"change"}]},{label:"手机号码",prop:"phonenumber",colAttrs:{span:12},componentName:"ElInput",rules:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],attrs:{type:"number",placeholder:"请选择"}},{label:"邮箱",prop:"email",colAttrs:{span:12},componentName:"ElInput",rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],attrs:{type:"number",placeholder:"请选择"}},{label:"用户名称",prop:"userName",colAttrs:{span:12},rules:[{required:!0,message:"不能为空",trigger:"change"}],componentName:"ElInput",hidden:{matchPattern:"&&",dataSelect:[],type:"function",value:!1,dataJs:(e,t)=>t.userId!=null},attrs:{placeholder:"请输入"}},{label:"用户密码",prop:"password",colAttrs:{span:12},rules:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],componentName:"ElInput",hidden:{matchPattern:"&&",dataSelect:[],type:"function",value:!1,dataJs:(e,t)=>t.userId!=null},attrs:{maxlength:"20",placeholder:"请输入",showPassword:!0}},{label:"性别",prop:"sex",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_user_sex",placeholder:"请选择",showPassword:!0}},{label:"状态",prop:"status",colAttrs:{span:12},componentName:"selectDict",attrs:{dictCode:"sys_normal_disable",placeholder:"请选择",showPassword:!0}},{label:"岗位",prop:"postIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"角色",prop:"roleIds",colAttrs:{span:12},componentName:"ElInput",attrs:{}},{label:"备注",type:"COMPONENT",formItemAttrs:{},attrs:{placeholder:"请输入",type:"textarea"},rules:[],prop:"remark",componentName:"ElInput",colAttrs:{span:24}}],rowAttrs:{gutter:20,justify:"start",align:"middle"},model:{}});let n=f;const I=()=>{J().then(e=>{s.deptOptions=e.data})},D=()=>{L("sys.user.initPassword").then(e=>{s.initPassword=e.msg}),S(n.id).then(e=>{a.value.model=e.data,s.postOptions=e.posts,s.roleOptions=e.roles,a.value.password||(a.value.model.password=s.initPassword),a.value.model.areaType=j(e.data.areaType)})};N(()=>n.modelValue,e=>{m.value=e,n.id&&e?(D(),I()):!n.id&&e&&(I(),a.value.model={sex:"1"})},{immediate:!0});const i=()=>{u("update:modelValue",!1)};return N(()=>m.value,e=>{e||i()}),(e,t)=>{const U=r("el-cascader"),v=r("el-option"),h=r("el-select"),B=r("ElementEasyForm"),w=r("el-button"),F=r("ComDialog");return d(),c(F,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=o=>m.value=o),width:G(R),title:f.id?"编辑":"新增"},{footer:l(()=>[$("div",null,[p(w,{size:"large",onClick:i},{default:l(()=>t[4]||(t[4]=[E("取消")])),_:1}),p(w,{size:"large",loading:P.value,type:"primary",onClick:x},{default:l(()=>t[5]||(t[5]=[E("保存")])),_:1},8,["loading"])])]),default:l(()=>[p(B,{ref_key:"comFromRef",ref:b,formJson:a.value},{deptId:l(()=>[p(U,{class:"w100",options:s.deptOptions,modelValue:a.value.model.deptId,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.model.deptId=o),props:{value:"id",emitPath:!1,checkStrictly:!0},clearable:""},null,8,["options","modelValue"])]),postIds:l(()=>[p(h,{class:"w100",modelValue:a.value.model.postIds,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.model.postIds=o),multiple:"",placeholder:"请选择岗位"},{default:l(()=>[(d(!0),k(A,null,O(s.postOptions,o=>(d(),c(v,{key:o.postId,label:o.postName,value:o.postId,disabled:o.status==1},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),roleIds:l(()=>[p(h,{class:"w100",modelValue:a.value.model.roleIds,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.model.roleIds=o),multiple:"",placeholder:"请选择岗位"},{default:l(()=>[(d(!0),k(A,null,O(s.roleOptions,o=>(d(),c(v,{key:o.roleId,label:o.roleName,value:o.roleId,disabled:o.status==1},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["formJson"])]),_:1},8,["modelValue","width","title"])}}}),Ae=z(H,[["__file","D:/work/public/admin-tempalte-base/src/views/system/user/component/addOrEdit.vue"]]);export{Ae as default};
