import"./vue-BCJY8gBf.js";import{h as C,i as q,q as A,t as H,a as I}from"./index-DnKBT612.js";import{a as K}from"./index-CP198GOJ.js";import{u as M}from"./vue-i18n-DkRB_xiH.js";import{a as h}from"./element-plus-BIk4sW6s.js";import{d as z,s as v,r as d,w as P,B as w,f as W,t as G,b as J,k as l,j as o,o as Q,c as X,y as Y,l as u,L as Z,a as b,v as g,u as y,F as $,ai as ee}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./@intlify-BnZ-SFqO.js";const{parseStrEmpty:te}=q();function le(a){return C.request({url:"/system/user/list",method:"get",params:a})}function oe(a){return C.request({url:"/system/user/"+te(a),method:"get"})}const ae={class:"jcb aic w100"};function re(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!ee(a)}const ie=z({__name:"select",props:{modelValue:{type:[String],defalut:""},placeholder:{type:String,required:!0,default:"请选择"},multiple:{type:Boolean,default:!1},border:{type:Boolean,default:!1},pageInfo:{type:Object,default:null},options:{type:Object,default:()=>({label:"meterNumber",value:"meterId"})},filter:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:x}){const s=v(!1),p=d(""),_=x,r=a;M(),P(()=>r.modelValue,e=>{e&&oe(e).then(t=>{p.value=t.data[r.options.label]})},{immediate:!0});const B=()=>{s.value=!1};d([]),w({point_type:[]});const D=W(()=>G(r.filter));J(async()=>{});const V=v(""),f=v(!1),i=d(),k=()=>{s.value=!0},F=w({height:0,columnData:[{label:"计量表编号",prop:"meterNumber",visible:!0,renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,flterType:"input",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量表名称",prop:"meterName",visible:!0,renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,flterType:"input",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量表类型",prop:"meterType",visible:!0,render:({row:e})=>{let t;return l(o("el-link"),null,re(t=A(e.meterType))?t:{default:()=>[t]})},renderHeader:({column:e})=>l(o("filterBox"),{title:e.label,valueKey:e.property,dictCode:"meter_type",onChange:i.value.handleFilterBox,data:i.value.formFilter},null)},{label:"计量值单位",prop:"unit",visible:!0},{label:"创建时间",visible:!0,prop:"createdTime"},{label:"更新时间",prop:"updatedTime",visible:!0}],tableData:[]}),T=()=>{V.value="",f.value=!0},j=e=>{i.value.getList()},n=d([]),N=(e,t)=>{r.multiple?n.value=e:e.length>1?i.value.tableRef().toggleRowSelection(e[0],!1):n.value=e},E=()=>{if(r.multiple)if(n.value.length==0){h.warning("请选择数据");return}else p.value=n.value.map(e=>e[r.options.label]).join(","),_("update:modelValue",n.value.map(e=>e[r.options.value]));else if(n.value.length==0){h.warning("请选择数据");return}else p.value=n.value[0][r.options.label],_("update:modelValue",n.value[0][r.options.value]);s.value=!1};return(e,t)=>{const O=o("ArrowDown"),R=o("el-icon"),S=o("el-input"),c=o("el-button"),U=o("TableV2"),L=o("ComDialog");return Q(),X($,null,[Y(' @getParmas="getList" '),l(S,{placeholder:"请输入",modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=m=>p.value=m),readonly:"",onClick:Z(k,["stop"])},{suffix:u(()=>[l(R,null,{default:u(()=>[l(O)]),_:1})]),_:1},8,["modelValue"]),b("div",null,[l(L,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=m=>s.value=m),title:"计量表",width:y(H)},{footer:u(()=>[b("div",null,[l(c,{size:"large",onClick:B},{default:u(()=>t[4]||(t[4]=[g("取消")])),_:1}),l(c,{size:"large",type:"primary",onClick:E},{default:u(()=>t[5]||(t[5]=[g("保存")])),_:1})])]),default:u(()=>[l(U,{ref_key:"tableV2Ref",ref:i,selection:!0,tableOptions:{border:!0,height:400},apiFunction:y(le),filter:D.value,columns:F.columnData,tableEvents:{selectionChange:N}},{tableHeader:u(()=>[b("div",ae,[l(c,{type:"primary",onClick:T},{default:u(()=>t[3]||(t[3]=[g("新增计量表")])),_:1})])]),_:1},8,["apiFunction","filter","columns","tableEvents"]),l(y(K),{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=m=>f.value=m),id:V.value,onUpdate:j},null,8,["modelValue","id"])]),_:1},8,["modelValue","width"])])],64)}}}),qe=I(ie,[["__file","D:/work/public/admin-tempalte-base/src/views/generate/DataPool/component/select.vue"]]);export{qe as default};
