import"./vue-BM9Tihka.js";import{u as ae,a as ne}from"./vue-router-EuJPeoHv.js";import{d as W,A as N,r as j,w as se,i as u,o as s,c as U,j as l,k as e,L as re,m,z as X,F as O,l as E,u as A,b as ue,au as me,a as p,q as r,X as B,x as f,v as G}from"./@vue-BKq3Py-p.js";import{l as J,u as ie,a as de,d as pe,g as ce}from"./menu-C8kEVIrb.js";import{_ as fe}from"./index-XdjtvRwH.js";import{f as _e}from"./index-CEe7SyIl.js";import{a as R,c as be}from"./element-plus-BPBmY4gL.js";import"./axios-CdcsOsvR.js";import"./vuex-B5FhxtE1.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./vue-i18n-CykCSAY5.js";import"./@intlify-fCQYzvHO.js";import"./@vueuse-CeKbzKoz.js";import"./nprogress-C1nr5Arz.js";import"./@element-plus-DrU0i_Rz.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DysYZfHv.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CxtjGOry.js";import"./element-easy-form-CSO3c5CP.js";import"./vuedraggable-DBgj9TYl.js";import"./sortablejs-C1wvN1Nu.js";import"./@vue-monaco-Ff2YEyYt.js";import"./uuid-CQkTLCs1.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const ye=W({__name:"index",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(L,{emit:H}){const h=N({icons:[],icon:""});let k=j(!1);const I=()=>{k.value=!0},_=()=>{k.value=!1},t=H,z=L;se(()=>z.modelValue,v=>{h.icon=v},{deep:!0,immediate:!0});const T=()=>{t("update:modelValue",""),_()},q=v=>{t("update:modelValue",v)};return(v,D)=>{const C=u("el-icon"),P=u("Search"),w=u("el-input"),S=u("el-scrollbar"),M=u("el-popover");return s(),U("div",null,[l(M,{placement:"bottom",width:400,visible:A(k)},{reference:e(()=>[l(w,{modelValue:h.icon,"onUpdate:modelValue":D[0]||(D[0]=n=>h.icon=n),onClick:re(I,["stop"]),onClear:T,placeholder:"点击选择图标"},{prefix:e(()=>[h.icon?(s(),m(C,{key:0,class:"llt-icon-size"},{default:e(()=>[(s(),m(X(h.icon),{class:"llt-icon-size"}))]),_:1})):(s(),m(C,{key:1,class:"llt-icon-size"},{default:e(()=>[l(P)]),_:1}))]),_:1},8,["modelValue"])]),default:e(()=>[l(S,{height:"400px"},{default:e(()=>[(s(!0),U(O,null,E(v.$store.state.icons,n=>(s(),m(C,{key:n,onClick:o=>q(n),class:"llt-icon-size"},{default:e(()=>[(s(),m(X(n)))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["visible"])])}}}),Ve={class:"commonBoxmp"},ge={class:"jcb aic w100"},he={class:"aic"},ve={class:"aic"},ke={class:"aic"},Ce={class:"aic"},we={class:"aic"},Ie={class:"aic"},Te={class:"aic"},xe={class:"aic"},Fe={class:"dialog-footer"},ul=W({__name:"index",setup(L){ae(),ne();const{parseTime:H,addDateRange:h,handleTree:k,getDict:I}=_e();j(!0);let _=N({sys_normal_disable:[],sys_show_hide:[]});const t=N({menuOptions:[],title:"",form:{},userVisible:!1,rules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"菜单名称",prop:"menuName",visible:!0},{label:"图标",prop:"icon",visible:!0},{label:"排序",prop:"orderNum",visible:!0},{label:"权限标识",prop:"perms",visible:!0},{label:"组件路径",visible:!0,prop:"component"},{label:"状态",prop:"status",visible:!0,render:({row:n})=>l(fe,{values:n.status,dataType:"primary",options:_.sys_job_status},null)},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),z=N({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),T=N({pageNum:1,pageSize:10,deptId:void 0}),q=async n=>{n&&(await n.validate(),t.form.menuId!=null?(console.log("state.form :>> ",t.form),t.form.parentId=t.form.parentId==null?0:t.form.parentId,ie(t.form).then(o=>{R.success("修改成功"),t.userVisible=!1,w()})):de(t.form).then(o=>{R.success("新增成功"),t.userVisible=!1,w()}))},v=n=>{const o=n.menuId;be.confirm('是否确认删除用户编号为"'+o+'"的数据项？').then(function(){return pe(o)}).then(()=>{R.success("删除成功"),w()}).catch(function(){})},D=n=>{const o=n.menuId;ce(o).then(b=>{t.title="修改菜单",t.form=b.data,t.userVisible=!0})},C=n=>{S(),t.userVisible=!0,t.title="添加菜单",t.form={},n!=null&&n.menuId?t.form.parentId=n.menuId:t.form.parentId=0},P=n=>{console.log("object :>> ",n)},w=()=>{t.loading=!0,T.pageNum=z.currentPage,T.pageSize=z.pageSize,J(h(T,t.dateRange)).then(n=>{t.tableData=k(n.data,"menuId"),console.log("state.tableData :>> ",t.tableData),t.loading=!1})},S=()=>{J().then(n=>{t.menuOptions=[];const o={menuId:0,menuName:"主类目",children:[]};o.children=k(n.data,"menuId"),t.menuOptions.push(o)})},M=j();return ue(async()=>{w(),S(),_.sys_job_status=await I("sys_job_status"),_.sys_normal_disable=await I("sys_normal_disable"),_.sys_show_hide=await I("sys_show_hide")}),(n,o)=>{const b=u("el-button"),Y=u("el-table-column"),Z=u("TableV2"),ee=u("el-cascader"),i=u("el-form-item"),d=u("el-col"),K=u("el-row"),c=u("el-radio"),x=u("el-radio-group"),F=u("el-input"),le=u("el-input-number"),y=u("QuestionFilled"),V=u("el-icon"),g=u("el-tooltip"),te=u("el-form"),oe=u("el-dialog"),$=me("hasPermi");return s(),U("div",Ve,[l(Z,{selection:"",onSelectionChange:n.handleselectionChange,columns:t.columnData,dataKey:"data",data:t.tableData,tableOptions:{rowKey:"menuId",border:!0,treeProps:{children:"children",hasChildren:"hasChildren"}}},{tableHeader:e(()=>[p("div",ge,[l(b,{type:"primary",onClick:C},{default:e(()=>[r("添加菜单")]),_:1})])]),operation:e(()=>[l(Y,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:e(a=>[B((s(),m(b,{size:"mini",type:"text",onClick:Q=>D(a.row)},{default:e(()=>[r("修改")]),_:2},1032,["onClick"])),[[$,["system:menu:edit"]]]),B((s(),m(b,{size:"mini",type:"text",onClick:Q=>C(a.row)},{default:e(()=>[r("新增")]),_:2},1032,["onClick"])),[[$,["system:menu:add"]]]),B((s(),m(b,{size:"mini",type:"text",onClick:Q=>v(a.row)},{default:e(()=>[r("删除")]),_:2},1032,["onClick"])),[[$,["system:menu:remove"]]])]),_:1})]),_:1},8,["onSelectionChange","columns","data"]),l(oe,{modelValue:t.userVisible,"onUpdate:modelValue":o[15]||(o[15]=a=>t.userVisible=a),title:t.title,width:"50%","destroy-on-close":"",center:""},{footer:e(()=>[p("span",Fe,[l(b,{onClick:o[13]||(o[13]=a=>t.userVisible=!1)},{default:e(()=>[r("取消")]),_:1}),l(b,{type:"primary",onClick:o[14]||(o[14]=a=>q(M.value))},{default:e(()=>[r(" 确定 ")]),_:1})])]),default:e(()=>[l(te,{ref_key:"ruleFormRef",ref:M,model:t.form,rules:t.rules,"label-width":"120px",class:"demo-ruleForm"},{default:e(()=>[l(K,{gutter:20},{default:e(()=>[l(d,{span:24},{default:e(()=>[l(i,{label:"上级菜单",prop:"parentId"},{default:e(()=>[l(ee,{options:t.menuOptions,modelValue:t.form.parentId,"onUpdate:modelValue":o[0]||(o[0]=a=>t.form.parentId=a),class:"w100",props:{checkStrictly:!0,emitPath:!1,value:"menuId",label:"menuName"},clearable:"",onChange:P},null,8,["options","modelValue"])]),_:1})]),_:1})]),_:1}),l(K,{gutter:20},{default:e(()=>[l(d,{span:24},{default:e(()=>[l(i,{label:"菜单类型",prop:"menuType"},{default:e(()=>[l(x,{modelValue:t.form.menuType,"onUpdate:modelValue":o[1]||(o[1]=a=>t.form.menuType=a)},{default:e(()=>[l(c,{label:"M"},{default:e(()=>[r("目录")]),_:1}),l(c,{label:"C"},{default:e(()=>[r("菜单")]),_:1}),l(c,{label:"F"},{default:e(()=>[r("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t.form.menuType!="F"?(s(),m(d,{key:0,span:24},{default:e(()=>[l(i,{label:"菜单图标"},{default:e(()=>[l(ye,{class:"w100",modelValue:t.form.icon,"onUpdate:modelValue":o[2]||(o[2]=a=>t.form.icon=a)},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),l(d,{span:12},{default:e(()=>[l(i,{label:"菜单名称",prop:"menuName"},{default:e(()=>[l(F,{modelValue:t.form.menuName,"onUpdate:modelValue":o[3]||(o[3]=a=>t.form.menuName=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:e(()=>[l(i,{label:"显示排序",prop:"orderNum"},{default:e(()=>[l(le,{modelValue:t.form.orderNum,"onUpdate:modelValue":o[4]||(o[4]=a=>t.form.orderNum=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),t.form.menuType!="F"?(s(),m(d,{key:1,span:12},{default:e(()=>[l(i,{prop:"isFrame"},{label:e(()=>[p("div",he,[l(g,{content:"选择是外链则路由地址需要以`http(s)://`开头",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 是否外链 ")])]),default:e(()=>[l(x,{modelValue:t.form.isFrame,"onUpdate:modelValue":o[5]||(o[5]=a=>t.form.isFrame=a)},{default:e(()=>[l(c,{label:"0"},{default:e(()=>[r("是")]),_:1}),l(c,{label:"1"},{default:e(()=>[r("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType!="F"?(s(),m(d,{key:2,span:12},{default:e(()=>[l(i,{prop:"path"},{label:e(()=>[p("div",ve,[l(g,{content:"访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 路由地址 ")])]),default:e(()=>[l(F,{modelValue:t.form.path,"onUpdate:modelValue":o[6]||(o[6]=a=>t.form.path=a),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType=="C"?(s(),m(d,{key:3,span:12},{default:e(()=>[l(i,{prop:"component"},{label:e(()=>[p("div",ke,[l(g,{content:"访问的组件路径，如：`system/user/index`，默认在`views`目录下",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 组件路径 ")])]),default:e(()=>[l(F,{modelValue:t.form.component,"onUpdate:modelValue":o[7]||(o[7]=a=>t.form.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType!="M"?(s(),m(d,{key:4,span:12},{default:e(()=>[l(i,{prop:"perms"},{label:e(()=>[p("div",Ce,[l(g,{content:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 权限字符 ")])]),default:e(()=>[l(F,{modelValue:t.form.perms,"onUpdate:modelValue":o[8]||(o[8]=a=>t.form.perms=a),placeholder:"请输入权限标识",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType=="C"?(s(),m(d,{key:5,span:12},{default:e(()=>[l(i,{prop:"query"},{label:e(()=>[p("div",we,[l(g,{content:'访问路由的默认传递参数，如：`{"id": 1, "name": "ry"}`',placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 路由参数 ")])]),default:e(()=>[l(F,{modelValue:t.form.query,"onUpdate:modelValue":o[9]||(o[9]=a=>t.form.query=a),placeholder:"请输入路由参数",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType=="C"?(s(),m(d,{key:6,span:12},{default:e(()=>[l(i,{prop:"isCache"},{label:e(()=>[p("div",Ie,[l(g,{content:"选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 是否缓存 ")])]),default:e(()=>[l(x,{modelValue:t.form.isCache,"onUpdate:modelValue":o[10]||(o[10]=a=>t.form.isCache=a)},{default:e(()=>[l(c,{label:"0"},{default:e(()=>[r("缓存")]),_:1}),l(c,{label:"1"},{default:e(()=>[r("不缓存")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType!="F"?(s(),m(d,{key:7,span:12},{default:e(()=>[l(i,{prop:"visible"},{label:e(()=>[p("div",Te,[l(g,{content:"选择隐藏则路由将不会出现在侧边栏，但仍然可以访问",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 显示状态 ")])]),default:e(()=>[l(x,{modelValue:t.form.visible,"onUpdate:modelValue":o[11]||(o[11]=a=>t.form.visible=a)},{default:e(()=>[(s(!0),U(O,null,E(A(_).sys_show_hide,a=>(s(),m(c,{key:a.value,label:a.value},{default:e(()=>[r(G(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),t.form.menuType!="F"?(s(),m(d,{key:8,span:12},{default:e(()=>[l(i,{prop:"status"},{label:e(()=>[p("div",xe,[l(g,{content:"选择停用则路由将不会出现在侧边栏，也不能被访问",placement:"top"},{default:e(()=>[l(V,null,{default:e(()=>[l(y)]),_:1})]),_:1}),r(" 菜单状态 ")])]),default:e(()=>[l(x,{modelValue:t.form.status,"onUpdate:modelValue":o[12]||(o[12]=a=>t.form.status=a)},{default:e(()=>[(s(!0),U(O,null,E(A(_).sys_normal_disable,a=>(s(),m(c,{key:a.value,label:a.value},{default:e(()=>[r(G(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{ul as default};
