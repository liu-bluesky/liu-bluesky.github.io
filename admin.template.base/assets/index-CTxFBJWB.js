import"./vue-Brcqt2vG.js";import{u as S,b as M}from"./vue-router-C7rU-wsU.js";import{h as m,p as C,f as P}from"./index-DI19To0g.js";import{_ as k}from"./index-BN6k9vM8.js";import{a as V,c as j}from"./element-plus-DELVhQcd.js";import{d as A,A as f,j as o,r as E,b as H,i,o as L,c as G,k as l,a as T,q as u,u as J}from"./@vue-B5Rjg0tc.js";import"./axios-CdcsOsvR.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";import"./vue-i18n-oCxI6G6S.js";import"./@intlify-D_0T6EgR.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-Cpih-KE2.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";function N(r){return m.request({url:"/system/notice/list",method:"get",params:r})}function K(r){return m.request({url:"/system/notice/"+r,method:"get"})}function O(r){return m.request({url:"/system/notice",method:"post",data:r})}function Q(r){return m.request({url:"/system/notice",method:"put",data:r})}function W(r){return m.request({url:"/system/notice/"+r,method:"delete"})}const X={class:"commonBoxmp"},Y={class:"jcb aic w100"},Z={class:"dialog-footer"},he=A({__name:"index",setup(r){S(),M();const{parseTime:ee,addDateRange:q,getDict:v}=P(),t=f({form:{},title:"",rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"公告标题",prop:"noticeTitle",visible:!0},{label:"公告类型",prop:"noticeType",render:({row:s})=>o(k,{values:s.noticeType,dataType:"primary",options:p.sys_notice_type},null),visible:!0},{label:"状态",prop:"status",visible:!0,render:({row:s})=>o(k,{values:s.status,dataType:"primary",options:p.sys_notice_status},null)},{label:"创建者",prop:"createBy",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),_=f({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),y=f({pageNum:1,pageSize:10,deptId:void 0}),R=async s=>{s&&(await s.validate(),t.form.noticeId!=null?Q(t.form).then(e=>{V.success("修改成功"),t.userVisible=!1,g()}):O(t.form).then(e=>{V.success("新增成功"),t.userVisible=!1,g()}))},D=s=>{const e=s.noticeId;j.confirm('是否确认删除编号为"'+e+'"的数据项？').then(function(){return W(e)}).then(()=>{V.success("删除成功"),g()}).catch(function(){})},I=s=>{const e=s.noticeId;K(e).then(a=>{t.title="修改通告",t.form=a.data,t.userVisible=!0})},h=()=>{t.form={},t.title="添加通告",t.userVisible=!0},g=()=>{t.loading=!0,y.pageNum=_.currentPage,y.pageSize=_.pageSize,N(q(y,t.dateRange)).then(s=>{t.tableData=s.rows,_.total=s.total,t.loading=!1})};let p=f({sys_notice_status:[],sys_notice_type:[]});const x=E();return H(async()=>{p.sys_notice_status=await v("sys_notice_status"),p.sys_notice_type=await v("sys_notice_type")}),(s,e)=>{const a=i("el-button"),z=i("el-table-column"),B=i("TableV2"),w=i("el-input"),d=i("el-form-item"),c=i("el-col"),b=i("el-row"),F=i("el-form"),U=i("el-dialog");return L(),G("div",X,[o(B,{class:"flex1",apiFunction:J(N),ref:"tableV2Ref",columns:t.columnData},{tableHeader:l(()=>[T("div",Y,[e[8]||(e[8]=T("h3",{class:"mx15"},"岗位管理",-1)),o(a,{type:"primary",onClick:h},{default:l(()=>e[7]||(e[7]=[u("新增")])),_:1})])]),operation:l(()=>[o(z,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:l(n=>[o(a,{type:"text",onClick:$=>I(n.row)},{default:l(()=>e[9]||(e[9]=[u("修改")])),_:2},1032,["onClick"]),o(a,{type:"text",onClick:$=>D(n.row)},{default:l(()=>e[10]||(e[10]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),o(U,{modelValue:t.userVisible,"onUpdate:modelValue":e[6]||(e[6]=n=>t.userVisible=n),title:t.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[T("span",Z,[o(a,{onClick:e[4]||(e[4]=n=>t.userVisible=!1)},{default:l(()=>e[11]||(e[11]=[u("取消")])),_:1}),o(a,{type:"primary",onClick:e[5]||(e[5]=n=>R(x.value))},{default:l(()=>e[12]||(e[12]=[u(" 确定 ")])),_:1})])]),default:l(()=>[o(F,{ref_key:"ruleFormRef",ref:x,model:t.form,rules:t.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[o(b,{gutter:20},{default:l(()=>[o(c,{span:12},{default:l(()=>[o(d,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[o(w,{modelValue:t.form.noticeTitle,"onUpdate:modelValue":e[0]||(e[0]=n=>t.form.noticeTitle=n),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),o(c,{span:12},{default:l(()=>[o(d,{label:"公告类型",prop:"noticeType"},{default:l(()=>[o(C,{class:"w100",dictCode:"sys_notice_type",modelValue:t.form.noticeType,"onUpdate:modelValue":e[1]||(e[1]=n=>t.form.noticeType=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:l(()=>[o(c,{span:12},{default:l(()=>[o(d,{label:"状态",prop:"status"},{default:l(()=>[o(C,{class:"w100",dataType:"radio",dictCode:"sys_notice_status",modelValue:t.form.status,"onUpdate:modelValue":e[2]||(e[2]=n=>t.form.status=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:l(()=>[o(c,{span:24},{default:l(()=>[o(d,{label:"内容",prop:"noticeContent"},{default:l(()=>[o(w,{modelValue:t.form.noticeContent,"onUpdate:modelValue":e[3]||(e[3]=n=>t.form.noticeContent=n),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{he as default};
