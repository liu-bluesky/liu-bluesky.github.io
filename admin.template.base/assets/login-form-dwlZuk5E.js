import"./vue-Brcqt2vG.js";import{u as G}from"./vue-router-C7rU-wsU.js";import{_ as j,n as K,o as L,r as M}from"./index-9tbjk_aw.js";import{u as $}from"./regular-CgHwq5XP.js";import{u as P}from"./vue-i18n-oCxI6G6S.js";import{a as z}from"./element-plus-DELVhQcd.js";import{d as H,g as J,r as b,s as k,A,b as O,i as F,o as p,c as _,a as V,v as n,u as a,j as o,k as l,m as Q,x as E,q as c,am as W}from"./@vue-B5Rjg0tc.js";import"./axios-CdcsOsvR.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-I2rWV52J.js";import"./lodash-CcF5vdS9.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";import"./@intlify-D_0T6EgR.js";const X={class:"login-form mxauto white-bg"},Y={class:"title"},Z={key:0},ee={class:"login-code"},oe=["src"],te={key:1},ae={class:"aic"},le={class:"jcb aic w100"},ue=H({__name:"login-form",emits:["handleGoregister"],setup(re,{emit:x}){const{t:u}=P(),D=K();let I=x;G(),J();const B=b(),{regEmail:T}=$(),v=()=>{I("handleGoregister",!0)};let h=b("获取验证码"),g=60;const y=()=>{if(g==0){h.value="获取验证码",g=60;return}else h.value=g+"s",g--;setTimeout(function(){y()},1e3)},R=()=>{if(!T(e.loginValidateForm.email)){z.warning("请输入邮箱");return}y()};let f=k(!0);const U=A({email:[{required:!0,type:"email",message:"请输入邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"密码不能为空"},{min:5,max:16,message:"长度在 5 到 16 个字符",trigger:"blur"}],username:[{required:!0,message:"账号不能为空",trigger:"blur"}]});let q=k(!1);const e=A({loginValidateForm:{username:"admin",password:"admin123",email:"",code:"",uuid:""},captchaEnabled:!1,image:""}),C=()=>{L().then(i=>{e.captchaEnabled=i.captchaEnabled,e.loginValidateForm.uuid=i.uuid,e.image="data:image/gif;base64,"+i.img})},w=async i=>{i&&(await(i==null?void 0:i.validate()),D.Login(e.loginValidateForm).then(t=>{M("/")}).catch(()=>{e.captchaEnabled&&C()}))},N=()=>{f.value=!f.value};return O(()=>{C()}),(i,t)=>{const m=F("el-input"),s=F("el-form-item"),d=F("el-button"),S=F("el-form");return p(),_("div",X,[V("h1",Y,n(a(u)("登录")),1),o(S,{rules:U,model:e.loginValidateForm,ref_key:"ruleFormRef",ref:B,onKeyup:t[6]||(t[6]=W(r=>w(B.value),["enter","native"])),class:"ruleForm mt30"},{default:l(()=>[a(f)?(p(),_("div",Z,[o(s,{prop:"username",class:"mt30"},{default:l(()=>[o(m,{type:"text",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.username,"onUpdate:modelValue":t[0]||(t[0]=r=>e.loginValidateForm.username=r),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),o(s,{class:"mt30",prop:"password"},{default:l(()=>[o(m,{"show-password":"",placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.password,"onUpdate:modelValue":t[1]||(t[1]=r=>e.loginValidateForm.password=r),autocomplete:"off"},null,8,["placeholder","modelValue"])]),_:1}),e.captchaEnabled?(p(),Q(s,{key:0,prop:"code"},{default:l(()=>[o(m,{modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[2]||(t[2]=r=>e.loginValidateForm.code=r),placeholder:a(u)("请输入"),style:{width:"63%"}},null,8,["modelValue","placeholder"]),V("div",ee,[e.image?(p(),_("img",{key:0,src:e.image,onClick:C,class:"login-code-img"},null,8,oe)):E("",!0)])]),_:1})):E("",!0)])):(p(),_("div",te,[o(s,{prop:"email"},{default:l(()=>[V("div",ae,[o(m,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.email,"onUpdate:modelValue":t[3]||(t[3]=r=>e.loginValidateForm.email=r)},null,8,["placeholder","modelValue"]),o(d,{type:"primary",onClick:R,class:"ml15"},{default:l(()=>[c(n(a(h)),1)]),_:1})])]),_:1}),o(s,{prop:"code"},{default:l(()=>[o(m,{placeholder:a(u)("请输入"),modelValue:e.loginValidateForm.code,"onUpdate:modelValue":t[4]||(t[4]=r=>e.loginValidateForm.code=r),type:"text"},null,8,["placeholder","modelValue"])]),_:1})])),o(s,{class:"mt30"},{default:l(()=>[o(d,{type:"primary",class:"w100",loading:a(q),onClick:t[5]||(t[5]=r=>w(B.value))},{default:l(()=>[c(n(a(u)("登录")),1)]),_:1},8,["loading"])]),_:1}),o(s,{class:"mt30"},{default:l(()=>[V("div",le,[o(d,{onClick:v},{default:l(()=>[c(n(a(u)("注册")),1)]),_:1}),o(d,{onClick:v},{default:l(()=>[c(n(a(u)("忘记密码")),1)]),_:1}),o(d,{onClick:N},{default:l(()=>[c(n(a(f)?a(u)("邮箱登录"):a(u)("账户密码登录")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])])}}}),Ge=j(ue,[["__scopeId","data-v-65213428"]]);export{Ge as default};
