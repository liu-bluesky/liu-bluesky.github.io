import"./vue-BM9Tihka.js";import{u as y,a as v}from"./vue-router-EuJPeoHv.js";import"./index-CEe7SyIl.js";import{g as x,u as D}from"./user-CVuPk32v.js";import{a as B}from"./element-plus-BPBmY4gL.js";import{d as k,r as c,A as d,b as R,i as r,c as A,j as a,k as l,n as E,o as S,a as f,q as C}from"./@vue-BKq3Py-p.js";import"./axios-CdcsOsvR.js";import"./vuex-B5FhxtE1.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./vue-i18n-CykCSAY5.js";import"./@intlify-fCQYzvHO.js";import"./@vueuse-CeKbzKoz.js";import"./nprogress-C1nr5Arz.js";import"./@element-plus-DrU0i_Rz.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DysYZfHv.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CxtjGOry.js";import"./element-easy-form-CSO3c5CP.js";import"./vuedraggable-DBgj9TYl.js";import"./sortablejs-C1wvN1Nu.js";import"./@vue-monaco-Ff2YEyYt.js";import"./uuid-CQkTLCs1.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const q={class:"commonBoxmp"},T={class:"jcb aic w100"},j={class:"aic jcc mt20"},ge=k({__name:"authUser",setup(w){const b=y(),i=v();c(!0);const e=d({openDataScope:!1,defaultProps:{children:"children",label:"label"},menuOptions:[],deptOptions:[],deptExpand:!1,deptNodeAll:!1,menuExpand:!1,menuNodeAll:!1,title:"",form:{},userVisible:!1,roleIds:[],height:0,tableData:[],columnData:[{label:"角色编号",prop:"roleId",visible:!0},{label:"角色名称",prop:"roleName",visible:!0},{label:"权限字符",prop:"roleKey",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),m=d(JSON.parse(JSON.stringify({pageNum:1,pageSize:10,userName:"",phonenumber:""}))),_=t=>{e.roleIds=t.map(o=>o.roleId)},g=async t=>{const o=m.userId,s=e.roleIds.join(",");D({userId:o,roleIds:s}).then(n=>{B.success("授权成功"),h()})},p=c(),F=()=>{e.loading=!0,x(m.userId).then(t=>{e.form=t.user,e.tableData=t.roles,e.loading=!1,E(()=>{e.tableData.forEach(o=>{o.flag&&p.value.tableRef.toggleRowSelection(o)})})})},h=()=>{b.go(-1)};return R(()=>{const t=i.params&&i.params.userId;t&&(m.userId=t,F())}),(t,o)=>{const s=r("el-input"),n=r("el-form-item"),N=r("el-form"),I=r("el-button"),V=r("TableV2");return S(),A("div",q,[a(V,{class:"flex1",data:e.tableData,ref_key:"tableV2Ref",ref:p,selection:"",onSelectionChange:_,columns:e.columnData},{tableHeader:l(()=>[f("div",T,[a(N,{ref:"queryForm",inline:!0},{default:l(()=>[a(n,{label:"用户昵称",prop:"nickName"},{default:l(()=>[a(s,{modelValue:e.form.nickName,"onUpdate:modelValue":o[0]||(o[0]=u=>e.form.nickName=u),clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),a(n,{label:"登录账号",prop:"userName"},{default:l(()=>[a(s,{modelValue:e.form.userName,"onUpdate:modelValue":o[1]||(o[1]=u=>e.form.userName=u),placeholder:"请输入手机号码",clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},512)]),f("div",j,[a(I,{type:"primary",onClick:o[2]||(o[2]=u=>g())},{default:l(()=>[C("授权")]),_:1})])]),_:1},8,["data","columns"])])}}});export{ge as default};
