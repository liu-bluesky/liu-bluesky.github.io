import"./vue-BCJY8gBf.js";import{u as A,b as E}from"./vue-router-Bk-12vT2.js";import O from"./selectUser-BuJlS8P1.js";import{D as j}from"./index-DMBomKMH.js";import{i as F,a as K}from"./index-DnKBT612.js";import{a as x,b as L,c as P}from"./role-DQhvBjKq.js";import{c as M,a as h}from"./element-plus-BIk4sW6s.js";import{d as J,r as v,B as u,k as r,b as U,u as d,j as a,o as Q,c as G,l,a as H,ag as k,v as c}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";const $={class:"commonBoxmp"},W={class:"jcb aic w100"},X=J({__name:"authUser",setup(Y){A();const f=E(),{parseTime:Z,addDateRange:ee,getDict:V}=F(),b=v(),m=u({openDataScope:!1,defaultProps:{children:"children",label:"label"},menuOptions:[],deptOptions:[],deptExpand:!1,deptNodeAll:!1,menuExpand:!1,menuNodeAll:!1,title:"",form:{},userVisible:!1,rules:{roleName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],roleKey:[{required:!0,message:"权限字符不能为空",trigger:"blur"}],roleSort:[{required:!0,message:"角色顺序不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"用户名称",visible:!0,prop:"userName"},{label:"用户昵称",visible:!0,prop:"nickName"},{label:"邮箱",visible:!0,prop:"email"},{label:"手机",prop:"phonenumber",visible:!0},{label:"状态",visible:!0,prop:"status",render:({row:o})=>r(j,{values:o.status,dataType:"primary",options:N.sys_normal_disable},null)},{label:"创建时间",visible:!0,prop:"createTime"}],loading:!1}),_=u({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),I={pageNum:1,pageSize:10,userName:"",phonenumber:""},t=u(JSON.parse(JSON.stringify(I))),p=()=>{t.pageNum=1;let o=d(t);b.value.getList(o)},w=()=>{Object.assign(t,I),p()},D=o=>{const e=t.roleId;M.confirm('确认要取消该用户"'+o.userName+'"角色吗？').then(function(){return L({userId:o.userId,roleId:e})}).then(()=>{h.success("取消授权成功")}).catch(function(){})};let g=v();const S=()=>{g.value.show()},z=()=>{m.loading=!0,t.pageNum=_.currentPage,t.pageSize=_.pageSize,x(t).then(o=>{m.tableData=o.rows,_.total=o.total,m.loading=!1})};v();const C=o=>{const e=t.roleId,n=o.ids.join(",");if(n==""){h.error("请选择要分配的用户");return}P({roleId:e,userIds:n}).then(s=>{h.success(s.msg),s.code===200&&g.value.hide()})};let N=u({sys_normal_disable:[]});return U(async()=>{N.sys_normal_disable=await V("sys_normal_disable"),z()}),U(()=>{const o=f.params&&f.params.roleId;if(o){t.roleId=o;let e=d(t);b.value.getList(e)}}),(o,e)=>{const n=a("el-input"),s=a("el-form-item"),y=a("el-button"),R=a("el-form"),T=a("el-link"),q=a("el-table-column"),B=a("TableV2");return Q(),G("div",$,[r(B,{class:"flex1",apiFunction:d(x),ref_key:"tableV2Ref",ref:b,columns:m.columnData},{tableHeader:l(()=>[H("div",W,[r(R,{model:t,ref:"queryForm",size:"small",inline:!0},{default:l(()=>[r(s,{label:"用户名称",prop:"userName"},{default:l(()=>[r(n,{modelValue:t.userName,"onUpdate:modelValue":e[0]||(e[0]=i=>t.userName=i),placeholder:"请输入用户名称",clearable:"",style:{width:"240px"},onKeyup:k(p,["enter","native"])},null,8,["modelValue"])]),_:1}),r(s,{label:"手机号码",prop:"phonenumber"},{default:l(()=>[r(n,{modelValue:t.phonenumber,"onUpdate:modelValue":e[1]||(e[1]=i=>t.phonenumber=i),placeholder:"请输入手机号码",clearable:"",style:{width:"240px"},onKeyup:k(p,["enter","native"])},null,8,["modelValue"])]),_:1}),r(s,null,{default:l(()=>[r(y,{type:"primary",size:"mini",onClick:p},{default:l(()=>e[2]||(e[2]=[c("搜索")])),_:1}),r(y,{size:"mini",onClick:w},{default:l(()=>e[3]||(e[3]=[c("重置")])),_:1})]),_:1})]),_:1},8,["model"]),r(y,{type:"primary",onClick:S},{default:l(()=>e[4]||(e[4]=[c("添加用户")])),_:1})])]),operation:l(()=>[r(q,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:l(i=>[r(T,{type:"primary",onClick:te=>D(i.row)},{default:l(()=>e[5]||(e[5]=[c("取消授权")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),r(O,{ref_key:"selectUserRef",ref:g,onGetUsers:C,roleId:d(f).params.roleId},null,8,["roleId"])])}}}),Be=K(X,[["__file","D:/work/public/admin-tempalte-base/src/views/system/role/authUser.vue"]]);export{Be as default};
