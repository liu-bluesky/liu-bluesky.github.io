import"./vue-Brcqt2vG.js";import{x as N,w as S,y as T,A as q,g as z}from"./index-CkSRKYAj.js";import{u as L}from"./vue-i18n-oCxI6G6S.js";import{a as y}from"./element-plus-DELVhQcd.js";import{d as M,s as c,r as m,w as H,f as K,t as W,A as G,i as n,o as J,c as P,j as o,k as i,K as Q,a as v,q as g,u as b,F as X}from"./@vue-B5Rjg0tc.js";import"./axios-CdcsOsvR.js";import"./vue-router-C7rU-wsU.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-Cb_zU3ED.js";import"./lodash-CcF5vdS9.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";import"./@intlify-D_0T6EgR.js";const Y={class:"jcb aic w100"},xe=M({__name:"select",props:{modelValue:{type:[String],defalut:""},placeholder:{type:String,required:!0,default:"请选择"},title:{type:String,default:"请选择"},multiple:{type:Boolean,default:!1},border:{type:Boolean,default:!1},pageInfo:{type:Object,default:null},options:{type:Object,default:()=>({label:"meterNumber",value:"meterId"})},filter:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(V,{emit:h}){const s=c(!1),r=m(""),w=h,l=V;L(),H(()=>l.modelValue,t=>{t&&N(t).then(e=>{r.value=e.data[l.options.label]})},{immediate:!0});const C=()=>{s.value=!1};m([]);const D=K(()=>W(l.filter)),_=c(""),p=c(!1),d=m(),k=()=>{s.value=!0},R=G({height:0,columnData:S}),j=()=>{_.value="",p.value=!0},x=t=>{d.value.getList()},a=m([]),A=(t,e)=>{l.multiple?a.value=t:t.length>1?d.value.tableRef().toggleRowSelection(t[0],!1):a.value=t},E=()=>{if(l.multiple)if(a.value.length==0){y.warning("请选择数据");return}else r.value=a.value.map(t=>t[l.options.label]).join(","),w("update:modelValue",a.value.map(t=>t[l.options.value]));else if(a.value.length==0){y.warning("请选择数据");return}else r.value=a.value[0][l.options.label],w("update:modelValue",a.value[0][l.options.value]);s.value=!1};return(t,e)=>{const U=n("ArrowDown"),B=n("el-icon"),O=n("el-input"),f=n("el-button"),F=n("TableV2"),I=n("ComDialog");return J(),P(X,null,[o(O,{placeholder:"请输入",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=u=>r.value=u),readonly:"",onClick:Q(k,["stop"])},{suffix:i(()=>[o(B,null,{default:i(()=>[o(U)]),_:1})]),_:1},8,["modelValue"]),v("div",null,[o(I,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=u=>s.value=u),title:V.title,width:b(z)},{footer:i(()=>[v("div",null,[o(f,{size:"large",onClick:C},{default:i(()=>e[4]||(e[4]=[g("取消")])),_:1}),o(f,{size:"large",type:"primary",onClick:E},{default:i(()=>e[5]||(e[5]=[g("保存")])),_:1})])]),default:i(()=>[o(F,{ref_key:"tableV2Ref",ref:d,selection:!0,tableOptions:{border:!0,height:400},apiFunction:b(T),filter:D.value,columns:R.columnData,tableEvents:{selectionChange:A}},{tableHeader:i(()=>[v("div",Y,[o(f,{type:"primary",onClick:j},{default:i(()=>e[3]||(e[3]=[g("新增计量表")])),_:1})])]),_:1},8,["apiFunction","filter","columns","tableEvents"]),o(b(q),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=u=>p.value=u),id:_.value,onUpdate:x},null,8,["modelValue","id"])]),_:1},8,["modelValue","title","width"])])],64)}}});export{xe as default};
