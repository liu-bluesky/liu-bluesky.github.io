import"./vue-Brcqt2vG.js";import{l as E,a as K,c as L}from"./cache-DM4eCn6t.js";import{a as m}from"./element-plus-DELVhQcd.js";import{d as $,A as H,b as O,i as n,au as R,o as f,c as U,j as e,k as a,a as g,q as _,X as B,m as N}from"./@vue-B5Rjg0tc.js";import"./axios-CdcsOsvR.js";import"./index-9tbjk_aw.js";import"./vue-router-C7rU-wsU.js";import"./pinia-6dDT7uVM.js";import"./vue-demi-CP2SMu8c.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-q0Sksrg4.js";import"./vue-i18n-oCxI6G6S.js";import"./@intlify-D_0T6EgR.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-DJ-KPX5f.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-CGqamrhd.js";import"./element-easy-form-I2rWV52J.js";import"./lodash-CcF5vdS9.js";import"./vuedraggable-9s6OmZnz.js";import"./@vue-monaco-BfCDpgCA.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-CMMVBHN7.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const z={class:"app-container"},_e=$({__name:"list",setup(M){const o=H({tableData:[],cacheNames:[],cacheKeys:[],cacheForm:{},nowCacheName:"",loading:!0,subLoading:!1,tableHeight:window.innerHeight-200}),C=()=>{o.loading=!0,E().then(u=>{o.cacheNames=u.data,o.loading=!1})},v=()=>{C(),m.success("刷新缓存列表成功")},c=u=>{const t=u!==void 0?u.cacheName:o.nowCacheName;t!==""&&(o.subLoading=!0,K(t).then(r=>{o.cacheKeys=r.data,o.subLoading=!1,o.nowCacheName=t}))},k=u=>{L(u.cacheName).then(t=>{m.success("清理缓存名称["+o.nowCacheName+"]成功"),c()})},F=()=>{c(),m.success("刷新键名列表成功")},x=()=>{c(),m.success("刷新键名列表成功")};return O(()=>{C()}),(u,t)=>{const r=n("el-button"),i=n("el-table-column"),w=n("el-table"),d=n("el-card"),s=n("el-col"),p=n("el-input"),h=n("el-form-item"),y=n("el-row"),V=n("el-form"),b=R("loading");return f(),U("div",z,[e(y,{gutter:10},{default:a(()=>[e(s,{span:8},{default:a(()=>[e(d,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[7]||(t[7]=g("span",null," 缓存列表",-1)),e(r,{style:{float:"right",padding:"3px 0"},type:"text",onClick:t[0]||(t[0]=l=>v())},{default:a(()=>t[6]||(t[6]=[_("刷新缓存")])),_:1})]),default:a(()=>[B((f(),N(w,{data:o.cacheNames,height:u.tableHeight,"highlight-current-row":"",onRowClick:c,style:{width:"100%"}},{default:a(()=>[e(i,{label:"序号",width:"60",type:"index"}),e(i,{label:"缓存名称",align:"center",prop:"cacheName","show-overflow-tooltip":!0,formatter:u.nameFormatter},null,8,["formatter"]),e(i,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(i,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(l=>[e(r,{size:"mini",type:"text",icon:"el-icon-delete",onClick:D=>k(l.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[b,o.loading]])]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(d,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[9]||(t[9]=g("span",null," 键名列表",-1)),e(r,{style:{float:"right",padding:"3px 0"},type:"text",onClick:t[1]||(t[1]=l=>F())},{default:a(()=>t[8]||(t[8]=[_("刷新键名")])),_:1})]),default:a(()=>[B((f(),N(w,{data:o.cacheKeys,height:o.tableHeight,"highlight-current-row":"",onRowClick:u.handleCacheValue,style:{width:"100%"}},{default:a(()=>[e(i,{label:"序号",width:"60",type:"index"}),e(i,{label:"缓存键名",align:"center","show-overflow-tooltip":!0,formatter:u.keyFormatter},null,8,["formatter"]),e(i,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(l=>[e(r,{size:"mini",type:"text",icon:"el-icon-delete",onClick:D=>x(l.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height","onRowClick"])),[[b,o.subLoading]])]),_:1})]),_:1}),e(s,{span:8},{default:a(()=>[e(d,{bordered:!1,style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[11]||(t[11]=g("span",null," 缓存内容",-1)),e(r,{style:{float:"right",padding:"3px 0"},type:"text",icon:"el-icon-refresh-right",onClick:t[2]||(t[2]=l=>F())},{default:a(()=>t[10]||(t[10]=[_("清理全部")])),_:1})]),default:a(()=>[e(V,{model:o.cacheForm},{default:a(()=>[e(y,{gutter:32},{default:a(()=>[e(s,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存名称:",prop:"cacheName"},{default:a(()=>[e(p,{modelValue:o.cacheForm.cacheName,"onUpdate:modelValue":t[3]||(t[3]=l=>o.cacheForm.cacheName=l),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存键名:",prop:"cacheKey"},{default:a(()=>[e(p,{modelValue:o.cacheForm.cacheKey,"onUpdate:modelValue":t[4]||(t[4]=l=>o.cacheForm.cacheKey=l),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存内容:",prop:"cacheValue"},{default:a(()=>[e(p,{modelValue:o.cacheForm.cacheValue,"onUpdate:modelValue":t[5]||(t[5]=l=>o.cacheForm.cacheValue=l),type:"textarea",rows:8,readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}});export{_e as default};
