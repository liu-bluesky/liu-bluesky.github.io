import"./vue-BOAnm8BJ.js";import{u as oe,a as ae}from"./vue-router-DgaeXL21.js";import{d as J,A as h,s as ne,w as se,i as u,o as s,c as U,j as t,k as l,K as re,m,z as Q,F as j,l as O,u as E,r as ue,b as me,au as ie,a as p,q as r,X as B,x as _,v as X}from"./@vue-C7kBaxf_.js";import{u as de,a as pe,d as fe,g as _e,l as G}from"./menu-BDvqS20q.js";import{_ as ce}from"./index-D8uVrJWJ.js";import{f as be}from"./index--ykiENj3.js";import{a as R,c as ye}from"./element-plus-DCyP7bP4.js";import"./axios-CdcsOsvR.js";import"./vuex-fAqGcTDK.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-D3uKt2uU.js";import"./vue-i18n-CbYyLErm.js";import"./@intlify-D_0T6EgR.js";import"./@vueuse-C3s7uLKR.js";import"./@element-plus-CaqvGD6o.js";/* empty css                    */import"./dayjs-CuLmuTop.js";import"./element-easy-print-4c_yq0aR.js";import"./mockjs-DsfWEKpx.js";import"./vue3-draggable-resizable-yn-DIkZKdRf.js";import"./element-easy-form-CmLGE_Qm.js";import"./vuedraggable-DF9qvgpV.js";import"./pinia-BsMBDaf_.js";import"./vue-demi-Zo4Nq4nd.js";import"./@vue-monaco-CNmGcFBZ.js";import"./uuid-CQkTLCs1.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const Ve=J({__name:"index",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(A,{emit:K}){const v=h({icons:[],icon:""});let C=ne(!1);const T=()=>{C.value=!0},c=()=>{C.value=!1},o=K,z=A;se(()=>z.modelValue,k=>{v.icon=k},{deep:!0,immediate:!0});const x=()=>{o("update:modelValue",""),c()},q=k=>{o("update:modelValue",k)};return(k,S)=>{const w=u("el-icon"),P=u("Search"),I=u("el-input"),D=u("el-scrollbar"),M=u("el-popover");return s(),U("div",null,[t(M,{placement:"bottom",width:400,visible:E(C)},{reference:l(()=>[t(I,{modelValue:v.icon,"onUpdate:modelValue":S[0]||(S[0]=n=>v.icon=n),onClick:re(T,["stop"]),onClear:x,placeholder:"点击选择图标"},{prefix:l(()=>[v.icon?(s(),m(w,{key:0,class:"llt-icon-size"},{default:l(()=>[(s(),m(Q(v.icon),{class:"llt-icon-size"}))]),_:1})):(s(),m(w,{key:1,class:"llt-icon-size"},{default:l(()=>[t(P)]),_:1}))]),_:1},8,["modelValue"])]),default:l(()=>[t(D,{height:"400px"},{default:l(()=>[(s(!0),U(j,null,O(k.$store.state.icons,n=>(s(),m(w,{key:n,onClick:e=>q(n),class:"llt-icon-size"},{default:l(()=>[(s(),m(Q(n)))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["visible"])])}}}),ge={class:"commonBoxmp"},ve={class:"jcb aic w100"},ke={class:"aic"},Ce={class:"aic"},we={class:"aic"},Ie={class:"aic"},Te={class:"aic"},xe={class:"aic"},Fe={class:"aic"},Ne={class:"aic"},he={class:"dialog-footer"},ml=J({__name:"index",setup(A){oe(),ae();const{parseTime:K,addDateRange:v,handleTree:C,getDict:T}=be();let c=h({sys_normal_disable:[],sys_show_hide:[]});const o=h({menuOptions:[],title:"",form:{},userVisible:!1,rules:{menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],path:[{required:!0,message:"路由地址不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"菜单名称",prop:"menuName",visible:!0},{label:"图标",prop:"icon",visible:!0},{label:"排序",prop:"orderNum",visible:!0},{label:"权限标识",prop:"perms",visible:!0},{label:"组件路径",visible:!0,prop:"component"},{label:"状态",prop:"status",visible:!0,render:({row:n})=>t(ce,{values:n.status,dataType:"primary",options:c.sys_job_status},null)},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),z=h({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),x=h({pageNum:1,pageSize:10,deptId:void 0}),q=async n=>{n&&(await n.validate(),o.form.menuId!=null?(console.log("state.form :>> ",o.form),o.form.parentId=o.form.parentId==null?0:o.form.parentId,de(o.form).then(e=>{R.success("修改成功"),o.userVisible=!1,I()})):pe(o.form).then(e=>{R.success("新增成功"),o.userVisible=!1,I()}))},k=n=>{const e=n.menuId;ye.confirm('是否确认删除用户编号为"'+e+'"的数据项？').then(function(){return fe(e)}).then(()=>{R.success("删除成功"),I()}).catch(function(){})},S=n=>{const e=n.menuId;_e(e).then(b=>{o.title="修改菜单",o.form=b.data,o.userVisible=!0})},w=n=>{D(),o.userVisible=!0,o.title="添加菜单",o.form={},n!=null&&n.menuId?o.form.parentId=n.menuId:o.form.parentId=0},P=n=>{},I=()=>{o.loading=!0,x.pageNum=z.currentPage,x.pageSize=z.pageSize,G(v(x,o.dateRange)).then(n=>{o.tableData=C(n.data,"menuId"),o.loading=!1})},D=()=>{G().then(n=>{o.menuOptions=[];const e={menuId:0,menuName:"主类目",children:[]};e.children=C(n.data,"menuId"),o.menuOptions.push(e)})},M=ue();return me(async()=>{I(),D(),c.sys_job_status=await T("sys_job_status"),c.sys_normal_disable=await T("sys_normal_disable"),c.sys_show_hide=await T("sys_show_hide")}),(n,e)=>{const b=u("el-button"),W=u("el-table-column"),Y=u("TableV2"),Z=u("el-cascader"),i=u("el-form-item"),d=u("el-col"),H=u("el-row"),f=u("el-radio"),F=u("el-radio-group"),N=u("el-input"),ee=u("el-input-number"),y=u("QuestionFilled"),V=u("el-icon"),g=u("el-tooltip"),le=u("el-form"),te=u("el-dialog"),$=ie("hasPermi");return s(),U("div",ge,[t(Y,{selection:"",onSelectionChange:n.handleselectionChange,columns:o.columnData,dataKey:"data",data:o.tableData,tableOptions:{rowKey:"menuId",border:!0,treeProps:{children:"children",hasChildren:"hasChildren"}}},{tableHeader:l(()=>[p("div",ve,[t(b,{type:"primary",onClick:w},{default:l(()=>e[16]||(e[16]=[r("添加菜单")])),_:1})])]),operation:l(()=>[t(W,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(a=>[B((s(),m(b,{size:"mini",type:"text",onClick:L=>S(a.row)},{default:l(()=>e[17]||(e[17]=[r("修改")])),_:2},1032,["onClick"])),[[$,["system:menu:edit"]]]),B((s(),m(b,{size:"mini",type:"text",onClick:L=>w(a.row)},{default:l(()=>e[18]||(e[18]=[r("新增")])),_:2},1032,["onClick"])),[[$,["system:menu:add"]]]),B((s(),m(b,{size:"mini",type:"text",onClick:L=>k(a.row)},{default:l(()=>e[19]||(e[19]=[r("删除")])),_:2},1032,["onClick"])),[[$,["system:menu:remove"]]])]),_:1})]),_:1},8,["onSelectionChange","columns","data"]),t(te,{modelValue:o.userVisible,"onUpdate:modelValue":e[15]||(e[15]=a=>o.userVisible=a),title:o.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[p("span",he,[t(b,{onClick:e[13]||(e[13]=a=>o.userVisible=!1)},{default:l(()=>e[35]||(e[35]=[r("取消")])),_:1}),t(b,{type:"primary",onClick:e[14]||(e[14]=a=>q(M.value))},{default:l(()=>e[36]||(e[36]=[r(" 确定 ")])),_:1})])]),default:l(()=>[t(le,{ref_key:"ruleFormRef",ref:M,model:o.form,rules:o.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[t(H,{gutter:20},{default:l(()=>[t(d,{span:24},{default:l(()=>[t(i,{label:"上级菜单",prop:"parentId"},{default:l(()=>[t(Z,{options:o.menuOptions,modelValue:o.form.parentId,"onUpdate:modelValue":e[0]||(e[0]=a=>o.form.parentId=a),class:"w100",props:{checkStrictly:!0,emitPath:!1,value:"menuId",label:"menuName"},clearable:"",onChange:P},null,8,["options","modelValue"])]),_:1})]),_:1})]),_:1}),t(H,{gutter:20},{default:l(()=>[t(d,{span:24},{default:l(()=>[t(i,{label:"菜单类型",prop:"menuType"},{default:l(()=>[t(F,{modelValue:o.form.menuType,"onUpdate:modelValue":e[1]||(e[1]=a=>o.form.menuType=a)},{default:l(()=>[t(f,{label:"M"},{default:l(()=>e[20]||(e[20]=[r("目录")])),_:1}),t(f,{label:"C"},{default:l(()=>e[21]||(e[21]=[r("菜单")])),_:1}),t(f,{label:"F"},{default:l(()=>e[22]||(e[22]=[r("按钮")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),o.form.menuType!="F"?(s(),m(d,{key:0,span:24},{default:l(()=>[t(i,{label:"菜单图标"},{default:l(()=>[t(Ve,{class:"w100",modelValue:o.form.icon,"onUpdate:modelValue":e[2]||(e[2]=a=>o.form.icon=a)},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),t(d,{span:12},{default:l(()=>[t(i,{label:"菜单名称",prop:"menuName"},{default:l(()=>[t(N,{modelValue:o.form.menuName,"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.menuName=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(i,{label:"显示排序",prop:"orderNum"},{default:l(()=>[t(ee,{modelValue:o.form.orderNum,"onUpdate:modelValue":e[4]||(e[4]=a=>o.form.orderNum=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),o.form.menuType!="F"?(s(),m(d,{key:1,span:12},{default:l(()=>[t(i,{prop:"isFrame"},{label:l(()=>[p("div",ke,[t(g,{content:"选择是外链则路由地址需要以`http(s)://`开头",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[23]||(e[23]=r(" 是否外链 "))])]),default:l(()=>[t(F,{modelValue:o.form.isFrame,"onUpdate:modelValue":e[5]||(e[5]=a=>o.form.isFrame=a)},{default:l(()=>[t(f,{label:"0"},{default:l(()=>e[24]||(e[24]=[r("是")])),_:1}),t(f,{label:"1"},{default:l(()=>e[25]||(e[25]=[r("否")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType!="F"?(s(),m(d,{key:2,span:12},{default:l(()=>[t(i,{prop:"path"},{label:l(()=>[p("div",Ce,[t(g,{content:"访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[26]||(e[26]=r(" 路由地址 "))])]),default:l(()=>[t(N,{modelValue:o.form.path,"onUpdate:modelValue":e[6]||(e[6]=a=>o.form.path=a),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType=="C"?(s(),m(d,{key:3,span:12},{default:l(()=>[t(i,{prop:"component"},{label:l(()=>[p("div",we,[t(g,{content:"访问的组件路径，如：`system/user/index`，默认在`views`目录下",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[27]||(e[27]=r(" 组件路径 "))])]),default:l(()=>[t(N,{modelValue:o.form.component,"onUpdate:modelValue":e[7]||(e[7]=a=>o.form.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType!="M"?(s(),m(d,{key:4,span:12},{default:l(()=>[t(i,{prop:"perms"},{label:l(()=>[p("div",Ie,[t(g,{content:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[28]||(e[28]=r(" 权限字符 "))])]),default:l(()=>[t(N,{modelValue:o.form.perms,"onUpdate:modelValue":e[8]||(e[8]=a=>o.form.perms=a),placeholder:"请输入权限标识",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType=="C"?(s(),m(d,{key:5,span:12},{default:l(()=>[t(i,{prop:"query"},{label:l(()=>[p("div",Te,[t(g,{content:'访问路由的默认传递参数，如：`{"id": 1, "name": "ry"}`',placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[29]||(e[29]=r(" 路由参数 "))])]),default:l(()=>[t(N,{modelValue:o.form.query,"onUpdate:modelValue":e[9]||(e[9]=a=>o.form.query=a),placeholder:"请输入路由参数",maxlength:"255"},null,8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType=="C"?(s(),m(d,{key:6,span:12},{default:l(()=>[t(i,{prop:"isCache"},{label:l(()=>[p("div",xe,[t(g,{content:"选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[30]||(e[30]=r(" 是否缓存 "))])]),default:l(()=>[t(F,{modelValue:o.form.isCache,"onUpdate:modelValue":e[10]||(e[10]=a=>o.form.isCache=a)},{default:l(()=>[t(f,{label:"0"},{default:l(()=>e[31]||(e[31]=[r("缓存")])),_:1}),t(f,{label:"1"},{default:l(()=>e[32]||(e[32]=[r("不缓存")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType!="F"?(s(),m(d,{key:7,span:12},{default:l(()=>[t(i,{prop:"visible"},{label:l(()=>[p("div",Fe,[t(g,{content:"选择隐藏则路由将不会出现在侧边栏，但仍然可以访问",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[33]||(e[33]=r(" 显示状态 "))])]),default:l(()=>[t(F,{modelValue:o.form.visible,"onUpdate:modelValue":e[11]||(e[11]=a=>o.form.visible=a)},{default:l(()=>[(s(!0),U(j,null,O(E(c).sys_show_hide,a=>(s(),m(f,{key:a.value,label:a.value},{default:l(()=>[r(X(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0),o.form.menuType!="F"?(s(),m(d,{key:8,span:12},{default:l(()=>[t(i,{prop:"status"},{label:l(()=>[p("div",Ne,[t(g,{content:"选择停用则路由将不会出现在侧边栏，也不能被访问",placement:"top"},{default:l(()=>[t(V,null,{default:l(()=>[t(y)]),_:1})]),_:1}),e[34]||(e[34]=r(" 菜单状态 "))])]),default:l(()=>[t(F,{modelValue:o.form.status,"onUpdate:modelValue":e[12]||(e[12]=a=>o.form.status=a)},{default:l(()=>[(s(!0),U(j,null,O(E(c).sys_normal_disable,a=>(s(),m(f,{key:a.value,label:a.value},{default:l(()=>[r(X(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):_("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{ml as default};
