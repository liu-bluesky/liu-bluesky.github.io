import"./vue-BCJY8gBf.js";import{u as M,b as P}from"./vue-router-Bk-12vT2.js";import{h as p,g as k,i as j,a as E}from"./index-DnKBT612.js";import{D}from"./index-DMBomKMH.js";import{a as V,c as A}from"./element-plus-BIk4sW6s.js";import{d as H,B as f,k as o,r as L,b as G,j as r,o as J,c as K,l,a as v,v as u,u as O}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./dayjs-CpORZXld.js";import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";import"./@element-plus-D9bzjPyL.js";import"./lodash-es-D0ldFxdg.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";function N(i){return p.request({url:"/system/notice/list",method:"get",params:i})}function Q(i){return p.request({url:"/system/notice/"+i,method:"get"})}function W(i){return p.request({url:"/system/notice",method:"post",data:i})}function X(i){return p.request({url:"/system/notice",method:"put",data:i})}function Y(i){return p.request({url:"/system/notice/"+i,method:"delete"})}const Z={class:"commonBoxmp"},ee={class:"jcb aic w100"},te={class:"dialog-footer"},oe=H({__name:"index",setup(i){M(),P();const{parseTime:le,addDateRange:q,getDict:T}=j(),t=f({form:{},title:"",rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"公告标题",prop:"noticeTitle",visible:!0},{label:"公告类型",prop:"noticeType",render:({row:s})=>o(D,{values:s.noticeType,dataType:"primary",options:m.sys_notice_type},null),visible:!0},{label:"状态",prop:"status",visible:!0,render:({row:s})=>o(D,{values:s.status,dataType:"primary",options:m.sys_notice_status},null)},{label:"创建者",prop:"createBy",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),_=f({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),y=f({pageNum:1,pageSize:10,deptId:void 0}),R=async s=>{s&&(await s.validate(),t.form.noticeId!=null?X(t.form).then(e=>{V.success("修改成功"),t.userVisible=!1,g()}):W(t.form).then(e=>{V.success("新增成功"),t.userVisible=!1,g()}))},B=s=>{const e=s.noticeId;A.confirm('是否确认删除编号为"'+e+'"的数据项？').then(function(){return Y(e)}).then(()=>{V.success("删除成功"),g()}).catch(function(){})},I=s=>{const e=s.noticeId;Q(e).then(a=>{t.title="修改通告",t.form=a.data,t.userVisible=!0})},h=()=>{t.form={},t.title="添加通告",t.userVisible=!0},g=()=>{t.loading=!0,y.pageNum=_.currentPage,y.pageSize=_.pageSize,N(q(y,t.dateRange)).then(s=>{t.tableData=s.rows,_.total=s.total,t.loading=!1})};let m=f({sys_notice_status:[],sys_notice_type:[]});const w=L();return G(async()=>{m.sys_notice_status=await T("sys_notice_status"),m.sys_notice_type=await T("sys_notice_type")}),(s,e)=>{const a=r("el-button"),x=r("el-link"),z=r("el-table-column"),F=r("TableV2"),C=r("el-input"),d=r("el-form-item"),c=r("el-col"),b=r("el-row"),U=r("el-form"),S=r("el-dialog");return J(),K("div",Z,[o(F,{class:"flex1",apiFunction:O(N),ref:"tableV2Ref",columns:t.columnData},{tableHeader:l(()=>[v("div",ee,[e[8]||(e[8]=v("h3",{class:"mx15"},"岗位管理",-1)),o(a,{type:"primary",onClick:h},{default:l(()=>e[7]||(e[7]=[u("新增")])),_:1})])]),operation:l(()=>[o(z,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:l(n=>[o(x,{type:"primary",onClick:$=>I(n.row)},{default:l(()=>e[9]||(e[9]=[u("修改")])),_:2},1032,["onClick"]),o(x,{type:"primary",onClick:$=>B(n.row)},{default:l(()=>e[10]||(e[10]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),o(S,{modelValue:t.userVisible,"onUpdate:modelValue":e[6]||(e[6]=n=>t.userVisible=n),title:t.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[v("span",te,[o(a,{onClick:e[4]||(e[4]=n=>t.userVisible=!1)},{default:l(()=>e[11]||(e[11]=[u("取消")])),_:1}),o(a,{type:"primary",onClick:e[5]||(e[5]=n=>R(w.value))},{default:l(()=>e[12]||(e[12]=[u(" 确定 ")])),_:1})])]),default:l(()=>[o(U,{ref_key:"ruleFormRef",ref:w,model:t.form,rules:t.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[o(b,{gutter:20},{default:l(()=>[o(c,{span:12},{default:l(()=>[o(d,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[o(C,{modelValue:t.form.noticeTitle,"onUpdate:modelValue":e[0]||(e[0]=n=>t.form.noticeTitle=n),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),o(c,{span:12},{default:l(()=>[o(d,{label:"公告类型",prop:"noticeType"},{default:l(()=>[o(k,{class:"w100",dictCode:"sys_notice_type",modelValue:t.form.noticeType,"onUpdate:modelValue":e[1]||(e[1]=n=>t.form.noticeType=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:l(()=>[o(c,{span:12},{default:l(()=>[o(d,{label:"状态",prop:"status"},{default:l(()=>[o(k,{class:"w100",dataType:"radio",dictCode:"sys_notice_status",modelValue:t.form.status,"onUpdate:modelValue":e[2]||(e[2]=n=>t.form.status=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(b,{gutter:20},{default:l(()=>[o(c,{span:24},{default:l(()=>[o(d,{label:"内容",prop:"noticeContent"},{default:l(()=>[o(C,{modelValue:t.form.noticeContent,"onUpdate:modelValue":e[3]||(e[3]=n=>t.form.noticeContent=n),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Ue=E(oe,[["__file","D:/work/public/admin-tempalte-base/src/views/system/notice/index.vue"]]);export{Ue as default};
