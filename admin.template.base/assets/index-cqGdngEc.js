import"./vue-DSB24BnW.js";import{u as j,a as M}from"./vue-router-fyTrc5Va.js";import{h as m,f as P,j as w}from"./index-M3ohjitV.js";import{_ as C}from"./index-CR9DtD1f.js";import{a as V,c as E}from"./element-plus-Cdmo8XhC.js";import{d as A,r as k,v as f,f as H,h as r,c as L,i as t,j as o,u as G,o as J,a as h,m as u}from"./@vue-CmN6Z9lx.js";import"./ace-builds-DiBK84cm.js";import"./vuex-CLkfaZ6_.js";import"./js-cookie-Cz0CWeBA.js";import"./path-browserify-Jw_v0k3c.js";import"./@vueuse-D81fD1wx.js";import"./nprogress-C9k5oxGd.js";import"./axios-BNZxzx77.js";import"./@element-plus-DGCe4rM-.js";/* empty css                    */import"./dayjs-BhI1duP8.js";import"./element-easy-form-Dkjp9jsl.js";import"./mockjs-72j0mDZC.js";import"./vuedraggable-C0hio2tq.js";import"./sortablejs-CUXm9Ppf.js";import"./vue3-ace-editor-YX3apWn1.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./uuid-CQkTLCs1.js";import"./vue-i18n-BPZ2p18e.js";import"./@intlify-fCQYzvHO.js";import"./element-easy-print-B_PXcQ-3.js";import"./vue3-draggable-resizable-yn-Cm3Ut1tY.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";function N(n){return m.request({url:"/system/notice/list",method:"get",params:n})}function K(n){return m.request({url:"/system/notice/"+n,method:"get"})}function O(n){return m.request({url:"/system/notice",method:"post",data:n})}function Q(n){return m.request({url:"/system/notice",method:"put",data:n})}function W(n){return m.request({url:"/system/notice/"+n,method:"delete"})}const X={class:"commonBoxmp"},Y={class:"jcb aic w100"},Z=h("h3",{class:"mx15"},"岗位管理",-1),ee={class:"dialog-footer"},$e=A({__name:"index",setup(n){j(),M();const{parseTime:te,addDateRange:q,getDict:T}=P();k(!0);const e=f({form:{},title:"",rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"公告标题",prop:"noticeTitle",visible:!0},{label:"公告类型",prop:"noticeType",render:({row:s})=>t(C,{values:s.noticeType,dataType:"primary",options:p.sys_notice_type},null),visible:!0},{label:"状态",prop:"status",visible:!0,render:({row:s})=>t(C,{values:s.status,dataType:"primary",options:p.sys_notice_status},null)},{label:"创建者",prop:"createBy",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),_=f({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),y=f({pageNum:1,pageSize:10,deptId:void 0}),R=async s=>{s&&(await s.validate(),e.form.noticeId!=null?Q(e.form).then(l=>{V.success("修改成功"),e.userVisible=!1,g()}):O(e.form).then(l=>{V.success("新增成功"),e.userVisible=!1,g()}))},D=s=>{const l=s.noticeId;E.confirm('是否确认删除编号为"'+l+'"的数据项？').then(function(){return W(l)}).then(()=>{V.success("删除成功"),g()}).catch(function(){})},I=s=>{const l=s.noticeId;K(l).then(i=>{e.title="修改通告",e.form=i.data,e.userVisible=!0})},z=()=>{e.form={},e.title="添加通告",e.userVisible=!0},g=()=>{e.loading=!0,y.pageNum=_.currentPage,y.pageSize=_.pageSize,N(q(y,e.dateRange)).then(s=>{e.tableData=s.rows,_.total=s.total,e.loading=!1})};let p=f({sys_notice_status:[],sys_notice_type:[]});const v=k();return H(async()=>{p.sys_notice_status=await T("sys_notice_status"),p.sys_notice_type=await T("sys_notice_type")}),(s,l)=>{const i=r("el-button"),B=r("el-table-column"),F=r("TableV2"),x=r("el-input"),c=r("el-form-item"),d=r("el-col"),b=r("el-row"),U=r("el-form"),$=r("el-dialog");return J(),L("div",X,[t(F,{class:"flex1",apiFunction:G(N),ref:"tableV2Ref",columns:e.columnData},{tableHeader:o(()=>[h("div",Y,[Z,t(i,{type:"primary",onClick:z},{default:o(()=>[u("新增")]),_:1})])]),operation:o(()=>[t(B,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:o(a=>[t(i,{type:"text",onClick:S=>I(a.row)},{default:o(()=>[u("修改")]),_:2},1032,["onClick"]),t(i,{type:"text",onClick:S=>D(a.row)},{default:o(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),t($,{modelValue:e.userVisible,"onUpdate:modelValue":l[6]||(l[6]=a=>e.userVisible=a),title:e.title,width:"50%","destroy-on-close":"",center:""},{footer:o(()=>[h("span",ee,[t(i,{onClick:l[4]||(l[4]=a=>e.userVisible=!1)},{default:o(()=>[u("取消")]),_:1}),t(i,{type:"primary",onClick:l[5]||(l[5]=a=>R(v.value))},{default:o(()=>[u(" 确定 ")]),_:1})])]),default:o(()=>[t(U,{ref_key:"ruleFormRef",ref:v,model:e.form,rules:e.rules,"label-width":"120px",class:"demo-ruleForm"},{default:o(()=>[t(b,{gutter:20},{default:o(()=>[t(d,{span:12},{default:o(()=>[t(c,{label:"公告标题",prop:"noticeTitle"},{default:o(()=>[t(x,{modelValue:e.form.noticeTitle,"onUpdate:modelValue":l[0]||(l[0]=a=>e.form.noticeTitle=a),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:o(()=>[t(c,{label:"公告类型",prop:"noticeType"},{default:o(()=>[t(w,{class:"w100",dictCode:"sys_notice_type",modelValue:e.form.noticeType,"onUpdate:modelValue":l[1]||(l[1]=a=>e.form.noticeType=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:o(()=>[t(d,{span:12},{default:o(()=>[t(c,{label:"状态",prop:"status"},{default:o(()=>[t(w,{class:"w100",dataType:"radio",dictCode:"sys_notice_status",modelValue:e.form.status,"onUpdate:modelValue":l[2]||(l[2]=a=>e.form.status=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:o(()=>[t(d,{span:24},{default:o(()=>[t(c,{label:"内容",prop:"noticeContent"},{default:o(()=>[t(x,{modelValue:e.form.noticeContent,"onUpdate:modelValue":l[3]||(l[3]=a=>e.form.noticeContent=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{$e as default};
