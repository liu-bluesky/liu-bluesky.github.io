import"./vue-BCJY8gBf.js";import{g as x}from"./cache-DzTbIrZF.js";import{i as y}from"./echarts-BS5Vi01R.js";import{d as g,B as O,r as p,b as w,j as u,o as a,c as i,k as r,l as d,a as e,u as t,x as o,y as n,n as C}from"./@vue-BwKUEgJD.js";import{a as B}from"./index-DnKBT612.js";import"./axios-DWt2DAqT.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CSlcGGmn.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./element-plus-BIk4sW6s.js";import"./lodash-es-D0ldFxdg.js";import"./@element-plus-D9bzjPyL.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./dayjs-CpORZXld.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";const D={class:"app-container"},F={class:"el-table el-table--enable-row-hover el-table--medium"},S={cellspacing:"0",style:{width:"100%"}},N={class:"el-table__cell is-leaf"},V={key:0,class:"cell"},z={class:"el-table__cell is-leaf"},E={key:0,class:"cell"},R={class:"el-table__cell is-leaf"},T={key:0,class:"cell"},j={class:"el-table__cell is-leaf"},A={key:0,class:"cell"},I={class:"el-table__cell is-leaf"},K={key:0,class:"cell"},L={class:"el-table__cell is-leaf"},M={key:0,class:"cell"},P={class:"el-table__cell is-leaf"},U={key:0,class:"cell"},q={class:"el-table__cell is-leaf"},G={key:0,class:"cell"},H={class:"el-table__cell is-leaf"},J={key:0,class:"cell"},Q={class:"el-table__cell is-leaf"},W={key:0,class:"cell"},X={class:"el-table__cell is-leaf"},Y={key:0,class:"cell"},Z={class:"el-table__cell is-leaf"},$={key:0,class:"cell"},ee={class:"el-table el-table--enable-row-hover el-table--medium"},le={class:"el-table el-table--enable-row-hover el-table--medium"},se=g({__name:"index",props:{},setup(te){const _=O({tableData:[],commandstatsOpt:null,usedmemoryOpt:null});let s=p({}),v=p(""),b=p("");const k=()=>{x().then(c=>{s.value=c.data,C(()=>{_.commandstatsOpt=y(v.value,"macarons"),_.commandstatsOpt.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"命令",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:c.data.commandStats,animationEasing:"cubicInOut",animationDuration:1e3}]}),_.usedmemoryOpt=y(b.value,"macarons"),_.usedmemoryOpt.setOption({tooltip:{formatter:"{b} <br/>{a} : "+s.value.info.used_memory_human},series:[{name:"峰值",type:"gauge",min:0,max:1e3,detail:{formatter:s.value.info.used_memory_human},data:[{value:parseFloat(s.value.info.used_memory_human),name:"内存消耗"}]}]})})})};return w(()=>{k()}),(c,l)=>{const m=u("el-card"),f=u("el-col"),h=u("el-row");return a(),i("div",D,[r(h,null,{default:d(()=>[r(f,{span:24,class:"card-box"},{default:d(()=>[r(m,null,{header:d(()=>l[0]||(l[0]=[e("div",null,[e("span",null," 基本信息")],-1)])),default:d(()=>[e("div",F,[e("table",S,[e("tbody",null,[e("tr",null,[l[1]||(l[1]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Redis版本")],-1)),e("td",N,[t(s).info?(a(),i("div",V,o(t(s).info.redis_version),1)):n("v-if",!0)]),l[2]||(l[2]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行模式")],-1)),e("td",z,[t(s).info?(a(),i("div",E,o(t(s).info.redis_mode=="standalone"?"单机":"集群"),1)):n("v-if",!0)]),l[3]||(l[3]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"端口")],-1)),e("td",R,[t(s).info?(a(),i("div",T,o(t(s).info.tcp_port),1)):n("v-if",!0)]),l[4]||(l[4]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"客户端数")],-1)),e("td",j,[t(s).info?(a(),i("div",A,o(t(s).info.connected_clients),1)):n("v-if",!0)])]),e("tr",null,[l[5]||(l[5]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行时间(天)")],-1)),e("td",I,[t(s).info?(a(),i("div",K,o(t(s).info.uptime_in_days),1)):n("v-if",!0)]),l[6]||(l[6]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用内存")],-1)),e("td",L,[t(s).info?(a(),i("div",M,o(t(s).info.used_memory_human),1)):n("v-if",!0)]),l[7]||(l[7]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用CPU")],-1)),e("td",P,[t(s).info?(a(),i("div",U,o(parseFloat(t(s).info.used_cpu_user_children).toFixed(2)),1)):n("v-if",!0)]),l[8]||(l[8]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"内存配置")],-1)),e("td",q,[t(s).info?(a(),i("div",G,o(t(s).info.maxmemory_human),1)):n("v-if",!0)])]),e("tr",null,[l[9]||(l[9]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"AOF是否开启")],-1)),e("td",H,[t(s).info?(a(),i("div",J,o(t(s).info.aof_enabled=="0"?"否":"是"),1)):n("v-if",!0)]),l[10]||(l[10]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"RDB是否成功")],-1)),e("td",Q,[t(s).info?(a(),i("div",W,o(t(s).info.rdb_last_bgsave_status),1)):n("v-if",!0)]),l[11]||(l[11]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Key数量")],-1)),e("td",X,[t(s).dbSize?(a(),i("div",Y,o(t(s).dbSize),1)):n("v-if",!0)]),l[12]||(l[12]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"网络入口/出口")],-1)),e("td",Z,[t(s).info?(a(),i("div",$,o(t(s).info.instantaneous_input_kbps)+"kps/"+o(t(s).info.instantaneous_output_kbps)+"kps ",1)):n("v-if",!0)])])])])])]),_:1})]),_:1}),r(f,{span:12,class:"card-box"},{default:d(()=>[r(m,null,{header:d(()=>l[13]||(l[13]=[e("div",null,[e("span",null," 命令统计")],-1)])),default:d(()=>[e("div",ee,[e("div",{ref_key:"commandstats",ref:v,style:{height:"420px"}},null,512)])]),_:1})]),_:1}),r(f,{span:12,class:"card-box"},{default:d(()=>[r(m,null,{header:d(()=>l[14]||(l[14]=[e("div",null,[e("span",null," 内存信息")],-1)])),default:d(()=>[e("div",le,[e("div",{ref_key:"usedmemory",ref:b,style:{height:"420px"}},null,512)])]),_:1})]),_:1})]),_:1})])}}}),Ie=B(se,[["__file","D:/work/public/admin-tempalte-base/src/views/monitor/cache/index.vue"]]);export{Ie as default};
