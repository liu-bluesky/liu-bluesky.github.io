import"./vue-BCJY8gBf.js";import{l as L,a as $,c as D}from"./cache-DzTbIrZF.js";import{a as p}from"./element-plus-BIk4sW6s.js";import{d as H,B as O,b as R,j as r,P as U,o as f,c as z,k as e,l as a,a as g,v as _,Q as N,q as k}from"./@vue-BwKUEgJD.js";import{a as E}from"./index-DnKBT612.js";import"./axios-DWt2DAqT.js";import"./lodash-es-D0ldFxdg.js";import"./@element-plus-D9bzjPyL.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./dayjs-CpORZXld.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";const M={class:"app-container"},j=H({__name:"list",setup(q){const l=O({tableData:[],cacheNames:[],cacheKeys:[],cacheForm:{},nowCacheName:"",loading:!0,subLoading:!1,tableHeight:window.innerHeight-200}),y=()=>{l.loading=!0,L().then(n=>{l.cacheNames=n.data,l.loading=!1})},V=()=>{y(),p.success("刷新缓存列表成功")},m=n=>{const t=n!==void 0?n.cacheName:l.nowCacheName;t!==""&&(l.subLoading=!0,$(t).then(i=>{l.cacheKeys=i.data,l.subLoading=!1,l.nowCacheName=t}))},x=n=>{D(n.cacheName).then(t=>{p.success("清理缓存名称["+l.nowCacheName+"]成功"),m()})},w=()=>{m(),p.success("刷新键名列表成功")},F=()=>{m(),p.success("刷新键名列表成功")};return R(()=>{y()}),(n,t)=>{const i=r("el-link"),s=r("el-table-column"),C=r("el-table"),d=r("el-card"),c=r("el-col"),u=r("el-input"),h=r("el-form-item"),b=r("el-row"),K=r("el-form"),v=U("loading");return f(),z("div",M,[e(b,{gutter:10},{default:a(()=>[e(c,{span:8},{default:a(()=>[e(d,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[7]||(t[7]=g("span",null," 缓存列表",-1)),e(i,{style:{float:"right",padding:"3px 0"},type:"primary",onClick:t[0]||(t[0]=o=>V())},{default:a(()=>t[6]||(t[6]=[_("刷新缓存")])),_:1})]),default:a(()=>[N((f(),k(C,{data:l.cacheNames,height:n.tableHeight,"highlight-current-row":"",onRowClick:m,style:{width:"100%"}},{default:a(()=>[e(s,{label:"序号",width:"60",type:"index"}),e(s,{label:"缓存名称",align:"center",prop:"cacheName","show-overflow-tooltip":!0,formatter:n.nameFormatter},null,8,["formatter"]),e(s,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(s,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(o=>[e(i,{size:"mini",type:"primary",icon:"el-icon-delete",onClick:B=>x(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height"])),[[v,l.loading]])]),_:1})]),_:1}),e(c,{span:8},{default:a(()=>[e(d,{style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[9]||(t[9]=g("span",null," 键名列表",-1)),e(i,{style:{float:"right",padding:"3px 0"},type:"primary",onClick:t[1]||(t[1]=o=>w())},{default:a(()=>t[8]||(t[8]=[_("刷新键名")])),_:1})]),default:a(()=>[N((f(),k(C,{data:l.cacheKeys,height:l.tableHeight,"highlight-current-row":"",onRowClick:n.handleCacheValue,style:{width:"100%"}},{default:a(()=>[e(s,{label:"序号",width:"60",type:"index"}),e(s,{label:"缓存键名",align:"center","show-overflow-tooltip":!0,formatter:n.keyFormatter},null,8,["formatter"]),e(s,{label:"操作",width:"60",align:"center","class-name":"small-padding fixed-width"},{default:a(o=>[e(i,{size:"mini",type:"primary",icon:"el-icon-delete",onClick:B=>F(o.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data","height","onRowClick"])),[[v,l.subLoading]])]),_:1})]),_:1}),e(c,{span:8},{default:a(()=>[e(d,{bordered:!1,style:{height:"calc(100vh - 125px)"}},{header:a(()=>[t[11]||(t[11]=g("span",null," 缓存内容",-1)),e(i,{style:{float:"right",padding:"3px 0"},type:"primary",icon:"el-icon-refresh-right",onClick:t[2]||(t[2]=o=>w())},{default:a(()=>t[10]||(t[10]=[_("清理全部")])),_:1})]),default:a(()=>[e(K,{model:l.cacheForm},{default:a(()=>[e(b,{gutter:32},{default:a(()=>[e(c,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存名称:",prop:"cacheName"},{default:a(()=>[e(u,{modelValue:l.cacheForm.cacheName,"onUpdate:modelValue":t[3]||(t[3]=o=>l.cacheForm.cacheName=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存键名:",prop:"cacheKey"},{default:a(()=>[e(u,{modelValue:l.cacheForm.cacheKey,"onUpdate:modelValue":t[4]||(t[4]=o=>l.cacheForm.cacheKey=o),readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{offset:1,span:22},{default:a(()=>[e(h,{label:"缓存内容:",prop:"cacheValue"},{default:a(()=>[e(u,{modelValue:l.cacheForm.cacheValue,"onUpdate:modelValue":t[5]||(t[5]=o=>l.cacheForm.cacheValue=o),type:"textarea",rows:8,readOnly:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}}),we=E(j,[["__file","D:/work/public/admin-tempalte-base/src/views/monitor/cache/list.vue"]]);export{we as default};
