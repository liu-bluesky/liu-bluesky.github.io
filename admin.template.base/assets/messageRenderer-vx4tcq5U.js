import"./vue-BCJY8gBf.js";import{M as k}from"./markdown-it-CbP7vtGm.js";import{H as r}from"./highlight.js-B7LmAXo8.js";import{C as w}from"./clipboard-BUHf24oA.js";import{d as C,r as c,b as I,o as g,c as f,a as l,y as h,L}from"./@vue-BwKUEgJD.js";import{a as M}from"./index-DnKBT612.js";import"./axios-DWt2DAqT.js";import"./mdurl-BWm-ACjI.js";import"./uc.micro-kMc2yuuw.js";import"./entities-C20TfXL6.js";import"./linkify-it-BQ_5SPxD.js";import"./punycode.js-Dj65hjkv.js";import"./vue-router-Bk-12vT2.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./element-plus-BIk4sW6s.js";import"./lodash-es-D0ldFxdg.js";import"./@element-plus-D9bzjPyL.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./dayjs-CpORZXld.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";const S={class:"message-renderer"},$=["innerHTML"],B=["src"],E=C({__name:"messageRenderer",props:{content:{type:String,required:!0},type:{type:String,default:"assistant"}},setup(v){const y=v,o=e=>{const t="code-".concat(Date.now());return'\n      <div class="code-block">\n       <button class="copy-btn"\n       data-id="'.concat(t,'"\n       data-clipboard-target="#').concat(t,'">复制</button>\n        <pre><code class="hljs" id="').concat(t,'">').concat(e,"</code></pre>\n       \n      </div>\n    ")},n=k({html:!0,linkify:!0,typographer:!0,highlight:function(e,t){if(t&&t.toLowerCase()==="vue")try{return o(r.highlight(e,{language:"html",ignoreIllegals:!0}).value)}catch(a){}if(t&&r.getLanguage(t))try{return o(r.highlight(e,{language:t,ignoreIllegals:!0}).value)}catch(a){}return o(n.utils.escapeHtml(e))}});n.renderer.rules.fence=(e,t,a,H,T)=>{const d=e[t],m=d.content.trim(),i=d.info||"";if(i&&i.toLowerCase()==="vue")try{return o(r.highlight(m,{language:"html",ignoreIllegals:!0}).value)}catch(x){}if(i&&r.getLanguage(i))try{return o(r.highlight(m,{language:i,ignoreIllegals:!0}).value)}catch(x){}return o(n.utils.escapeHtml(m))};const u=c(""),s=c(!1),p=c("");function _(){new w(".copy-btn",{text:e=>{const t=e.dataset.id;return console.log("document.getElementById(id) :>> ",document.getElementById(t)),document.getElementById(t).innerText}}).on("success",e=>{e.trigger.textContent="已复制",setTimeout(()=>e.trigger.textContent="复制",3e3),e.clearSelection()})}const b=()=>{let e=n.render(y.content);u.value=e,setTimeout(()=>{_(),document.querySelectorAll(".markdown-content img").forEach(t=>{t.addEventListener("click",function(){p.value=this.src,s.value=!0})})},0)};return I(()=>{b()}),(e,t)=>(g(),f("div",S,[l("div",{class:"message-text",innerHTML:u.value},null,8,$),h(" 图片预览模态框 "),s.value?(g(),f("div",{key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t[1]||(t[1]=L(a=>s.value=!1,["self"]))},[l("button",{onClick:t[0]||(t[0]=a=>s.value=!1),class:"absolute top-4 right-4 text-white text-2xl"},t[2]||(t[2]=[l("i",{class:"fa fa-times"},null,-1)])),l("img",{src:p.value,alt:"预览图片",class:"max-w-[90%] max-h-[90vh] object-contain"},null,8,B)])):h("v-if",!0)]))}}),yt=M(E,[["__file","D:/work/public/admin-tempalte-base/src/views/dashboard/ai/components/messageRenderer.vue"]]);export{yt as default};
