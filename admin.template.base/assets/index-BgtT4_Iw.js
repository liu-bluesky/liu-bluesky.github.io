import"./vue-BCJY8gBf.js";import{u as I,b as z}from"./vue-router-Bk-12vT2.js";import{D as y}from"./index-DMBomKMH.js";import{h as F,i as L,a as M}from"./index-DnKBT612.js";import{d as j,B as _,r as g,b as J,k as e,j as p,o as f,c as d,l as t,v as l,u as v,a as O,x as r,y as V,q as P}from"./@vue-BwKUEgJD.js";import"./axios-DWt2DAqT.js";import"./pinia-TB7j859w.js";import"./vue-demi-DP18qiWf.js";import"./@vueuse-BO9Bf6Jf.js";import"./js-cookie-C1NIBS1L.js";import"./element-plus-BIk4sW6s.js";import"./lodash-es-D0ldFxdg.js";import"./@element-plus-D9bzjPyL.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-riLredlm.js";import"./dayjs-CpORZXld.js";import"./async-validator-BxgltDpX.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-uXSQws5g.js";import"./vue-i18n-DkRB_xiH.js";import"./@intlify-BnZ-SFqO.js";/* empty css                    */import"./element-easy-print-DsNlMTPy.js";import"./mockjs-CpzBLoCE.js";import"./lodash-Ce2coQ-v.js";import"./vue3-draggable-resizable-yn-CG0QmAMT.js";import"./element-easy-form-CUlqWkgt.js";import"./vuedraggable-BjUjsGh2.js";import"./@vue-monaco-B0CNy8YX.js";import"./uuid-CQkTLCs1.js";function U(c){return F.request({url:"/monitor/operlog/list",method:"get",params:c})}const $={class:"commonBoxmp"},E={key:0},A={key:1},G={class:"dialog-footer"},H=j({__name:"index",setup(c){I(),z();const{parseTime:x,addDateRange:K,getDict:b,selectDictLabel:T}=L();let m=_({sys_oper_type:[],sys_common_status:[]});g(),J(async()=>{m.sys_oper_type=await b("sys_oper_type"),m.sys_common_status=await b("sys_common_status")});const k=(n,a)=>T(m.sys_oper_type,n.businessType),w=g(),o=_({form:{},title:"",rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],columnData:[{label:"日志编号",prop:"operId",visible:!0},{label:"系统模块",prop:"title",visible:!0},{label:"操作类型",visible:!0,prop:"businessType",render:({row:n})=>e(y,{values:n.businessType,dataType:"primary",options:m.sys_oper_type},null)},{label:"操作人员",prop:"operName",visible:!0},{label:"操作地址",prop:"operIp",visible:!0},{label:"操作地点",prop:"operLocation",visible:!0},{label:"操作状态",render:({row:n})=>e(y,{values:n.status,dataType:"primary",options:m.sys_common_status},null),prop:"status",visible:!0},{label:"操作日期",prop:"operTime",visible:!0},{label:"消耗时间",prop:"costTime",visible:!0}],loading:!1});_({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),_(JSON.parse(JSON.stringify({pageNum:1,pageSize:10})));const h=n=>{o.form=n,o.userVisible=!0};return(n,a)=>{const D=p("el-link"),N=p("el-table-column"),q=p("TableV2"),s=p("el-form-item"),i=p("el-col"),C=p("el-row"),R=p("el-form"),S=p("el-button"),B=p("el-dialog");return f(),d("div",$,[e(q,{class:"flex1",ref_key:"tableV2Ref",ref:w,isInit:!0,apiFunction:v(U),selection:"",columns:o.columnData},{operation:t(()=>[e(N,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:t(u=>[e(D,{type:"primary",onClick:W=>h(u.row)},{default:t(()=>a[2]||(a[2]=[l("详情")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","columns"]),e(B,{modelValue:o.userVisible,"onUpdate:modelValue":a[1]||(a[1]=u=>o.userVisible=u),title:"操作日志详细",width:"50%","destroy-on-close":"",center:""},{footer:t(()=>[O("span",G,[e(S,{onClick:a[0]||(a[0]=u=>o.userVisible=!1)},{default:t(()=>a[3]||(a[3]=[l("取消")])),_:1})])]),default:t(()=>[e(R,{ref:"form",model:o.form,"label-width":"100px",size:"mini"},{default:t(()=>[e(C,null,{default:t(()=>[e(i,{span:12},{default:t(()=>[e(s,{label:"操作模块："},{default:t(()=>[l(r(o.form.title)+" / "+r(k(o.form)),1)]),_:1}),e(s,{label:"登录信息："},{default:t(()=>[l(r(o.form.operName)+" / "+r(o.form.operIp)+" / "+r(o.form.operLocation),1)]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(s,{label:"请求地址："},{default:t(()=>[l(r(o.form.operUrl),1)]),_:1}),e(s,{label:"请求方式："},{default:t(()=>[l(r(o.form.requestMethod),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(s,{label:"操作方法："},{default:t(()=>[l(r(o.form.method),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(s,{label:"请求参数："},{default:t(()=>[l(r(o.form.operParam),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[e(s,{label:"返回参数："},{default:t(()=>[l(r(o.form.jsonResult),1)]),_:1})]),_:1}),e(i,{span:6},{default:t(()=>[e(s,{label:"操作状态："},{default:t(()=>[o.form.status===0?(f(),d("div",E,"正常")):o.form.status===1?(f(),d("div",A,"失败")):V("v-if",!0)]),_:1})]),_:1}),e(i,{span:8},{default:t(()=>[e(s,{label:"消耗时间："},{default:t(()=>[l(r(o.form.costTime)+"毫秒",1)]),_:1})]),_:1}),e(i,{span:10},{default:t(()=>[e(s,{label:"操作时间："},{default:t(()=>[l(r(v(x)(o.form.operTime)),1)]),_:1})]),_:1}),e(i,{span:24},{default:t(()=>[o.form.status===1?(f(),P(s,{key:0,label:"异常信息："},{default:t(()=>[l(r(o.form.errorMsg),1)]),_:1})):V("v-if",!0)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),qe=M(H,[["__file","D:/work/public/admin-tempalte-base/src/views/monitor/operlog/index.vue"]]);export{qe as default};
