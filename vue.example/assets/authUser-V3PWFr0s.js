import"./vue-C5dO_luG.js";import{u as x,a as D}from"./vue-router-BozZHOWV.js";import{h as _}from"./index-05OsrClD.js";import{b as B}from"./element-plus-DMVJK10x.js";import{d as R,r as d,v as f,f as k,h as r,o as E,c as S,i as a,j as l,a as b,m as q,x as A}from"./@vue-CEwL1emF.js";import"./ace-builds-BgbZLK3Y.js";import"./vuex-Ba7ek5fU.js";import"./path-browserify-CtykbOjM.js";import"./@vueuse-DfzPTH68.js";import"./axios-DHSC6jYe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-DI8p4ty5.js";import"./@element-plus-DNaH03KG.js";/* empty css                    */import"./dayjs-CdRyolhI.js";import"./element-easy-form-4sEWskrm.js";import"./mockjs-DBNDAG0j.js";import"./vuedraggable-CHX8LlEE.js";import"./sortablejs-Df4VMxQp.js";import"./vue3-ace-editor-D2yfFFZ4.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./uuid-D8aEg3BZ.js";import"./lodash-es-WEemOz_S.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-CtcGg-6p.js";function C(s){return _.request({url:"/system/user/authRole/"+s,method:"get"})}function w(s){return _.request({url:"/system/user/authRole",method:"put",params:s})}const T={class:"white-bg commonBoxmp"},j={class:"jcb aic w100"},O={class:"aic jcc mt20"},be=R({__name:"authUser",setup(s){const h=x(),p=D();d(!0);const e=f({openDataScope:!1,defaultProps:{children:"children",label:"label"},menuOptions:[],deptOptions:[],deptExpand:!1,deptNodeAll:!1,menuExpand:!1,menuNodeAll:!1,title:"",form:{},userVisible:!1,roleIds:[],height:0,tableData:[],columnData:[{label:"角色编号",prop:"roleId",visible:!0},{label:"角色名称",prop:"roleName",visible:!0},{label:"权限字符",prop:"roleKey",visible:!0},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1}),m=f(JSON.parse(JSON.stringify({pageNum:1,pageSize:10,userName:"",phonenumber:""}))),g=o=>{e.roleIds=o.map(t=>t.roleId)},F=async o=>{const t=m.userId,u=e.roleIds.join(",");w({userId:t,roleIds:u}).then(i=>{B.success("授权成功"),y()})},c=d(),N=()=>{e.loading=!0,C(m.userId).then(o=>{e.form=o.user,e.tableData=o.roles,e.loading=!1,A(()=>{e.tableData.forEach(t=>{t.flag&&c.value.tableRef.toggleRowSelection(t)})})})},y=()=>{h.go(-1)};return k(()=>{const o=p.params&&p.params.userId;o&&(m.userId=o,N())}),(o,t)=>{const u=r("el-input"),i=r("el-form-item"),I=r("el-form"),V=r("el-button"),v=r("TableV2");return E(),S("div",T,[a(v,{class:"flex1",data:e.tableData,ref_key:"tableV2Ref",ref:c,selection:"",onSelectionChange:g,columns:e.columnData},{tableHeader:l(()=>[b("div",j,[a(I,{ref:"queryForm",size:"small",inline:!0},{default:l(()=>[a(i,{label:"用户昵称",prop:"nickName"},{default:l(()=>[a(u,{modelValue:e.form.nickName,"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.nickName=n),clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),a(i,{label:"登录账号",prop:"userName"},{default:l(()=>[a(u,{modelValue:e.form.userName,"onUpdate:modelValue":t[1]||(t[1]=n=>e.form.userName=n),placeholder:"请输入手机号码",clearable:"",disabled:"",style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},512)]),b("div",O,[a(V,{type:"primary",onClick:t[2]||(t[2]=n=>F())},{default:l(()=>[q("授权")]),_:1})])]),_:1},8,["data","columns"])])}}});export{be as default};
