import"./vue-C5dO_luG.js";import{u as H,a as G}from"./vue-router-BozZHOWV.js";import{h as p,c as J,f as K}from"./index-05OsrClD.js";import{D as Q}from"./index-DoWSHu4Y.js";import{b as y,a as W}from"./element-plus-DMVJK10x.js";import{d as X,r as v,v as g,i as t,f as Y,h as n,o as C,c as x,j as l,a as h,m as f,u as S,F as Z,k as ee,l as te}from"./@vue-CEwL1emF.js";import"./ace-builds-BgbZLK3Y.js";import"./vuex-Ba7ek5fU.js";import"./path-browserify-CtykbOjM.js";import"./@vueuse-DfzPTH68.js";import"./axios-DHSC6jYe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-DI8p4ty5.js";import"./@element-plus-DNaH03KG.js";/* empty css                    */import"./dayjs-CdRyolhI.js";import"./element-easy-form-4sEWskrm.js";import"./mockjs-DBNDAG0j.js";import"./vuedraggable-CHX8LlEE.js";import"./sortablejs-Df4VMxQp.js";import"./vue3-ace-editor-D2yfFFZ4.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./uuid-D8aEg3BZ.js";import"./lodash-es-WEemOz_S.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-D3FX-SGt.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-CtcGg-6p.js";function le(r){return p.request({url:"/system/dict/type/"+r,method:"get"})}function q(r){return p.request({url:"/system/dict/data/list",method:"get",params:r})}function ae(r){return p.request({url:"/system/dict/data/"+r,method:"get"})}function oe(r){return p.request({url:"/system/dict/data",method:"post",data:r})}function se(r){return p.request({url:"/system/dict/data",method:"put",data:r})}function re(r){return p.request({url:"/system/dict/data/"+r,method:"delete"})}const ne={class:"white-bg commonBoxmp"},ie={class:"jcb aic w100"},ue=h("h3",{class:"mx15"},"字典管理",-1),de={class:"dialog-footer"},je=X({__name:"data",setup(r){H();const k=G(),{parseTime:me,addDateRange:U,getDict:R}=K();v(!0);const e=g({typeOptions:[],form:{},title:"",rules:{dictLabel:[{required:!0,message:"数据标签不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"数据键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"数据顺序不能为空",trigger:"blur"}]},dateRange:[],height:0,tableData:[],listClassOptions:[{value:"default",label:"默认"},{value:"primary",label:"主要"},{value:"success",label:"成功"},{value:"info",label:"信息"},{value:"warning",label:"警告"},{value:"danger",label:"危险"}],columnData:[{label:"字典编码",prop:"dictCode",visible:!0},{label:"字典标签",prop:"dictLabel",visible:!0},{label:"字典键值",prop:"dictValue",visible:!0},{label:"字典排序",prop:"dictSort",visible:!0},{label:"备注",prop:"remark",visible:!0},{label:"状态",prop:"status",visible:!0,render:({row:s})=>t(Q,{values:s.status,dataType:"primary",options:w.sys_normal_disable},null)},{label:"创建时间",prop:"createTime",visible:!0}],loading:!1,defaultDictType:""}),V=g({currentPage:1,total:10,pageSize:10,pageSizes:[10,20,30,40],layout:"total, prev, pager, next,sizes"}),m=g({dictType:void 0,pageNum:1,pageSize:10}),F=async s=>{s&&(await s.validate(),e.form.dictCode!=null?se(e.form).then(a=>{y.success("修改成功"),e.userVisible=!1,_()}):oe(e.form).then(a=>{y.success("新增成功"),e.userVisible=!1,_()}))},L=s=>{const a=s.dictCode;W.confirm('是否确认删除编号为"'+a+'"的数据项？').then(function(){return re(a)}).then(()=>{y.success("删除成功"),_()}).catch(function(){})},z=s=>{const a=s.dictCode;ae(a).then(i=>{e.title="修改字典数据",e.form=i.data,e.userVisible=!0})},B=()=>{e.form={dictType:m.dictType},e.title="添加字典数据",e.userVisible=!0},T=v(),N=s=>{le(s).then(a=>{m.dictType=a.data.dictType;const i=S(m);T.value.getList(i)})},_=()=>{e.loading=!0,m.pageNum=V.currentPage,m.pageSize=V.pageSize,q(U(m,e.dateRange)).then(s=>{e.tableData=s.rows,V.total=s.total,e.loading=!1})},D=v();let w=g({sys_normal_disable:[]});return Y(async()=>{w.sys_normal_disable=await R("sys_normal_disable"),_();const s=k.params&&k.params.dictId;N(s)}),(s,a)=>{const i=n("el-button"),$=n("el-table-column"),I=n("TableV2"),c=n("el-input"),u=n("el-form-item"),d=n("el-col"),b=n("el-row"),M=n("el-input-number"),O=n("el-option"),P=n("el-select"),j=n("el-form"),E=n("el-dialog");return C(),x("div",ne,[t(I,{class:"flex1",isInit:!1,ref_key:"tableV2Ref",ref:T,apiFunction:S(q),selection:"",onSelectionChange:s.handleSelectionChange,columns:e.columnData},{tableHeader:l(()=>[h("div",ie,[ue,t(i,{type:"primary",onClick:B},{default:l(()=>[f("添加字典")]),_:1})])]),operation:l(()=>[t($,{label:"操作",fixed:"right",width:"160px",align:"left"},{default:l(o=>[t(i,{type:"text",onClick:A=>z(o.row)},{default:l(()=>[f("修改")]),_:2},1032,["onClick"]),t(i,{type:"text",onClick:A=>L(o.row)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["apiFunction","onSelectionChange","columns"]),t(E,{modelValue:e.userVisible,"onUpdate:modelValue":a[10]||(a[10]=o=>e.userVisible=o),title:e.title,width:"50%","destroy-on-close":"",center:""},{footer:l(()=>[h("span",de,[t(i,{onClick:a[8]||(a[8]=o=>e.userVisible=!1)},{default:l(()=>[f("取消")]),_:1}),t(i,{type:"primary",onClick:a[9]||(a[9]=o=>F(D.value))},{default:l(()=>[f(" 确定 ")]),_:1})])]),default:l(()=>[t(j,{ref_key:"ruleFormRef",ref:D,model:e.form,rules:e.rules,"label-width":"120px",class:"demo-ruleForm"},{default:l(()=>[t(b,{gutter:20},{default:l(()=>[t(d,{span:12},{default:l(()=>[t(u,{label:"字典类型"},{default:l(()=>[t(c,{modelValue:e.form.dictType,"onUpdate:modelValue":a[0]||(a[0]=o=>e.form.dictType=o),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(u,{label:"数据标签",prop:"dictLabel"},{default:l(()=>[t(c,{modelValue:e.form.dictLabel,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.dictLabel=o),placeholder:"请输入数据标签"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(d,{span:12},{default:l(()=>[t(u,{label:"数据键值",prop:"dictValue"},{default:l(()=>[t(c,{modelValue:e.form.dictValue,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.dictValue=o),placeholder:"请输入数据键值"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(u,{label:"样式属性",prop:"cssClass"},{default:l(()=>[t(c,{modelValue:e.form.cssClass,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.cssClass=o),placeholder:"请输入样式属性"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(d,{span:12},{default:l(()=>[t(u,{label:"显示排序",prop:"dictSort"},{default:l(()=>[t(M,{modelValue:e.form.dictSort,"onUpdate:modelValue":a[4]||(a[4]=o=>e.form.dictSort=o),min:0},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(u,{label:"回显样式",prop:"cssClass"},{default:l(()=>[t(P,{modelValue:e.form.listClass,"onUpdate:modelValue":a[5]||(a[5]=o=>e.form.listClass=o)},{default:l(()=>[(C(!0),x(Z,null,ee(e.listClassOptions,o=>(C(),te(O,{key:o.value,label:o.label+"("+o.value+")",value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{gutter:20},{default:l(()=>[t(d,{span:12},{default:l(()=>[t(u,{label:"状态"},{default:l(()=>[t(J,{class:"w100",dictCode:"sys_normal_disable",modelValue:e.form.status,"onUpdate:modelValue":a[6]||(a[6]=o=>e.form.status=o)},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:l(()=>[t(u,{label:"备注",prop:"remark"},{default:l(()=>[t(c,{modelValue:e.form.remark,"onUpdate:modelValue":a[7]||(a[7]=o=>e.form.remark=o),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{je as default};
