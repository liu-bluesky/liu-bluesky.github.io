"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7538],{2203:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-b8c124a2",path:"/page/js/plug-in/VideoSurveillance.html",title:"介绍",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"1. 调研",slug:"_1-调研",children:[]},{level:2,title:"2. 方案 1：基于 websocket 的实时流方案",slug:"_2-方案-1-基于-websocket-的实时流方案",children:[{level:3,title:"2.1 方案优势",slug:"_2-1-方案优势",children:[]},{level:3,title:"2.2 方案缺点",slug:"_2-2-方案缺点",children:[]},{level:3,title:"2.3 方案实施步骤",slug:"_2-3-方案实施步骤",children:[]}]},{level:2,title:"3. 方案 2：VLC 插件播放方案",slug:"_3-方案-2-vlc-插件播放方案",children:[{level:3,title:"3.1 方案优势",slug:"_3-1-方案优势",children:[]},{level:3,title:"3.2 方案缺点",slug:"_3-2-方案缺点",children:[]},{level:3,title:"3.3 方案实施步骤",slug:"_3-3-方案实施步骤",children:[]}]},{level:2,title:"4. 方案 3：HLS 方案、 RTMP 方案",slug:"_4-方案-3-hls-方案、-rtmp-方案",children:[{level:3,title:"4.1 方案优势",slug:"_4-1-方案优势",children:[]},{level:3,title:"4.2 方案缺点",slug:"_4-2-方案缺点",children:[]},{level:3,title:"4.3 方案实施步骤",slug:"_4-3-方案实施步骤",children:[]}]}],filePathRelative:"page/js/plug-in/VideoSurveillance.md",git:{updatedTime:1706066187e3,contributors:[{name:"blue",email:"229236940@qq.com",commits:2}]}}},8174:(n,s,a)=>{a.r(s),a.d(s,{default:()=>x});var p=a(6252);const t=(0,p.uE)('<h1 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h1><blockquote><p>通过调研 考察监控视频流推送 web 端 技术方案</p></blockquote><h1 id="技术方案" tabindex="-1"><a class="header-anchor" href="#技术方案" aria-hidden="true">#</a> 技术方案</h1><h2 id="_1-调研" tabindex="-1"><a class="header-anchor" href="#_1-调研" aria-hidden="true">#</a> 1. 调研</h2><p>调研了以下几种方案</p><ul><li>方案 1：基于 websocket 的实时流方案 WebRTC ：WebRtcStreamer</li><li>方案 2：VLC 插件播放方案</li><li>方案 3：HLS 方案 、RTMP 方案</li></ul><h2 id="_2-方案-1-基于-websocket-的实时流方案" tabindex="-1"><a class="header-anchor" href="#_2-方案-1-基于-websocket-的实时流方案" aria-hidden="true">#</a> 2. 方案 1：基于 websocket 的实时流方案</h2><h3 id="_2-1-方案优势" tabindex="-1"><a class="header-anchor" href="#_2-1-方案优势" aria-hidden="true">#</a> 2.1 方案优势</h3><ul><li>实时性好</li><li>开发难度低</li></ul><h3 id="_2-2-方案缺点" tabindex="-1"><a class="header-anchor" href="#_2-2-方案缺点" aria-hidden="true">#</a> 2.2 方案缺点</h3><ul><li>需要服务端部署一套 视频解码器</li><li>需要客户端支持 websocket 协议</li></ul><h3 id="_2-3-方案实施步骤" tabindex="-1"><a class="header-anchor" href="#_2-3-方案实施步骤" aria-hidden="true">#</a> 2.3 方案实施步骤</h3>',12),e=(0,p.Uk)("webrtc-streamer "),o={href:"https://github.com/mpromonet/webrtc-streamer",target:"_blank",rel:"noopener noreferrer"},l=(0,p.Uk)("下载地址"),c=(0,p.Uk)("ffmpeg "),u={href:"https://ffmpeg.org/",target:"_blank",rel:"noopener noreferrer"},r=(0,p.Uk)("下载地址"),i=(0,p._)("blockquote",null,[(0,p._)("p",null,"注意：ffmpeg 需要监控摄像头 RTSP 格式设置成 h264 编码")],-1),k=(0,p._)("li",null,"vue 案例",-1),b=(0,p.uE)('<div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>videoCanvas<span class="token punctuation">&quot;</span></span>\n    <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{\n      height: height,\n      width: width,\n      background: <span class="token punctuation">&#39;</span>#000<span class="token punctuation">&#39;</span>,\n      cursor: <span class="token punctuation">&#39;</span>pointer<span class="token punctuation">&#39;</span>,\n    }<span class="token punctuation">&quot;</span></span>\n  <span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>\n      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>urls<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>valveVideogjRef<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">autoplay</span>\n      <span class="token attr-name">:data-url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>urls<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:controls</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">muted</span>\n      <span class="token attr-name">playsinline</span>\n      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>\n      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{\n        objectFit: objectFit,\n      }<span class="token punctuation">&quot;</span></span>\n    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>noData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 预留位置暂无视频 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vodepAbs<span class="token punctuation">&quot;</span></span>\n      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{\n        height: height,\n        width: width,\n      }<span class="token punctuation">&quot;</span></span>\n    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleReloadData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>noDatareload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span>#eee<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>28px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RefreshRight</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token keyword">import</span> <span class="token punctuation">{</span>\n  ref<span class="token punctuation">,</span>\n  reactive<span class="token punctuation">,</span>\n  defineEmits<span class="token punctuation">,</span>\n  onMounted<span class="token punctuation">,</span>\n  nextTick<span class="token punctuation">,</span>\n  watch<span class="token punctuation">,</span>\n  onUnmounted<span class="token punctuation">,</span>\n<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> innerVisible <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> porp <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>\n    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;100%&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>\n    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;100%&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">objectFit</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>\n    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token comment">//fill</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">urls</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token literal-property property">webRtcServer</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> valveVideogjRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token literal-property property">WebRtcStreamer</span><span class="token operator">:</span> any <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">&quot;WebRtcStreamer&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> server <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_BASE_WS_URL_VIDEO</span><span class="token punctuation">;</span>\n  <span class="token comment">//  let server = &#39;http://192.168.43.119:8000&#39;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>webRtcServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    webRtcServer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    webRtcServer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  webRtcServer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebRtcStreamer</span><span class="token punctuation">(</span>valveVideogjRef<span class="token punctuation">.</span>value<span class="token punctuation">,</span> server<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">//需要查看的rtsp地址,地址为财物系统地址</span>\n  webRtcServer<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>porp<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  webRtcServer<span class="token punctuation">.</span><span class="token function-variable function">onError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    error<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> <span class="token function-variable function">handleReloadData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  error<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>webRtcServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    webRtcServer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>porp<span class="token punctuation">.</span>urls<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>webRtcServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    webRtcServer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">watch</span><span class="token punctuation">(</span>\n  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> porp<span class="token punctuation">.</span>urls<span class="token punctuation">,</span>\n  <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>webRtcServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      webRtcServer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">\n<span class="token selector">.videoContent</span> <span class="token punctuation">{</span>\n  // <span class="token property">width</span><span class="token punctuation">:</span> 450px<span class="token punctuation">;</span>\n  // <span class="token property">height</span><span class="token punctuation">:</span> 222px<span class="token punctuation">;</span>\n  //   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.vodepAbs</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.noDatareload</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n  <span class="token property">right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n  // <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-10%<span class="token punctuation">,</span>-10%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token property">font-size</span><span class="token punctuation">:</span> 26px<span class="token punctuation">;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n  <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.noData</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>\n  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token property">font-size</span><span class="token punctuation">:</span> 26px<span class="token punctuation">;</span>\n  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token selector">.videoCanvas</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br></div></div><ol start="4"><li>部署 1,2 服务 让后台处理就好了 不会可以联系文章作者 QQ群 953344438</li></ol><h2 id="_3-方案-2-vlc-插件播放方案" tabindex="-1"><a class="header-anchor" href="#_3-方案-2-vlc-插件播放方案" aria-hidden="true">#</a> 3. 方案 2：VLC 插件播放方案</h2><h3 id="_3-1-方案优势" tabindex="-1"><a class="header-anchor" href="#_3-1-方案优势" aria-hidden="true">#</a> 3.1 方案优势</h3><ul><li>实时性好</li><li>可以直接播放RTSP，无需任何中介服务器的帮助</li></ul><h3 id="_3-2-方案缺点" tabindex="-1"><a class="header-anchor" href="#_3-2-方案缺点" aria-hidden="true">#</a> 3.2 方案缺点</h3><ul><li>需要手动安装插件； 基于NPAPI，高版本的 Chrome 和 Firefox 不支持，只有360浏览器支持</li></ul><h3 id="_3-3-方案实施步骤" tabindex="-1"><a class="header-anchor" href="#_3-3-方案实施步骤" aria-hidden="true">#</a> 3.3 方案实施步骤</h3>',8),m=(0,p.Uk)("安装 VLC 插件 "),d={href:"https://wiki.videolan.org/VLC_media_player/",target:"_blank",rel:"noopener noreferrer"},g=(0,p.Uk)("下载插件1"),h=(0,p.Uk)(),v={href:"https://www.cnblogs.com/ningheshutong/p/7955519.html",target:"_blank",rel:"noopener noreferrer"},f=(0,p.Uk)("下载插件2"),y=(0,p._)("li",null,"编写代码，调用 VLC 插件播放 RTSP 流",-1),q=(0,p._)("li",null,"html实现",-1),w=(0,p.uE)('<div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>//html部分\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>application/x-vlc-plugin<span class="token punctuation">&#39;</span></span> <span class="token attr-name">windowless</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pluginspage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.videolan.org/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vlc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">events</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>mrl<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span> \n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>volume<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>50<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>autoplay<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>true<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>loop<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>false<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>fullscreen<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>false<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>controls<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>false<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>\n​<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token comment">//mrl定义相机的rtsp地址</span>\n<span class="token keyword">let</span> mrl<span class="token operator">=</span> <span class="token string">&quot;rtsp://admin:buaa123456@192.168.1.106:554/h264/ch1/main/av_stream&quot;</span><span class="token punctuation">;</span>\n<span class="token comment">//获取vlc的原生dom对象</span>\nvlc<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#vlc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token comment">//先清除上次播放列表</span>\nvlc<span class="token punctuation">.</span>playlist<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//添加新的播放地址</span>\nvlc<span class="token punctuation">.</span>playlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mrl<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">//开始播放</span>\nvlc<span class="token punctuation">.</span>playlist<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_4-方案-3-hls-方案、-rtmp-方案" tabindex="-1"><a class="header-anchor" href="#_4-方案-3-hls-方案、-rtmp-方案" aria-hidden="true">#</a> 4. 方案 3：HLS 方案、 RTMP 方案</h2><h3 id="_4-1-方案优势" tabindex="-1"><a class="header-anchor" href="#_4-1-方案优势" aria-hidden="true">#</a> 4.1 方案优势</h3><ul><li>实时性一般</li><li>开发难度低</li><li>服务端无需特殊支持，只需要支持 http 协议即可</li><li>客户端无需特殊支持，只需要支持 http 协议即可</li></ul><h3 id="_4-2-方案缺点" tabindex="-1"><a class="header-anchor" href="#_4-2-方案缺点" aria-hidden="true">#</a> 4.2 方案缺点</h3><ul><li>实时性一般</li></ul><h3 id="_4-3-方案实施步骤" tabindex="-1"><a class="header-anchor" href="#_4-3-方案实施步骤" aria-hidden="true">#</a> 4.3 方案实施步骤</h3><ol><li>后端 ffmpeg + nginx + nginx-rtmp-module</li><li>前端 video.js EasyPlayer.js</li></ol><h1 id="结论" tabindex="-1"><a class="header-anchor" href="#结论" aria-hidden="true">#</a> 结论</h1><p>经过调研，我们最终选择了方案 1：基于 websocket 的实时流方案。该方案具有实时性好、开发难度低、服务端无需特殊支持、客户端无需特殊支持等优点，并且能够满足我们的需求。</p>',10),_={},x=(0,a(3744).Z)(_,[["render",function(n,s){const a=(0,p.up)("OutboundLink");return(0,p.wg)(),(0,p.iD)(p.HY,null,[t,(0,p._)("ol",null,[(0,p._)("li",null,[e,(0,p._)("a",o,[l,(0,p.Wm)(a)])]),(0,p._)("li",null,[c,(0,p._)("a",u,[r,(0,p.Wm)(a)]),i]),k]),b,(0,p._)("ol",null,[(0,p._)("li",null,[m,(0,p._)("a",d,[g,(0,p.Wm)(a)]),h,(0,p._)("a",v,[f,(0,p.Wm)(a)])]),y,q]),w],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,p]of s)a[n]=p;return a}}}]);