export const getParametricEquation=(t,a,e,i,o,s)=>{let n=(t+a)/2,r=t*Math.PI*2,h=a*Math.PI*2,l=n*Math.PI*2;0===t&&1===a&&(e=!1),o=void 0!==o?o:1/3;let c=e?.6*Math.cos(l):0,M=e?.6*Math.sin(l):0,p=e?2:0;return{u:{min:-Math.PI,max:3*Math.PI,step:Math.PI/32},v:{min:0,max:2*Math.PI,step:Math.PI/20},x:function(t,a){return t<r?c+Math.cos(r)*(1+Math.cos(a)*o)*1:t>h?c+Math.cos(h)*(1+Math.cos(a)*o)*1:c+Math.cos(t)*(1+Math.cos(a)*o)*1},y:function(t,a){return t<r?M+Math.sin(r)*(1+Math.cos(a)*o)*1:t>h?M+Math.sin(h)*(1+Math.cos(a)*o)*1:M+Math.sin(t)*(1+Math.cos(a)*o)*1},z:function(t,a){return t<.5*-Math.PI||t>2.5*Math.PI?p+Math.sin(t):p+(Math.sin(a)>0?.1*s:-1)}}};export const getSeriesPie3D=({pieData:t,internalDiameterRatio:a=1/3,pieHeight:e})=>{let o=[],s=0,n=0,r=0,h=[],l=[];for(let a in t)h.push(t[a].name);let c=void 0!==a?(1-a)/(1+a):1/3;for(let a=0;a<t.length;a++){const e=t[a];s+=e.value;let n={name:void 0===e.name?`series${i}`:e.name,type:"surface",parametric:!0,shading:"realistic",wireframe:{show:!1},label:{show:!0},pieData:e,pieStatus:Object.assign({selected:!1,hovered:!1,k:c},e.pieStatus?e.pieStatus:{})};if(void 0!==e.itemStyle){let t={};void 0!==e.itemStyle.color&&(t.color=e.itemStyle.color),void 0!==e.itemStyle.opacity&&(t.opacity=e.itemStyle.opacity),n.itemStyle=t}o.push(n)}for(let a=0;a<o.length;a++){r=n+o[a].pieData.value,o[a].pieData.startRatio=n/s,o[a].pieData.endRatio=r/s,o[a].parametricEquation=getParametricEquation(o[a].pieData.startRatio,o[a].pieData.endRatio,o[a].pieStatus.selected,o[a].pieStatus.hovered,o[a].pieStatus.k,e||o[a].pieData.value),n=r;let i=(o[a].pieData.endRatio+o[a].pieData.startRatio)*Math.PI,h=Math.cos(i)*(1.4+Math.cos(Math.PI/2)),c=Math.sin(i)*(1+Math.cos(Math.PI/2)),M=.13*Math.log(Math.abs(o[a].pieData.value+1)),p=i>=0&&i<=Math.PI/2||i>=3*Math.PI/2&&i<=2*Math.PI?1:-1,u=t[a].itemStyle.color,m=[1.4*h,1.8*c+.1*a*p+(p<0?-.5:0),8*M],d=[2*h+.1*a*p+(p<0?-.5:0),1.9*c+.1*a*p+(p<0?-.5:0),9*M];l.push({name:"mouseoutSeries",type:"line3D",lineStyle:{color:u},data:[[h,c,M],m,d]},{type:"scatter3D",name:"mouseoutSeries",label:{show:!0,distance:0,position:"center",textStyle:{color:u,borderWidth:2,fontSize:16,padding:10,borderRadius:4},formatter:"{b}"},symbolSize:0,data:[{name:o[a].name+"\n"+o[a].pieData.value,value:d}]})}return o=o.concat(l),o};